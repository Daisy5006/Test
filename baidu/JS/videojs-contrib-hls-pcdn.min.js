(function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u=typeof require=="function"&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var i=false;var o=undefined;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done);n=true){r.push(a.value);if(t&&r.length===t)break}}catch(e){i=true;o=e}finally{try{if(!n&&s["return"])s["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function i(e){return e&&e.__esModule?e:{default:e}}var o=e(34);var s=i(o);var a=function e(t,r){var n=t.cues;for(var i=0;i<n.length;i++){var o=n[i];if(r>=o.adStartTime&&r<=o.adEndTime){return o}}return null};var u=function e(t,r){var i=arguments.length<=2||arguments[2]===undefined?0:arguments[2];if(!t.segments){return}var o=i;var u=undefined;for(var f=0;f<t.segments.length;f++){var l=t.segments[f];if(!u){u=a(r,o+l.duration/2)}if(u){if("cueIn"in l){u.endTime=o;u.adEndTime=o;o+=l.duration;u=null;continue}if(o<u.endTime){o+=l.duration;continue}u.endTime+=l.duration}else{if("cueOut"in l){u=new s["default"].VTTCue(o,o+l.duration,l.cueOut);u.adStartTime=o;u.adEndTime=o+parseFloat(l.cueOut);r.addCue(u)}if("cueOutCont"in l){var d=undefined;var c=undefined;var p=l.cueOutCont.split("/").map(parseFloat);var h=n(p,2);d=h[0];c=h[1];u=new s["default"].VTTCue(o,o+l.duration,"");u.adStartTime=o-d;u.adEndTime=u.adStartTime+c;r.addCue(u)}}o+=l.duration}};r["default"]={updateAdCues:u,findAdCue:a};t.exports=r["default"]},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function e(t,r){return t.start(r)+"-"+t.end(r)};var i=function e(t,r){var n=t.toString(16);return"00".substring(0,2-n.length)+n+(r%2?" ":"")};var o=function e(t){if(t>=32&&t<126){return String.fromCharCode(t)}return"."};var s=function e(t){var r={};Object.keys(t).forEach(function(e){var n=t[e];if(ArrayBuffer.isView(n)){r[e]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}}else{r[e]=n}});return r};var a=function e(t){var r=t.byterange||{length:Infinity,offset:0};return[r.length,r.offset,t.resolvedUri].join(",")};var u={hexDump:function e(t){var r=Array.prototype.slice.call(t);var n=16;var s="";var a=undefined;var u=undefined;for(var f=0;f<r.length/n;f++){a=r.slice(f*n,f*n+n).map(i).join("");u=r.slice(f*n,f*n+n).map(o).join("");s+=a+" "+u+"\n"}return s},tagDump:function e(t){return u.hexDump(t.bytes)},textRanges:function e(t){var r="";var i=undefined;for(i=0;i<t.length;i++){r+=n(t,i)+" "}return r},createTransferableMessage:s,initSegmentId:a};r["default"]=u;t.exports=r["default"]},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r["default"]={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};t.exports=r["default"]},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=e(34);var o=n(i);var s=e(25);var a=e(2);var u=function e(t){t.onmessage=function(e){var t=e.data;var r=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength);var n=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4);var i=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new s.Decrypter(r,n,i,function(e,r){o["default"].postMessage((0,a.createTransferableMessage)({source:t.source,decrypted:r}),[r.buffer])})}};r["default"]=function(e){return new u(e)};t.exports=r["default"]},{}],5:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e(9);var f=o(u);var l=e(11);var d=e(16);var c=o(d);var p=e(20);var h=o(p);var g=e(12);var y=o(g);var _=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var m=o(_);var v=e(1);var b=o(v);var w=e(18);var S=o(w);var T=e(69);var E=e(80);var A=o(E);var I=e(4);var C=o(I);var k=e(3);var j=o(k);var O=e(19);var B=e(6);var x=60*2;var D=undefined;var R={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"};var P=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var M=function e(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]};var L=function e(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return(0,T.translateLegacyCodecs)([e])[0]})};r.mapLegacyAvcCodecs_=L;var U=function e(t,r,n){return t+"/"+r+'; codecs="'+n.filter(function(e){return!!e}).join(", ")+'"'};var N=function e(t){if(t.segments&&t.segments.length&&t.segments[0].map){return"mp4"}return"mp2t"};var F=function e(t){var r=t.attributes||{};if(r.CODECS){return(0,O.parseCodecs)(r.CODECS)}return R};var W=function e(t,r){var n=N(r);var i=F(r);var o=r.attributes||{};var s=true;var a=false;if(!r){return[]}if(t.mediaGroups.AUDIO&&o.AUDIO){var u=t.mediaGroups.AUDIO[o.AUDIO];if(u){a=true;s=false;for(var f in u){if(!u[f].uri){s=true;break}}}}if(a&&!i.audioProfile){m["default"].log.warn("Multiple audio tracks present but no audio codec string is specified. "+"Attempting to use the default audio codec (mp4a.40.2)");i.audioProfile=R.audioProfile}var l={};if(i.videoCodec){l.video=""+i.videoCodec+i.videoObjectTypeIndicator}if(i.audioProfile){l.audio="mp4a.40."+i.audioProfile}var d=U("audio",n,[l.audio]);var c=U("video",n,[l.video]);var p=U("video",n,[l.video,l.audio]);if(a){if(!s&&l.video){return[c,d]}return[p,d]}if(!l.video){return[d]}return[p]};r.mimeTypesForPlaylist_=W;var H=function(e){a(t,e);function t(e){var r=this;s(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var n=e.url;var o=e.withCredentials;var a=e.mode;var u=e.tech;var l=e.bandwidth;var d=e.externHls;var p=e.useCueTags;var g=e.blacklistDuration;var y=e.enableLowInitialPlaylist;if(!n){throw new Error("A non-empty playlist URL is required")}D=d;this.withCredentials=o;this.tech_=u;this.hls_=u.hls;this.mode_=a;this.useCueTags_=p;this.blacklistDuration=g;this.enableLowInitialPlaylist=y;if(this.useCueTags_){this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues");this.cueTagsTrack_.inBandMetadataTrackDispatchType=""}this.requestOptions_={withCredentials:this.withCredentials,timeout:null};this.mediaTypes_=(0,B.createMediaTypes)();this.mediaSource=new m["default"].MediaSource({mode:a});this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this));this.seekable_=m["default"].createTimeRanges();this.hasPlayed_=function(){return false};this.syncController_=new S["default"](e);this.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;this.decrypter_=(0,A["default"])(C["default"]);var _={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function e(){return r.seekable()},seeking:function e(){return r.tech_.seeking()},duration:function e(){return r.mediaSource.duration},hasPlayed:function e(){return r.hasPlayed_()},goalBufferLength:function e(){return r.goalBufferLength()},bandwidth:l,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new f["default"](n,this.hls_,this.withCredentials);this.setupMasterPlaylistLoaderListeners_();this.mainSegmentLoader_=new c["default"](m["default"].mergeOptions(_,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e);this.audioSegmentLoader_=new c["default"](m["default"].mergeOptions(_,{loaderType:"audio"}),e);this.subtitleSegmentLoader_=new h["default"](m["default"].mergeOptions(_,{loaderType:"vtt"}),e);this.setupSegmentLoaderListeners_();P.forEach(function(e){r[e+"_"]=M.bind(r,e)});this.masterPlaylistLoader_.load()}n(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function e(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=t.masterPlaylistLoader_.media();var r=t.masterPlaylistLoader_.targetDuration*1.5*1e3;if((0,l.isLowestEnabledRendition)(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=r}if(e.endList&&t.tech_.preload()!=="none"){t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load()}(0,B.setupMediaGroups)({segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,mode:t.mode_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)});t.triggerPresenceUsage_(t.master(),e);try{t.setupSourceBuffers_()}catch(e){m["default"].log.warn("Failed to create SourceBuffers",e);return t.mediaSource.endOfStream("decode")}t.setupFirstPlay();t.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=t.masterPlaylistLoader_.media();if(!e){var r=undefined;if(t.enableLowInitialPlaylist){r=t.selectInitialPlaylist()}if(!r){r=t.selectPlaylist()}t.initialMedia_=r;t.masterPlaylistLoader_.media(t.initialMedia_);return}if(t.useCueTags_){t.updateAdCues_(e)}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.updateDuration();if(!t.tech_.paused()){t.mainSegmentLoader_.load()}if(!e.endList){(function(){var e=function e(){var r=t.seekable();if(r.length!==0){t.mediaSource.addSeekableRange_(r.start(0),r.end(0))}};if(t.duration()!==Infinity){(function(){var r=function r(){if(t.duration()===Infinity){e()}else{t.tech_.one("durationchange",r)}};t.tech_.one("durationchange",r)})()}else{e()}})()}});this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort();t.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var e=t.masterPlaylistLoader_.media();var r=t.masterPlaylistLoader_.targetDuration*1.5*1e3;if((0,l.isLowestEnabledRendition)(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=r}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load();t.tech_.trigger({type:"mediachange",bubbles:true})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=t.masterPlaylistLoader_.media();var r=t.stuckAtPlaylistEnd_(e);if(r){t.blacklistCurrentPlaylist({message:"Playlist no longer updating."});t.tech_.trigger("playliststuck")}});this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function e(t,r){var n=t.mediaGroups||{};var i=true;var o=Object.keys(n.AUDIO);for(var s in n.AUDIO){for(var a in n.AUDIO[s]){var u=n.AUDIO[s][a];if(!u.uri){i=false}}}if(i){this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(n.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(D.Playlist.isAes(r)){this.tech_.trigger({type:"usage",name:"hls-aes"})}if(D.Playlist.isFmp4(r)){this.tech_.trigger({type:"usage",name:"hls-fmp4"})}if(o.length&&Object.keys(n.AUDIO[o[0]]).length>1){this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}}},{key:"setupSegmentLoaderListeners_",value:function e(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=t.selectPlaylist();var r=t.masterPlaylistLoader_.media();var n=t.tech_.buffered();var i=n.length?n.end(n.length-1)-t.tech_.currentTime():0;var o=t.bufferLowWaterLine();if(!r.endList||t.duration()<j["default"].MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<r.attributes.BANDWIDTH||i>=o){t.masterPlaylistLoader_.media(e)}t.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")});this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){t.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the "+"request without rebuffering."},x)});this.mainSegmentLoader_.on("reseteverything",function(){t.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(e){t.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})});this.audioSegmentLoader_.on("ended",function(){t.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function e(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function e(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}}},{key:"fastQualityChange_",value:function e(){var t=this.selectPlaylist();if(t!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(t);this.mainSegmentLoader_.resetLoader()}}},{key:"play",value:function e(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.tech_.setCurrentTime(0)}if(this.hasPlayed_()){this.load()}var t=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<t.start(0)){return this.tech_.setCurrentTime(t.end(t.length-1))}}}},{key:"setupFirstPlay",value:function e(){var t=this;var r=this.masterPlaylistLoader_.media();if(!r||this.tech_.paused()||this.hasPlayed_()){return false}if(!r.endList){var n=function(){var e=t.seekable();if(!e.length){return{v:false}}if(m["default"].browser.IE_VERSION&&t.mode_==="html5"&&t.tech_.readyState()===0){t.tech_.one("loadedmetadata",function(){t.trigger("firstplay");t.tech_.setCurrentTime(e.end(0));t.hasPlayed_=function(){return true}});return{v:false}}t.trigger("firstplay");t.tech_.setCurrentTime(e.end(0))}();if(typeof n==="object")return n.v}this.hasPlayed_=function(){return true};this.load();return true}},{key:"handleSourceOpen_",value:function e(){try{this.setupSourceBuffers_()}catch(e){m["default"].log.warn("Failed to create Source Buffers",e);return this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){this.tech_.play()}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function e(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){t=t&&this.audioSegmentLoader_.ended_}if(t){this.mediaSource.endOfStream()}}},{key:"stuckAtPlaylistEnd_",value:function e(t){var r=this.seekable();if(!r.length){return false}var n=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(n===null){return false}var i=D.Playlist.playlistEnd(t,n);var o=this.tech_.currentTime();var s=this.tech_.buffered();if(!s.length){return i-o<=y["default"].SAFE_TIME_DELTA}var a=s.end(s.length-1);return a-o<=y["default"].SAFE_TIME_DELTA&&i-a<=y["default"].SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function e(t,r){if(t===undefined)t={};var n=undefined;var i=undefined;n=t.playlist||this.masterPlaylistLoader_.media();r=r||t.blacklistDuration||this.blacklistDuration;if(!n){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var o=this.masterPlaylistLoader_.master.playlists.filter(l.isEnabled).length===1;if(o){m["default"].log.warn("Problem encountered with the current "+"HLS playlist. Trying again since it is the final playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(o)}n.excludeUntil=Date.now()+r*1e3;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});i=this.selectPlaylist();m["default"].log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(i)}},{key:"pauseLoading",value:function e(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause()}}},{key:"setCurrentTime",value:function e(t){var r=y["default"].findRange(this.tech_.buffered(),t);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}if(r&&r.length&&this.mode_!=="flash"){return t}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()}},{key:"duration",value:function e(){if(!this.masterPlaylistLoader_){return 0}if(this.mediaSource){return this.mediaSource.duration}return D.Playlist.duration(this.masterPlaylistLoader_.media())}},{key:"seekable",value:function e(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function e(){var t=undefined;var r=undefined;if(!this.masterPlaylistLoader_){return}var n=this.masterPlaylistLoader_.media();if(!n){return}var i=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(i===null){return}t=D.Playlist.seekable(n,i);if(t.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){n=this.mediaTypes_.AUDIO.activePlaylistLoader.media();i=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(i===null){return}r=D.Playlist.seekable(n,i);if(r.length===0){return}}if(!r){this.seekable_=t}else if(r.start(0)>t.end(0)||t.start(0)>r.end(0)){this.seekable_=t}else{this.seekable_=m["default"].createTimeRanges([[r.start(0)>t.start(0)?r.start(0):t.start(0),r.end(0)<t.end(0)?r.end(0):t.end(0)]])}this.tech_.trigger("seekablechanged")}},{key:"updateDuration",value:function e(){var t=this;var r=this.mediaSource.duration;var n=D.Playlist.duration(this.masterPlaylistLoader_.media());var i=this.tech_.buffered();var o=function e(){t.mediaSource.duration=n;t.tech_.trigger("durationchange");t.mediaSource.removeEventListener("sourceopen",e)};if(i.length>0){n=Math.max(n,i.end(i.length-1))}if(r!==n){if(this.mediaSource.readyState!=="open"){this.mediaSource.addEventListener("sourceopen",o)}else{o()}}}},{key:"dispose",value:function e(){var t=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(e){var r=t.mediaTypes_[e].groups;for(var n in r){r[n].forEach(function(e){if(e.playlistLoader){e.playlistLoader.dispose()}})}});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function e(){return this.masterPlaylistLoader_.master}},{key:"media",value:function e(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function e(){var t=this.masterPlaylistLoader_.media();var r=undefined;if(!t||this.mediaSource.readyState!=="open"){return}r=W(this.masterPlaylistLoader_.master,t);if(r.length<1){this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri;return this.mediaSource.endOfStream("decode")}this.mainSegmentLoader_.mimeType(r[0]);if(r[1]){this.audioSegmentLoader_.mimeType(r[1])}this.excludeIncompatibleVariants_(t)}},{key:"excludeIncompatibleVariants_",value:function e(t){var r=this.masterPlaylistLoader_.master;var n=2;var i=null;var o=undefined;if(t.attributes.CODECS){o=(0,O.parseCodecs)(t.attributes.CODECS);i=o.videoCodec;n=o.codecCount}r.playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};if(e.attributes.CODECS){var r=e.attributes.CODECS;t=(0,O.parseCodecs)(r);if(window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+L(r)+'"')){e.excludeUntil=Infinity}}if(t.codecCount!==n){e.excludeUntil=Infinity}if(t.videoCodec!==i){e.excludeUntil=Infinity}})}},{key:"updateAdCues_",value:function e(t){var r=0;var n=this.seekable();if(n.length){r=n.start(0)}b["default"].updateAdCues(t,this.cueTagsTrack_,r)}},{key:"goalBufferLength",value:function e(){var t=this.tech_.currentTime();var r=j["default"].GOAL_BUFFER_LENGTH;var n=j["default"].GOAL_BUFFER_LENGTH_RATE;var i=Math.max(r,j["default"].MAX_GOAL_BUFFER_LENGTH);return Math.min(r+t*n,i)}},{key:"bufferLowWaterLine",value:function e(){var t=this.tech_.currentTime();var r=j["default"].BUFFER_LOW_WATER_LINE;var n=j["default"].BUFFER_LOW_WATER_LINE_RATE;var i=Math.max(r,j["default"].MAX_BUFFER_LOW_WATER_LINE);return Math.min(r+t*n,i)}}]);return t}(m["default"].EventTarget);r.MasterPlaylistController=H}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],6:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var o=n(i);var s=e(9);var a=n(s);var u=function e(){};var f=function e(t){var r=t["default"]?"main":"alternative";if(t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0){r="main-desc"}return r};var l=function e(t,r){t.abort();t.pause();if(r&&r.activePlaylistLoader){r.activePlaylistLoader.pause();r.activePlaylistLoader=null}};r.stopLoaders=l;var d=function e(t,r){r.activePlaylistLoader=t;t.load()};r.startLoaders=d;var c=function e(t,r){return function(){var e=r.segmentLoaders;var n=e[t];var i=e.main;var o=r.mediaTypes[t];var s=o.activeTrack();var a=o.activeGroup(s);var u=o.activePlaylistLoader;l(n,o);if(!a){return}if(!a.playlistLoader){if(u){i.resetEverything()}return}n.resyncLoader();d(a.playlistLoader,o)}};r.onGroupChanged=c;var p=function e(t,r){return function(){var e=r.segmentLoaders;var n=e[t];var i=e.main;var o=r.mediaTypes[t];var s=o.activeTrack();var a=o.activeGroup(s);var u=o.activePlaylistLoader;l(n,o);if(!a){return}if(!a.playlistLoader){i.resetEverything();return}if(u===a.playlistLoader){d(a.playlistLoader,o);return}if(n.track){n.track(s)}n.resetEverything();d(a.playlistLoader,o)}};r.onTrackChanged=p;var h={AUDIO:function e(t,r){return function(){var e=r.segmentLoaders[t];var n=r.mediaTypes[t];var i=r.blacklistCurrentPlaylist;l(e,n);var s=n.activeTrack();var a=n.activeGroup();var u=(a.filter(function(e){return e["default"]})[0]||a[0]).id;var f=n.tracks[u];if(s===f){i({message:"Problem encountered loading the default audio track."});return}o["default"].log.warn("Problem encountered loading the alternate audio track."+"Switching back to default.");for(var d in n.tracks){n.tracks[d].enabled=n.tracks[d]===f}n.onTrackChanged()}},SUBTITLES:function e(t,r){return function(){var e=r.segmentLoaders[t];var n=r.mediaTypes[t];o["default"].log.warn("Problem encountered loading the subtitle track."+"Disabling subtitle track.");l(e,n);var i=n.activeTrack();if(i){i.mode="disabled"}n.onTrackChanged()}}};r.onError=h;var g={AUDIO:function e(t,r,n){if(!r){return}var i=n.tech;var o=n.requestOptions;var s=n.segmentLoaders[t];r.on("loadedmetadata",function(){var e=r.media();s.playlist(e,o);if(!i.paused()||e.endList&&i.preload()!=="none"){s.load()}});r.on("loadedplaylist",function(){s.playlist(r.media(),o);if(!i.paused()){s.load()}});r.on("error",h[t](t,n))},SUBTITLES:function e(t,r,n){var i=n.tech;var o=n.requestOptions;var s=n.segmentLoaders[t];var a=n.mediaTypes[t];r.on("loadedmetadata",function(){var e=r.media();s.playlist(e,o);s.track(a.activeTrack());if(!i.paused()||e.endList&&i.preload()!=="none"){s.load()}});r.on("loadedplaylist",function(){s.playlist(r.media(),o);if(!i.paused()){s.load()}});r.on("error",h[t](t,n))}};r.setupListeners=g;var y={AUDIO:function e(t,r){var n=r.mode;var i=r.hls;var s=r.segmentLoaders[t];var u=r.requestOptions.withCredentials;var l=r.master.mediaGroups;var d=r.mediaTypes[t];var c=d.groups;var p=d.tracks;if(!l[t]||Object.keys(l[t]).length===0||n!=="html5"){l[t]={main:{default:{default:true}}}}for(var y in l[t]){if(!c[y]){c[y]=[]}for(var _ in l[t][y]){var m=l[t][y][_];var v=undefined;if(m.resolvedUri){v=new a["default"](m.resolvedUri,i,u)}else{v=null}m=o["default"].mergeOptions({id:_,playlistLoader:v},m);g[t](t,m.playlistLoader,r);c[y].push(m);if(typeof p[_]==="undefined"){var b=new o["default"].AudioTrack({id:_,kind:f(m),enabled:false,language:m.language,default:m["default"],label:_});p[_]=b}}}s.on("error",h[t](t,r))},SUBTITLES:function e(t,r){var n=r.tech;var i=r.hls;var s=r.segmentLoaders[t];var u=r.requestOptions.withCredentials;var f=r.master.mediaGroups;var l=r.mediaTypes[t];var d=l.groups;var c=l.tracks;for(var p in f[t]){if(!d[p]){d[p]=[]}for(var y in f[t][p]){if(f[t][p][y].forced){continue}var _=f[t][p][y];_=o["default"].mergeOptions({id:y,playlistLoader:new a["default"](_.resolvedUri,i,u)},_);g[t](t,_.playlistLoader,r);d[p].push(_);if(typeof c[y]==="undefined"){var m=n.addRemoteTextTrack({id:y,kind:"subtitles",enabled:false,language:_.language,label:y},false).track;c[y]=m}}}s.on("error",h[t](t,r))},"CLOSED-CAPTIONS":function e(t,r){var n=r.tech;var i=r.master.mediaGroups;var s=r.mediaTypes[t];var a=s.groups;var u=s.tracks;for(var f in i[t]){if(!a[f]){a[f]=[]}for(var l in i[t][f]){var d=i[t][f][l];if(!d.instreamId.match(/CC\d/)){continue}a[f].push(o["default"].mergeOptions({id:l},d));if(typeof u[l]==="undefined"){var c=n.addRemoteTextTrack({id:d.instreamId,kind:"captions",enabled:false,language:d.language,label:l},false).track;u[l]=c}}}}};r.initialize=y;var _=function e(t,r){return function(e){var n=r.masterPlaylistLoader;var i=r.mediaTypes[t].groups;var o=n.media();if(!o){return null}var s=null;if(o.attributes[t]){s=i[o.attributes[t]]}s=s||i.main;if(typeof e==="undefined"){return s}if(e===null){return null}return s.filter(function(t){return t.id===e.id})[0]||null}};r.activeGroup=_;var m={AUDIO:function e(t,r){return function(){var e=r.mediaTypes[t].tracks;for(var n in e){if(e[n].enabled){return e[n]}}return null}},SUBTITLES:function e(t,r){return function(){var e=r.mediaTypes[t].tracks;for(var n in e){if(e[n].mode==="showing"){return e[n]}}return null}}};r.activeTrack=m;var v=function e(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){y[e](e,t)});var r=t.mediaTypes;var n=t.masterPlaylistLoader;var i=t.tech;var o=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){r[e].activeGroup=_(e,t);r[e].activeTrack=m[e](e,t);r[e].onGroupChanged=c(e,t);r[e].onTrackChanged=p(e,t)});var s=r.AUDIO.activeGroup();var a=(s.filter(function(e){return e["default"]})[0]||s[0]).id;r.AUDIO.tracks[a].enabled=true;r.AUDIO.onTrackChanged();n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return r[e].onGroupChanged()})});var u=function e(){r.AUDIO.onTrackChanged();i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",u);i.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged);o.on("dispose",function(){i.audioTracks().removeEventListener("change",u);i.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)});i.clearTracks("audio");for(var f in r.AUDIO.tracks){i.audioTracks().addTrack(r.AUDIO.tracks[f])}};r.setupMediaGroups=v;var b=function e(){var t={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:u,activeTrack:u,onGroupChanged:u,onTrackChanged:u}});return t};r.createMediaTypes=b}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],7:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var o=n(i);var s=e(2);var a=e(94);var u=n(a);var f=e(82);var l=e(41);var d=e(81);var c={announce:["ws://tracker.dcdn.baidu.com:8000"]};var p={CDN_DIRECT:"CDN_DIRECT",CDN_INVOLVE:"CDN_INVOLVE",P2P_ADDED:"P2P_ADDED"};window.g_CDN_DownloadBytes=0;window.g_CDN_DownloadSpeed=0;window.g_P2P_DownloadBytes=0;window.g_P2P_UploadBytes=0;window.g_P2P_DownloadSpeed=0;window.g_P2P_UploadSpeed=0;window.g_P2P_CacheBytes=0;window.g_P2P_Percentage=0;window.g_P2P_Ratio=0;window.g_P2P_PeerConnectedList=new Set;window.g_StatisticDebug=null;window.g_WaitingCount=0;window.g_RunningTime=0;window.g_InitCount=0;window.g_bSeeder=me(0,100)<10?true:false;window.g_MyIPAddress=null;var h=0;var g=0;var y=0;var _=0;var m=0;var v=0;var b=0;var w=window.g_bSeeder?100:0;var S=null;var T=null;var E=null;var A=null;var I=0;var C=0;var k=0;var j;var O;var B;var x;var D;var R;var P=null;var M=0;var L=0;var U=true;var N=null;var F=null;var W=1;var H=true;var V=0;var q=0;var z="0000000000000000000000000000000";var G=2002;var $=405;var X="1.1";var Y=8e3;var K=Z();function Z(){var e=false;try{if(window.localStorage&&"true"==window.localStorage.getItem("pcdndebug")){e=true}}catch(e){}return e}function J(e){if(K){o["default"].log((new Date).toLocaleTimeString("en-US",{hour12:false})+" "+e)}}function Q(e){if(K){o["default"].log.warn((new Date).toLocaleTimeString("en-US",{hour12:false})+" "+e)}}function ee(e){if(K){o["default"].log.error((new Date).toLocaleTimeString("en-US",{hour12:false})+" "+e)}}var te={FAILURE:2,TIMEOUT:-101,ABORTED:-102};r.REQUEST_ERRORS=te;var re=function e(t){var r=undefined;var n=undefined;n=t.offset+t.length-1;r=t.offset;return"bytes="+r+"-"+n};var ne=function e(t){var r={};if(t.byterange){r.Range=re(t.byterange)}return r};var ie=function e(t){t.forEach(function(e){e.abort()})};var oe=function e(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}};var se=function e(t){var r=t.target;var n=Date.now()-r.requestTime;var i={bandwidth:Infinity,bytesReceived:0,roundTripTime:n||0};i.bytesReceived=t.loaded;i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3);return i}
;var ae=function e(t,r){if(r.timedout){return{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:te.TIMEOUT,xhr:r}}if(r.aborted){return{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:te.ABORTED,xhr:r}}if(t){return{status:r.status,message:"HLS request errored at URL: "+r.uri,code:te.FAILURE,xhr:r}}return null};var ue=function e(t,r){return function(e,n){var i=n.response;var o=ae(e,n);if(o){return r(o,t)}if(i.byteLength!==16){return r({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:te.FAILURE,xhr:n},t)}var s=new DataView(i);t.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]);return r(null,t)}};var fe=function e(t,r){return function(e,n){var i=n.response;var o=ae(e,n);if(o){return r(o,t)}if(i.byteLength===0){return r({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:te.FAILURE,xhr:n},t)}t.map.bytes=new Uint8Array(n.response);return r(null,t)}};var le=function e(t,r){return function(e,n){var i=n.response;var o=ae(e,n);if(o){return r(o,t)}if(i.byteLength===0){return r({status:n.status,message:"Empty HLS segment content at URL: "+n.uri,code:te.FAILURE,xhr:n},t)}t.stats=oe(n);if(t.key){t.encryptedBytes=new Uint8Array(n.response)}else{t.bytes=new Uint8Array(n.response)}window.g_CDN_DownloadBytes+=t.stats.bytesReceived;J("[PCDN]CDNDownload success. RTT_Network_MS("+n.roundTripTime+")|"+"RTT_Total_MS("+(n.responseTime-t.requestTime)+")|"+"Bytes("+t.stats.bytesReceived+")|"+"request_url("+t.resolvedUri+")|");if(P){n.CDNReason=t.CDNReason;be(n)}return r(null,t)}};var de=function e(t,r,n){var i=function e(i){if(i.data.source===r.requestId){t.removeEventListener("message",e);var o=i.data.decrypted;r.bytes=new Uint8Array(o.bytes,o.byteOffset,o.byteLength);return n(null,r)}};t.addEventListener("message",i);t.postMessage((0,s.createTransferableMessage)({source:r.requestId,encrypted:r.encryptedBytes,key:r.key.bytes,iv:r.key.iv}),[r.encryptedBytes.buffer,r.key.bytes.buffer])};var ce=function e(t){return t.reduce(function(e,t){return t.code>e.code?t:e})};var pe=function e(t,r,n){var i=[];var o=0;return function(e,s){if(e){ie(t);i.push(e)}o+=1;if(o===t.length){s.endOfAllRequests=Date.now();if(i.length>0){var a=ce(i);return n(a,s)}if(s.encryptedBytes){return de(r,s,n)}return n(null,s)}}};var he=function e(t,r){return function(e){t.stats=o["default"].mergeOptions(t.stats,se(e));if(!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived){t.stats.firstBytesReceivedAt=Date.now()}if(1==t.requestIndex){v=Date.now()}M=t.stats.bytesReceived;return r(e,t)}};var ge=function e(t,r,n,i,s,a){j=t;O=r;B=n;x=i;D=s;R=a;M=0;L=0;ye();C++;if(C==1&&i.tsCount>0){m=Date.now();W=Math.min.apply(null,[1,i.tsCount]);F=i.M3U8Url;J("[PCDN]mediaSegmentRequest. First request. |g_M3U8Url("+F+")|"+"segment.resolvedUri("+i.resolvedUri+")|"+"g_preloadTSCount("+W+")|"+"tscount("+i.tsCount+")|")}if(P){var u;var f;var l=function(){i.requestTime=Date.now();i.requestIndex=C;u=true;if(C<=W){u=true}else{f=me(0,100);u=f<w?true:false}var e=[];var l=pe(e,n,a);if(i.key){var d=o["default"].mergeOptions(r,{uri:i.key.resolvedUri,responseType:"arraybuffer"});var c=ue(i,l);var h=t(d,c);e.push(h)}if(i.map&&!i.map.bytes){var g=o["default"].mergeOptions(r,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:ne(i.map)});var y=fe(i,l);var _=t(g,y);e.push(_)}var m=o["default"].mergeOptions(r,{uri:i.resolvedUri,responseType:"arraybuffer",headers:ne(i)});var v=le(i,l);if(u){J("[PCDN]mediaSegmentRequest. CDNDownload. |segment.resolvedUri("+i.resolvedUri+")|"+"g_mediaSegmentRequestIndex("+C+")|"+"g_CDNRandomThreshold("+w+")|");i.CDNReason=p.CDN_DIRECT;we(t,i,m,v,s,e)}else{J("[PCDN]mediaSegmentRequest. P2PDownload. |segment.resolvedUri("+i.resolvedUri+")|"+"g_mediaSegmentRequestIndex("+C+")|"+"g_CDNRandomThreshold("+w+")|");Se(t,i,m,v,s,e,a)}return{v:function(){return _e(e)}}}();if(typeof l==="object")return l.v}else{var d=function(){var e=[];var u=pe(e,n,a);if(i.key){var f=o["default"].mergeOptions(r,{uri:i.key.resolvedUri,responseType:"arraybuffer"});var l=ue(i,u);var d=t(f,l);e.push(d)}if(i.map&&!i.map.bytes){var c=o["default"].mergeOptions(r,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:ne(i.map)});var p=fe(i,u);var h=t(c,p);e.push(h)}var g=o["default"].mergeOptions(r,{uri:i.resolvedUri,responseType:"arraybuffer",headers:ne(i)});var y=le(i,u);var _=t(g,y);_.addEventListener("progress",he(i,s));e.push(_);return{v:function(){return ie(e)}}}();if(typeof d==="object")return d.v}};r.mediaSegmentRequest=ge;function ye(){if(!u["default"].WEBRTC_SUPPORT){Q("[PCDN]initPCDN. Do not support WebRTC.");return}if(P){return}{window.g_CDN_DownloadBytes=0;window.g_CDN_DownloadSpeed=0;window.g_P2P_DownloadBytes=0;window.g_P2P_UploadBytes=0;window.g_P2P_DownloadSpeed=0;window.g_P2P_UploadSpeed=0;window.g_P2P_CacheBytes=0;window.g_P2P_Percentage=0;window.g_P2P_Ratio=0;window.g_P2P_PeerConnectedList.clear();window.g_StatisticDebug=null;window.g_WaitingCount=0;window.g_RunningTime=0;++window.g_InitCount;window.g_MyIPAddress=null;h=0;g=0;y=0;_=0;m=0;v=0;b=0;w=window.g_bSeeder?100:0;I=0;C=0;k=0;j=null;O=null;B=null;x=null;D=null;R=null;P=null;M=0;L=0;U=true;F=null;W=1;V=0;q=0;z="0000000000000000000000000000000";if(S){clearInterval(S)}if(T){clearInterval(T)}if(E){clearInterval(E)}if(A){clearTimeout(A)}if(N){clearTimeout(N)}}{var e=function e(){var t={business_id:G,p2p_type:window.g_bSeeder?"seeder":"peer"};return t};var t={tracker:{getAnnounceOpts:e}};P=new u["default"](t);P.on("warning",function(e){Q("[PCDN]initPCDN. g_P2PClient on warning. |Message("+(e&&(e.message||e))+")|")});P.on("error",function(e){ee("[PCDN]initPCDN. g_P2PClient on error. |Message("+(e&&(e.message||e))+")|")})}{z=P.peerId;(0,f.PCDN_Report_Init)(X,z,$,G);(0,f.PCDN_Report)("BJSDK_initPCDN",Math.floor(Date.now()/1e3));J("[PCDN]initPCDN. |g_version("+X+")|"+"g_peerID("+z+")|"+"g_sdkID("+$+")|"+"g_businessID("+G+")|"+"window.g_bSeeder("+window.g_bSeeder+")|"+"g_CDNRandomThreshold("+w+")|")}if(window.player){window.player.on("loadeddata",function(){b=Date.now();var e=v-m;var t=b-m;if(C<=3&&e<=5e3&&t<=5e3){(0,f.PCDN_Report)("BJSDK_Read_FirstPacket",Math.floor(Date.now()/1e3),C,-1,-1,F,"","",-1,e>0?e:0,t>0?t:0,-1)}J("[PCDN]loadeddata event. BJSDK_Read_FirstPacket. |firstPacketTimeMS("+e+")|"+"firstScreenTimeMS("+t+")|"+"g_mediaSegmentRequestIndex("+C+")|")});window.player.on("waiting",function(){window.g_WaitingCount++;if(100==w&&C>W&&V<=2){Q("[PCDN]waiting event. CDNTakesOver and ResetPlayer. |window.g_WaitingCount("+window.g_WaitingCount+")|");o();a()}else{Q("[PCDN]waiting event. CDNTakesOver. |window.g_WaitingCount("+window.g_WaitingCount+")|");o()}});window.player.on("suspend",function(){J("[PCDN]suspend event.")});window.player.on("abort",function(){J("[PCDN]abort event.")});window.player.on("error",function(e){ee("[PCDN]error event. CDNTakesOver and ResetPlayer. window.player.error().code|("+window.player.error().code+")|");o();a()});window.player.on("emptied",function(){J("[PCDN]emptied event.")});window.player.on("ended",function(){J("[PCDN]ended event.")})}S=setInterval(r,1e3);function r(){window.g_CDN_DownloadSpeed=M>=L?(M-L)/1:0;L=M;window.g_P2P_DownloadSpeed=P.downloadSpeed;window.g_P2P_UploadSpeed=P.uploadSpeed;window.g_P2P_Percentage=window.g_P2P_DownloadBytes+window.g_CDN_DownloadBytes>0?(window.g_P2P_DownloadBytes*100/(window.g_P2P_DownloadBytes+window.g_CDN_DownloadBytes)).toFixed(2):0;window.g_P2P_Ratio=window.g_P2P_DownloadBytes+window.g_CDN_DownloadBytes>0?(window.g_P2P_UploadBytes/(window.g_P2P_DownloadBytes+window.g_CDN_DownloadBytes)).toFixed(2):0;var e="[PCDN]Client."+"|CDN_down_bytes("+window.g_CDN_DownloadBytes+")|"+"CDN_down_speed("+window.g_CDN_DownloadSpeed+")|"+"P2P_down_bytes("+window.g_P2P_DownloadBytes+")|"+"P2P_up_bytes("+window.g_P2P_UploadBytes+")|"+"P2P_down_speed("+window.g_P2P_DownloadSpeed+")|"+"P2P_up_speed("+window.g_P2P_UploadSpeed+")|"+"P2P_Cache_Bytes("+window.g_P2P_CacheBytes+")|"+"P2P_Percentage("+window.g_P2P_Percentage+"%"+")|"+"P2P_Ratio("+window.g_P2P_Ratio+")|";window.g_StatisticDebug=e;P.torrents.forEach(function(e){var t="[PCDN]--Torrent."+"|index("+e.pcdnIndex+")|"+"type("+e.pcdnType+")|"+"infoHash("+e.infoHash+")|"+(e.pcdnType==p.P2P_ADDED?"down_bytes("+e.downloaded+")|":"down_bytes(0)")+"up_bytes("+e.uploaded+")|"+"down_speed("+e.downloadSpeed+")|"+"up_speed("+e.uploadSpeed+")|"+"progress("+e.progress+")|"+"peers("+e.numPeers+")|";window.g_StatisticDebug+="<br>"+t});var t=P.torrents.length;var r=0;var n=0;var i=[];for(var s=P.torrents.length-1;s>=0;s--){r+=P.torrents[s].downloaded;n+=P.torrents[s].downloaded;if(r>13*1024*1024){i.push(P.torrents[s].infoHash);n-=P.torrents[s].downloaded}}window.g_P2P_CacheBytes=n;i.forEach(function(e){P.remove(e,function t(r){J("[PCDN]Refresh. torrent onRemove. |info_hash("+e+")|Message("+(r&&(r.message||r))+")|")})});var u=P.torrents.length;if(window.player){var f=window.player.currentTime();var l=window.player.buffered();var d=l.end(0);var c=window.player.networkState();var h=window.player.readyState();V=d-f;var g="[PCDN]Player monitor."+"|BufferedTimeRemain("+V+"s) = BufferedTimeEnd("+d+"s) - CurrentTime("+f+"s)|"+"networkstate("+c+")|"+"readyState("+h+")|";J(g);if(V<10&&C>W){Q("[PCDN]BufferedTimeRemain is not enough, Do CDNTasksOver. |BufferedTimeRemain("+V+")|");o()}if(2==c&&1==h||2==c&&2==h||3==c&&0==h||1==c&&4==h||1==c&&1==h){++q;if(q>=5){Q("[PCDN]Networkstate too weird, ResetPlayer.  |networkstate("+c+")|"+"readyState("+h+")|"+"g_WeirdReadyStateContinualCount("+q+")|");q=0;a()}}else{q=0}}++window.g_RunningTime}T=setInterval(n,1e4);function n(){var e=Math.floor(Date.now()/1e3);var t=window.g_CDN_DownloadBytes-h;var r=window.g_P2P_DownloadBytes-g;var n=window.g_P2P_UploadBytes-y;var i=window.g_WaitingCount-I;var o=0;var s=0;var a=0;for(var u=0;u<P.torrents.length;u++){if(P.torrents[u].pcdnType==p.CDN_DIRECT){o++}else if(P.torrents[u].pcdnType==p.CDN_INVOLVE){s++}else if(P.torrents[u].pcdnType==p.P2P_ADDED){a++}}if(t>0||r>0||n>0){(0,f.PCDN_Report)("BJSDK_RealtimeTraffic",e,++_,i,Math.floor(parseFloat(window.g_P2P_Ratio)*100),(window.g_bSeeder?"seeder":"peer")+"|"+o.toString()+"|"+s.toString()+"|"+a.toString(),window.g_MyIPAddress?window.g_MyIPAddress.toString():"",F,window.g_P2P_PeerConnectedList.size,t,r,n);J("[PCDN]BJSDK_RealtimeTraffic."+"|Timestamp("+e+")|"+"Report_Index("+_+")|"+"CDN_DIRECT_Count("+o+")|"+"CDN_INVOLVE_Count("+s+")|"+"P2P_ADDED_Count("+a+")|"+"My_IPAddress("+(window.g_MyIPAddress?window.g_MyIPAddress.toString():"")+")|"+"P2P_Percentage("+window.g_P2P_Percentage+")|"+"P2P_Ratio("+window.g_P2P_Ratio+")|"+"Peer_Count("+window.g_P2P_PeerConnectedList.size+")|"+"CDN_Down_Increment("+t+")|"+"P2P_Down_Increment("+r+")|"+"P2P_Up_Increment("+n+")|"+"Waiting_Count_Increment("+i+")|");h=window.g_CDN_DownloadBytes;g=window.g_P2P_DownloadBytes;y=window.g_P2P_UploadBytes;I=window.g_WaitingCount}}E=setInterval(i,30*60*1e3);function i(){}function o(){clearTimeout(N);w=100;N=setTimeout(function(){w=window.g_bSeeder?100:0;J("[PCDN]CDNTakesOver. Reset. |g_CDNRandomThreshold("+w+"%)|")},3e4);J("[PCDN]CDNTakesOver. |g_CDNRandomThreshold("+w+"%)|")}function s(){if(true==U){U=false;setTimeout(function(){U=true;J("[PCDN]DoCurrentRequestAgain. Reset. |window.g_WaitingCount("+window.g_WaitingCount+")|"+"g_CDNRandomThreshold("+w+"%)|"+"g_bCanRequestAgain("+U+")|")},3e4);clearTimeout(A);J("[PCDN]DoCurrentRequestAgain. Request immediately. |window.g_WaitingCount("+window.g_WaitingCount+")|"+"g_CDNRandomThreshold("+w+"%)|"+"g_bCanRequestAgain("+U+")|");if(j&&x&&R){ge(j,O,B,x,D,R)}}else{J("[PCDN]DoCurrentRequestAgain. Ignore duplicated action. |window.g_WaitingCount("+window.g_WaitingCount+")|"+"g_CDNRandomThreshold("+w+"%)|"+"g_bCanRequestAgain("+U+")|")}}function a(){if(true==H){H=false;setTimeout(function(){H=true;J("[PCDN]ResetPlayer. Reset. |g_bCanResetPlayer("+H+")|")},3e4);if(F){J("[PCDN]ResetPlayer. |g_M3U8Url("+F+")|"+"g_bCanResetPlayer("+H+")|");window.player.reset();window.player.src({type:"application/x-mpegURL",src:F,withCredentials:false});window.player.play()}else{Q("[PCDN]ResetPlayer. g_M3U8Url is null. |g_bCanResetPlayer("+H+")|")}}else{J("[PCDN]ResetPlayer. Ignore duplicated action. |g_bCanResetPlayer("+H+")|")}}{var l=window.webkitRTCPeerConnection||window.mozRTCPeerConnection;if(l)(function(){var e=new l({iceServers:[]});if(1||window.mozRTCPeerConnection){e.createDataChannel("",{reliable:false})}e.onicecandidate=function(e){if(e.candidate)r("a="+e.candidate.candidate)};e.createOffer(function(t){r(t.sdp);e.setLocalDescription(t)},function(e){});function t(e){if(e){window.g_MyIPAddress=e;J("[PCDN]RTCPeerConnection get local IP success.|window.g_MyIPAddress("+window.g_MyIPAddress+")|")}}function r(e){var r=[];e.split("\r\n").forEach(function(e){if(~e.indexOf("a=candidate")){var r=e.split(" "),n=r[4],i=r[7];if(i==="host")t(n)}else if(~e.indexOf("c=")){var r=e.split(" "),n=r[2];t(n)}})}})()}}var _e=function e(t){if(P){Q("[PCDN]abortPCDN. |peerid("+P.peerId+")|");P.destroy(function e(t){J("[PCDN]abortPCDN. g_P2PClient onDestroy. |Message("+(t&&(t.message||t))+")|")});P=null}else{Q("[PCDN]abortPCDN. g_P2PClient is null")}t.forEach(function(e){e.abort()})};function me(e,t){e=Math.ceil(e);t=Math.floor(t);return Math.floor(Math.random()*(t-e))+e}function ve(e){var t=new Array;t=e.split("?");var r=t[0];return r}function be(e){var t=new Blob([e.response]);var r=window.URL||window.webkitURL;var n=r.createObjectURL(t);var i=l(ve(e.uri));J("[PCDN]P2PSeedByBuffer. |request_url("+e.uri+")|"+"md5_name("+i+")|");var o=null;for(var s=0;s<P.torrents.length;s++){if(P.torrents[s].files[0]&&P.torrents[s].files[0].name&&P.torrents[s].files[0].name==i){o=P.torrents[s];break}}if(o){P.remove(o,function e(t){J("[PCDN]P2PSeedByBuffer. torrentExisted onRemove. |info_hash("+o.info_hash+")|"+"Message("+(t&&(t.message||t))+")|")})}var a=P.seed(t,d({pieceLength:2097152,name:i},c),function(t){J("[PCDN]P2PSeedByBuffer OnSeed. |request_url("+e.uri+")|"+"infohash("+t.infoHash+")|");r.revokeObjectURL(n);t.on("upload",function(e){window.g_P2P_UploadBytes+=e});t.on("error",function(e){ee("[PCDN]P2PSeedByBuffer torrent OnError.|message("+(e&&(e.message||e))+")|"+"infohash("+t.infoHash+")|")});t.on("warning",function(e){Q("[PCDN]P2PSeedByBuffer torrent OnWarning.. |message("+(e&&(e.message||e))+")|"+"infohash("+t.infoHash+")|")});t.on("wire",function(e,t){var r=t.split(":").shift();window.g_P2P_PeerConnectedList.add(r);J("[PCDN]P2PSeedByBuffer torrent OnWire. Peer connected. |addr("+r+")|")})});a.pcdnType=e.CDNReason;a.pcdnIndex=k++}function we(e,t,r,n,i,o){var s=e(r,n);s.addEventListener("progress",he(t,i));o.push(s)}function Se(e,t,r,n,i,s,a){var u="http://query.dcdn.baidu.com/lss/torrent?origin_url="+encodeURIComponent(t.resolvedUri)+"&business_id="+G+"&sdk_id="+$+"&version="+X;var f={response:null,responseTime:0,timedout:false,aborted:false,bandwidth:0,bytesReceived:0,roundTripTime:0,uri:null,requestTime:null,encryptedBytes:null};f.requestTime=t.requestTime;f.uri=t.resolvedUri;var l;J("[PCDN]P2PDownload. |request_url("+t.resolvedUri+")|"+"torrentURI("+u+")|");var d=P.add(u,c,h);function h(d){l=d.infoHash;J("[PCDN]P2PDownload onTorrent. |request_url("+t.resolvedUri+")|"+"infohash("+d.infoHash+")|"+"torrentURI("+u+")|");d.on("done",function(){J("[PCDN]P2PDownload onDone. |request_url("+t.resolvedUri+")|"+"infohash("+d.infoHash+")|");clearTimeout(A);d.files.forEach(function(o){o.getBuffer(function(u,c){if(u){J("[PCDN]P2PDownload onDone failed. CDNInvolve. |request_url("+t.resolvedUri+")|"+"infohash("+d.infoHash+")|"+"message("+(u&&(u.message||u))+")|");if(l){P.remove(l,function e(t){J("[PCDN]P2PDownload. torrent onRemove. |Message("+(t&&(t.message||t))+")|")})}g(e,t,r,n,i,s)}else{f.response=c;f.responseTime=Date.now();f.roundTripTime=f.responseTime-f.requestTime;f.bytesReceived=o.downloaded;f.bandwidth=Math.floor(f.bytesReceived/f.roundTripTime*8*1e3);t.stats=oe(f);t.bytes=new Uint8Array(f.response);t.endOfAllRequests=Date.now();window.g_P2P_DownloadBytes+=f.bytesReceived;J("[PCDN]P2PDownload onDone success. Call doneFn. RTT_MS("+f.roundTripTime+")|"+"Bytes("+f.bytesReceived+")|"+"request_url("+t.resolvedUri+")|"+"infohash("+d.infoHash+")|"+"message("+(u&&(u.message||u))+")|");a(null,t)}})})});d.on("download",function(e){var r=Date.now()-t.requestTime;var n={bandwidth:Infinity,bytesReceived:0,roundTripTime:r||0};n.bytesReceived=d.downloaded;n.roundTripTime=Date.now()-t.requestTime;n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3);t.stats=o["default"].mergeOptions(t.stats,n);if(!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived){t.stats.firstBytesReceivedAt=Date.now()}i(event,t)});d.on("upload",function(e){window.g_P2P_UploadBytes+=e});d.on("error",function(o){ee("[PCDN]P2PDownload torrent OnError. Destroy torrent. CDNInvolve |message("+(o&&(o.message||o))+")|"+"infohash("+d.infoHash+")|");clearTimeout(A);g(e,t,r,n,i,s)});d.on("warning",function(e){Q("[PCDN]P2PDownload torrent OnWarning. |message("+(e&&(e.message||e))+")|"+"infohash("+d.infoHash+")|")});d.on("wire",function(e,t){var r=t.split(":").shift();window.g_P2P_PeerConnectedList.add(r);J("[PCDN]P2PDownload torrent OnWire. Peer connected. |addr("+r+")|"+"infohash("+d.infoHash+")|")});d.on("noPeers",function(e){Q("[PCDN]P2PDownload torrent noPeers. |infohash("+d.infoHash+")|")})}d.pcdnType=p.P2P_ADDED;d.pcdnIndex=k++;A=setTimeout(function(){Q("[PCDN]P2PDownload monitor timeout. Remove it and CDNInvolve. |g_P2PDownloadTimeoutMS("+Y+"ms)|"+"segment.resolvedUri("+t.resolvedUri+")|");clearTimeout(A);if(l){P.remove(l,function e(t){J("[PCDN]P2PDownload. torrent onRemove. |Message("+(t&&(t.message||t))+")|")})}g(e,t,r,n,i,s)},Y);function g(e,t,r,n,i,o){J("[PCDN]P2PDownload. CDNInvolve. |segment.resolvedUri("+t.resolvedUri+")|");t.CDNReason=p.CDN_INVOLVE;we(e,t,r,n,i,o)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],8:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=e(34);var u=o(a);var f=e(12);var l=o(f);var d=typeof window!=="undefined"?window["videojs"]:typeof n!=="undefined"?n["videojs"]:null;var c=o(d);var p=["seeking","seeked","pause","playing","error"];var h=function(){function e(t){var r=this;s(this,e);this.tech_=t.tech;this.seekable=t.seekable;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;if(t.debug){this.logger_=c["default"].log.bind(c["default"],"playback-watcher ->")}this.logger_("initialize");var n=function e(){return r.monitorCurrentTime_()};var i=function e(){return r.techWaiting_()};var o=function e(){return r.cancelTimer_()};var a=function e(){return r.fixesBadSeeks_()};this.tech_.on("seekablechanged",a);this.tech_.on("waiting",i);this.tech_.on(p,o);this.tech_.on("canplay",n);this.dispose=function(){r.logger_("dispose");r.tech_.off("seekablechanged",a);r.tech_.off("waiting",i);r.tech_.off(p,o);r.tech_.off("canplay",n);if(r.checkCurrentTimeTimeout_){u["default"].clearTimeout(r.checkCurrentTimeTimeout_)}r.cancelTimer_()}}i(e,[{key:"monitorCurrentTime_",value:function e(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){u["default"].clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=u["default"].setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function e(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var t=this.tech_.currentTime();var r=this.tech_.buffered();if(this.lastRecordedTime===t&&(!r.length||t+l["default"].SAFE_TIME_DELTA>=r.end(r.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else if(t===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=t}}},{key:"cancelTimer_",value:function e(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null}},{key:"fixesBadSeeks_",value:function e(){var t=this.tech_.seeking();var r=this.seekable();var n=this.tech_.currentTime();var i=undefined;if(t&&this.afterSeekableWindow_(r,n)){var o=r.end(r.length-1);i=o}if(t&&this.beforeSeekableWindow_(r,n)){var s=r.start(0);i=s+l["default"].SAFE_TIME_DELTA}if(typeof i!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+n+" with "+("seekable range "+l["default"].printableRange(r)+". Seeking to ")+(i+"."));this.tech_.setCurrentTime(i);return true}return false}},{key:"waiting_",value:function e(){if(this.techWaiting_()){return}var t=this.tech_.currentTime();var r=this.tech_.buffered();var n=l["default"].findRange(r,t);if(n.length&&t+3<=n.end(0)){this.cancelTimer_();this.tech_.setCurrentTime(t);this.logger_("Stopped at "+t+" while inside a buffered region "+("["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},{key:"techWaiting_",value:function e(){var t=this.seekable();var r=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(t,r)){var n=t.end(t.length-1);this.logger_("Fell out of live window at time "+r+". Seeking to "+("live point (seekable end) "+n));this.cancelTimer_();this.tech_.setCurrentTime(n);this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var i=this.tech_.buffered();var o=l["default"].findNextRange(i,r);if(this.videoUnderflow_(o,i,r)){this.cancelTimer_();this.tech_.setCurrentTime(r);this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}if(o.length>0){var s=o.start(0)-r;this.logger_("Stopped at "+r+", setting timer for "+s+", seeking "+("to "+o.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),s*1e3,r);return true}return false}},{key:"afterSeekableWindow_",value:function e(t,r){if(!t.length){return false}if(r>t.end(t.length-1)+l["default"].SAFE_TIME_DELTA){return true}return false}},{key:"beforeSeekableWindow_",value:function e(t,r){if(t.length&&t.start(0)>0&&r<t.start(0)-l["default"].SAFE_TIME_DELTA){return true}return false}},{key:"videoUnderflow_",value:function e(t,r,n){if(t.length===0){var i=this.gapFromVideoUnderflow_(r,n);if(i){this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". "+("Seeking to current time "+n));return true}}return false}},{key:"skipTheGap_",value:function e(t){var r=this.tech_.buffered();var n=this.tech_.currentTime();var i=l["default"].findNextRange(r,n);this.cancelTimer_();if(i.length===0||n!==t){return}this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",t,"nextRange start:",i.start(0));this.tech_.setCurrentTime(i.start(0)+l["default"].TIME_FUDGE_FACTOR);this.tech_.trigger({type:"usage",name:"hls-gap-skip"})}},{key:"gapFromVideoUnderflow_",value:function e(t,r){var n=l["default"].findGaps(t);for(var i=0;i<n.length;i++){var o=n.start(i);var s=n.end(i);if(r-o<4&&r-o>2){return{start:o,end:s}}}return null}},{key:"logger_",value:function e(){}}]);return e}();r["default"]=h;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],9:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e(15);var f=o(u);var l=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var d=e(36);var c=o(d);var p=e(34);var h=o(p);var g=function e(t,r,n){var i=r.slice();n=n||0;var o=Math.min(t.length,r.length+n);for(var s=n;s<o;s++){i[s-n]=(0,l.mergeOptions)(t[s],i[s-n])}return i};r.updateSegments=g;var y=function e(t,r){if(!t.resolvedUri){t.resolvedUri=(0,f["default"])(r,t.uri)}if(t.key&&!t.key.resolvedUri){t.key.resolvedUri=(0,f["default"])(r,t.key.uri)}if(t.map&&!t.map.resolvedUri){t.map.resolvedUri=(0,f["default"])(r,t.map.uri)}};r.resolveSegmentUris=y;var _=function e(t,r){var n=(0,l.mergeOptions)(t,{});var i=n.playlists.filter(function(e){return e.uri===r.uri})[0];if(!i){return null}if(i.segments&&r.segments&&i.segments.length===r.segments.length&&i.mediaSequence===r.mediaSequence){return null}var o=(0,l.mergeOptions)(i,r);if(i.segments){o.segments=g(i.segments,r.segments,r.mediaSequence-i.mediaSequence)}o.segments.forEach(function(e){y(e,o.resolvedUri)});for(var s=0;s<n.playlists.length;s++){if(n.playlists[s].uri===r.uri){n.playlists[s]=o}}n.playlists[r.uri]=o;return n};r.updateMaster=_;var m=function e(t){var r=t.playlists.length;while(r--){var n=t.playlists[r];t.playlists[n.uri]=n;n.resolvedUri=(0,f["default"])(t.uri,n.uri);if(!n.attributes){n.attributes={};l.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}};r.setupMediaPlaylists=m;var v=function e(t){["AUDIO","SUBTITLES"].forEach(function(e){for(var r in t.mediaGroups[e]){for(var n in t.mediaGroups[e][r]){var i=t.mediaGroups[e][r][n];if(i.uri){i.resolvedUri=(0,f["default"])(t.uri,i.uri)}}}})};r.resolveMediaGroupUris=v;var b=function e(t,r){var n=t.segments[t.segments.length-1];var i=undefined;if(r&&n&&n.duration){i=n.duration*1e3}else{i=(t.targetDuration||10)*500}return i};r.refreshDelay=b;var w=function(e){a(t,e);function t(e,r,n){var o=this;s(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.srcUrl=e;this.hls_=r;this.withCredentials=n;if(!this.srcUrl){throw new Error("A non-empty playlist URL is required")}this.state="HAVE_NOTHING";this.on("mediaupdatetimeout",function(){if(o.state!=="HAVE_METADATA"){return}o.state="HAVE_CURRENT_METADATA";o.request=o.hls_.xhr({uri:(0,f["default"])(o.master.uri,o.media().uri),withCredentials:o.withCredentials},function(e,t){if(!o.request){return}if(e){return o.playlistRequestError(o.request,o.media().uri,"HAVE_METADATA")}o.haveMetadata(o.request,o.media().uri)})})}n(t,[{key:"playlistRequestError",value:function e(t,r,n){this.request=null;if(n){this.state=n}this.error={playlist:this.master.playlists[r],status:t.status,message:"HLS playlist request error at URL: "+r,responseText:t.responseText,code:t.status>=500?4:2};this.trigger("error")}},{key:"haveMetadata",value:function e(t,r){var n=this;this.request=null;this.state="HAVE_METADATA";var i=new c["default"].Parser;i.push(t.responseText);i.end();i.manifest.uri=r;i.manifest.attributes=i.manifest.attributes||{};var o=_(this.master,i.manifest);this.targetDuration=i.manifest.targetDuration;if(o){this.master=o;this.media_=this.master.playlists[i.manifest.uri]}else{this.trigger("playlistunchanged")}if(!this.media().endList){h["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=h["default"].setTimeout(function(){n.trigger("mediaupdatetimeout")},b(this.media(),!!o))}this.trigger("loadedplaylist")}},{key:"dispose",value:function e(){this.stopRequest();h["default"].clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}}},{key:"media",value:function e(t){var r=this;if(!t){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var n=this.state;if(typeof t==="string"){if(!this.master.playlists[t]){throw new Error("Unknown playlist URI: "+t)}t=this.master.playlists[t]}var i=!this.media_||t.uri!==this.media_.uri;if(this.master.playlists[t.uri].endList){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null}this.state="HAVE_METADATA";this.media_=t;if(i){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!i){return}this.state="SWITCHING_MEDIA";if(this.request){if((0,f["default"])(this.master.uri,t.uri)===this.request.url){return}this.request.onreadystatechange=null;this.request.abort();this.request=null}if(this.media_){this.trigger("mediachanging")}this.request=this.hls_.xhr({uri:(0,f["default"])(this.master.uri,t.uri),withCredentials:this.withCredentials},function(e,i){if(!r.request){return}if(e){return r.playlistRequestError(r.request,t.uri,n)}r.haveMetadata(i,t.uri);if(n==="HAVE_MASTER"){r.trigger("loadedmetadata")}else{r.trigger("mediachange")}})}},{key:"pause",value:function e(){this.stopRequest();h["default"].clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA"}else{this.state="HAVE_MASTER"}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA"}}},{key:"load",value:function e(t){var r=this;h["default"].clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(t){var i=n?n.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=h["default"].setTimeout(function(){return r.load()},i);return}if(!this.started){this.start();return}if(n&&!n.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"start",value:function e(){var t=this;this.started=true;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,r){if(!t.request){return}t.request=null;if(e){t.error={status:r.status,message:"HLS playlist request error at URL: "+t.srcUrl,responseText:r.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}var n=new c["default"].Parser;n.push(r.responseText);n.end();t.state="HAVE_MASTER";n.manifest.uri=t.srcUrl;if(n.manifest.playlists){t.master=n.manifest;m(t.master);v(t.master);t.trigger("loadedplaylist");if(!t.request){t.media(n.manifest.playlists[0])}return}t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:h["default"].location.href,playlists:[{uri:t.srcUrl}]};t.master.playlists[t.srcUrl]=t.master.playlists[0];t.master.playlists[0].resolvedUri=t.srcUrl;t.master.playlists[0].attributes=t.master.playlists[0].attributes||{};t.haveMetadata(r,t.srcUrl);return t.trigger("loadedmetadata")})}}]);return t}(l.EventTarget);r["default"]=w}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=e(3);var o=n(i);var s=e(11);var a=n(s);var u=e(19);var f=function e(t,r){var n=undefined;if(!t){return""}
n=window.getComputedStyle(t);if(!n){return""}return n[r]};var l=function e(t,r){var n=t.slice();t.sort(function(e,t){var i=r(e,t);if(i===0){return n.indexOf(e)-n.indexOf(t)}return i})};var d=function e(t,r){var n=undefined;var i=undefined;if(t.attributes.BANDWIDTH){n=t.attributes.BANDWIDTH}n=n||window.Number.MAX_VALUE;if(r.attributes.BANDWIDTH){i=r.attributes.BANDWIDTH}i=i||window.Number.MAX_VALUE;return n-i};r.comparePlaylistBandwidth=d;var c=function e(t,r){var n=undefined;var i=undefined;if(t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width){n=t.attributes.RESOLUTION.width}n=n||window.Number.MAX_VALUE;if(r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width){i=r.attributes.RESOLUTION.width}i=i||window.Number.MAX_VALUE;if(n===i&&t.attributes.BANDWIDTH&&r.attributes.BANDWIDTH){return t.attributes.BANDWIDTH-r.attributes.BANDWIDTH}return n-i};r.comparePlaylistResolution=c;var p=function e(t,r,n,i){var s=t.playlists.map(function(e){var t=undefined;var r=undefined;var n=undefined;t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width;r=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;n=e.attributes.BANDWIDTH;n=n||window.Number.MAX_VALUE;return{bandwidth:n,width:t,height:r,playlist:e}});l(s,function(e,t){return e.bandwidth-t.bandwidth});s=s.filter(function(e){return!a["default"].isIncompatible(e.playlist)});var u=s.filter(function(e){return a["default"].isEnabled(e.playlist)});if(!u.length){u=s.filter(function(e){return!a["default"].isDisabled(e.playlist)})}var f=u.filter(function(e){return e.bandwidth*o["default"].BANDWIDTH_VARIANCE<r});var d=f[f.length-1];var c=f.filter(function(e){return e.bandwidth===d.bandwidth})[0];var p=f.filter(function(e){return e.width&&e.height});l(p,function(e,t){return e.width-t.width});var h=p.filter(function(e){return e.width===n&&e.height===i});d=h[h.length-1];var g=h.filter(function(e){return e.bandwidth===d.bandwidth})[0];var y=undefined;var _=undefined;var m=undefined;if(!g){y=p.filter(function(e){return e.width>n||e.height>i});_=y.filter(function(e){return e.width===y[0].width&&e.height===y[0].height});d=_[_.length-1];m=_.filter(function(e){return e.bandwidth===d.bandwidth})[0]}var v=m||g||c||u[0]||s[0];return v?v.playlist:null};r.simpleSelector=p;var h=function e(){return p(this.playlists.master,this.systemBandwidth,parseInt(f(this.tech_.el(),"width"),10),parseInt(f(this.tech_.el(),"height"),10))};r.lastBandwidthSelector=h;var g=function e(t){var r=-1;if(t<0||t>1){throw new Error("Moving average bandwidth decay must be between 0 and 1.")}return function(){if(r<0){r=this.systemBandwidth}r=t*this.systemBandwidth+(1-t)*r;return p(this.playlists.master,r,parseInt(f(this.tech_.el(),"width"),10),parseInt(f(this.tech_.el(),"height"),10))}};r.movingAverageBandwidthSelector=g;var y=function e(t){var r=t.master;var n=t.currentTime;var i=t.bandwidth;var o=t.duration;var s=t.segmentDuration;var u=t.timeUntilRebuffer;var f=t.currentTimeline;var c=t.syncController;var p=r.playlists.filter(function(e){return!a["default"].isIncompatible(e)});var h=p.filter(a["default"].isEnabled);if(!h.length){h=p.filter(function(e){return!a["default"].isDisabled(e)})}var g=h.filter(a["default"].hasAttribute.bind(null,"BANDWIDTH"));var y=g.map(function(e){var t=c.getSyncPoint(e,o,f,n);var r=t?1:2;var l=a["default"].estimateSegmentRequestTime(s,i,e);var d=l*r-u;return{playlist:e,rebufferingImpact:d}});var _=y.filter(function(e){return e.rebufferingImpact<=0});l(_,function(e,t){return d(t.playlist,e.playlist)});if(_.length){return _[0]}l(y,function(e,t){return e.rebufferingImpact-t.rebufferingImpact});return y[0]||null};r.minRebufferMaxBandwidthSelector=y;var _=function e(){var t=this.playlists.master.playlists.filter(a["default"].isEnabled);l(t,function(e,t){return d(e,t)});var r=t.filter(function(e){return(0,u.parseCodecs)(e.attributes.CODECS).videoCodec});return r[0]||null};r.lowestBitrateCompatibleVariantSelector=_},{}],11:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var o=e(34);var s=n(o);var a=function e(t,r){var n=0;var i=r-t.mediaSequence;var o=t.segments[i];if(o){if(typeof o.start!=="undefined"){return{result:o.start,precise:true}}if(typeof o.end!=="undefined"){return{result:o.end-o.duration,precise:true}}}while(i--){o=t.segments[i];if(typeof o.end!=="undefined"){return{result:n+o.end,precise:true}}n+=o.duration;if(typeof o.start!=="undefined"){return{result:n+o.start,precise:true}}}return{result:n,precise:false}};var u=function e(t,r){var n=0;var i=undefined;var o=r-t.mediaSequence;for(;o<t.segments.length;o++){i=t.segments[o];if(typeof i.start!=="undefined"){return{result:i.start-n,precise:true}}n+=i.duration;if(typeof i.end!=="undefined"){return{result:i.end-n,precise:true}}}return{result:-1,precise:false}};var f=function e(t,r,n){var i=undefined;var o=undefined;if(typeof r==="undefined"){r=t.mediaSequence+t.segments.length}if(r<t.mediaSequence){return 0}i=a(t,r);if(i.precise){return i.result}o=u(t,r);if(o.precise){return o.result}return i.result+n};var l=function e(t,r,n){if(!t){return 0}if(typeof n!=="number"){n=0}if(typeof r==="undefined"){if(t.totalDuration){return t.totalDuration}if(!t.endList){return s["default"].Infinity}}return f(t,r,n)};r.duration=l;var d=function e(t,r,n){var i=0;if(r>n){var o=[n,r];r=o[0];n=o[1]}if(r<0){for(var s=r;s<Math.min(0,n);s++){i+=t.targetDuration}r=0}for(var s=r;s<n;s++){i+=t.segments[s].duration}return i};r.sumDurations=d;var c=function e(t){if(!t.segments.length){return 0}var r=t.segments.length-1;var n=t.segments[r].duration||t.targetDuration;var i=n+t.targetDuration*2;while(r--){n+=t.segments[r].duration;if(n>=i){break}}return Math.max(0,r)};r.safeLiveIndex=c;var p=function e(t,r,n){if(!t||!t.segments){return null}if(t.endList){return l(t)}if(r===null){return null}r=r||0;var i=n?c(t):t.segments.length;return f(t,t.mediaSequence+i,r)};r.playlistEnd=p;var h=function e(t,r){var n=true;var o=r||0;var s=p(t,r,n);if(s===null){return(0,i.createTimeRange)()}return(0,i.createTimeRange)(o,s)};r.seekable=h;var g=function e(t){return t-Math.floor(t)===0};var y=function e(t,r){if(g(r)){return r+t*.1}var n=r.toString().split(".")[1].length;for(var i=1;i<=n;i++){var o=Math.pow(10,i);var s=r*o;if(g(s)||i===n){return(s+t)/o}}};var _=y.bind(null,1);var m=y.bind(null,-1);var v=function e(t,r,n,i){var o=undefined;var s=undefined;var a=t.segments.length;var u=r-i;if(u<0){if(n>0){for(o=n-1;o>=0;o--){s=t.segments[o];u+=m(s.duration);if(u>0){return{mediaIndex:o,startTime:i-d(t,n,o)}}}}return{mediaIndex:0,startTime:r}}if(n<0){for(o=n;o<0;o++){u-=t.targetDuration;if(u<0){return{mediaIndex:0,startTime:r}}}n=0}for(o=n;o<a;o++){s=t.segments[o];u-=_(s.duration);if(u<0){return{mediaIndex:o,startTime:i+d(t,n,o)}}}return{mediaIndex:a-1,startTime:r}};r.getMediaInfoForTime=v;var b=function e(t){return t.excludeUntil&&t.excludeUntil>Date.now()};r.isBlacklisted=b;var w=function e(t){return t.excludeUntil&&t.excludeUntil===Infinity};r.isIncompatible=w;var S=function e(t){var r=b(t);return!t.disabled&&!r};r.isEnabled=S;var T=function e(t){return t.disabled};r.isDisabled=T;var E=function e(t){for(var r=0;r<t.segments.length;r++){if(t.segments[r].key){return true}}return false};r.isAes=E;var A=function e(t){for(var r=0;r<t.segments.length;r++){if(t.segments[r].map){return true}}return false};r.isFmp4=A;var I=function e(t,r){return r.attributes&&r.attributes[t]};r.hasAttribute=I;var C=function e(t,r,n){var i=arguments.length<=3||arguments[3]===undefined?0:arguments[3];if(!I("BANDWIDTH",n)){return NaN}var o=t*n.attributes.BANDWIDTH;return(o-i*8)/r};r.estimateSegmentRequestTime=C;var k=function e(t,r){if(t.playlists.length===1){return true}var n=r.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(function(e){if(!S(e)){return false}return(e.attributes.BANDWIDTH||0)<n}).length===0};r.isLowestEnabledRendition=k;r["default"]={duration:l,seekable:h,safeLiveIndex:c,getMediaInfoForTime:v,isEnabled:S,isDisabled:T,isBlacklisted:b,isIncompatible:w,playlistEnd:p,isAes:E,isFmp4:A,hasAttribute:I,estimateSegmentRequestTime:C,isLowestEnabledRendition:k}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],12:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var i=false;var o=undefined;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done);n=true){r.push(a.value);if(t&&r.length===t)break}}catch(e){i=true;o=e}finally{try{if(!n&&s["return"])s["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function i(e){return e&&e.__esModule?e:{default:e}}var o=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var s=i(o);var a=1/30;var u=a*3;var f=function e(t,r){var i=n(r,2);var o=i[0];var s=i[1];return Math.min(Math.max(o,t),s)};var l=function e(t,r){var n=[];var i=undefined;if(t&&t.length){for(i=0;i<t.length;i++){if(r(t.start(i),t.end(i))){n.push([t.start(i),t.end(i)])}}}return s["default"].createTimeRanges(n)};var d=function e(t,r){return l(t,function(e,t){return e-a<=r&&t+a>=r})};var c=function e(t,r){return l(t,function(e){return e-a>=r})};var p=function e(t){if(t.length<2){return s["default"].createTimeRanges()}var r=[];for(var n=1;n<t.length;n++){var i=t.end(n-1);var o=t.start(n);r.push([i,o])}return s["default"].createTimeRanges(r)};var h=function e(t,r){var n=undefined;var i=undefined;var o=undefined;var s=[];var a=[];var u=function e(t){return t[0]<=o&&t[1]>=o};if(t){for(n=0;n<t.length;n++){i=t.start(n);o=t.end(n);a.push([i,o])}}if(r){for(n=0;n<r.length;n++){i=r.start(n);o=r.end(n);if(a.some(u)){continue}s.push(o)}}if(s.length!==1){return null}return s[0]};var g=function e(t,r){var n=null;var i=null;var o=0;var a=[];var u=[];if(!t||!t.length||!r||!r.length){return s["default"].createTimeRange()}var f=t.length;while(f--){a.push({time:t.start(f),type:"start"});a.push({time:t.end(f),type:"end"})}f=r.length;while(f--){a.push({time:r.start(f),type:"start"});a.push({time:r.end(f),type:"end"})}a.sort(function(e,t){return e.time-t.time});for(f=0;f<a.length;f++){if(a[f].type==="start"){o++;if(o===2){n=a[f].time}}else if(a[f].type==="end"){o--;if(o===1){i=a[f].time}}if(n!==null&&i!==null){u.push([n,i]);n=null;i=null}}return s["default"].createTimeRanges(u)};var y=function e(t,r,n,i){var o=r.end(0)-r.start(0);var s=t.end(0)-t.start(0);var a=o-s;var u=g(t,i);var f=g(r,i);var l=0;var d=0;var c=u.length;while(c--){l+=u.end(c)-u.start(c);if(u.start(c)===n){l+=a}}c=f.length;while(c--){d+=f.end(c)-f.start(c)}return Math.max(l,d)/o*100};var _=function e(t,r,n,i){var o=t+r;var a=s["default"].createTimeRanges([[t,o]]);var u=s["default"].createTimeRanges([[f(t,[n,o]),o]]);if(u.start(0)===u.end(0)){return 0}var l=y(u,a,n,i);if(isNaN(l)||l===Infinity||l===-Infinity){return 0}return l};var m=function e(t){var r=[];if(!t||!t.length){return""}for(var n=0;n<t.length;n++){r.push(t.start(n)+" => "+t.end(n))}return r.join(", ")};var v=function e(t,r){var n=arguments.length<=2||arguments[2]===undefined?1:arguments[2];var i=t.length?t.end(t.length-1):0;return(i-r)/n};r["default"]={findRange:d,findNextRange:c,findGaps:p,findSoleUncommonTimeRangesEnd:h,getSegmentBufferedPercent:_,TIME_FUDGE_FACTOR:a,SAFE_TIME_DELTA:u,printableRange:m,timeUntilRebuffer:v};t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],13:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var o=n(i);var s={errorInterval:30,getSource:function e(t){var r=this.tech({IWillNotUseThisInPlugins:true});var n=r.currentSource_;return t(n)}};var a=function e(t,r){var n=0;var i=0;var a=o["default"].mergeOptions(s,r);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var u=function e(){if(i){t.currentTime(i)}};var f=function e(r){if(r===null||r===undefined){return}i=t.duration()!==Infinity&&t.currentTime()||0;t.one("loadedmetadata",u);t.src(r);t.trigger({type:"usage",name:"hls-error-reload"});t.play()};var l=function e(){if(Date.now()-n<a.errorInterval*1e3){t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!=="function"){o["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}n=Date.now();return a.getSource.call(t,f)};var d=function e(){t.off("loadedmetadata",u);t.off("error",l);t.off("dispose",e)};var c=function r(n){d();e(t,n)};t.on("error",l);t.on("dispose",d);t.reloadSourceOnError=c};var u=function e(t){a(this,t)};r["default"]=u;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=e(11);var o=function e(t,r,n){return function(e){var o=t.master.playlists[r];var s=(0,i.isIncompatible)(o);var a=(0,i.isEnabled)(o);if(typeof e==="undefined"){return a}if(e){delete o.disabled}else{o.disabled=true}if(e!==a&&!s){n();if(e){t.trigger("renditionenabled")}else{t.trigger("renditiondisabled")}}return e}};var s=function e(t,r,i){n(this,e);var s=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(r.attributes.RESOLUTION){var a=r.attributes.RESOLUTION;this.width=a.width;this.height=a.height}this.bandwidth=r.attributes.BANDWIDTH;this.id=i;this.enabled=o(t.playlists,r.uri,s)};var a=function e(t){var r=t.playlists;t.representations=function(){return r.master.playlists.filter(function(e){return!(0,i.isIncompatible)(e)}).map(function(e,r){return new s(t,e,e.uri)})}};r["default"]=a;t.exports=r["default"]},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=e(67);var o=n(i);var s=e(34);var a=n(s);var u=function e(t,r){if(/^[a-z]+:/i.test(r)){return r}if(!/\/\//i.test(t)){t=o["default"].buildAbsoluteURL(a["default"].location.href,t)}return o["default"].buildAbsoluteURL(t,r)};r["default"]=u;t.exports=r["default"]},{}],16:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e(11);var f=o(u);var l=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var d=o(l);var c=e(17);var p=o(c);var h=e(3);var g=o(h);var y=e(34);var _=o(y);var m=e(76);var v=o(m);var b=e(2);var w=e(7);var S=e(12);var T=e(10);var E=500;var A=function e(t,r,n){if(!t||!r){return false}var i=t.segments;var o=n===i.length;return t.endList&&r.readyState==="open"&&o};var I=function e(t){return typeof t==="number"&&isFinite(t)};var C=function e(t,r,n){if(t!=="main"||!r||!n){return null}if(!n.containsAudio&&!n.containsVideo){return"Neither audio nor video found in segment."}if(r.containsVideo&&!n.containsVideo){return"Only audio found in segment when we expected video."+" We can't switch to audio only from a stream that had video."+" To get rid of this message, please add codec information to the manifest."}if(!r.containsVideo&&n.containsVideo){return"Video found in segment when we expected only audio."+" We can't switch to a stream with video from an audio only stream."+" To get rid of this message, please add codec information to the manifest."}return null};r.illegalMediaSwitch=C;var k=function e(t,r,n){var i=undefined;if(t.length&&t.start(0)>0&&t.start(0)<r){i=t.start(0)}else{i=r-30}return Math.min(i,r-n)};r.safeBackBufferTrimTime=k;var j=function(e){a(t,e);function t(e){var r=this;var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];s(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);if(!e){throw new TypeError("Initialization settings are required")}if(typeof e.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!e.mediaSource){throw new TypeError("No MediaSource specified")}this.state="INIT";this.bandwidth=e.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.mediaIndex=null;this.hasPlayed_=e.hasPlayed;this.currentTime_=e.currentTime;this.seekable_=e.seekable;this.seeking_=e.seeking;this.duration_=e.duration;this.mediaSource_=e.mediaSource;this.hls_=e.hls;this.loaderType_=e.loaderType;this.startingMedia_=void 0;this.segmentMetadataTrack_=e.segmentMetadataTrack;this.goalBufferLength_=e.goalBufferLength;this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.pendingSegment_=null;this.mimeType_=null;this.sourceUpdater_=null;this.xhrOptions_=null;this.activeInitSegmentId_=null;this.initSegments_={};this.decrypter_=e.decrypter;this.syncController_=e.syncController;this.syncPoint_={segmentIndex:0,time:0};this.syncController_.on("syncinfoupdate",function(){return r.trigger("syncinfoupdate")});this.mediaSource_.addEventListener("sourceopen",function(){return r.ended_=false});this.fetchAtBuffer_=false;if(n.debug){this.logger_=d["default"].log.bind(d["default"],"segment-loader",this.loaderType_,"->")}}n(t,[{key:"resetStats_",value:function e(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function e(){this.state="DISPOSED";this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose()}this.resetStats_()}},{key:"abort",value:function e(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}}},{key:"abort_",value:function e(){if(this.pendingSegment_){this.pendingSegment_.abortRequests()}this.pendingSegment_=null}},{key:"error",value:function e(t){if(typeof t!=="undefined"){this.error_=t}this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function e(){this.ended_=true;this.pause();this.trigger("ended")}},{key:"buffered_",value:function e(){if(!this.sourceUpdater_){return d["default"].createTimeRanges()}return this.sourceUpdater_.buffered()}},{key:"initSegment",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(!t){return null}var n=(0,b.initSegmentId)(t);var i=this.initSegments_[n];if(r&&!i&&t.bytes){this.initSegments_[n]=i={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes}}return i||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function e(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"}},{key:"init_",value:function e(){this.state="READY";this.sourceUpdater_=new p["default"](this.mediaSource_,this.mimeType_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!t){return}var n=this.playlist_;var i=this.pendingSegment_;this.playlist_=t;this.xhrOptions_=r;if(!this.hasPlayed_()){t.syncInfo={mediaSequence:t.mediaSequence,time:0}}this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!n||n.uri!==t.uri){if(this.mediaIndex!==null){this.resyncLoader()}return}var o=t.mediaSequence-n.mediaSequence;this.logger_("mediaSequenceDiff",o);if(this.mediaIndex!==null){this.mediaIndex-=o}if(i){i.mediaIndex-=o;if(i.mediaIndex>=0){i.segment=t.segments[i.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(n,t)}},{key:"pause",value:function e(){if(this.checkBufferTimeout_){_["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}}},{key:"paused",value:function e(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function e(t){if(this.mimeType_){return}this.mimeType_=t;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}}},{key:"resetEverything",value:function e(){this.ended_=false;this.resetLoader();this.remove(0,this.duration_());this.trigger("reseteverything")}},{key:"resetLoader",value:function e(){this.fetchAtBuffer_=false;this.resyncLoader()}},{key:"resyncLoader",value:function e(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function e(t,r){if(this.sourceUpdater_){this.sourceUpdater_.remove(t,r)}(0,v["default"])(t,r,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function e(){if(this.checkBufferTimeout_){_["default"].clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=_["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function e(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){_["default"].clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=_["default"].setTimeout(this.monitorBufferTick_.bind(this),E)}},{key:"fillBuffer_",value:function e(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!t){return}var r=A(this.playlist_,this.mediaSource_,t.mediaIndex);if(r){this.endOfStream();return}if(t.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}if(t.timeline!==this.currentTimeline_||t.startOfSegment!==null&&t.startOfSegment<this.sourceUpdater_.timestampOffset()){this.syncController_.reset();t.timestampOffset=t.startOfSegment}this.loadSegment_(t)}},{key:"checkBuffer_",value:function e(t,r,n,i,o,s){var a=0;var u=undefined;if(t.length){a=t.end(t.length-1)}var l=Math.max(0,a-o);if(!r.segments.length){return null}if(l>=this.goalBufferLength_()){return null}if(!i&&l>=1){return null}this.logger_("checkBuffer_","mediaIndex:",n,"hasPlayed:",i,"currentTime:",o,"syncPoint:",s,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",l);if(s===null){n=this.getSyncSegmentCandidate_(r);this.logger_("getSync","mediaIndex:",n);return this.generateSegmentInfo_(r,n,null,true)}if(n!==null){this.logger_("walkForward","mediaIndex:",n+1);var d=r.segments[n];if(d&&d.end){u=d.end}else{u=a}return this.generateSegmentInfo_(r,n+1,u,false)}if(this.fetchAtBuffer_){var c=f["default"].getMediaInfoForTime(r,a,s.segmentIndex,s.time);n=c.mediaIndex;u=c.startTime}else{var c=f["default"].getMediaInfoForTime(r,o,s.segmentIndex,s.time);n=c.mediaIndex;u=c.startTime}this.logger_("getMediaIndexForTime","mediaIndex:",n,"startOfSegment:",u);return this.generateSegmentInfo_(r,n,u,false)}},{key:"getSyncSegmentCandidate_",value:function e(t){var r=this;if(this.currentTimeline_===-1){return 0}var n=t.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===r.currentTimeline_});if(n.length){return n[Math.min(n.length-1,1)].segmentIndex}return Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function e(t,r,n,i){if(r<0||r>=t.segments.length){return null}var o=t.segments[r];return{requestId:"segment-loader-"+Math.random(),uri:o.resolvedUri,mediaIndex:r,isSyncRequest:i,startOfSegment:n,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:o.timeline,duration:o.duration,segment:o}}},{key:"abortRequestEarly_",value:function e(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return false}if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3){return false}var r=this.currentTime_();var n=t.bandwidth;var i=this.pendingSegment_.duration;var o=f["default"].estimateSegmentRequestTime(i,n,this.playlist_,t.bytesReceived);var s=(0,S.timeUntilRebuffer)(this.buffered_(),r,this.hls_.tech_.playbackRate())-1;if(o<=s){return false}var a=(0,T.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:r,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!a){return}var u=o-s;var l=u-a.rebufferingImpact;var d=.5;if(s<=S.TIME_FUDGE_FACTOR){d=1}if(!a.playlist||a.playlist.uri===this.playlist_.uri||l<d){return false}this.bandwidth=a.playlist.attributes.BANDWIDTH*g["default"].BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return true}},{key:"handleProgress_",value:function e(t,r){if(!this.pendingSegment_||r.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(r.stats)){return}this.trigger("progress")}},{key:"loadSegment_",value:function e(t){this.state="WAITING";this.pendingSegment_=t;this.trimBackBuffer_(t);t.abortRequests=(0,w.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function e(t){var r=k(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(r>0){this.remove(0,r)}}},{key:"createSimplifiedSegmentObj_",value:function e(t){var r=t.segment;var n={resolvedUri:r.resolvedUri,byterange:r.byterange,requestId:t.requestId};if(r.key){var i=r.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key={resolvedUri:r.key.resolvedUri,iv:i}}if(r.map){n.map=this.initSegment(r.map)}n.tsCount=this.playlist_.segments.length;n.M3U8Url=this.playlist_.resolvedUri;return n}},{key:"segmentRequestFinished_",value:function e(t,r){this.mediaRequests+=1;if(r.stats){this.mediaBytesTransferred+=r.stats.bytesReceived;this.mediaTransferDuration+=r.stats.roundTripTime}if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(r.requestId!==this.pendingSegment_.requestId){return}if(t){this.pendingSegment_=null;this.state="READY";if(t.code===w.REQUEST_ERRORS.ABORTED){this.mediaRequestsAborted+=1;return}this.pause();if(t.code===w.REQUEST_ERRORS.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(t);this.trigger("error");return}this.bandwidth=r.stats.bandwidth;this.roundTrip=r.stats.roundTripTime;if(r.map){r.map=this.initSegment(r.map,true)}this.processSegmentResponse_(r)}},{key:"processSegmentResponse_",value:function e(t){var r=this.pendingSegment_;r.bytes=t.bytes;if(t.map){r.segment.map.bytes=t.map.bytes}r.endOfAllRequests=t.endOfAllRequests;this.handleSegment_()}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_){this.state="READY";return}var r=this.pendingSegment_;var n=r.segment;var i=this.syncController_.probeSegmentInfo(r);if(typeof this.startingMedia_==="undefined"&&i&&(i.containsAudio||i.containsVideo)){this.startingMedia_={containsAudio:i.containsAudio,containsVideo:i.containsVideo}}var o=C(this.loaderType_,this.startingMedia_,i);if(o){this.error({message:o,blacklistDuration:Infinity});this.trigger("error");return}if(r.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}if(r.timestampOffset!==null&&r.timestampOffset!==this.sourceUpdater_.timestampOffset()){this.sourceUpdater_.timestampOffset(r.timestampOffset);this.trigger("timestampoffset")}var s=this.syncController_.mappingForTimeline(r.timeline);if(s!==null){this.trigger({type:"segmenttimemapping",mapping:s})}this.state="APPENDING";if(n.map){(function(){var e=(0,b.initSegmentId)(n.map);if(!t.activeInitSegmentId_||t.activeInitSegmentId_!==e){var r=t.initSegment(n.map);t.sourceUpdater_.appendBuffer(r.bytes,function(){t.activeInitSegmentId_=e})}})()}r.byteLength=r.bytes.byteLength;if(typeof n.start==="number"&&typeof n.end==="number"){this.mediaSecondsLoaded+=n.end-n.start}else{this.mediaSecondsLoaded+=n.duration}this.sourceUpdater_.appendBuffer(r.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function e(){this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_);if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var t=this.pendingSegment_;var r=t.segment;var n=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(t);this.addSegmentMetadataCue_(t);this.state="READY";this.mediaIndex=t.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=t.timeline;this.trigger("syncinfoupdate");if(r.end&&this.currentTime_()-r.end>t.playlist.targetDuration*3){this.resetEverything();return}if(n){this.trigger("bandwidthupdate")}this.trigger("progress");var i=A(t.playlist,this.mediaSource_,t.mediaIndex+1);if(i){this.endOfStream()}if(!this.paused()){this.monitorBuffer_()}}},{key:"recordThroughput_",value:function e(t){var r=this.throughput.rate;var n=Date.now()-t.endOfAllRequests+1;var i=Math.floor(t.byteLength/n*8*1e3);this.throughput.rate+=(i-r)/++this.throughput.count}},{key:"logger_",value:function e(){}},{key:"addSegmentMetadataCue_",value:function e(t){if(!this.segmentMetadataTrack_){return}var r=t.segment;var n=r.start;var i=r.end;if(!I(n)||!I(i)){return}(0,v["default"])(n,i,this.segmentMetadataTrack_);var o=_["default"].WebKitDataCue||_["default"].VTTCue;var s={uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:n,end:i};var a=JSON.stringify(s);var u=new o(n,i,a);u.value=s;this.segmentMetadataTrack_.addCue(u)}}]);return t}(d["default"].EventTarget);r["default"]=j}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],17:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var a=i(s);var u=function e(){};var f=function(){function e(t,r){var n=this;o(this,e);var i=function e(){
n.sourceBuffer_=t.addSourceBuffer(r);n.onUpdateendCallback_=function(){var e=n.pendingCallback_;n.pendingCallback_=null;if(e){e()}n.runCallback_()};n.sourceBuffer_.addEventListener("updateend",n.onUpdateendCallback_);n.runCallback_()};this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=t;this.processedAppend_=false;if(t.readyState==="closed"){t.addEventListener("sourceopen",i)}else{i()}}n(e,[{key:"abort",value:function e(t){var r=this;if(this.processedAppend_){this.queueCallback_(function(){r.sourceBuffer_.abort()},t)}}},{key:"appendBuffer",value:function e(t,r){var n=this;this.processedAppend_=true;this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(t)},r)}},{key:"buffered",value:function e(){if(!this.sourceBuffer_){return a["default"].createTimeRanges()}return this.sourceBuffer_.buffered}},{key:"remove",value:function e(t,r){var n=this;if(this.processedAppend_){this.queueCallback_(function(){n.sourceBuffer_.remove(t,r)},u)}}},{key:"updating",value:function e(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function e(t){var r=this;if(typeof t!=="undefined"){this.queueCallback_(function(){r.sourceBuffer_.timestampOffset=t});this.timestampOffset_=t}return this.timestampOffset_}},{key:"queueCallback_",value:function e(t,r){this.callbacks_.push([t.bind(this),r]);this.runCallback_()}},{key:"runCallback_",value:function e(){var t=undefined;if(!this.updating()&&this.callbacks_.length){t=this.callbacks_.shift();this.pendingCallback_=t[1];t[0]()}}},{key:"dispose",value:function e(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);if(this.sourceBuffer_&&this.mediaSource.readyState==="open"){this.sourceBuffer_.abort()}}}]);return e}();r["default"]=f;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],18:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e(61);var f=o(u);var l=e(63);var d=e(11);var c=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var p=o(c);var h=[{name:"VOD",run:function e(t,r,n,i,o){if(n!==Infinity){var s={time:0,segmentIndex:0};return s}return null}},{name:"ProgramDateTime",run:function e(t,r,n,i,o){if(t.datetimeToDisplayTime&&r.dateTimeObject){var s=r.dateTimeObject.getTime()/1e3;var a=s+t.datetimeToDisplayTime;var u={time:a,segmentIndex:0};return u}return null}},{name:"Segment",run:function e(t,r,n,i,o){var s=r.segments||[];var a=null;var u=null;o=o||0;for(var f=0;f<s.length;f++){var l=s[f];if(l.timeline===i&&typeof l.start!=="undefined"){var d=Math.abs(o-l.start);if(u!==null&&u<d){break}if(!a||u===null||u>=d){u=d;a={time:l.start,segmentIndex:f}}}}return a}},{name:"Discontinuity",run:function e(t,r,n,i,o){var s=null;o=o||0;if(r.discontinuityStarts&&r.discontinuityStarts.length){var a=null;for(var u=0;u<r.discontinuityStarts.length;u++){var f=r.discontinuityStarts[u];var l=r.discontinuitySequence+u+1;var d=t.discontinuities[l];if(d){var c=Math.abs(o-d.time);if(a!==null&&a<c){break}if(!s||a===null||a>=c){a=c;s={time:d.time,segmentIndex:f}}}}}return s}},{name:"Playlist",run:function e(t,r,n,i,o){if(r.syncInfo){var s={time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence};return s}return null}}];r.syncPointStrategies=h;var g=function(e){a(t,e);function t(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];s(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.inspectCache_=undefined;this.timelines=[];this.discontinuities=[];this.datetimeToDisplayTime=null;if(e.debug){this.logger_=p["default"].log.bind(p["default"],"sync-controller ->")}}n(t,[{key:"getSyncPoint",value:function e(t,r,n,i){var o=this.runStrategies_(t,r,n,i);if(!o.length){return null}return this.selectSyncPoint_(o,{key:"time",value:i})}},{key:"getExpiredTime",value:function e(t,r){if(!t||!t.segments){return null}var n=this.runStrategies_(t,r,t.discontinuitySequence,0);if(!n.length){return null}var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});if(i.segmentIndex>0){i.time*=-1}return Math.abs(i.time+(0,d.sumDurations)(t,i.segmentIndex,0))}},{key:"runStrategies_",value:function e(t,r,n,i){var o=[];for(var s=0;s<h.length;s++){var a=h[s];var u=a.run(this,t,r,n,i);if(u){u.strategy=a.name;o.push({strategy:a.name,syncPoint:u});this.logger_("syncPoint found via <"+a.name+">:",u)}}return o}},{key:"selectSyncPoint_",value:function e(t,r){var n=t[0].syncPoint;var i=Math.abs(t[0].syncPoint[r.key]-r.value);var o=t[0].strategy;for(var s=1;s<t.length;s++){var a=Math.abs(t[s].syncPoint[r.key]-r.value);if(a<i){i=a;n=t[s].syncPoint;o=t[s].strategy}}this.logger_("syncPoint with strategy <"+o+"> chosen: ",n);return n}},{key:"saveExpiredSegmentInfo",value:function e(t,r){var n=r.mediaSequence-t.mediaSequence;for(var i=n-1;i>=0;i--){var o=t.segments[i];if(o&&typeof o.start!=="undefined"){r.syncInfo={mediaSequence:t.mediaSequence+i,time:o.start};this.logger_("playlist sync:",r.syncInfo);this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function e(t){if(!this.datetimeToDisplayTime&&t.dateTimeObject){var r=t.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-r}}},{key:"reset",value:function e(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function e(t){var r=t.segment;var n=t.playlist;var i=undefined;if(r.map){i=this.probeMp4Segment_(t)}else{i=this.probeTsSegment_(t)}if(i){if(this.calculateSegmentTimeMapping_(t,i)){this.saveDiscontinuitySyncInfo_(t);if(!n.syncInfo){n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:r.start}}}}return i}},{key:"probeMp4Segment_",value:function e(t){var r=t.segment;var n=f["default"].timescale(r.map.bytes);var i=f["default"].startTime(n,t.bytes);if(t.timestampOffset!==null){t.timestampOffset-=i}return{start:i,end:i+r.duration}}},{key:"probeTsSegment_",value:function e(t){var r=(0,l.inspect)(t.bytes,this.inspectCache_);var n=undefined;var i=undefined;if(!r){return null}if(r.video&&r.video.length===2){this.inspectCache_=r.video[1].dts;n=r.video[0].dtsTime;i=r.video[1].dtsTime}else if(r.audio&&r.audio.length===2){this.inspectCache_=r.audio[1].dts;n=r.audio[0].dtsTime;i=r.audio[1].dtsTime}return{start:n,end:i,containsVideo:r.video&&r.video.length===2,containsAudio:r.audio&&r.audio.length===2}}},{key:"timestampOffsetForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].time}},{key:"mappingForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function e(t,r){var n=t.segment;var i=this.timelines[t.timeline];if(t.timestampOffset!==null){this.logger_("tsO:",t.timestampOffset);i={time:t.startOfSegment,mapping:t.startOfSegment-r.start};this.timelines[t.timeline]=i;this.trigger("timestampoffset");n.start=t.startOfSegment;n.end=r.end+i.mapping}else if(i){n.start=r.start+i.mapping;n.end=r.end+i.mapping}else{return false}return true}},{key:"saveDiscontinuitySyncInfo_",value:function e(t){var r=t.playlist;var n=t.segment;if(n.discontinuity){this.discontinuities[n.timeline]={time:n.start,accuracy:0}}else if(r.discontinuityStarts.length){for(var i=0;i<r.discontinuityStarts.length;i++){var o=r.discontinuityStarts[i];var s=r.discontinuitySequence+i+1;var a=o-t.mediaIndex;var u=Math.abs(a);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>u){var f=undefined;if(a<0){f=n.start-(0,d.sumDurations)(r,t.mediaIndex,o)}else{f=n.end+(0,d.sumDurations)(r,t.mediaIndex+1,o)}this.discontinuities[s]={time:f,accuracy:u}}}}}},{key:"logger_",value:function e(){}}]);return t}(p["default"].EventTarget);r["default"]=g}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function e(){var t=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var r={codecCount:0};var n=undefined;r.codecCount=t.split(",").length;r.codecCount=r.codecCount||2;n=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(t);if(n){r.videoCodec=n[2];r.videoObjectTypeIndicator=n[3]}r.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t);r.audioProfile=r.audioProfile&&r.audioProfile[2];return r};r.parseCodecs=n},{}],20:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=e(16);var l=s(f);var d=typeof window!=="undefined"?window["videojs"]:typeof n!=="undefined"?n["videojs"]:null;var c=s(d);var p=e(34);var h=s(p);var g=e(76);var y=s(g);var _=e(2);var m=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)}));var v=function e(t){return String.fromCharCode.apply(null,t)};var b=function(e){u(t,e);function t(e){var r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];a(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r);this.mediaSource_=null;this.subtitlesTrack_=null}i(t,[{key:"buffered_",value:function e(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return c["default"].createTimeRanges()}var t=this.subtitlesTrack_.cues;var r=t[0].startTime;var n=t[t.length-1].startTime;return c["default"].createTimeRanges([[r,n]])}},{key:"initSegment",value:function e(t){var r=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(!t){return null}var n=(0,_.initSegmentId)(t);var i=this.initSegments_[n];if(r&&!i&&t.bytes){var o=m.byteLength+t.bytes.byteLength;var s=new Uint8Array(o);s.set(t.bytes);s.set(m,t.bytes.byteLength);this.initSegments_[n]=i={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return i||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function e(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function e(t){if(typeof t==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=t;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_}},{key:"remove",value:function e(t,r){(0,y["default"])(t,r,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function e(){var t=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var r=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);r=this.skipEmptySegments_(r);if(!r){return}if(this.syncController_.timestampOffsetForTimeline(r.timeline)===null){var n=function e(){t.state="READY";if(!t.paused()){t.monitorBuffer_()}};this.syncController_.one("timestampoffset",n);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(r)}},{key:"skipEmptySegments_",value:function e(t){while(t&&t.segment.empty){t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest)}return t}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var r=this.pendingSegment_;var n=r.segment;if(typeof h["default"].WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var i=function(){var e=function e(){t.handleSegment_()};t.state="WAITING_ON_VTTJS";t.subtitlesTrack_.tech_.one("vttjsloaded",e);t.subtitlesTrack_.tech_.one("vttjserror",function(){t.subtitlesTrack_.tech_.off("vttjsloaded",e);t.error({message:"Error loading vtt.js"});t.state="READY";t.pause();t.trigger("error")});return{v:undefined}}();if(typeof i==="object")return i.v}n.requested=true;try{this.parseVTTCues_(r)}catch(e){this.error({message:e.message});this.state="READY";this.pause();return this.trigger("error")}this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_);if(r.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}r.byteLength=r.bytes.byteLength;this.mediaSecondsLoaded+=n.duration;if(r.cues.length){this.remove(r.cues[0].endTime,r.cues[r.cues.length-1].endTime)}r.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)});this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function e(t){var r=undefined;var n=false;if(typeof h["default"].TextDecoder==="function"){r=new h["default"].TextDecoder("utf8")}else{r=h["default"].WebVTT.StringDecoder();n=true}var i=new h["default"].WebVTT.Parser(h["default"],h["default"].vttjs,r);t.cues=[];t.timestampmap={MPEGTS:0,LOCAL:0};i.oncue=t.cues.push.bind(t.cues);i.ontimestampmap=function(e){return t.timestampmap=e};i.onparsingerror=function(e){c["default"].log.warn("Error encountered when parsing cues: "+e.message)};if(t.segment.map){var o=t.segment.map.bytes;if(n){o=v(o)}i.parse(o)}var s=t.bytes;if(n){s=v(s)}i.parse(s);i.flush()}},{key:"updateTimeMapping_",value:function e(t,r,n){var i=t.segment;if(!r){return}if(!t.cues.length){i.empty=true;return}var o=t.timestampmap;var s=o.MPEGTS/9e4-o.LOCAL+r.mapping;t.cues.forEach(function(e){e.startTime+=s;e.endTime+=s});if(!n.syncInfo){var a=t.cues[0].startTime;var u=t.cues[t.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:Math.min(a,u-i.duration)}}}}]);return t}(l["default"]);r["default"]=b;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],21:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var o=n(i);var s=function e(){var t=function e(t,r){t=(0,i.mergeOptions)({timeout:45e3},t);var n=e.beforeRequest||o["default"].Hls.xhr.beforeRequest;if(n&&typeof n==="function"){var s=n(t);if(s){t=s}}var a=(0,i.xhr)(t,function(e,t){var n=a.response;if(!e&&n){a.responseTime=Date.now();a.roundTripTime=a.responseTime-a.requestTime;a.bytesReceived=n.byteLength||n.length;if(!a.bandwidth){a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3)}}if(e&&e.code==="ETIMEDOUT"){a.timedout=true}if(!e&&!a.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0){e=new Error("XHR Failed with a response of: "+(a&&(n||a.responseText)))}r(e,a)});var u=a.abort;a.abort=function(){a.aborted=true;return u.apply(a,arguments)};a.uri=t.uri;a.requestTime=Date.now();return a};return t};r["default"]=s;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var r=t[0];var n=t[1];var i=r[4];var o=n[4];var s=undefined;var a=undefined;var u=undefined;var f=[];var l=[];var d=undefined;var c=undefined;var p=undefined;var h=undefined;var g=undefined;var y=undefined;for(s=0;s<256;s++){l[(f[s]=s<<1^(s>>7)*283)^s]=s}for(a=u=0;!i[a];a^=d||1,u=l[u]||1){h=u^u<<1^u<<2^u<<3^u<<4;h=h>>8^h&255^99;i[a]=h;o[h]=a;p=f[c=f[d=f[a]]];y=p*16843009^c*65537^d*257^a*16843008;g=f[h]*257^h*16843008;for(s=0;s<4;s++){r[s][a]=g=g<<24^g>>>8;n[s][h]=y=y<<24^y>>>8}}for(s=0;s<5;s++){r[s]=r[s].slice(0);n[s]=n[s].slice(0)}return t};var s=null;var a=function(){function e(t){i(this,e);if(!s){s=o()}this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var r=undefined;var n=undefined;var a=undefined;var u=undefined;var f=undefined;var l=this._tables[0][4];var d=this._tables[1];var c=t.length;var p=1;if(c!==4&&c!==6&&c!==8){throw new Error("Invalid aes key size")}u=t.slice(0);f=[];this._key=[u,f];for(r=c;r<4*c+28;r++){a=u[r-1];if(r%c===0||c===8&&r%c===4){a=l[a>>>24]<<24^l[a>>16&255]<<16^l[a>>8&255]<<8^l[a&255];if(r%c===0){a=a<<8^a>>>24^p<<24;p=p<<1^(p>>7)*283}}u[r]=u[r-c]^a}for(n=0;r;n++,r--){a=u[n&3?r:r-4];if(r<=4||n<4){f[n]=a}else{f[n]=d[0][l[a>>>24]]^d[1][l[a>>16&255]]^d[2][l[a>>8&255]]^d[3][l[a&255]]}}}n(e,[{key:"decrypt",value:function e(t,r,n,i,o,s){var a=this._key[1];var u=t^a[0];var f=i^a[1];var l=n^a[2];var d=r^a[3];var c=undefined;var p=undefined;var h=undefined;var g=a.length/4-2;var y=undefined;var _=4;var m=this._tables[1];var v=m[0];var b=m[1];var w=m[2];var S=m[3];var T=m[4];for(y=0;y<g;y++){c=v[u>>>24]^b[f>>16&255]^w[l>>8&255]^S[d&255]^a[_];p=v[f>>>24]^b[l>>16&255]^w[d>>8&255]^S[u&255]^a[_+1];h=v[l>>>24]^b[d>>16&255]^w[u>>8&255]^S[f&255]^a[_+2];d=v[d>>>24]^b[u>>16&255]^w[f>>8&255]^S[l&255]^a[_+3];_+=4;u=c;f=p;l=h}for(y=0;y<4;y++){o[(3&-y)+s]=T[u>>>24]<<24^T[f>>16&255]<<16^T[l>>8&255]<<8^T[d&255]^a[_++];c=u;u=f;f=l;l=d;d=c}}}]);return e}();r["default"]=a;t.exports=r["default"]},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e(26);var f=o(u);var l=function(e){a(t,e);function t(){s(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,f["default"]);this.jobs=[];this.delay=1;this.timeout_=null}n(t,[{key:"processJob_",value:function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}}},{key:"push",value:function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}}}]);return t}(f["default"]);r["default"]=l;t.exports=r["default"]},{}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=e(22);var a=i(s);var u=e(23);var f=i(u);var l=e(28);var d=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var c=function e(t,r,n){var i=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var o=new a["default"](Array.prototype.slice.call(r));var s=new Uint8Array(t.byteLength);var u=new Int32Array(s.buffer);var f=undefined;var l=undefined;var c=undefined;var p=undefined;var h=undefined;var g=undefined;var y=undefined;var _=undefined;var m=undefined;f=n[0];l=n[1];c=n[2];p=n[3];for(m=0;m<i.length;m+=4){h=d(i[m]);g=d(i[m+1]);y=d(i[m+2]);_=d(i[m+3]);o.decrypt(h,g,y,_,u,m);u[m]=d(u[m]^f);u[m+1]=d(u[m+1]^l);u[m+2]=d(u[m+2]^c);u[m+3]=d(u[m+3]^p);f=h;l=g;c=y;p=_}return s};r.decrypt=c;var p=function(){function e(t,r,n,i){o(this,e);var s=e.STEP;var a=new Int32Array(t.buffer);var u=new Uint8Array(t.byteLength);var c=0;this.asyncStream_=new f["default"];this.asyncStream_.push(this.decryptChunk_(a.subarray(c,c+s),r,n,u));for(c=s;c<a.length;c+=s){n=new Uint32Array([d(a[c-4]),d(a[c-3]),d(a[c-2]),d(a[c-1])]);this.asyncStream_.push(this.decryptChunk_(a.subarray(c,c+s),r,n,u))}this.asyncStream_.push(function(){i(null,(0,l.unpad)(u))})}n(e,[{key:"decryptChunk_",value:function e(t,r,n,i){return function(){var e=c(t,r,n);i.set(e,t.byteOffset)}}}],[{key:"STEP",get:function e(){return 32e3}}]);return e}();r.Decrypter=p;r["default"]={Decrypter:p,decrypt:c}},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=e(24);var o=e(23);var s=n(o);r["default"]={decrypt:i.decrypt,Decrypter:i.Decrypter,AsyncStream:s["default"]};t.exports=r["default"]},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(){i(this,e);this.listeners={}}n(e,[{key:"on",value:function e(t,r){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(r)}},{key:"off",value:function e(t,r){var n=undefined;if(!this.listeners[t]){return false}n=this.listeners[t].indexOf(r);this.listeners[t].splice(n,1);return n>-1}},{key:"trigger",value:function e(t){var r=undefined;var n=undefined;var i=undefined;var o=undefined;r=this.listeners[t];if(!r){return}if(arguments.length===2){i=r.length;for(n=0;n<i;++n){r[n].call(this,arguments[1])}}else{o=Array.prototype.slice.call(arguments,1);i=r.length;for(n=0;n<i;++n){r[n].apply(this,o)}}}},{key:"dispose",value:function e(){this.listeners={}}},{key:"pipe",value:function e(t){this.on("data",function(e){t.push(e)})}}]);return e}();r["default"]=o;t.exports=r["default"]},{}],27:[function(e,t,r){"use strict";var n;t.exports=function e(t){var r=n[t.byteLength%16||0],i=new Uint8Array(t.byteLength+r.length);i.set(t);i.set(r,t.byteLength);return i};n=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(e,t,r){"use strict";r.pad=e(27);r.unpad=e(29)},{}],29:[function(e,t,r){"use strict";t.exports=function e(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}},{}],30:[function(e,t,r){},{}],31:[function(e,t,r){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r)&255);return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};t.exports=n},{}],32:[function(e,t,r){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number){return r.rotl(e,8)&16711935|r.rotl(e,24)&4278255360}for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(Math.random()*256));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<e.length*32;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++){t.push((e[r]>>>4).toString(16));t.push((e[r]&15).toString(16))}return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3){var i=t[n]<<16|t[n+1]<<8|t[n+2];for(var o=0;o<4;o++)if(n*8+o*6<=t.length*8)r.push(e.charAt(i>>>6*(3-o)&63));else r.push("=")}return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<t.length;i=++n%4){if(i==0)continue;r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(t.charAt(n))>>>6-i*2)}return r}};t.exports=r})()},{}],33:[function(e,t,r){(function(r){var n=typeof r!=="undefined"?r:typeof window!=="undefined"?window:{};var i=e(30);var o;if(typeof document!=="undefined"){o=document}else{o=n["__GLOBAL_DOCUMENT_CACHE@4"];if(!o){o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i}}t.exports=o}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],34:[function(e,t,r){(function(e){var r;if(typeof window!=="undefined"){r=window}else if(typeof e!=="undefined"){r=e}else if(typeof self!=="undefined"){r=self}else{r={}}t.exports=r}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],35:[function(e,t,r){t.exports=function(e){return e!=null&&(n(e)||i(e)||!!e._isBuffer)};function n(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function i(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&n(e.slice(0,0))}},{}],36:[function(e,t,r){"use strict";var n=e(37);var i=f(n);var o=e(38);var s=f(o);var a=e(39);var u=f(a);function f(e){return e&&e.__esModule?e:{default:e}}t.exports={LineStream:i["default"],ParseStream:s["default"],Parser:u["default"]}},{}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=e(40);var o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=function(e){f(t,e);function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.buffer="";return e}n(t,[{key:"push",value:function e(t){var r=void 0;this.buffer+=t;r=this.buffer.indexOf("\n");for(;r>-1;r=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,r));this.buffer=this.buffer.substring(r+1)}}}]);return t}(o["default"]);r["default"]=l},{}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var i=false;var o=undefined;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done);n=true){r.push(a.value);if(t&&r.length===t)break}}catch(e){i=true;o=e}finally{try{if(!n&&s["return"])s["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=e(40);var s=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=function e(){var t="[^=]*";var r='"[^"]*"|[^,]*';var n="(?:"+t+")=(?:"+r+")";return new RegExp("(?:^|,)("+n+")")};var c=function e(t){var r=t.split(d());var n={};var i=r.length;var o=void 0;while(i--){if(r[i]===""){continue}o=/([^=]*)=(.*)/.exec(r[i]).slice(1);o[0]=o[0].replace(/^\s+|\s+$/g,"");o[1]=o[1].replace(/^\s+|\s+$/g,"");o[1]=o[1].replace(/^['"](.*)['"]$/g,"$1");n[o[0]]=o[1]}return n};var p=function(e){l(t,e);function t(){u(this,t);return f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}i(t,[{key:"push",value:function e(t){var r=void 0;var i=void 0;t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(t.length===0){
return}if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}if(t.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:t.slice(1)});return}t=t.replace("\r","");r=/^#EXTM3U/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"m3u"});return}r=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"inf"};if(r[1]){i.duration=parseFloat(r[1])}if(r[2]){i.title=r[2]}this.trigger("data",i);return}r=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"targetduration"};if(r[1]){i.duration=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"totalduration"};if(r[1]){i.duration=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"version"};if(r[1]){i.version=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"media-sequence"};if(r[1]){i.number=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"discontinuity-sequence"};if(r[1]){i.number=parseInt(r[1],10)}this.trigger("data",i);return}r=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"playlist-type"};if(r[1]){i.playlistType=r[1]}this.trigger("data",i);return}r=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t);if(r){i={type:"tag",tagType:"byterange"};if(r[1]){i.length=parseInt(r[1],10)}if(r[2]){i.offset=parseInt(r[2],10)}this.trigger("data",i);return}r=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t);if(r){i={type:"tag",tagType:"allow-cache"};if(r[1]){i.allowed=!/NO/.test(r[1])}this.trigger("data",i);return}r=/^#EXT-X-MAP:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"map"};if(r[1]){var o=c(r[1]);if(o.URI){i.uri=o.URI}if(o.BYTERANGE){var s=o.BYTERANGE.split("@"),a=n(s,2),u=a[0],f=a[1];i.byterange={};if(u){i.byterange.length=parseInt(u,10)}if(f){i.byterange.offset=parseInt(f,10)}}}this.trigger("data",i);return}r=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"stream-inf"};if(r[1]){i.attributes=c(r[1]);if(i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION.split("x");var d={};if(l[0]){d.width=parseInt(l[0],10)}if(l[1]){d.height=parseInt(l[1],10)}i.attributes.RESOLUTION=d}if(i.attributes.BANDWIDTH){i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)}if(i.attributes["PROGRAM-ID"]){i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10)}}this.trigger("data",i);return}r=/^#EXT-X-MEDIA:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"media"};if(r[1]){i.attributes=c(r[1])}this.trigger("data",i);return}r=/^#EXT-X-ENDLIST/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"endlist"});return}r=/^#EXT-X-DISCONTINUITY/.exec(t);if(r){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}r=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"program-date-time"};if(r[1]){i.dateTimeString=r[1];i.dateTimeObject=new Date(r[1])}this.trigger("data",i);return}r=/^#EXT-X-KEY:?(.*)$/.exec(t);if(r){i={type:"tag",tagType:"key"};if(r[1]){i.attributes=c(r[1]);if(i.attributes.IV){if(i.attributes.IV.substring(0,2).toLowerCase()==="0x"){i.attributes.IV=i.attributes.IV.substring(2)}i.attributes.IV=i.attributes.IV.match(/.{8}/g);i.attributes.IV[0]=parseInt(i.attributes.IV[0],16);i.attributes.IV[1]=parseInt(i.attributes.IV[1],16);i.attributes.IV[2]=parseInt(i.attributes.IV[2],16);i.attributes.IV[3]=parseInt(i.attributes.IV[3],16);i.attributes.IV=new Uint32Array(i.attributes.IV)}}this.trigger("data",i);return}r=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"cue-out-cont"};if(r[1]){i.data=r[1]}else{i.data=""}this.trigger("data",i);return}r=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"cue-out"};if(r[1]){i.data=r[1]}else{i.data=""}this.trigger("data",i);return}r=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t);if(r){i={type:"tag",tagType:"cue-in"};if(r[1]){i.data=r[1]}else{i.data=""}this.trigger("data",i);return}this.trigger("data",{type:"tag",data:t.slice(4)})}}]);return t}(s["default"]);r["default"]=p},{}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=e(40);var s=d(o);var a=e(37);var u=d(a);var f=e(38);var l=d(f);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var g=function(e){h(t,e);function t(){c(this,t);var e=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.lineStream=new u["default"];e.parseStream=new l["default"];e.lineStream.pipe(e.parseStream);var r=e;var i=[];var o={};var s=void 0;var a=void 0;var f=function e(){};var d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var h=0;e.manifest={allowCache:true,discontinuityStarts:[],segments:[]};e.parseStream.on("data",function(e){var t=void 0;var u=void 0;({tag:function l(){(({"allow-cache":function t(){this.manifest.allowCache=e.allowed;if(!("allowed"in e)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function t(){var t={};if("length"in e){o.byterange=t;t.length=e.length;if(!("offset"in e)){this.trigger("info",{message:"defaulting offset to zero"});e.offset=0}}if("offset"in e){o.byterange=t;t.offset=e.offset}},endlist:function e(){this.manifest.endList=true},inf:function t(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(e.duration>0){o.duration=e.duration}if(e.duration===0){o.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=i},key:function t(){if(!e.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(e.attributes.METHOD==="NONE"){a=null;return}if(!e.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(!e.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}a={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI};if(typeof e.attributes.IV!=="undefined"){a.iv=e.attributes.IV}},"media-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number});return}this.manifest.mediaSequence=e.number},"discontinuity-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number});return}this.manifest.discontinuitySequence=e.number;h=e.number},"playlist-type":function t(){if(!/VOD|EVENT/.test(e.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist});return}this.manifest.playlistType=e.playlistType},map:function t(){s={};if(e.uri){s.uri=e.uri}if(e.byterange){s.byterange=e.byterange}},"stream-inf":function t(){this.manifest.playlists=i;this.manifest.mediaGroups=this.manifest.mediaGroups||d;if(!e.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!o.attributes){o.attributes={}}n(o.attributes,e.attributes)},media:function r(){this.manifest.mediaGroups=this.manifest.mediaGroups||d;if(!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{};t=n[e.attributes["GROUP-ID"]];u={default:/yes/i.test(e.attributes.DEFAULT)};if(u["default"]){u.autoselect=true}else{u.autoselect=/yes/i.test(e.attributes.AUTOSELECT)}if(e.attributes.LANGUAGE){u.language=e.attributes.LANGUAGE}if(e.attributes.URI){u.uri=e.attributes.URI}if(e.attributes["INSTREAM-ID"]){u.instreamId=e.attributes["INSTREAM-ID"]}if(e.attributes.CHARACTERISTICS){u.characteristics=e.attributes.CHARACTERISTICS}if(e.attributes.FORCED){u.forced=/yes/i.test(e.attributes.FORCED)}t[e.attributes.NAME]=u},discontinuity:function e(){h+=1;o.discontinuity=true;this.manifest.discontinuityStarts.push(i.length)},"program-date-time":function t(){this.manifest.dateTimeString=e.dateTimeString;this.manifest.dateTimeObject=e.dateTimeObject},targetduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration});return}this.manifest.targetDuration=e.duration},totalduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration});return}this.manifest.totalDuration=e.duration},"cue-out":function t(){o.cueOut=e.data},"cue-out-cont":function t(){o.cueOutCont=e.data},"cue-in":function t(){o.cueIn=e.data}})[e.tagType]||f).call(r)},uri:function t(){o.uri=e.uri;i.push(o);if(this.manifest.targetDuration&&!("duration"in o)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});o.duration=this.manifest.targetDuration}if(a){o.key=a}o.timeline=h;if(s){o.map=s}o={}},comment:function e(){}})[e.type].call(r)});return e}i(t,[{key:"push",value:function e(t){this.lineStream.push(t)}},{key:"end",value:function e(){this.lineStream.push("\n")}}]);return t}(s["default"]);r["default"]=g},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(){i(this,e);this.listeners={}}n(e,[{key:"on",value:function e(t,r){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(r)}},{key:"off",value:function e(t,r){if(!this.listeners[t]){return false}var n=this.listeners[t].indexOf(r);this.listeners[t].splice(n,1);return n>-1}},{key:"trigger",value:function e(t){var r=this.listeners[t];var n=void 0;var i=void 0;var o=void 0;if(!r){return}if(arguments.length===2){i=r.length;for(n=0;n<i;++n){r[n].call(this,arguments[1])}}else{o=Array.prototype.slice.call(arguments,1);i=r.length;for(n=0;n<i;++n){r[n].apply(this,o)}}}},{key:"dispose",value:function e(){this.listeners={}}},{key:"pipe",value:function e(t){this.on("data",function(e){t.push(e)})}}]);return e}();r["default"]=o},{}],41:[function(e,t,r){(function(){var r=e(32),n=e(31).utf8,i=e(35),o=e(31).bin,s=function(e,t){if(e.constructor==String)if(t&&t.encoding==="binary")e=o.stringToBytes(e);else e=n.stringToBytes(e);else if(i(e))e=Array.prototype.slice.call(e,0);else if(!Array.isArray(e))e=e.toString();var a=r.bytesToWords(e),u=e.length*8,f=1732584193,l=-271733879,d=-1732584194,c=271733878;for(var p=0;p<a.length;p++){a[p]=(a[p]<<8|a[p]>>>24)&16711935|(a[p]<<24|a[p]>>>8)&4278255360}a[u>>>5]|=128<<u%32;a[(u+64>>>9<<4)+14]=u;var h=s._ff,g=s._gg,y=s._hh,_=s._ii;for(var p=0;p<a.length;p+=16){var m=f,v=l,b=d,w=c;f=h(f,l,d,c,a[p+0],7,-680876936);c=h(c,f,l,d,a[p+1],12,-389564586);d=h(d,c,f,l,a[p+2],17,606105819);l=h(l,d,c,f,a[p+3],22,-1044525330);f=h(f,l,d,c,a[p+4],7,-176418897);c=h(c,f,l,d,a[p+5],12,1200080426);d=h(d,c,f,l,a[p+6],17,-1473231341);l=h(l,d,c,f,a[p+7],22,-45705983);f=h(f,l,d,c,a[p+8],7,1770035416);c=h(c,f,l,d,a[p+9],12,-1958414417);d=h(d,c,f,l,a[p+10],17,-42063);l=h(l,d,c,f,a[p+11],22,-1990404162);f=h(f,l,d,c,a[p+12],7,1804603682);c=h(c,f,l,d,a[p+13],12,-40341101);d=h(d,c,f,l,a[p+14],17,-1502002290);l=h(l,d,c,f,a[p+15],22,1236535329);f=g(f,l,d,c,a[p+1],5,-165796510);c=g(c,f,l,d,a[p+6],9,-1069501632);d=g(d,c,f,l,a[p+11],14,643717713);l=g(l,d,c,f,a[p+0],20,-373897302);f=g(f,l,d,c,a[p+5],5,-701558691);c=g(c,f,l,d,a[p+10],9,38016083);d=g(d,c,f,l,a[p+15],14,-660478335);l=g(l,d,c,f,a[p+4],20,-405537848);f=g(f,l,d,c,a[p+9],5,568446438);c=g(c,f,l,d,a[p+14],9,-1019803690);d=g(d,c,f,l,a[p+3],14,-187363961);l=g(l,d,c,f,a[p+8],20,1163531501);f=g(f,l,d,c,a[p+13],5,-1444681467);c=g(c,f,l,d,a[p+2],9,-51403784);d=g(d,c,f,l,a[p+7],14,1735328473);l=g(l,d,c,f,a[p+12],20,-1926607734);f=y(f,l,d,c,a[p+5],4,-378558);c=y(c,f,l,d,a[p+8],11,-2022574463);d=y(d,c,f,l,a[p+11],16,1839030562);l=y(l,d,c,f,a[p+14],23,-35309556);f=y(f,l,d,c,a[p+1],4,-1530992060);c=y(c,f,l,d,a[p+4],11,1272893353);d=y(d,c,f,l,a[p+7],16,-155497632);l=y(l,d,c,f,a[p+10],23,-1094730640);f=y(f,l,d,c,a[p+13],4,681279174);c=y(c,f,l,d,a[p+0],11,-358537222);d=y(d,c,f,l,a[p+3],16,-722521979);l=y(l,d,c,f,a[p+6],23,76029189);f=y(f,l,d,c,a[p+9],4,-640364487);c=y(c,f,l,d,a[p+12],11,-421815835);d=y(d,c,f,l,a[p+15],16,530742520);l=y(l,d,c,f,a[p+2],23,-995338651);f=_(f,l,d,c,a[p+0],6,-198630844);c=_(c,f,l,d,a[p+7],10,1126891415);d=_(d,c,f,l,a[p+14],15,-1416354905);l=_(l,d,c,f,a[p+5],21,-57434055);f=_(f,l,d,c,a[p+12],6,1700485571);c=_(c,f,l,d,a[p+3],10,-1894986606);d=_(d,c,f,l,a[p+10],15,-1051523);l=_(l,d,c,f,a[p+1],21,-2054922799);f=_(f,l,d,c,a[p+8],6,1873313359);c=_(c,f,l,d,a[p+15],10,-30611744);d=_(d,c,f,l,a[p+6],15,-1560198380);l=_(l,d,c,f,a[p+13],21,1309151649);f=_(f,l,d,c,a[p+4],6,-145523070);c=_(c,f,l,d,a[p+11],10,-1120210379);d=_(d,c,f,l,a[p+2],15,718787259);l=_(l,d,c,f,a[p+9],21,-343485551);f=f+m>>>0;l=l+v>>>0;d=d+b>>>0;c=c+w>>>0}return r.endian([f,l,d,c])};s._ff=function(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t};s._gg=function(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t};s._hh=function(e,t,r,n,i,o,s){var a=e+(t^r^n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t};s._ii=function(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+(i>>>0)+s;return(a<<o|a>>>32-o)+t};s._blocksize=16;s._digestsize=16;t.exports=function(e,t){if(e===undefined||e===null)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}})()},{}],42:[function(e,t,r){"use strict";var n=e(66);var i;i=function(){var e=new Uint8Array,t=0;i.prototype.init.call(this);this.setTimestamp=function(e){t=e};this.parseId3TagSize=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],n=e[t+5],i=(n&16)>>4;if(i){return r+20}return r+10};this.parseAdtsSize=function(e,t){var r=(e[t+5]&224)>>5,n=e[t+4]<<3,i=e[t+3]&3<<11;return i|n|r};this.push=function(r){var n=0,i=0,o,s,a,u;if(e.length){u=e.length;e=new Uint8Array(r.byteLength+u);e.set(e.subarray(0,u));e.set(r,u)}else{e=r}while(e.length-i>=3){if(e[i]==="I".charCodeAt(0)&&e[i+1]==="D".charCodeAt(0)&&e[i+2]==="3".charCodeAt(0)){if(e.length-i<10){break}n=this.parseId3TagSize(e,i);if(n>e.length){break}s={type:"timed-metadata",data:e.subarray(i,i+n)};this.trigger("data",s);i+=n;continue}else if(e[i]&255===255&&(e[i+1]&240)===240){if(e.length-i<7){break}n=this.parseAdtsSize(e,i);if(n>e.length){break}a={type:"audio",data:e.subarray(i,i+n),pts:t,dts:t};this.trigger("data",a);i+=n;continue}i++}o=e.length-i;if(o>0){e=e.subarray(i)}else{e=new Uint8Array}}};i.prototype=new n;t.exports=i},{}],43:[function(e,t,r){"use strict";var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var i=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};var o=function(e,t,r){var n,i="";for(n=t;n<r;n++){i+="%"+("00"+e[n].toString(16)).slice(-2)}return i};var s=function(e,t,r){return unescape(o(e,t,r))};var a=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],n=e[t+5],i=(n&16)>>4;if(i){return r+20}return r+10};var u=function(e,t){var r=(e[t+5]&224)>>5,n=e[t+4]<<3,i=e[t+3]&3<<11;return i|n|r};var f=function(e,t){if(e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(e[t]&255===255&&(e[t+1]&240)===240){return"audio"}return null};var l=function(e){var t=0;while(t+5<e.length){if(e[t]!==255||(e[t+1]&246)!==240){t++;continue}return n[(e[t+2]&60)>>>2]}return null};var d=function(e){var t,r,n,o;t=10;if(e[5]&64){t+=4;t+=i(e.subarray(10,14))}do{r=i(e.subarray(t+4,t+8));if(r<1){return null}o=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]);if(o==="PRIV"){n=e.subarray(t+10,t+r+10);for(var a=0;a<n.byteLength;a++){if(n[a]===0){var u=s(n,0,a);if(u==="com.apple.streaming.transportStreamTimestamp"){var f=n.subarray(a+1);var l=(f[3]&1)<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2;l*=4;l+=f[7]&3;return l}break}}}t+=10;t+=r}while(t<e.byteLength);return null};t.exports={parseId3TagSize:a,parseAdtsSize:u,parseType:f,parseSampleRate:l,parseAacTimestamp:d}},{}],44:[function(e,t,r){"use strict";var n=e(66);var i;var o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=function(){var e;i.prototype.init.call(this);this.push=function(t){var r=0,n=0,i,s,a,u,f,l;if(t.type!=="audio"){return}if(e){u=e;e=new Uint8Array(u.byteLength+t.data.byteLength);e.set(u);e.set(t.data,u.byteLength)}else{e=t.data}while(r+5<e.length){if(e[r]!==255||(e[r+1]&246)!==240){r++;continue}s=(~e[r+1]&1)*2;i=(e[r+3]&3)<<11|e[r+4]<<3|(e[r+5]&224)>>5;f=((e[r+6]&3)+1)*1024;l=f*9e4/o[(e[r+2]&60)>>>2];a=r+i;if(e.byteLength<a){return}this.trigger("data",{pts:t.pts+n*l,dts:t.dts+n*l,sampleCount:f,audioobjecttype:(e[r+2]>>>6&3)+1,channelcount:(e[r+2]&1)<<2|(e[r+3]&192)>>>6,samplerate:o[(e[r+2]&60)>>>2],samplingfrequencyindex:(e[r+2]&60)>>>2,samplesize:16,data:e.subarray(r+7+s,a)});if(e.byteLength===a){e=undefined;return}n++;e=e.subarray(a)}};this.flush=function(){this.trigger("done")}};i.prototype=new n;t.exports=i},{}],45:[function(e,t,r){"use strict";var n=e(66);var i=e(65);var o,s;var a;s=function(){var e=0,t,r;s.prototype.init.call(this);this.push=function(n){var i;if(!r){r=n.data}else{i=new Uint8Array(r.byteLength+n.data.byteLength);i.set(r);i.set(n.data,r.byteLength);r=i}for(;e<r.byteLength-3;e++){if(r[e+2]===1){t=e+5;break}}while(t<r.byteLength){switch(r[t]){case 0:if(r[t-1]!==0){t+=2;break}else if(r[t-2]!==0){t++;break}if(e+3!==t-2){this.trigger("data",r.subarray(e+3,t-2))}do{t++}while(r[t]!==1&&t<r.length);e=t-2;t+=3;break;case 1:if(r[t-1]!==0||r[t-2]!==0){t+=3;break}this.trigger("data",r.subarray(e+3,t-2));e=t-2;t+=3;break;default:t+=3;break}}r=r.subarray(e);t-=e;e=0};this.flush=function(){if(r&&r.byteLength>3){this.trigger("data",r.subarray(e+3))}r=null;e=0;this.trigger("done")}};s.prototype=new n;a={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};o=function(){var e=new s,t,r,n,u,f,l,d;o.prototype.init.call(this);t=this;this.push=function(t){if(t.type!=="video"){return}r=t.trackId;n=t.pts;u=t.dts;e.push(t)};e.on("data",function(e){var i={trackId:r,pts:n,dts:u,data:e};switch(e[0]&31){case 5:i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:i.nalUnitType="sei_rbsp";i.escapedRBSP=f(e.subarray(1));break;case 7:i.nalUnitType="seq_parameter_set_rbsp";i.escapedRBSP=f(e.subarray(1));i.config=l(i.escapedRBSP);break;case 8:i.nalUnitType="pic_parameter_set_rbsp";break;case 9:i.nalUnitType="access_unit_delimiter_rbsp";break;default:break}t.trigger("data",i)});e.on("done",function(){t.trigger("done")});this.flush=function(){e.flush()};d=function(e,t){var r=8,n=8,i,o;for(i=0;i<e;i++){if(n!==0){o=t.readExpGolomb();n=(r+o+256)%256}r=n===0?r:n}};f=function(e){var t=e.byteLength,r=[],n=1,i,o;while(n<t-2){if(e[n]===0&&e[n+1]===0&&e[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return e}i=t-r.length;o=new Uint8Array(i);var s=0;for(n=0;n<i;s++,n++){if(s===r[0]){s++;r.shift()}o[n]=e[s]}return o};l=function(e){var t=0,r=0,n=0,o=0,s=1,u,f,l,c,p,h,g,y,_,m,v,b,w,S;u=new i(e);f=u.readUnsignedByte();c=u.readUnsignedByte();l=u.readUnsignedByte();u.skipUnsignedExpGolomb();if(a[f]){p=u.readUnsignedExpGolomb();if(p===3){u.skipBits(1)}u.skipUnsignedExpGolomb();u.skipUnsignedExpGolomb();u.skipBits(1);if(u.readBoolean()){v=p!==3?8:12;for(S=0;S<v;S++){if(u.readBoolean()){if(S<6){d(16,u)}else{d(64,u)}}}}}u.skipUnsignedExpGolomb();h=u.readUnsignedExpGolomb();if(h===0){u.readUnsignedExpGolomb()}else if(h===1){u.skipBits(1);u.skipExpGolomb();u.skipExpGolomb();g=u.readUnsignedExpGolomb();for(S=0;S<g;S++){u.skipExpGolomb()}}u.skipUnsignedExpGolomb();u.skipBits(1);y=u.readUnsignedExpGolomb();_=u.readUnsignedExpGolomb();m=u.readBits(1);if(m===0){u.skipBits(1)}u.skipBits(1);if(u.readBoolean()){t=u.readUnsignedExpGolomb();r=u.readUnsignedExpGolomb();n=u.readUnsignedExpGolomb();o=u.readUnsignedExpGolomb()}if(u.readBoolean()){if(u.readBoolean()){w=u.readUnsignedByte();switch(w){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:{b=[u.readUnsignedByte()<<8|u.readUnsignedByte(),u.readUnsignedByte()<<8|u.readUnsignedByte()];break}}if(b){s=b[0]/b[1]}}}return{profileIdc:f,levelIdc:l,profileCompatibility:c,width:Math.ceil(((y+1)*16-t*2-r*2)*s),height:(2-m)*(_+1)*16-n*2-o*2}}};o.prototype=new n;t.exports={H264Stream:o,NalByteStream:s}},{}],46:[function(e,t,r){var n=[33,16,5,32,164,27];var i=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var o=function(e){var t=[];while(e--){t.push(0)}return t};var s=function(e){return Object.keys(e).reduce(function(t,r){t[r]=new Uint8Array(e[r].reduce(function(e,t){return e.concat(t)},[]));return t},{})};var a={96e3:[n,[227,64],o(154),[56]],88200:[n,[231],o(170),[56]],64e3:[n,[248,192],o(240),[56]],48e3:[n,[255,192],o(268),[55,148,128],o(54),[112]],44100:[n,[255,192],o(268),[55,163,128],o(84),[112]],32e3:[n,[255,192],o(268),[55,234],o(226),[112]],24e3:[n,[255,192],o(268),[55,255,128],o(268),[111,112],o(126),[224]],16e3:[n,[255,192],o(268),[55,255,128],o(268),[111,255],o(269),[223,108],o(195),[1,192]],12e3:[i,o(268),[3,127,248],o(268),[6,255,240],o(268),[13,255,224],o(268),[27,253,128],o(259),[56]],11025:[i,o(268),[3,127,248],o(268),[6,255,240],o(268),[13,255,224],o(268),[27,255,192],o(268),[55,175,128],o(108),[112]],8e3:[i,o(268),[3,121,16],o(47),[7]]};t.exports=s(a)},{}],47:[function(e,t,r){"use strict";var n=e(66);var i=function(e){this.numberOfTracks=0;this.metadataStream=e.metadataStream;this.videoTags=[];this.audioTags=[];this.videoTrack=null;this.audioTrack=null;this.pendingCaptions=[];this.pendingMetadata=[];this.pendingTracks=0;this.processedTracks=0;i.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}if(e.track.type==="video"){this.videoTrack=e.track;this.videoTags=e.tags;this.pendingTracks++}if(e.track.type==="audio"){this.audioTrack=e.track;this.audioTags=e.tags;this.pendingTracks++}}};i.prototype=new n;i.prototype.flush=function(e){var t,r,n,i,o={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.pendingTracks===0){this.processedTracks++;if(this.processedTracks<this.numberOfTracks){return}}}this.processedTracks+=this.pendingTracks;this.pendingTracks=0;if(this.processedTracks<this.numberOfTracks){return}if(this.videoTrack){i=this.videoTrack.timelineStartInfo.pts}else if(this.audioTrack){i=this.audioTrack.timelineStartInfo.pts}o.tags.videoTags=this.videoTags;o.tags.audioTags=this.audioTags;for(n=0;n<this.pendingCaptions.length;n++){r=this.pendingCaptions[n];r.startTime=r.startPts-i;r.startTime/=9e4;r.endTime=r.endPts-i;r.endTime/=9e4;o.captionStreams[r.stream]=true;o.captions.push(r)}for(n=0;n<this.pendingMetadata.length;n++){t=this.pendingMetadata[n];t.cueTime=t.pts-i;t.cueTime/=9e4;o.metadata.push(t)}o.metadata.dispatchType=this.metadataStream.dispatchType;this.videoTrack=null;this.audioTrack=null;this.videoTags=[];this.audioTags=[];this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.pendingTracks=0;this.processedTracks=0;this.trigger("data",o);this.trigger("done")};t.exports=i},{}],48:[function(e,t,r){"use strict";var n=e(49);var i=function(e,t,r){var i=new Uint8Array(3+1+1+4),o=new DataView(i.buffer),s,a,u;e=e||0;t=t===undefined?true:t;r=r===undefined?true:r;o.setUint8(0,70);o.setUint8(1,76);o.setUint8(2,86);o.setUint8(3,1);o.setUint8(4,(t?4:0)|(r?1:0));o.setUint32(5,i.byteLength);if(e<=0){a=new Uint8Array(i.byteLength+4);a.set(i);a.set([0,0,0,0],i.byteLength);return a}s=new n(n.METADATA_TAG);s.pts=s.dts=0;s.writeMetaDataDouble("duration",e);u=s.finalize().length;a=new Uint8Array(i.byteLength+u);a.set(i);a.set(o.byteLength,u);return a};t.exports=i},{}],49:[function(e,t,r){"use strict";var n;n=function(e,t){var r=0,i=16384,o=function(e,t){var r,n=e.position+t;if(n<e.bytes.byteLength){return}r=new Uint8Array(n*2);r.set(e.bytes.subarray(0,e.position),0);e.bytes=r;e.view=new DataView(e.bytes.buffer)},s=n.widthBytes||new Uint8Array("width".length),a=n.heightBytes||new Uint8Array("height".length),u=n.videocodecidBytes||new Uint8Array("videocodecid".length),f;if(!n.widthBytes){for(f=0;f<"width".length;f++){s[f]="width".charCodeAt(f)}for(f=0;f<"height".length;f++){a[f]="height".charCodeAt(f)}for(f=0;f<"videocodecid".length;f++){u[f]="videocodecid".charCodeAt(f)}n.widthBytes=s;n.heightBytes=a;n.videocodecidBytes=u}this.keyFrame=false;switch(e){case n.VIDEO_TAG:this.length=16;i*=6;break;case n.AUDIO_TAG:this.length=13;this.keyFrame=true;break;case n.METADATA_TAG:this.length=29;this.keyFrame=true;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(i);this.view=new DataView(this.bytes.buffer);this.bytes[0]=e;this.position=this.length;this.keyFrame=t;this.pts=0;this.dts=0;this.writeBytes=function(e,t,r){var n=t||0,i;r=r||e.byteLength;i=n+r;o(this,r);this.bytes.set(e.subarray(n,i),this.position);this.position+=r;this.length=Math.max(this.length,this.position)};this.writeByte=function(e){o(this,1);this.bytes[this.position]=e;this.position++;this.length=Math.max(this.length,this.position)};this.writeShort=function(e){o(this,2);this.view.setUint16(this.position,e);this.position+=2;this.length=Math.max(this.length,this.position)};this.negIndex=function(e){return this.bytes[this.length-e]};this.nalUnitSize=function(){if(r===0){return 0}return this.length-(r+4)};this.startNalUnit=function(){if(r>0){throw new Error("Attempted to create new NAL wihout closing the old one")}r=this.length;this.length+=4;this.position=this.length};this.endNalUnit=function(e){var t,n;if(this.length===r+4){this.length-=4}else if(r>0){t=r+4;n=this.length-t;this.position=r;this.view.setUint32(this.position,n);this.position=this.length;if(e){e.push(this.bytes.subarray(t,t+n))}}r=0};this.writeMetaDataDouble=function(e,t){var n;o(this,2+e.length+9);this.view.setUint16(this.position,e.length);this.position+=2;if(e==="width"){this.bytes.set(s,this.position);this.position+=5}else if(e==="height"){this.bytes.set(a,this.position);this.position+=6}else if(e==="videocodecid"){this.bytes.set(u,this.position);this.position+=12}else{for(n=0;n<e.length;n++){this.bytes[this.position]=e.charCodeAt(n);this.position++}}this.position++;this.view.setFloat64(this.position,t);this.position+=8;this.length=Math.max(this.length,this.position);++r};this.writeMetaDataBoolean=function(e,t){var n;o(this,2);this.view.setUint16(this.position,e.length);this.position+=2;for(n=0;n<e.length;n++){o(this,1);this.bytes[this.position]=e.charCodeAt(n);this.position++}o(this,2);this.view.setUint8(this.position,1);this.position++;this.view.setUint8(this.position,t?1:0);this.position++;this.length=Math.max(this.length,this.position);++r};this.finalize=function(){var e,i;switch(this.bytes[0]){case n.VIDEO_TAG:this.bytes[11]=(this.keyFrame||t?16:32)|7;this.bytes[12]=t?0:1;e=this.pts-this.dts;this.bytes[13]=(e&16711680)>>>16;this.bytes[14]=(e&65280)>>>8;this.bytes[15]=(e&255)>>>0;break;case n.AUDIO_TAG:this.bytes[11]=175;this.bytes[12]=t?0:1;break;case n.METADATA_TAG:this.position=11;this.view.setUint8(this.position,2);this.position++;this.view.setUint16(this.position,10);this.position+=2;this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position);this.position+=10;this.bytes[this.position]=8;this.position++;this.view.setUint32(this.position,r);this.position=this.length;this.bytes.set([0,0,9],this.position);this.position+=3;this.length=this.position;break}i=this.length-11;this.bytes[1]=(i&16711680)>>>16;this.bytes[2]=(i&65280)>>>8;this.bytes[3]=(i&255)>>>0;this.bytes[4]=(this.dts&16711680)>>>16;this.bytes[5]=(this.dts&65280)>>>8;this.bytes[6]=(this.dts&255)>>>0;this.bytes[7]=(this.dts&4278190080)>>>24;this.bytes[8]=0;this.bytes[9]=0;this.bytes[10]=0;o(this,4);this.view.setUint32(this.length,this.length);this.length+=4;this.position+=4;this.bytes=this.bytes.subarray(0,this.length);this.frameTime=n.frameTime(this.bytes);return this}};n.AUDIO_TAG=8;n.VIDEO_TAG=9;n.METADATA_TAG=18;n.isAudioFrame=function(e){return n.AUDIO_TAG===e[0]};n.isVideoFrame=function(e){return n.VIDEO_TAG===e[0]};n.isMetaData=function(e){return n.METADATA_TAG===e[0]};n.isKeyFrame=function(e){if(n.isVideoFrame(e)){return e[11]===23}if(n.isAudioFrame(e)){return true}if(n.isMetaData(e)){return true}return false};n.frameTime=function(e){var t=e[4]<<16;t|=e[5]<<8;t|=e[6]<<0;t|=e[7]<<24;return t};t.exports=n},{}],50:[function(e,t,r){t.exports={tag:e(49),Transmuxer:e(52),getFlvHeader:e(48)}},{}],51:[function(e,t,r){"use strict";var n=function(){var e=this;this.list=[];this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})};Object.defineProperty(this,"length",{get:function(){return e.list.length}})};t.exports=n},{}],52:[function(e,t,r){"use strict";var n=e(66);var i=e(49);var o=e(54);var s=e(44);var a=e(45).H264Stream;var u=e(47);var f=e(51);var l,d,c,p,h,g;p=function(e,t){if(typeof t.pts==="number"){if(e.timelineStartInfo.pts===undefined){e.timelineStartInfo.pts=t.pts}else{e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)}}if(typeof t.dts==="number"){if(e.timelineStartInfo.dts===undefined){e.timelineStartInfo.dts=t.dts}else{e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts)}}};h=function(e,t){var r=new i(i.METADATA_TAG);r.dts=t;r.pts=t;r.writeMetaDataDouble("videocodecid",7);r.writeMetaDataDouble("width",e.width);r.writeMetaDataDouble("height",e.height);return r};g=function(e,t){var r,n=new i(i.VIDEO_TAG,true);n.dts=t;n.pts=t;n.writeByte(1);n.writeByte(e.profileIdc);n.writeByte(e.profileCompatibility);n.writeByte(e.levelIdc);n.writeByte(252|3);n.writeByte(224|1);n.writeShort(e.sps[0].length);n.writeBytes(e.sps[0]);n.writeByte(e.pps.length);for(r=0;r<e.pps.length;++r){n.writeShort(e.pps[r].length);n.writeBytes(e.pps[r])}return n};c=function(e){var t=[],r=[],n;c.prototype.init.call(this);this.push=function(r){p(e,r);if(e){e.audioobjecttype=r.audioobjecttype;e.channelcount=r.channelcount;e.samplerate=r.samplerate;e.samplingfrequencyindex=r.samplingfrequencyindex;e.samplesize=r.samplesize;e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3}r.pts=Math.round(r.pts/90);r.dts=Math.round(r.dts/90);t.push(r)
};this.flush=function(){var o,s,a,u=new f;if(t.length===0){this.trigger("done","AudioSegmentStream");return}a=-Infinity;while(t.length){o=t.shift();if(r.length&&o.pts>=r[0]){a=r.shift();this.writeMetaDataTags(u,a)}if(e.extraData!==n||o.pts-a>=1e3){this.writeMetaDataTags(u,o.pts);n=e.extraData;a=o.pts}s=new i(i.AUDIO_TAG);s.pts=o.pts;s.dts=o.dts;s.writeBytes(o.data);u.push(s.finalize())}r.length=0;n=null;this.trigger("data",{track:e,tags:u.list});this.trigger("done","AudioSegmentStream")};this.writeMetaDataTags=function(t,r){var n;n=new i(i.METADATA_TAG);n.pts=r;n.dts=r;n.writeMetaDataDouble("audiocodecid",10);n.writeMetaDataBoolean("stereo",e.channelcount===2);n.writeMetaDataDouble("audiosamplerate",e.samplerate);n.writeMetaDataDouble("audiosamplesize",16);t.push(n.finalize());n=new i(i.AUDIO_TAG,true);n.pts=r;n.dts=r;n.view.setUint16(n.position,e.extraData);n.position+=2;n.length=Math.max(n.length,n.position);t.push(n.finalize())};this.onVideoKeyFrame=function(e){r.push(e)}};c.prototype=new n;d=function(e){var t=[],r,n;d.prototype.init.call(this);this.finishFrame=function(t,i){if(!i){return}if(r&&e&&e.newMetadata&&(i.keyFrame||t.length===0)){var o=h(r,i.dts).finalize();var s=g(e,i.dts).finalize();o.metaDataTag=s.metaDataTag=true;t.push(o);t.push(s);e.newMetadata=false;this.trigger("keyframe",i.dts)}i.endNalUnit();t.push(i.finalize());n=null};this.push=function(r){p(e,r);r.pts=Math.round(r.pts/90);r.dts=Math.round(r.dts/90);t.push(r)};this.flush=function(){var o,s=new f;while(t.length){if(t[0].nalUnitType==="access_unit_delimiter_rbsp"){break}t.shift()}if(t.length===0){this.trigger("done","VideoSegmentStream");return}while(t.length){o=t.shift();if(o.nalUnitType==="seq_parameter_set_rbsp"){e.newMetadata=true;r=o.config;e.width=r.width;e.height=r.height;e.sps=[o.data];e.profileIdc=r.profileIdc;e.levelIdc=r.levelIdc;e.profileCompatibility=r.profileCompatibility;n.endNalUnit()}else if(o.nalUnitType==="pic_parameter_set_rbsp"){e.newMetadata=true;e.pps=[o.data];n.endNalUnit()}else if(o.nalUnitType==="access_unit_delimiter_rbsp"){if(n){this.finishFrame(s,n)}n=new i(i.VIDEO_TAG);n.pts=o.pts;n.dts=o.dts}else{if(o.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){n.keyFrame=true}n.endNalUnit()}n.startNalUnit();n.writeBytes(o.data)}if(n){this.finishFrame(s,n)}this.trigger("data",{track:e,tags:s.list});this.trigger("done","VideoSegmentStream")}};d.prototype=new n;l=function(e){var t=this,r,n,i,f,p,h,g,y,_,m,v,b;l.prototype.init.call(this);e=e||{};this.metadataStream=new o.MetadataStream;e.metadataStream=this.metadataStream;r=new o.TransportPacketStream;n=new o.TransportParseStream;i=new o.ElementaryStream;f=new o.TimestampRolloverStream("video");p=new o.TimestampRolloverStream("audio");h=new o.TimestampRolloverStream("timed-metadata");g=new s;y=new a;b=new u(e);r.pipe(n).pipe(i);i.pipe(f).pipe(y);i.pipe(p).pipe(g);i.pipe(h).pipe(this.metadataStream).pipe(b);v=new o.CaptionStream;y.pipe(v).pipe(b);i.on("data",function(e){var t,r,n;if(e.type==="metadata"){t=e.tracks.length;while(t--){if(e.tracks[t].type==="video"){r=e.tracks[t]}else if(e.tracks[t].type==="audio"){n=e.tracks[t]}}if(r&&!_){b.numberOfTracks++;_=new d(r);y.pipe(_).pipe(b)}if(n&&!m){b.numberOfTracks++;m=new c(n);g.pipe(m).pipe(b);if(_){_.on("keyframe",m.onVideoKeyFrame)}}}});this.push=function(e){r.push(e)};this.flush=function(){r.flush()};this.resetCaptions=function(){v.reset()};b.on("data",function(e){t.trigger("data",e)});b.on("done",function(){t.trigger("done")})};l.prototype=new n;t.exports=l},{}],53:[function(e,t,r){"use strict";var n=4,i=128,o=e(66);var s=function(e){var t=0,r={payloadType:-1,payloadSize:0},o=0,s=0;while(t<e.byteLength){if(e[t]===i){break}while(e[t]===255){o+=255;t++}o+=e[t++];while(e[t]===255){s+=255;t++}s+=e[t++];if(!r.payload&&o===n){r.payloadType=o;r.payloadSize=s;r.payload=e.subarray(t,t+s);break}t+=s;o=0;s=0}return r};var a=function(e){if(e.payload[0]!==181){return null}if((e.payload[1]<<8|e.payload[2])!==49){return null}if(String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])!=="GA94"){return null}if(e.payload[7]!==3){return null}return e.payload.subarray(8,e.payload.length-1)};var u=function(e,t){var r=[],n,i,o,s;if(!(t[0]&64)){return r}i=t[0]&31;for(n=0;n<i;n++){o=n*3;s={type:t[o+2]&3,pts:e};if(t[o+2]&4){s.ccData=t[o+3]<<8|t[o+4];r.push(s)}}return r};var f={push:function(){}};var l=function(){l.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new y(0,0),new y(0,1),new y(1,0),new y(1,1)];this.reset();this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))},this)};l.prototype=new o;l.prototype.push=function(e){var t,r;if(e.nalUnitType!=="sei_rbsp"){return}t=s(e.escapedRBSP);if(t.payloadType!==n){return}r=a(t);if(!r){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.ignoreNextEqualDts_=false;return}this.captionPackets_=this.captionPackets_.concat(u(e.pts,r));this.latestDts_=e.dts};l.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(e){e.flush()},this);return}this.captionPackets_.forEach(function(e,t){e.presortIndex=t});this.captionPackets_.sort(function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts});this.captionPackets_.forEach(function(e){if(e.type<2){this.dispatchCea608Packet(e)}},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(e){e.flush()},this);return};l.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.activeCea608Channel_=null;this.activeCea608Streams_=[f,f];this.ccStreams_.forEach(function(e){e.reset()})};l.prototype.dispatchCea608Packet=function(e){if(this.setsChannel1Active(e)&&this.activeCea608Channel_!==1){this.activeCea608Channel_=1;this.activeCea608Streams_=[this.ccStreams_[0],this.ccStreams_[2]]}else if(this.setsChannel2Active(e)&&this.activeCea608Channel_!==2){this.activeCea608Channel_=2;this.activeCea608Streams_=[this.ccStreams_[1],this.ccStreams_[3]]}this.activeCea608Streams_[e.type].push(e)};l.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};l.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};var d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var c=function(e){if(e===null){return""}e=d[e]||e;return String.fromCharCode(e)};var p=14;var h=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var g=function(){var e=[],t=p+1;while(t--){e.push("")}return e};var y=function(e,t){y.prototype.init.call(this);this.field_=e||0;this.dataChannel_=t||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,r,n,i,o;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}n=t>>>8;i=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);r=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=r;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.topRow_=p-1;this.mode_="rollUp"}else if(t===this.ROLL_UP_3_ROWS_){this.topRow_=p-2;this.mode_="rollUp"}else if(t===this.ROLL_UP_4_ROWS_){this.topRow_=p-3;this.mode_="rollUp"}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[p]=this.nonDisplayed_[p].slice(0,-1)}else{this.displayed_[p]=this.displayed_[p].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=g()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=g()}else if(t===this.RESUME_DIRECT_CAPTIONING_){this.mode_="paintOn"}else if(this.isSpecialCharacter(n,i)){n=(n&3)<<8;o=c(n|i);this[this.mode_](e.pts,o);this.column_++}else if(this.isExtCharacter(n,i)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[p]=this.displayed_[p].slice(0,-1)}n=(n&3)<<8;o=c(n|i);this[this.mode_](e.pts,o);this.column_++}else if(this.isMidRowCode(n,i)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((i&14)===14){this.addFormatting(e.pts,["i"])}if((i&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(n,i)){this.column_+=i&3}else if(this.isPAC(n,i)){var s=h.indexOf(t&7968);if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(i&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(i)){if((i&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(n)){if(i===0){i=null}o=c(n);o+=c(i);this[this.mode_](e.pts,o);this.column_+=o.length}}};y.prototype=new o;y.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};y.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=g();this.nonDisplayed_=g();this.lastControlCode_=null;this.column_=0;this.row_=p;this.formatting_=[]};y.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};y.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};y.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&(t>=32&&t<=63)};y.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&(t>=32&&t<=47)};y.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&(t>=33&&t<=35)};y.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&(t>=64&&t<=127)};y.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};y.prototype.isNormalChar=function(e){return e>=32&&e<=127};y.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var r=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,r)};y.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[];this[this.mode_](e,t)};y.prototype.popOn=function(e,t){var r=this.nonDisplayed_[this.row_];r+=t;this.nonDisplayed_[this.row_]=r};y.prototype.rollUp=function(e,t){var r=this.displayed_[p];r+=t;this.displayed_[p]=r};y.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.topRow_;e<p;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[p]=""};y.prototype.paintOn=function(){};t.exports={CaptionStream:l,Cea608Stream:y}},{}],54:[function(e,t,r){"use strict";var n=e(66),i=e(53),o=e(57),s=e(58).TimestampRolloverStream;var a=e(57);var u,f,l;var d=188,c=71;u=function(){var e=new Uint8Array(d),t=0;u.prototype.init.call(this);this.push=function(r){var n=0,i=d,o;if(t){o=new Uint8Array(r.byteLength+t);o.set(e.subarray(0,t));o.set(r,t);t=0}else{o=r}while(i<o.byteLength){if(o[n]===c&&o[i]===c){this.trigger("data",o.subarray(n,i));n+=d;i+=d;continue}n++;i++}if(n<o.byteLength){e.set(o.subarray(n),0);t=o.byteLength-n}};this.flush=function(){if(t===d&&e[0]===c){this.trigger("data",e);t=0}this.trigger("done")}};u.prototype=new n;f=function(){var e,t,r,n;f.prototype.init.call(this);n=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;e=function(e,n){var i=0;if(n.payloadUnitStartIndicator){i+=e[i]+1}if(n.type==="pat"){t(e.subarray(i),n)}else{r(e.subarray(i),n)}};t=function(e,t){t.section_number=e[7];t.last_section_number=e[8];n.pmtPid=(e[10]&31)<<8|e[11];t.pmtPid=n.pmtPid};r=function(e,t){var r,i,o,s;if(!(e[5]&1)){return}n.programMapTable={};r=(e[1]&15)<<8|e[2];i=3+r-4;o=(e[10]&15)<<8|e[11];s=12+o;while(s<i){n.programMapTable[(e[s+1]&31)<<8|e[s+2]]=e[s];s+=((e[s+3]&15)<<8|e[s+4])+5}t.programMapTable=n.programMapTable;while(n.packetsWaitingForPmt.length){n.processPes_.apply(n,n.packetsWaitingForPmt.shift())}};this.push=function(t){var r={},n=4;r.payloadUnitStartIndicator=!!(t[1]&64);r.pid=t[1]&31;r.pid<<=8;r.pid|=t[2];if((t[3]&48)>>>4>1){n+=t[n]+1}if(r.pid===0){r.type="pat";e(t.subarray(n),r);this.trigger("data",r)}else if(r.pid===this.pmtPid){r.type="pmt";e(t.subarray(n),r);this.trigger("data",r)}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([t,n,r])}else{this.processPes_(t,n,r)}};this.processPes_=function(e,t,r){r.streamType=this.programMapTable[r.pid];r.type="pes";r.data=e.subarray(t);this.trigger("data",r)}};f.prototype=new n;f.STREAM_TYPES={h264:27,adts:15};l=function(){var e=this,t={data:[],size:0},r={data:[],size:0},n={data:[],size:0},i=function(e,t){var r;t.packetLength=6+(e[4]<<8|e[5]);t.dataAlignmentIndicator=(e[6]&4)!==0;r=e[7];if(r&192){t.pts=(e[9]&14)<<27|(e[10]&255)<<20|(e[11]&254)<<12|(e[12]&255)<<5|(e[13]&254)>>>3;t.pts*=4;t.pts+=(e[13]&6)>>>1;t.dts=t.pts;if(r&64){t.dts=(e[14]&14)<<27|(e[15]&255)<<20|(e[16]&254)<<12|(e[17]&255)<<5|(e[18]&254)>>>3;t.dts*=4;t.dts+=(e[18]&6)>>>1}}t.data=e.subarray(9+e[8])},s=function(t,r,n){var o=new Uint8Array(t.size),s={type:r},a=0,u=0,f=false,l;if(!t.data.length||t.size<9){return}s.trackId=t.data[0].pid;for(a=0;a<t.data.length;a++){l=t.data[a];o.set(l.data,u);u+=l.data.byteLength}i(o,s);f=r==="video"||s.packetLength===t.size;if(n||f){t.size=0;t.data.length=0}if(f){e.trigger("data",s)}};l.prototype.init.call(this);this.push=function(i){({pat:function(){},pes:function(){var e,u;switch(i.streamType){case o.H264_STREAM_TYPE:case a.H264_STREAM_TYPE:e=t;u="video";break;case o.ADTS_STREAM_TYPE:e=r;u="audio";break;case o.METADATA_STREAM_TYPE:e=n;u="timed-metadata";break;default:return}if(i.payloadUnitStartIndicator){s(e,u,true)}e.data.push(i);e.size+=i.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},r=i.programMapTable,n,o;for(n in r){if(r.hasOwnProperty(n)){o={timelineStartInfo:{baseMediaDecodeTime:0}};o.id=+n;if(r[n]===a.H264_STREAM_TYPE){o.codec="avc";o.type="video"}else if(r[n]===a.ADTS_STREAM_TYPE){o.codec="adts";o.type="audio"}t.tracks.push(o)}}e.trigger("data",t)}})[i.type]()};this.flush=function(){s(t,"video");s(r,"audio");s(n,"timed-metadata");this.trigger("done")}};l.prototype=new n;var p={PAT_PID:0,MP2T_PACKET_LENGTH:d,TransportPacketStream:u,TransportParseStream:f,ElementaryStream:l,TimestampRolloverStream:s,CaptionStream:i.CaptionStream,Cea608Stream:i.Cea608Stream,MetadataStream:e(55)};for(var h in o){if(o.hasOwnProperty(h)){p[h]=o[h]}}t.exports=p},{}],55:[function(e,t,r){"use strict";var n=e(66),i=e(57),o=function(e,t,r){var n,i="";for(n=t;n<r;n++){i+="%"+("00"+e[n].toString(16)).slice(-2)}return i},s=function(e,t,r){return decodeURIComponent(o(e,t,r))},a=function(e,t,r){return unescape(o(e,t,r))},u=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},f={TXXX:function(e){var t;if(e.data[0]!==3){return}for(t=1;t<e.data.length;t++){if(e.data[t]===0){e.description=s(e.data,1,t);e.value=s(e.data,t+1,e.data.length).replace(/\0*$/,"");break}}e.data=e.value},WXXX:function(e){var t;if(e.data[0]!==3){return}for(t=1;t<e.data.length;t++){if(e.data[t]===0){e.description=s(e.data,1,t);e.url=s(e.data,t+1,e.data.length);break}}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++){if(e.data[t]===0){e.owner=a(e.data,0,t);break}}e.privateData=e.data.subarray(t+1);e.data=e.privateData}},l;l=function(e){var t={debug:!!(e&&e.debug),descriptor:e&&e.descriptor},r=0,n=[],o=0,s;l.prototype.init.call(this);this.dispatchType=i.METADATA_STREAM_TYPE.toString(16);if(t.descriptor){for(s=0;s<t.descriptor.length;s++){this.dispatchType+=("00"+t.descriptor[s].toString(16)).slice(-2)}}this.push=function(e){var i,s,a,l,d,c;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){o=0;n.length=0}if(n.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(t.debug){console.log("Skipping unrecognized metadata packet")}return}n.push(e);o+=e.data.byteLength;if(n.length===1){r=u(e.data.subarray(6,10));r+=10}if(o<r){return}i={data:new Uint8Array(r),frames:[],pts:n[0].pts,dts:n[0].dts};for(d=0;d<r;){i.data.set(n[0].data.subarray(0,r-d),d);d+=n[0].data.byteLength;o-=n[0].data.byteLength;n.shift()}s=10;if(i.data[5]&64){s+=4;s+=u(i.data.subarray(10,14));r-=u(i.data.subarray(16,20))}do{a=u(i.data.subarray(s+4,s+8));if(a<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}c=String.fromCharCode(i.data[s],i.data[s+1],i.data[s+2],i.data[s+3]);l={id:c,data:i.data.subarray(s+10,s+a+10)};l.key=l.id;if(f[l.id]){f[l.id](l);if(l.owner==="com.apple.streaming.transportStreamTimestamp"){var p=l.data,h=(p[3]&1)<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]>>>2;h*=4;h+=p[7]&3;l.timeStamp=h;if(i.pts===undefined&&i.dts===undefined){i.pts=l.timeStamp;i.dts=l.timeStamp}this.trigger("timestamp",l)}}i.frames.push(l);s+=10;s+=a}while(s<r);this.trigger("data",i)}};l.prototype=new n;t.exports=l},{}],56:[function(e,t,r){"use strict";var n=e(57);var i=function(e){var t=e[1]&31;t<<=8;t|=e[2];return t};var o=function(e){return!!(e[1]&64)};var s=function(e){var t=0;if((e[3]&48)>>>4>1){t+=e[4]+1}return t};var a=function(e,t){var r=i(e);if(r===0){return"pat"}else if(r===t){return"pmt"}else if(t){return"pes"}return null};var u=function(e){var t=o(e);var r=4+s(e);if(t){r+=e[r]+1}return(e[r+10]&31)<<8|e[r+11]};var f=function(e){var t={};var r=o(e);var n=4+s(e);if(r){n+=e[n]+1}if(!(e[n+5]&1)){return}var i,a,u;i=(e[n+1]&15)<<8|e[n+2];a=3+i-4;u=(e[n+10]&15)<<8|e[n+11];var f=12+u;while(f<a){var l=n+f;t[(e[l+1]&31)<<8|e[l+2]]=e[l];f+=((e[l+3]&15)<<8|e[l+4])+5}return t};var l=function(e,t){var r=i(e);var o=t[r];switch(o){case n.H264_STREAM_TYPE:return"video";case n.ADTS_STREAM_TYPE:return"audio";case n.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var d=function(e){var t=o(e);if(!t){return null}var r=4+s(e);if(r>=e.byteLength){return null}var n=null;var i;i=e[r+7];if(i&192){n={};n.pts=(e[r+9]&14)<<27|(e[r+10]&255)<<20|(e[r+11]&254)<<12|(e[r+12]&255)<<5|(e[r+13]&254)>>>3;n.pts*=4;n.pts+=(e[r+13]&6)>>>1;n.dts=n.pts;if(i&64){n.dts=(e[r+14]&14)<<27|(e[r+15]&255)<<20|(e[r+16]&254)<<12|(e[r+17]&255)<<5|(e[r+18]&254)>>>3;n.dts*=4;n.dts+=(e[r+18]&6)>>>1}}return n};var c=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var p=function(e){var t=4+s(e);var r=e.subarray(t);var n=0;var i=0;var o=false;var a;for(;i<r.byteLength-3;i++){if(r[i+2]===1){n=i+5;break}}while(n<r.byteLength){switch(r[n]){case 0:if(r[n-1]!==0){n+=2;break}else if(r[n-2]!==0){n++;break}if(i+3!==n-2){a=c(r[i+3]&31);if(a==="slice_layer_without_partitioning_rbsp_idr"){o=true}}do{n++}while(r[n]!==1&&n<r.length);i=n-2;n+=3;break;case 1:if(r[n-1]!==0||r[n-2]!==0){n+=3;break}a=c(r[i+3]&31);if(a==="slice_layer_without_partitioning_rbsp_idr"){o=true}i=n-2;n+=3;break;default:n+=3;break}}r=r.subarray(i);n-=i;i=0;if(r&&r.byteLength>3){a=c(r[i+3]&31);if(a==="slice_layer_without_partitioning_rbsp_idr"){o=true}}return o};t.exports={parseType:a,parsePat:u,parsePmt:f,parsePayloadUnitStartIndicator:o,parsePesType:l,parsePesTime:d,videoPacketContainsKeyFrame:p}},{}],57:[function(e,t,r){"use strict";t.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],58:[function(e,t,r){"use strict";var n=e(66);var i=8589934592;var o=4294967296;var s=function(e,t){var r=1;if(e>t){r=-1}while(Math.abs(t-e)>o){e+=r*i}return e};var a=function(e){var t,r;a.prototype.init.call(this);this.type_=e;this.push=function(e){if(e.type!==this.type_){return}if(r===undefined){r=e.dts}e.dts=s(e.dts,r);e.pts=s(e.pts,r);t=e.dts;this.trigger("data",e)};this.flush=function(){r=t;this.trigger("done")};this.discontinuity=function(){r=void 0;t=void 0}};a.prototype=new n;t.exports={TimestampRolloverStream:a,handleRollover:s}},{}],59:[function(e,t,r){t.exports={generator:e(60),Transmuxer:e(62).Transmuxer,AudioSegmentStream:e(62).AudioSegmentStream,VideoSegmentStream:e(62).VideoSegmentStream}},{}],60:[function(e,t,r){"use strict";var n=Math.pow(2,32)-1;var i,o,s,a,u,f,l,d,c,p,h,g,y,_,m,v,b,w,S,T,E,A,I,C,k,j,O,B,x,D,R,P,M,L,U,N;(function(){var e;I={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(e in I){if(I.hasOwnProperty(e)){I[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]}}C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);j=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);k=new Uint8Array([0,0,0,1]);O=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);B=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);x={video:O,audio:B};P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);R=new Uint8Array([0,0,0,0,0,0,0,0]);M=new Uint8Array([0,0,0,0,0,0,0,0]);L=M;U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);N=M;D=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();i=function(e){var t=[],r=0,n,i,o;for(n=1;n<arguments.length;n++){t.push(arguments[n])}n=t.length;while(n--){r+=t[n].byteLength}i=new Uint8Array(r+8);o=new DataView(i.buffer,i.byteOffset,i.byteLength);o.setUint32(0,i.byteLength);i.set(e,4);for(n=0,r=8;n<t.length;n++){i.set(t[n],r);r+=t[n].byteLength}return i};o=function(){return i(I.dinf,i(I.dref,P))};s=function(e){return i(I.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))};a=function(){return i(I.ftyp,C,k,C,j)};v=function(e){return i(I.hdlr,x[e])};u=function(e){return i(I.mdat,e)};m=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,e.duration&255,85,196,0,0]);if(e.samplerate){t[12]=e.samplerate>>>24&255;t[13]=e.samplerate>>>16&255;t[14]=e.samplerate>>>8&255;t[15]=e.samplerate&255}return i(I.mdhd,t)};_=function(e){return i(I.mdia,m(e),v(e.type),l(e))};f=function(e){return i(I.mfhd,new Uint8Array([0,0,0,0,(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255]))};l=function(e){return i(I.minf,e.type==="video"?i(I.vmhd,D):i(I.smhd,R),o(),w(e))};d=function(e,t){var r=[],n=t.length;while(n--){r[n]=T(t[n])}return i.apply(null,[I.moof,f(e)].concat(r))};c=function(e){var t=e.length,r=[];while(t--){r[t]=g(e[t])}return i.apply(null,[I.moov,h(4294967295)].concat(r).concat(p(e)))};p=function(e){var t=e.length,r=[];while(t--){r[t]=E(e[t])}return i.apply(null,[I.mvex].concat(r))};h=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(I.mvhd,t)};b=function(e){var t=e.samples||[],r=new Uint8Array(4+t.length),n,o;for(o=0;o<t.length;o++){n=t[o].flags;r[o+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy}return i(I.sdtp,r)};w=function(e){return i(I.stbl,S(e),i(I.stts,N),i(I.stsc,L),i(I.stsz,U),i(I.stco,M))};(function(){var e,t;S=function(r){return i(I.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),r.type==="video"?e(r):t(r))};e=function(e){var t=e.sps||[],r=e.pps||[],n=[],o=[],s;for(s=0;s<t.length;s++){n.push((t[s].byteLength&65280)>>>8);n.push(t[s].byteLength&255);n=n.concat(Array.prototype.slice.call(t[s]))}for(s=0;s<r.length;s++){o.push((r[s].byteLength&65280)>>>8);o.push(r[s].byteLength&255);o=o.concat(Array.prototype.slice.call(r[s]))}return i(I.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(e.width&65280)>>8,e.width&255,(e.height&65280)>>8,e.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(I.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([t.length]).concat(n).concat([r.length]).concat(o))),i(I.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};t=function(e){return i(I.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(e.channelcount&65280)>>8,e.channelcount&255,(e.samplesize&65280)>>8,e.samplesize&255,0,0,0,0,(e.samplerate&65280)>>8,e.samplerate&255,0,0]),s(e))}})();y=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,0,(e.duration&4278190080)>>24,(e.duration&16711680)>>16,(e.duration&65280)>>8,e.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(e.width&65280)>>8,e.width&255,0,0,(e.height&65280)>>8,e.height&255,0,0]);return i(I.tkhd,t)};T=function(e){var t,r,o,s,a,u,f;t=i(I.tfhd,new Uint8Array([0,0,0,58,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));u=Math.floor(e.baseMediaDecodeTime/(n+1));f=Math.floor(e.baseMediaDecodeTime%(n+1));r=i(I.tfdt,new Uint8Array([1,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,u&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255]));a=32+20+8+16+8+8;if(e.type==="audio"){o=A(e,a);return i(I.traf,t,r,o)}s=b(e);o=A(e,s.length+a);return i(I.traf,t,r,o,s)};g=function(e){e.duration=e.duration||4294967295;return i(I.trak,y(e),_(e))};E=function(e){var t=new Uint8Array([0,0,0,0,(e.id&4278190080)>>24,(e.id&16711680)>>16,(e.id&65280)>>8,e.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(e.type!=="video"){t[t.length-1]=0}return i(I.trex,t)};(function(){var e,t,r;r=function(e,t){var r=0,n=0,i=0,o=0;if(e.length){if(e[0].duration!==undefined){r=1}if(e[0].size!==undefined){n=2}if(e[0].flags!==undefined){i=4}if(e[0].compositionTimeOffset!==undefined){o=8}}return[0,0,r|n|i|o,1,(e.length&4278190080)>>>24,(e.length&16711680)>>>16,(e.length&65280)>>>8,e.length&255,(t&4278190080)>>>24,(t&16711680)>>>16,(t&65280)>>>8,t&255]};t=function(e,t){var n,o,s,a;o=e.samples||[];t+=8+12+16*o.length;n=r(o,t);for(a=0;a<o.length;a++){s=o[a];n=n.concat([(s.duration&4278190080)>>>24,(s.duration&16711680)>>>16,(s.duration&65280)>>>8,s.duration&255,(s.size&4278190080)>>>24,(s.size&16711680)>>>16,(s.size&65280)>>>8,s.size&255,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,s.flags.degradationPriority&240<<8,s.flags.degradationPriority&15,(s.compositionTimeOffset&4278190080)>>>24,(s.compositionTimeOffset&16711680)>>>16,(s.compositionTimeOffset&65280)>>>8,s.compositionTimeOffset&255])}return i(I.trun,new Uint8Array(n))};e=function(e,t){var n,o,s,a;o=e.samples||[];t+=8+12+8*o.length;n=r(o,t);for(a=0;a<o.length;a++){s=o[a];n=n.concat([(s.duration&4278190080)>>>24,(s.duration&16711680)>>>16,(s.duration&65280)>>>8,s.duration&255,(s.size&4278190080)>>>24,(s.size&16711680)>>>16,(s.size&65280)>>>8,s.size&255])}return i(I.trun,new Uint8Array(n))};A=function(r,n){if(r.type==="audio"){return e(r,n)}return t(r,n)}})();t.exports={ftyp:a,mdat:u,moof:d,moov:c,initSegment:function(e){var t=a(),r=c(e),n;n=new Uint8Array(t.byteLength+r.byteLength);n.set(t);n.set(r,t.byteLength);return n}}},{}],61:[function(e,t,r){"use strict";var n,i,o,s;n=function(e,t){var r=[],o,s,a,u,f;if(!t.length){return null}for(o=0;o<e.byteLength;){s=e[o]<<24;s|=e[o+1]<<16;s|=e[o+2]<<8;s|=e[o+3];a=i(e.subarray(o+4,o+8));u=s>1?o+s:e.byteLength;if(a===t[0]){if(t.length===1){r.push(e.subarray(o+8,u))}else{f=n(e.subarray(o+8,u),t.slice(1));if(f.length){r=r.concat(f)}}}o=u}return r};i=function(e){var t="";t+=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);return t};o=function(e){var t={},r=n(e,["moov","trak"]);return r.reduce(function(e,t){var r,i,o,s,a;r=n(t,["tkhd"])[0];if(!r){return null}i=r[0];o=i===0?12:20;s=r[o]<<24|r[o+1]<<16|r[o+2]<<8|r[o+3];a=n(t,["mdia","mdhd"])[0];if(!a){return null}i=a[0];o=i===0?12:20;e[s]=a[o]<<24|a[o+1]<<16|a[o+2]<<8|a[o+3];return e},t)};s=function(e,t){var r,i,o;r=n(t,["moof","traf"]);i=[].concat.apply([],r.map(function(t){return n(t,["tfhd"]).map(function(r){var i,o,s;i=r[4]<<24|r[5]<<16|r[6]<<8|r[7];o=e[i]||9e4;s=n(t,["tfdt"]).map(function(e){var t,r;t=e[0];r=e[4]<<24|e[5]<<16|e[6]<<8|e[7];if(t===1){r*=Math.pow(2,32);r+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]}return r})[0];s=s||Infinity;return s/o})}));o=Math.min.apply(null,i);return isFinite(o)?o:0};t.exports={parseType:i,timescale:o,startTime:s}},{}],62:[function(e,t,r){"use strict";var n=e(66);var i=e(60);var o=e(54);var s=e(44);var a=e(45).H264Stream;var u=e(42);var f=e(46);var l=e(64);var d=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var c=["width","height","profileIdc","levelIdc","profileCompatibility"];var p=9e4;var h,g,y,_;var m,v,b,w,S,T,E;m=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}};v=function(e){if(e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)){return true}return false};T=function(e,t){var r;if(e.length!==t.length){return false}for(r=0;r<e.length;r++){if(e[r]!==t[r]){return false}}return true};E=function(e){var t,r,n=0;for(t=0;t<e.length;t++){r=e[t];n+=r.data.byteLength}return n};g=function(e){var t=[],r=0,n=0,o=0,s=Infinity;g.prototype.init.call(this);this.push=function(r){b(e,r);if(e){d.forEach(function(t){e[t]=r[t]})}t.push(r)};this.setEarliestDts=function(t){n=t-e.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(e){s=e};this.setAudioAppendStart=function(e){o=e};this.flush=function(){var n,o,s,a;if(t.length===0){this.trigger("done","AudioSegmentStream");return}n=this.trimAdtsFramesByEarliestDts_(t);e.baseMediaDecodeTime=S(e);this.prefixWithSilence_(e,n);e.samples=this.generateSampleTable_(n);s=i.mdat(this.concatenateFrameData_(n));t=[];o=i.moof(r,[e]);a=new Uint8Array(o.byteLength+s.byteLength);r++;a.set(o);a.set(s,o.byteLength);w(e);this.trigger("data",{track:e,boxes:a});this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(e,t){var r,n=0,i=0,a=0,u=0,d,c;if(!t.length){return}r=l.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate)
;n=Math.ceil(p/(e.samplerate/1024));if(o&&s){i=r-Math.max(o,s);a=Math.floor(i/n);u=a*n}if(a<1||u>p/2){return}d=f[e.samplerate];if(!d){d=t[0].data}for(c=0;c<a;c++){t.splice(c,0,{data:d})}e.baseMediaDecodeTime-=Math.floor(l.videoTsToAudioTs(u,e.samplerate))};this.trimAdtsFramesByEarliestDts_=function(t){if(e.minSegmentDts>=n){return t}e.minSegmentDts=Infinity;return t.filter(function(t){if(t.dts>=n){e.minSegmentDts=Math.min(e.minSegmentDts,t.dts);e.minSegmentPts=e.minSegmentDts;return true}return false})};this.generateSampleTable_=function(e){var t,r,n=[];for(t=0;t<e.length;t++){r=e[t];n.push({size:r.data.byteLength,duration:1024})}return n};this.concatenateFrameData_=function(e){var t,r,n=0,i=new Uint8Array(E(e));for(t=0;t<e.length;t++){r=e[t];i.set(r.data,n);n+=r.data.byteLength}return i}};g.prototype=new n;h=function(e){var t=0,r=[],n,o;h.prototype.init.call(this);delete e.minPTS;this.gopCache_=[];this.push=function(t){b(e,t);if(t.nalUnitType==="seq_parameter_set_rbsp"&&!n){n=t.config;e.sps=[t.data];c.forEach(function(t){e[t]=n[t]},this)}if(t.nalUnitType==="pic_parameter_set_rbsp"&&!o){o=t.data;e.pps=[t.data]}r.push(t)};this.flush=function(){var n,o,s,a,u,f;while(r.length){if(r[0].nalUnitType==="access_unit_delimiter_rbsp"){break}r.shift()}if(r.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}n=this.groupNalsIntoFrames_(r);s=this.groupFramesIntoGops_(n);if(!s[0][0].keyFrame){o=this.getGopForFusion_(r[0],e);if(o){s.unshift(o);s.byteLength+=o.byteLength;s.nalCount+=o.nalCount;s.pts=o.pts;s.dts=o.dts;s.duration+=o.duration}else{s=this.extendFirstKeyFrame_(s)}}b(e,s);e.samples=this.generateSampleTable_(s);u=i.mdat(this.concatenateNalData_(s));this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);r=[];e.baseMediaDecodeTime=S(e);this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime);this.trigger("timelineStartInfo",e.timelineStartInfo);a=i.moof(t,[e]);f=new Uint8Array(a.byteLength+u.byteLength);t++;f.set(a);f.set(u,a.byteLength);this.trigger("data",{track:e,boxes:f});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){w(e);n=undefined;o=undefined};this.getGopForFusion_=function(t){var r=45e3,n=1e4,i=Infinity,o,s,a,u,f;for(f=0;f<this.gopCache_.length;f++){u=this.gopCache_[f];a=u.gop;if(!(e.pps&&T(e.pps[0],u.pps[0]))||!(e.sps&&T(e.sps[0],u.sps[0]))){continue}if(a.dts<e.timelineStartInfo.dts){continue}o=t.dts-a.dts-a.duration;if(o>=-n&&o<=r){if(!s||i>o){s=u;i=o}}}if(s){return s.gop}return null};this.extendFirstKeyFrame_=function(e){var t;if(!e[0][0].keyFrame&&e.length>1){t=e.shift();e.byteLength-=t.byteLength;e.nalCount-=t.nalCount;e[0][0].dts=t.dts;e[0][0].pts=t.pts;e[0][0].duration+=t.duration}return e};this.groupNalsIntoFrames_=function(e){var t,r,n=[],i=[];n.byteLength=0;for(t=0;t<e.length;t++){r=e[t];if(r.nalUnitType==="access_unit_delimiter_rbsp"){if(n.length){n.duration=r.dts-n.dts;i.push(n)}n=[r];n.byteLength=r.data.byteLength;n.pts=r.pts;n.dts=r.dts}else{if(r.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){n.keyFrame=true}n.duration=r.dts-n.dts;n.byteLength+=r.data.byteLength;n.push(r)}}if(i.length&&(!n.duration||n.duration<=0)){n.duration=i[i.length-1].duration}i.push(n);return i};this.groupFramesIntoGops_=function(e){var t,r,n=[],i=[];n.byteLength=0;n.nalCount=0;n.duration=0;n.pts=e[0].pts;n.dts=e[0].dts;i.byteLength=0;i.nalCount=0;i.duration=0;i.pts=e[0].pts;i.dts=e[0].dts;for(t=0;t<e.length;t++){r=e[t];if(r.keyFrame){if(n.length){i.push(n);i.byteLength+=n.byteLength;i.nalCount+=n.nalCount;i.duration+=n.duration}n=[r];n.nalCount=r.length;n.byteLength=r.byteLength;n.pts=r.pts;n.dts=r.dts;n.duration=r.duration}else{n.duration+=r.duration;n.nalCount+=r.length;n.byteLength+=r.byteLength;n.push(r)}}if(i.length&&n.duration<=0){n.duration=i[i.length-1].duration}i.byteLength+=n.byteLength;i.nalCount+=n.nalCount;i.duration+=n.duration;i.push(n);return i};this.generateSampleTable_=function(e,t){var r,n,i,o,s,a=t||0,u=[];for(r=0;r<e.length;r++){o=e[r];for(n=0;n<o.length;n++){s=o[n];i=m();i.dataOffset=a;i.compositionTimeOffset=s.pts-s.dts;i.duration=s.duration;i.size=4*s.length;i.size+=s.byteLength;if(s.keyFrame){i.flags.dependsOn=2}a+=i.size;u.push(i)}}return u};this.concatenateNalData_=function(e){var t,r,n,i,o,s,a=0,u=e.byteLength,f=e.nalCount,l=u+4*f,d=new Uint8Array(l),c=new DataView(d.buffer);for(t=0;t<e.length;t++){i=e[t];for(r=0;r<i.length;r++){o=i[r];for(n=0;n<o.length;n++){s=o[n];c.setUint32(a,s.data.byteLength);a+=4;d.set(s.data,a);a+=s.data.byteLength}}}return d}};h.prototype=new n;b=function(e,t){if(typeof t.pts==="number"){if(e.timelineStartInfo.pts===undefined){e.timelineStartInfo.pts=t.pts}if(e.minSegmentPts===undefined){e.minSegmentPts=t.pts}else{e.minSegmentPts=Math.min(e.minSegmentPts,t.pts)}if(e.maxSegmentPts===undefined){e.maxSegmentPts=t.pts}else{e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)}}if(typeof t.dts==="number"){if(e.timelineStartInfo.dts===undefined){e.timelineStartInfo.dts=t.dts}if(e.minSegmentDts===undefined){e.minSegmentDts=t.dts}else{e.minSegmentDts=Math.min(e.minSegmentDts,t.dts)}if(e.maxSegmentDts===undefined){e.maxSegmentDts=t.dts}else{e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts)}}};w=function(e){delete e.minSegmentDts;delete e.maxSegmentDts;delete e.minSegmentPts;delete e.maxSegmentPts};S=function(e){var t,r,n=e.minSegmentDts-e.timelineStartInfo.dts;t=e.timelineStartInfo.baseMediaDecodeTime;t+=n;t=Math.max(0,t);if(e.type==="audio"){r=e.samplerate/p;t*=r;t=Math.floor(t)}return t};_=function(e,t){this.numberOfTracks=0;this.metadataStream=t;if(typeof e.remux!=="undefined"){this.remuxTracks=!!e.remux}else{this.remuxTracks=true}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;_.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}this.pendingTracks.push(e.track);this.pendingBoxes.push(e.boxes);this.pendingBytes+=e.boxes.byteLength;if(e.track.type==="video"){this.videoTrack=e.track}if(e.track.type==="audio"){this.audioTrack=e.track}}};_.prototype=new n;_.prototype.flush=function(e){var t=0,r={captions:[],captionStreams:{},metadata:[],info:{}},n,o,s,a=0,u;if(this.pendingTracks.length<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){a=this.videoTrack.timelineStartInfo.pts;c.forEach(function(e){r.info[e]=this.videoTrack[e]},this)}else if(this.audioTrack){a=this.audioTrack.timelineStartInfo.pts;d.forEach(function(e){r.info[e]=this.audioTrack[e]},this)}if(this.pendingTracks.length===1){r.type=this.pendingTracks[0].type}else{r.type="combined"}this.emittedTracks+=this.pendingTracks.length;s=i.initSegment(this.pendingTracks);r.initSegment=new Uint8Array(s.byteLength);r.initSegment.set(s);r.data=new Uint8Array(this.pendingBytes);for(u=0;u<this.pendingBoxes.length;u++){r.data.set(this.pendingBoxes[u],t);t+=this.pendingBoxes[u].byteLength}for(u=0;u<this.pendingCaptions.length;u++){n=this.pendingCaptions[u];n.startTime=n.startPts-a;n.startTime/=9e4;n.endTime=n.endPts-a;n.endTime/=9e4;r.captionStreams[n.stream]=true;r.captions.push(n)}for(u=0;u<this.pendingMetadata.length;u++){o=this.pendingMetadata[u];o.cueTime=o.pts-a;o.cueTime/=9e4;r.metadata.push(o)}r.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",r);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};y=function(e){var t=this,r=true,n,i;y.prototype.init.call(this);e=e||{};this.baseMediaDecodeTime=e.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r;r.type="aac";r.metadataStream=new o.MetadataStream;r.aacStream=new u;r.audioTimestampRolloverStream=new o.TimestampRolloverStream("audio");r.timedMetadataTimestampRolloverStream=new o.TimestampRolloverStream("timed-metadata");r.adtsStream=new s;r.coalesceStream=new _(e,r.metadataStream);r.headOfPipeline=r.aacStream;r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream);r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream);r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)});r.aacStream.on("data",function(e){if(e.type==="timed-metadata"&&!r.audioSegmentStream){i=i||{timelineStartInfo:{baseMediaDecodeTime:t.baseMediaDecodeTime},codec:"adts",type:"audio"};r.coalesceStream.numberOfTracks++;r.audioSegmentStream=new g(i);r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)}});r.coalesceStream.on("data",this.trigger.bind(this,"data"));r.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r;r.type="ts";r.metadataStream=new o.MetadataStream;r.packetStream=new o.TransportPacketStream;r.parseStream=new o.TransportParseStream;r.elementaryStream=new o.ElementaryStream;r.videoTimestampRolloverStream=new o.TimestampRolloverStream("video");r.audioTimestampRolloverStream=new o.TimestampRolloverStream("audio");r.timedMetadataTimestampRolloverStream=new o.TimestampRolloverStream("timed-metadata");r.adtsStream=new s;r.h264Stream=new a;r.captionStream=new o.CaptionStream;r.coalesceStream=new _(e,r.metadataStream);r.headOfPipeline=r.packetStream;r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream);r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream);r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream);r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream);r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream);r.elementaryStream.on("data",function(e){var o;if(e.type==="metadata"){o=e.tracks.length;while(o--){if(!n&&e.tracks[o].type==="video"){n=e.tracks[o];n.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}else if(!i&&e.tracks[o].type==="audio"){i=e.tracks[o];i.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}}if(n&&!r.videoSegmentStream){r.coalesceStream.numberOfTracks++;r.videoSegmentStream=new h(n);r.videoSegmentStream.on("timelineStartInfo",function(e){if(i){i.timelineStartInfo=e;r.audioSegmentStream.setEarliestDts(e.dts)}});r.videoSegmentStream.on("baseMediaDecodeTime",function(e){if(i){r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}});r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)}if(i&&!r.audioSegmentStream){r.coalesceStream.numberOfTracks++;r.audioSegmentStream=new g(i);r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)}}});r.coalesceStream.on("data",this.trigger.bind(this,"data"));r.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e;if(i){i.timelineStartInfo.dts=undefined;i.timelineStartInfo.pts=undefined;w(i);i.timelineStartInfo.baseMediaDecodeTime=e;if(t.audioTimestampRolloverStream){t.audioTimestampRolloverStream.discontinuity()}}if(n){if(t.videoSegmentStream){t.videoSegmentStream.gopCache_=[];t.videoTimestampRolloverStream.discontinuity()}n.timelineStartInfo.dts=undefined;n.timelineStartInfo.pts=undefined;w(n);t.captionStream.reset();n.timelineStartInfo.baseMediaDecodeTime=e}if(t.timedMetadataTimestampRolloverStream){t.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(e){if(i){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)}};this.push=function(e){if(r){var t=v(e);if(t&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!t&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}r=false}this.transmuxPipeline_.headOfPipeline.push(e)};this.flush=function(){r=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};y.prototype=new n;t.exports={Transmuxer:y,VideoSegmentStream:h,AudioSegmentStream:g,AUDIO_PROPERTIES:d,VIDEO_PROPERTIES:c}},{}],63:[function(e,t,r){"use strict";var n=e(57);var i=e(58).handleRollover;var o={};o.ts=e(56);o.aac=e(43);var s=9e4,a=188,u=71;var f=function(e){if(e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)){return true}return false};var l=function(e,t){var r=0,n=a,i,s;while(n<e.byteLength){if(e[r]===u&&e[n]===u){i=e.subarray(r,n);s=o.ts.parseType(i,t.pid);switch(s){case"pat":if(!t.pid){t.pid=o.ts.parsePat(i)}break;case"pmt":if(!t.table){t.table=o.ts.parsePmt(i)}break;default:break}if(t.pid&&t.table){return}r+=a;n+=a;continue}r++;n++}};var d=function(e,t,r){var n=0,i=a,s,f,l,d,c;var p=false;while(i<e.byteLength){if(e[n]===u&&e[i]===u){s=e.subarray(n,i);f=o.ts.parseType(s,t.pid);switch(f){case"pes":l=o.ts.parsePesType(s,t.table);d=o.ts.parsePayloadUnitStartIndicator(s);if(l==="audio"&&d){c=o.ts.parsePesTime(s);if(c){c.type="audio";r.audio.push(c);p=true}}break;default:break}if(p){break}n+=a;i+=a;continue}n++;i++}i=e.byteLength;n=i-a;p=false;while(n>=0){if(e[n]===u&&e[i]===u){s=e.subarray(n,i);f=o.ts.parseType(s,t.pid);switch(f){case"pes":l=o.ts.parsePesType(s,t.table);d=o.ts.parsePayloadUnitStartIndicator(s);if(l==="audio"&&d){c=o.ts.parsePesTime(s);if(c){c.type="audio";r.audio.push(c);p=true}}break;default:break}if(p){break}n-=a;i-=a;continue}n--;i--}};var c=function(e,t,r){var n=0,i=a,s,f,l,d,c,p,h,g;var y=false;var _={data:[],size:0};while(i<e.byteLength){if(e[n]===u&&e[i]===u){s=e.subarray(n,i);f=o.ts.parseType(s,t.pid);switch(f){case"pes":l=o.ts.parsePesType(s,t.table);d=o.ts.parsePayloadUnitStartIndicator(s);if(l==="video"){if(d&&!y){c=o.ts.parsePesTime(s);if(c){c.type="video";r.video.push(c);y=true}}if(!r.firstKeyFrame){if(d){if(_.size!==0){p=new Uint8Array(_.size);h=0;while(_.data.length){g=_.data.shift();p.set(g,h);h+=g.byteLength}if(o.ts.videoPacketContainsKeyFrame(p)){r.firstKeyFrame=o.ts.parsePesTime(p);r.firstKeyFrame.type="video"}_.size=0}}_.data.push(s);_.size+=s.byteLength}}break;default:break}if(y&&r.firstKeyFrame){break}n+=a;i+=a;continue}n++;i++}i=e.byteLength;n=i-a;y=false;while(n>=0){if(e[n]===u&&e[i]===u){s=e.subarray(n,i);f=o.ts.parseType(s,t.pid);switch(f){case"pes":l=o.ts.parsePesType(s,t.table);d=o.ts.parsePayloadUnitStartIndicator(s);if(l==="video"&&d){c=o.ts.parsePesTime(s);if(c){c.type="video";r.video.push(c);y=true}}break;default:break}if(y){break}n-=a;i-=a;continue}n--;i--}};var p=function(e,t){if(e.audio&&e.audio.length){var r=t;if(typeof r==="undefined"){r=e.audio[0].dts}e.audio.forEach(function(e){e.dts=i(e.dts,r);e.pts=i(e.pts,r);e.dtsTime=e.dts/s;e.ptsTime=e.pts/s})}if(e.video&&e.video.length){var n=t;if(typeof n==="undefined"){n=e.video[0].dts}e.video.forEach(function(e){e.dts=i(e.dts,n);e.pts=i(e.pts,n);e.dtsTime=e.dts/s;e.ptsTime=e.pts/s});if(e.firstKeyFrame){var o=e.firstKeyFrame;o.dts=i(o.dts,n);o.pts=i(o.pts,n);o.dtsTime=o.dts/s;o.ptsTime=o.dts/s}}};var h=function(e){var t=false,r=0,n=null,i=null,a=0,u=0,f;while(e.length-u>=3){var l=o.aac.parseType(e,u);switch(l){case"timed-metadata":if(e.length-u<10){t=true;break}a=o.aac.parseId3TagSize(e,u);if(a>e.length){t=true;break}if(i===null){f=e.subarray(u,u+a);i=o.aac.parseAacTimestamp(f)}u+=a;break;case"audio":if(e.length-u<7){t=true;break}a=o.aac.parseAdtsSize(e,u);if(a>e.length){t=true;break}if(n===null){f=e.subarray(u,u+a);n=o.aac.parseSampleRate(f)}r++;u+=a;break;default:u++;break}if(t){return null}}if(n===null||i===null){return null}var d=s/n;var c={audio:[{type:"audio",dts:i,pts:i},{type:"audio",dts:i+r*1024*d,pts:i+r*1024*d}]};return c};var g=function(e){var t={pid:null,table:null};var r={};l(e,t);for(var i in t.table){if(t.table.hasOwnProperty(i)){var o=t.table[i];switch(o){case n.H264_STREAM_TYPE:r.video=[];c(e,t,r);if(r.video.length===0){delete r.video}break;case n.ADTS_STREAM_TYPE:r.audio=[];d(e,t,r);if(r.audio.length===0){delete r.audio}break;default:break}}}return r};var y=function(e,t){var r=f(e);var n;if(r){n=h(e)}else{n=g(e)}if(!n||!n.audio&&!n.video){return null}p(n,t);return n};t.exports={inspect:y}},{}],64:[function(e,t,r){var n=9e4,i,o,s,a,u,f;i=function(e){return e*n};o=function(e,t){return e*t};s=function(e){return e/n};a=function(e,t){return e/t};u=function(e,t){return i(a(e,t))};f=function(e,t){return o(s(e),t)};t.exports={secondsToVideoTs:i,secondsToAudioTs:o,videoTsToSeconds:s,audioTsToSeconds:a,audioTsToVideoTs:u,videoTsToAudioTs:f}},{}],65:[function(e,t,r){"use strict";var n;n=function(e){var t=e.byteLength,r=0,n=0;this.length=function(){return 8*t};this.bitsAvailable=function(){return 8*t+n};this.loadWord=function(){var i=e.byteLength-t,o=new Uint8Array(4),s=Math.min(4,t);if(s===0){throw new Error("no bytes available")}o.set(e.subarray(i,i+s));r=new DataView(o.buffer).getUint32(0);n=s*8;t-=s};this.skipBits=function(e){var i;if(n>e){r<<=e;n-=e}else{e-=n;i=Math.floor(e/8);e-=i*8;t-=i;this.loadWord();r<<=e;n-=e}};this.readBits=function(e){var i=Math.min(n,e),o=r>>>32-i;n-=i;if(n>0){r<<=i}else if(t>0){this.loadWord()}i=e-i;if(i>0){return o<<i|this.readBits(i)}return o};this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e){if((r&2147483648>>>e)!==0){r<<=e;n-=e;return e}}this.loadWord();return e+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1};this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();if(1&e){return 1+e>>>1}return-1*(e>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};t.exports=n},{}],66:[function(e,t,r){"use strict";var n=function(){this.init=function(){var e={};this.on=function(t,r){if(!e[t]){e[t]=[]}e[t]=e[t].concat(r)};this.off=function(t,r){var n;if(!e[t]){return false}n=e[t].indexOf(r);e[t]=e[t].slice();e[t].splice(n,1);return n>-1};this.trigger=function(t){var r,n,i,o;r=e[t];if(!r){return}if(arguments.length===2){i=r.length;for(n=0;n<i;++n){r[n].call(this,arguments[1])}}else{o=[];n=arguments.length;for(n=1;n<arguments.length;++n){o.push(arguments[n])}i=r.length;for(n=0;n<i;++n){r[n].apply(this,o)}}};this.dispose=function(){e={}}}};n.prototype.pipe=function(e){this.on("data",function(t){e.push(t)});this.on("done",function(t){e.flush(t)});return e};n.prototype.push=function(e){this.trigger("data",e)};n.prototype.flush=function(e){this.trigger("done",e)};t.exports=n},{}],67:[function(e,t,r){(function(e){var n={buildAbsoluteURL:function(e,t){t=t.trim();if(/^[a-z]+:/i.test(t)){return t}var r=null;var i=null;var o=/^([^#]*)(.*)$/.exec(t);if(o){i=o[2];t=o[1]}var s=/^([^\?]*)(.*)$/.exec(t);if(s){r=s[2];t=s[1]}var a=/^([^#]*)(.*)$/.exec(e);if(a){e=a[1]}var u=/^([^\?]*)(.*)$/.exec(e);if(u){e=u[1]}var f=/^(([a-z]+:)?\/\/[^:\/]+(:[0-9]+)?)?(\/?.*)$/i.exec(e);if(!f){throw new Error("Error trying to parse base URL.")}var l=f[2]||"";var d=f[1]||"";var c=f[4];if(c.indexOf("/")!==0&&d!==""){c="/"+c}var p=null;if(/^\/\//.test(t)){p=l+"//"+n.buildAbsolutePath("",t.substring(2))}else if(/^\//.test(t)){p=d+"/"+n.buildAbsolutePath("",t.substring(1))}else{p=n.buildAbsolutePath(d+c,t)}if(r){p+=r}if(i){p+=i}return p},buildAbsolutePath:function(e,t){var r=t;var n,i="",o=e.replace(/[^\/]*$/,r.replace(/(\/|^)(?:\.?\/+)+/g,"$1"));for(var s,a=0;s=o.indexOf("/../",a),s>-1;a=s+n){n=/^\/(?:\.\.\/)*/.exec(o.slice(s))[0].length;i=(i+o.substring(a,s)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(n-1)/3+"}$"),"/")}return i+o.substr(a)}};if(typeof r==="object"&&typeof t==="object")t.exports=n;else if(typeof define==="function"&&define.amd)define([],function(){return n});else if(typeof r==="object")r["URLToolkit"]=n;else e["URLToolkit"]=n})(this)},{}],68:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:true});function i(e){return e&&e.__esModule?e:{default:e}}var o=e(34);var s=i(o);var a=typeof window!=="undefined"?window["videojs"]:typeof n!=="undefined"?n["videojs"]:null;var u=i(a);var f=function e(t){Object.defineProperties(t.frame,{id:{get:function e(){u["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return t.value.key}},value:{get:function e(){u["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return t.value.data}},privateData:{get:function e(){u["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return t.value.data}}})};var l=function e(t){var r=undefined;if(isNaN(t)||Math.abs(t)===Infinity){r=Number.MAX_VALUE}else{r=t}return r};var d=function e(t,r,n){var i=s["default"].WebKitDataCue||s["default"].VTTCue;if(r){r.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new i(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},t)}if(n){(function(){var e=l(t.mediaSource_.duration);n.forEach(function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var r=new i(t,t,e.value||e.url||e.data||"");r.frame=e;r.value=e;f(r);this.metadataTrack_.addCue(r)},this)},t);if(t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){(function(){var r=t.metadataTrack_.cues;var n=[];for(var i=0;i<r.length;i++){if(r[i]){n.push(r[i])}}var o=n.reduce(function(e,t){var r=e[t.startTime]||[];r.push(t);e[t.startTime]=r;return e},{});var s=Object.keys(o).sort(function(e,t){return Number(e)-Number(t)});s.forEach(function(t,r){var n=o[t];var i=Number(s[r+1])||e;n.forEach(function(e){e.endTime=i})})})()}})()}};r["default"]={addTextTrackData:d,durationOfVideo:l};t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function e(t){return/mp4a\.\d+.\d+/i.test(t)};var i=function e(t){return/avc1\.[\da-f]+/i.test(t)};var o=function e(t){var r={type:"",parameters:{}};var n=t.trim().split(";");r.type=n.shift().trim();n.forEach(function(e){var t=e.trim().split("=");if(t.length>1){var n=t[0].replace(/"/g,"").trim();var i=t[1].replace(/"/g,"").trim();r.parameters[n]=i}});return r};var s=function e(t){return t.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,r){var n=("00"+Number(t).toString(16)).slice(-2);var i=("00"+Number(r).toString(16)).slice(-2);return"avc1."+n+"00"+i})})};r["default"]={isAudioCodec:n,parseContentType:o,isVideoCodec:i,translateLegacyCodecs:s};t.exports=r["default"]},{}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function e(t,r,n){var i=r.player_;if(n.captions&&n.captions.length){if(!t.inbandTextTracks_){t.inbandTextTracks_={}}for(var o in n.captionStreams){if(!t.inbandTextTracks_[o]){i.tech_.trigger({type:"usage",name:"hls-608"});var s=i.textTracks().getTrackById(o);if(s){t.inbandTextTracks_[o]=s}else{t.inbandTextTracks_[o]=i.addRemoteTextTrack({kind:"captions",id:o,label:o},false).track}}}}if(n.metadata&&n.metadata.length&&!t.metadataTrack_){t.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;t.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType}};r["default"]=n;t.exports=r["default"]},{}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:1024*32};r["default"]=n;t.exports=r["default"]},{}],72:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=e(33);var l=s(f);var d=typeof window!=="undefined"?window["videojs"]:typeof n!=="undefined"?n["videojs"]:null;var c=s(d);var p=e(73);var h=s(p);var g=e(71);var y=s(g);var _=e(69);var m=function(e){u(t,e);function t(){var e=this;a(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);this.sourceBuffers=[];this.readyState="closed";this.on(["sourceopen","webkitsourceopen"],function(t){e.swfObj=l["default"].getElementById(t.swfId);e.player_=(0,c["default"])(e.swfObj.parentNode);e.tech_=e.swfObj.tech;e.readyState="open";e.tech_.on("seeking",function(){var t=e.sourceBuffers.length;while(t--){e.sourceBuffers[t].abort()}});if(e.swfObj){e.swfObj.vjs_load()}})}i(t,[{key:"addSeekableRange_",value:function e(){}},{key:"addSourceBuffer",value:function e(t){var r=(0,_.parseContentType)(t);var n=undefined;if(r.type==="video/mp2t"||r.type==="audio/mp2t"){n=new h["default"](this)}else{throw new Error("NotSupportedError (Video.js)")}this.sourceBuffers.push(n);return n}},{key:"endOfStream",value:function e(t){if(t==="network"){this.tech_.error(2)}else if(t==="decode"){this.tech_.error(3)}if(this.readyState!=="ended"){this.readyState="ended";this.swfObj.vjs_endOfStream()}}}]);return t}(c["default"].EventTarget);r["default"]=m;try{Object.defineProperty(m.prototype,"duration",{get:function e(){if(!this.swfObj){return NaN}return this.swfObj.vjs_getProperty("duration")},set:function e(t){var r=undefined;var n=this.swfObj.vjs_getProperty("duration");this.swfObj.vjs_setProperty("duration",t);if(t<n){for(r=0;r<this.sourceBuffers.length;r++){this.sourceBuffers[r].remove(t,n)}}return t}})}catch(e){m.prototype.duration=NaN}for(var v in y["default"]){m[v]=y["default"][v]}t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],73:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=e(34);var l=s(f);var d=typeof window!=="undefined"?window["videojs"]:typeof n!=="undefined"?n["videojs"]:null;var c=s(d);var p=e(50);var h=s(p);var g=e(76);var y=s(g);var _=e(70);var m=s(_);var v=e(68);var b=e(74);var w=s(b);var S=e(80);var T=s(S);var E=e(71);var A=s(E);var I=function e(t){l["default"].setTimeout(t,A["default"].TIME_BETWEEN_CHUNKS)};var C=function e(){return Math.random().toString(36).slice(2,8)};var k=function e(t,r){if(typeof r!=="number"||r<0){r=0}var n=Math.pow(10,r);return Math.round(t*n)/n};var j=function(e){u(t,e);function t(e){var r=this;a(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var n=undefined;this.chunkSize_=A["default"].BYTES_PER_CHUNK;this.buffer_=[];this.bufferSize_=0;this.basePtsOffset_=NaN;this.mediaSource_=e;this.audioBufferEnd_=NaN;this.videoBufferEnd_=NaN;this.updating=false;this.timestampOffset_=0;n=l["default"].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(h["default"].getFlvHeader())));var i=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+i+C();this.flashEncodedDataName_="vjs_flashEncodedData_"+i+C();l["default"][this.flashEncodedHeaderName_]=function(){delete l["default"][r.flashEncodedHeaderName_];return n};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_);this.transmuxer_=(0,T["default"])(w["default"]);this.transmuxer_.postMessage({action:"init",options:{}});this.transmuxer_.onmessage=function(e){if(e.data.action==="data"){r.receiveBuffer_(e.data.segment)}};this.one("updateend",function(){r.mediaSource_.tech_.trigger("loadedmetadata")});Object.defineProperty(this,"timestampOffset",{get:function e(){return this.timestampOffset_},set:function e(t){if(typeof t==="number"&&t>=0){this.timestampOffset_=t;this.mediaSource_.swfObj.vjs_discontinuity();this.basePtsOffset_=NaN;this.audioBufferEnd_=NaN;this.videoBufferEnd_=NaN;this.transmuxer_.postMessage({action:"reset"})}}});Object.defineProperty(this,"buffered",{get:function e(){if(!this.mediaSource_||!this.mediaSource_.swfObj||!("vjs_getProperty"in this.mediaSource_.swfObj)){return c["default"].createTimeRange()}var t=this.mediaSource_.swfObj.vjs_getProperty("buffered");if(t&&t.length){t[0][0]=k(t[0][0],3);t[0][1]=k(t[0][1],3)}return c["default"].createTimeRanges(t)}});this.mediaSource_.player_.on("seeked",function(){(0,y["default"])(0,Infinity,r.metadataTrack_);if(r.inbandTextTracks_){for(var e in r.inbandTextTracks_){(0,y["default"])(0,Infinity,r.inbandTextTracks_[e])}}});var s=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",s);this.mediaSource_.player_.tech_.hls.on("dispose",function(){r.transmuxer_.terminate();r.mediaSource_.player_.tech_.off("hls-reset",s)})}i(t,[{key:"appendBuffer",value:function e(t){var r=undefined;if(this.updating){r=new Error("SourceBuffer.append() cannot be called "+"while an update is in progress");r.name="InvalidStateError";r.code=11;throw r}this.updating=true;this.mediaSource_.readyState="open";this.trigger({type:"update"});this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function e(){this.buffer_=[];this.bufferSize_=0;this.mediaSource_.swfObj.vjs_abort();if(this.updating){this.updating=false;this.trigger({type:"updateend"})}}},{key:"remove",value:function e(t,r){(0,y["default"])(t,r,this.metadataTrack_);if(this.inbandTextTracks_){for(var n in this.inbandTextTracks_){(0,y["default"])(t,r,this.inbandTextTracks_[n])}}this.trigger({type:"update"});this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function e(t){var r=this;(0,m["default"])(this,this.mediaSource_,t);(0,v.addTextTrackData)(this,t.captions,t.metadata);I(function(){var e=r.convertTagsToData_(t);if(r.buffer_.length===0){
I(r.processBuffer_.bind(r))}if(e){r.buffer_.push(e);r.bufferSize_+=e.byteLength}})}},{key:"processBuffer_",value:function e(){var t=this;var r=A["default"].BYTES_PER_CHUNK;if(!this.buffer_.length){if(this.updating!==false){this.updating=false;this.trigger({type:"updateend"})}return}var n=this.buffer_[0].subarray(0,r);if(n.byteLength<r||this.buffer_[0].byteLength===r){this.buffer_.shift()}else{this.buffer_[0]=this.buffer_[0].subarray(r)}this.bufferSize_-=n.byteLength;var i=[];var o=n.byteLength;for(var s=0;s<o;s++){i.push(String.fromCharCode(n[s]))}var a=l["default"].btoa(i.join(""));l["default"][this.flashEncodedDataName_]=function(){I(t.processBuffer_.bind(t));delete l["default"][t.flashEncodedDataName_];return a};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}},{key:"convertTagsToData_",value:function e(t){var r=0;var n=this.mediaSource_.tech_;var i=0;var o=undefined;var s=t.tags.videoTags;var a=t.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(s.length||a.length)){var u=s[0]||{pts:Infinity};var f=a[0]||{pts:Infinity};this.basePtsOffset_=Math.min(f.pts,u.pts)}if(n.seeking()){this.videoBufferEnd_=NaN;this.audioBufferEnd_=NaN}if(isNaN(this.videoBufferEnd_)){if(n.buffered().length){i=n.buffered().end(0)-this.timestampOffset}if(n.seeking()){i=Math.max(i,n.currentTime()-this.timestampOffset)}i*=1e3;i+=this.basePtsOffset_}else{i=this.videoBufferEnd_+.1}var l=s.length;if(l&&s[l-1].pts>=i){while(--l){var d=s[l];if(d.pts>i){continue}if(d.keyFrame||d.metaDataTag){break}}while(l){var c=s[l-1];if(!c.metaDataTag){break}l--}}var p=s.slice(l);var h=undefined;if(isNaN(this.audioBufferEnd_)){h=i}else{h=this.audioBufferEnd_+.1}if(p.length){h=Math.min(h,p[0].pts)}l=0;while(l<a.length){if(a[l].pts>=h){break}l++}var g=a.slice(l);if(g.length){this.audioBufferEnd_=g[g.length-1].pts}if(p.length){this.videoBufferEnd_=p[p.length-1].pts}var y=this.getOrderedTags_(p,g);if(y.length===0){return}if(y[0].pts<i&&n.seeking()){var _=1/30;var m=n.currentTime();var v=(i-y[0].pts)/1e3;var b=m-v;if(b<_){b=0}try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(b)}catch(e){}}for(var w=0;w<y.length;w++){r+=y[w].bytes.byteLength}o=new Uint8Array(r);for(var w=0,S=0;w<y.length;w++){o.set(y[w].bytes,S);S+=y[w].bytes.byteLength}return o}},{key:"getOrderedTags_",value:function e(t,r){var n=undefined;var i=[];while(t.length||r.length){if(!t.length){n=r.shift()}else if(!r.length){n=t.shift()}else if(r[0].dts<t[0].dts){n=r.shift()}else{n=t.shift()}i.push(n)}return i}},{key:"onHlsReset_",value:function e(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]);return t}(c["default"].EventTarget);r["default"]=j;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=e(34);var a=i(s);var u=e(50);var f=i(u);var l=function e(t){t.on("data",function(e){a["default"].postMessage({action:"data",segment:e})});t.on("done",function(e){a["default"].postMessage({action:"done"})})};var d=function(){function e(t){o(this,e);this.options=t||{};this.init()}n(e,[{key:"init",value:function e(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new f["default"].Transmuxer(this.options);l(this.transmuxer)}},{key:"push",value:function e(t){var r=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(r)}},{key:"reset",value:function e(){this.init()}},{key:"flush",value:function e(){this.transmuxer.flush()}},{key:"resetCaptions",value:function e(){this.transmuxer.resetCaptions()}}]);return e}();var c=function e(t){t.onmessage=function(e){if(e.data.action==="init"&&e.data.options){this.messageHandlers=new d(e.data.options);return}if(!this.messageHandlers){this.messageHandlers=new d}if(e.data&&e.data.action&&e.data.action!=="init"){if(this.messageHandlers[e.data.action]){this.messageHandlers[e.data.action](e.data)}}}};r["default"]=function(e){return new c(e)};t.exports=r["default"]},{}],75:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=e(34);var l=s(f);var d=e(33);var c=s(d);var p=typeof window!=="undefined"?window["videojs"]:typeof n!=="undefined"?n["videojs"]:null;var h=s(p);var g=e(79);var y=s(g);var _=e(68);var m=e(69);var v=function(e){u(t,e);function t(){var e=this;a(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var r=undefined;this.nativeMediaSource_=new l["default"].MediaSource;for(r in this.nativeMediaSource_){if(!(r in t.prototype)&&typeof this.nativeMediaSource_[r]==="function"){this[r]=this.nativeMediaSource_[r].bind(this.nativeMediaSource_)}}this.duration_=NaN;Object.defineProperty(this,"duration",{get:function e(){if(this.duration_===Infinity){return this.duration_}return this.nativeMediaSource_.duration},set:function e(t){this.duration_=t;if(t!==Infinity){this.nativeMediaSource_.duration=t;return}}});Object.defineProperty(this,"seekable",{get:function e(){if(this.duration_===Infinity){return h["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]])}return this.nativeMediaSource_.seekable}});Object.defineProperty(this,"readyState",{get:function e(){return this.nativeMediaSource_.readyState}});Object.defineProperty(this,"activeSourceBuffers",{get:function e(){return this.activeSourceBuffers_}});this.sourceBuffers=[];this.activeSourceBuffers_=[];this.updateActiveSourceBuffers_=function(){e.activeSourceBuffers_.length=0;if(e.sourceBuffers.length===1){var t=e.sourceBuffers[0];t.appendAudioInitSegment_=true;t.audioDisabled_=!t.audioCodec_;e.activeSourceBuffers_.push(t);return}var r=false;var n=true;for(var i=0;i<e.player_.audioTracks().length;i++){var o=e.player_.audioTracks()[i];if(o.enabled&&o.kind!=="main"){r=true;n=false;break}}e.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=true;if(t.videoCodec_&&t.audioCodec_){t.audioDisabled_=r}else if(t.videoCodec_&&!t.audioCodec_){t.audioDisabled_=true;n=false}else if(!t.videoCodec_&&t.audioCodec_){t.audioDisabled_=n;if(n){return}}e.activeSourceBuffers_.push(t)})};this.onPlayerMediachange_=function(){e.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=true})};this.onHlsReset_=function(){e.sourceBuffers.forEach(function(e){if(e.transmuxer_){e.transmuxer_.postMessage({action:"resetCaptions"})}})};["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},this);this.on("sourceopen",function(t){var r=c["default"].querySelector('[src="'+e.url_+'"]');if(!r){return}e.player_=(0,h["default"])(r.parentNode);e.player_.tech_.on("hls-reset",e.onHlsReset_);if(e.player_.audioTracks&&e.player_.audioTracks()){e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_);e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_);e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)}e.player_.on("mediachange",e.onPlayerMediachange_)});this.on("sourceended",function(t){var r=(0,_.durationOfVideo)(e.duration);for(var n=0;n<e.sourceBuffers.length;n++){var i=e.sourceBuffers[n];var o=i.metadataTrack_&&i.metadataTrack_.cues;if(o&&o.length){o[o.length-1].endTime=r}}});this.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){if(e.transmuxer_){e.transmuxer_.terminate()}});this.sourceBuffers.length=0;if(!this.player_){return}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)}if(this.player_.el_){this.player_.off("mediachange",this.onPlayerMediachange_);this.player_.tech_.off("hls-reset",this.onHlsReset_)}})}i(t,[{key:"addSeekableRange_",value:function e(t,r){var n=undefined;if(this.duration!==Infinity){n=new Error("MediaSource.addSeekableRange() can only be invoked "+"when the duration is Infinity");n.name="InvalidStateError";n.code=11;throw n}if(r>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=r}}},{key:"addSourceBuffer",value:function e(t){var r=undefined;var n=(0,m.parseContentType)(t);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];if(n.parameters&&n.parameters.codecs){i=n.parameters.codecs.split(",");i=(0,m.translateLegacyCodecs)(i);i=i.filter(function(e){return(0,m.isAudioCodec)(e)||(0,m.isVideoCodec)(e)})}if(i.length===0){i=["avc1.4d400d","mp4a.40.2"]}r=new y["default"](this,i);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();r.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true}}else{r=this.nativeMediaSource_.addSourceBuffer(t)}this.sourceBuffers.push(r);return r}}]);return t}(h["default"].EventTarget);r["default"]=v;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function e(t,r,n){var i=undefined;var o=undefined;if(!n){return}if(!n.cues){return}i=n.cues.length;while(i--){o=n.cues[i];if(o.startTime<=r&&o.endTime>=t){n.removeCue(o)}}};r["default"]=n;t.exports=r["default"]},{}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=e(34);var a=i(s);var u=e(59);var f=i(u);var l=function e(t){t.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var r=e.data;e.data=r.buffer;a["default"].postMessage({action:"data",segment:e,byteOffset:r.byteOffset,byteLength:r.byteLength},[e.data])});if(t.captionStream){t.captionStream.on("data",function(e){a["default"].postMessage({action:"caption",data:e})})}t.on("done",function(e){a["default"].postMessage({action:"done"})})};var d=function(){function e(t){o(this,e);this.options=t||{};this.init()}n(e,[{key:"init",value:function e(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new f["default"].Transmuxer(this.options);l(this.transmuxer)}},{key:"push",value:function e(t){var r=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(r)}},{key:"reset",value:function e(){this.init()}},{key:"setTimestampOffset",value:function e(t){var r=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(r*9e4))}},{key:"setAudioAppendStart",value:function e(t){this.transmuxer.setAudioAppendStart(Math.ceil(t.appendStart*9e4))}},{key:"flush",value:function e(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function e(){this.transmuxer.resetCaptions()}}]);return e}();var c=function e(t){t.onmessage=function(e){if(e.data.action==="init"&&e.data.options){this.messageHandlers=new d(e.data.options);return}if(!this.messageHandlers){this.messageHandlers=new d}if(e.data&&e.data.action&&e.data.action!=="init"){if(this.messageHandlers[e.data.action]){this.messageHandlers[e.data.action](e.data)}}}};r["default"]=function(e){return new c(e)};t.exports=r["default"]},{}],78:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:true});function n(e){return e&&e.__esModule?e:{default:e}}var i=e(34);var o=n(i);var s=e(72);var a=n(s);var u=e(75);var f=n(u);var l=typeof window!=="undefined"?window["videojs"]:typeof t!=="undefined"?t["videojs"]:null;var d=n(l);var c=0;var p={mode:"auto"};d["default"].mediaSources={};var h=function e(t,r){var n=d["default"].mediaSources[t];if(n){n.trigger({type:"sourceopen",swfId:r})}else{throw new Error("Media Source not found (Video.js)")}};var g=function e(){return!!o["default"].MediaSource&&!!o["default"].MediaSource.isTypeSupported&&o["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};var y=function e(t){var r=d["default"].mergeOptions(p,t);this.MediaSource={open:h,supportsNativeMediaSources:g};if(r.mode==="html5"||r.mode==="auto"&&g()){return new f["default"]}else if(d["default"].getTech("Flash")){return new a["default"]}throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")};r.MediaSource=y;y.open=h;y.supportsNativeMediaSources=g;var _={createObjectURL:function e(t){var r="blob:vjs-media-source/";var n=undefined;if(t instanceof f["default"]){n=o["default"].URL.createObjectURL(t.nativeMediaSource_);t.url_=n;return n}if(!(t instanceof a["default"])){n=o["default"].URL.createObjectURL(t);t.url_=n;return n}n=r+c;c++;d["default"].mediaSources[n]=t;return n}};r.URL=_;d["default"].MediaSource=y;d["default"].URL=_}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],79:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=typeof window!=="undefined"?window["videojs"]:typeof n!=="undefined"?n["videojs"]:null;var l=s(f);var d=e(70);var c=s(d);var p=e(76);var h=s(p);var g=e(68);var y=e(80);var _=s(y);var m=e(77);var v=s(m);var b=e(69);var w=function e(t,r){var n=t.addSourceBuffer(r);var i=Object.create(null);i.updating=false;i.realBuffer_=n;var o=function(e){if(typeof n[e]==="function"){i[e]=function(){return n[e].apply(n,arguments)}}else if(typeof i[e]==="undefined"){Object.defineProperty(i,e,{get:function t(){return n[e]},set:function t(r){return n[e]=r}})}};for(var s in n){o(s)}return i};var S=function(e){u(t,e);function t(e,r){var n=this;a(this,t);o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"].EventTarget);this.timestampOffset_=0;this.pendingBuffers_=[];this.bufferUpdating_=false;this.mediaSource_=e;this.codecs_=r;this.audioCodec_=null;this.videoCodec_=null;this.audioDisabled_=false;this.appendAudioInitSegment_=true;var i={remux:false};this.codecs_.forEach(function(e){if((0,b.isAudioCodec)(e)){n.audioCodec_=e}else if((0,b.isVideoCodec)(e)){n.videoCodec_=e}});this.transmuxer_=(0,_["default"])(v["default"]);this.transmuxer_.postMessage({action:"init",options:i});this.transmuxer_.onmessage=function(e){if(e.data.action==="data"){return n.data_(e)}if(e.data.action==="done"){return n.done_(e)}};Object.defineProperty(this,"timestampOffset",{get:function e(){return this.timestampOffset_},set:function e(t){if(typeof t==="number"&&t>=0){this.timestampOffset_=t;this.appendAudioInitSegment_=true;this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t})}}});Object.defineProperty(this,"appendWindowStart",{get:function e(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function e(t){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=t}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=t}}});Object.defineProperty(this,"updating",{get:function e(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(this,"buffered",{get:function e(){var t=null;var r=null;var n=0;var i=[];var o=[];if(!this.videoBuffer_&&!this.audioBuffer_){return l["default"].createTimeRange()}if(!this.videoBuffer_){return this.audioBuffer_.buffered}if(!this.audioBuffer_){return this.videoBuffer_.buffered}if(this.audioDisabled_){return this.videoBuffer_.buffered}if(this.videoBuffer_.buffered.length===0&&this.audioBuffer_.buffered.length===0){return l["default"].createTimeRange()}var s=this.videoBuffer_.buffered;var a=this.audioBuffer_.buffered;var u=s.length;while(u--){i.push({time:s.start(u),type:"start"});i.push({time:s.end(u),type:"end"})}u=a.length;while(u--){i.push({time:a.start(u),type:"start"});i.push({time:a.end(u),type:"end"})}i.sort(function(e,t){return e.time-t.time});for(u=0;u<i.length;u++){if(i[u].type==="start"){n++;if(n===2){t=i[u].time}}else if(i[u].type==="end"){n--;if(n===1){r=i[u].time}}if(t!==null&&r!==null){o.push([t,r]);t=null;r=null}}return l["default"].createTimeRanges(o)}})}i(t,[{key:"data_",value:function e(t){var r=t.data.segment;r.data=new Uint8Array(r.data,t.data.byteOffset,t.data.byteLength);r.initSegment=new Uint8Array(r.initSegment.data,r.initSegment.byteOffset,r.initSegment.byteLength);(0,c["default"])(this,this.mediaSource_,r);this.pendingBuffers_.push(r);return}},{key:"done_",value:function e(t){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"createRealSourceBuffers_",value:function e(){var t=this;var r=["audio","video"];r.forEach(function(e){if(!t[e+"Codec_"]){return}if(t[e+"Buffer_"]){return}var n=null;if(t.mediaSource_[e+"Buffer_"]){n=t.mediaSource_[e+"Buffer_"];n.updating=false}else{var i=e+"Codec_";var o=e+'/mp4;codecs="'+t[i]+'"';n=w(t.mediaSource_.nativeMediaSource_,o);t.mediaSource_[e+"Buffer_"]=n}t[e+"Buffer_"]=n;["update","updatestart","updateend"].forEach(function(i){n.addEventListener(i,function(){if(e==="audio"&&t.audioDisabled_){return}if(i==="updateend"){t[e+"Buffer_"].updating=false}var n=r.every(function(r){if(r==="audio"&&t.audioDisabled_){return true}if(e!==r&&t[r+"Buffer_"]&&t[r+"Buffer_"].updating){return false}return true});if(n){return t.trigger(i)}})})})}},{key:"appendBuffer",value:function e(t){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var r=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:r.end(r.length-1)})}this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function e(t,r){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(t,r)}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(t,r)}(0,h["default"])(t,r,this.metadataTrack_);if(this.inbandTextTracks_){for(var n in this.inbandTextTracks_){(0,h["default"])(t,r,this.inbandTextTracks_[n])}}}},{key:"processPendingSegments_",value:function e(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce(function(e,t){var r=t.type;var n=t.data;var i=t.initSegment;e[r].segments.push(n);e[r].bytes+=n.byteLength;e[r].initSegment=i;if(t.captions){e.captions=e.captions.concat(t.captions)}if(t.info){e[r].info=t.info}if(t.metadata){e.metadata=e.metadata.concat(t.metadata)}return e},t);if(!this.videoBuffer_&&!this.audioBuffer_){if(t.video.bytes===0){this.videoCodec_=null}if(t.audio.bytes===0){this.audioCodec_=null}this.createRealSourceBuffers_()}if(t.audio.info){this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info})}if(t.video.info){this.mediaSource_.trigger({type:"videoinfo",info:t.video.info})}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){t.audio.segments.unshift(t.audio.initSegment);t.audio.bytes+=t.audio.initSegment.byteLength}this.appendAudioInitSegment_=false}if(this.videoBuffer_){t.video.segments.unshift(t.video.initSegment);t.video.bytes+=t.video.initSegment.byteLength;this.concatAndAppendSegments_(t.video,this.videoBuffer_);(0,g.addTextTrackData)(this,t.captions,t.metadata)}if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(t.audio,this.audioBuffer_)}this.pendingBuffers_.length=0;this.bufferUpdating_=false}},{key:"concatAndAppendSegments_",value:function e(t,r){var n=0;var i=undefined;if(t.bytes){i=new Uint8Array(t.bytes);t.segments.forEach(function(e){i.set(e,n);n+=e.byteLength});try{r.updating=true;r.appendBuffer(i)}catch(e){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}}},{key:"abort",value:function e(){if(this.videoBuffer_){this.videoBuffer_.abort()}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort()}if(this.transmuxer_){this.transmuxer_.postMessage({action:"reset"})}this.pendingBuffers_.length=0;this.bufferUpdating_=false}}]);return t}(l["default"].EventTarget);r["default"]=S;t.exports=r["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],80:[function(e,t,r){var n=arguments[3];var i=arguments[4];var o=arguments[5];var s=JSON.stringify;t.exports=function(e){var t=[];var r;var a=Object.keys(o);for(var u=0,f=a.length;u<f;u++){var l=a[u];if(o[l].exports===e){r=l;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var d={};for(var u=0,f=a.length;u<f;u++){var l=a[u];d[l]=l}i[r]=[Function(["require","module","exports"],"("+e+")(self)"),d]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var p={};p[r]=r;i[c]=[Function(["require"],"require("+s(r)+")(self)"),p];var h="("+n+")({"+Object.keys(i).map(function(e){return s(e)+":["+i[e][0]+","+s(i[e][1])+"]"}).join(",")+"},{},["+s(c)+"])";var g=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(g.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}],81:[function(e,t,r){t.exports=i;var n=Object.prototype.hasOwnProperty;function i(){var e={};for(var t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r){if(n.call(r,i)){e[i]=r[i]}}}return e}},{}],82:[function(e,t,r){"use strict";var n=e(84);var i=e(93);var o="http://collector.dcdn.baidu.com/dcdn/web_report";var s="00000000000000000000000000000000";var a="1.0";var u=405;var f=100;var l=[196,19,69,47,232,79,42,26,201,33,114,67,190,7,9,9,89,106,201,225,41,198,57,251,231,0,116,32,217,68,116,25,172,214,227,232,184,151,226,193,33,100,94,34,136,110,104,55,44,57,27,17,37,81,47,242,152,105,68,43,162,160,36,25,143,0,178,217,56,145,245,50,144,126,80,106,171,83,233,232,214,72,40,203,200,214,129,236,223,7,240,212,44,163,94,91,115,212,126,57,218,50,105,38,188,58,122,250,226,86,209,208,80,255,232,81,123,93,62,224,156,157,36,37,167,170,161,254,169,238,197,46,57,182,197,34,98,190,199,220,41,90,225,0,149,103,242,197,99,33,154,24,54,140,18,242,59,124,78,214,87,239,190,28,78,98,170,246,215,60,129,35,223,43,222,218,213,127,177,14,151,234,72,62,103,60,165,247,138,222,206,38,15,191,71,68,7,199,236,214,9,102,200,140,38,46,176,50,244,149,33,246,1,193,7,48,134,243,155,238,92,190,28,53,253,102,150,208,43,51,31,45,209,74,241,27,4,84,115,254,149,171,60,80,125,103,115,83,130,235,26,58,24,221,18,91,61,255,230,50,98,235,238,220,161,109,54,35,190,182,45,28,221,244,164,29,41,245,17,213,100,190,208,218,163,206,54,217,201,210,38,18,73,11,119,222,120,41,149,7,167,161,254,232,45,1,235,190,227,114,20,111,169,94,171,192,82,219,116,52,24,165,68,38,141,23,74,66,113,156,150,34,101,26,86,216,217,15,166,214,208,148,236,14,93,251,156,199,76,128,63,234,82,253,98,12,27,150,190,28,96,2,175,40,206,254,192,18,210,220,227,191,218,136,46,62,58,4,15,227,20,46,82,123,158,84,252,46,20,86,71,82,222,91,237,27,139,131,251,18,34,168,179,203,91,12,180,33,18,161,103,31,246,112,220,132,4,254,253,63,183,27,14,245,52,244,161,235,17,139,80,52,255,160,63,209,186,160,104,225,126,103,157,117,105,44,68,56,120,254,49,217,82,65,91,232,187,168,231,74,190,50,241,19,50,12,156,231,5,208,211,72,8,245,74,30,202,228,157,208,57,240,229,180,96,54,54,16,175,41,134,33,121,194,233,30,186,186,43,10,59,105,218,49,77,119,146,80,255,61,151,21,157,245,58,121,151,137,39,16,220,3,129,187,200,191,68,19,5,130,193,243,44,236,255,39,84,173,64,55,172,176,88,242,8,29,32,205,112,149,224,28,81,102,172,34,99,75,162,13,159,158,194,60,42,11,113,10,194,197,42,115,110,199,17,93,157,62,194,64,195,155,103,104,74,67,34,31,38,61,84,120,22,182,119,94,131,107,128,9];var d=[37,111,182,40,246,62,86,46,189,12,208,40,125,104,24,7,170,6,57,6,253,176,65,27,127,105,203,0,183,147,49,34,156,102,249,217,182,55,215,209,99,234,3,141,67,37,21,227,134,55,248,227,241,81,110,72,167,125,24,239,196,43,166,43,124,65,2,247,78,103,162,230,87,225,100,21,185,72,253,23,120,74,176,28,214,228,114,243,5,243,217,218,57,235,130,77,130,234,133,10,153,4,173,229,84,103,188,245,131,17,229,191,139,208,60,15,82,50,137,70,188,242,57,216,66,215,102,53,143,178,60,41,76,246,56,59,188,75,156,17,95,186,199,31,125,146,109,254,85,23,198,45,74,59,182,25,19,55,223,255,71,133,223,65,165,151,243,8,106,174,190,120,41,192,219,210,248,181,57,247,57,112,90,215,211,91,36,2,155,85,167,44,199,26,6,17,57,73,128,12,40,210,180,65,127,139,246,208,52,38,166,50,70,24,222,106,236,152,6,255,170,100,168,66,2,144,176,202,41,5,204,56,192,171,144,24,68,78,225,181,106,82,52,66,140,29,40,3,94,18,78,40,210,71,129,71,95,245,14,251,151,159,246,255,146,56,139,46,200,215,208,28,4,159,216,213,46,111,10,8,71,154,4,5,186,14,139,54,37,130,104,215,191,88,232,221,216,253,230,220,39,135,200,22,69,212,109,215,175,102,229,78,58,187,77,244,34,10,182,25,22,27,169,59,61,224,216,42,155,40,30,38,162,32,63,42,207,47,11,250,95,198,222,34,233,167,17,39,71,201,190,7,223,0,2,44,150,163,210,120,155,69,156,253,49,169,87,36,92,160,172,203,240,242,78,1,87,25,20,225,193,231,66,79,234,114,36,21,34,54,161,219,149,54,129,240,254,75,87,49,54,2,6,8,245,194,123,32,157,169,23,27,102,122,112,134,20,2,55,62,162,248,15,70,36,227,255,26,57,98,12,203,182,113,18,2,59,236,104,196,118,109,154,113,30,115,123,254,170,18,193,36,115,211,223,231,174,245,7,227,230,102,229,2,227,207,18,251,132,201,104,64,43,114,190,42,8,172,179,3,50,247,142,8,189,246,150,241,80,155,50,230,253,140,91,126,46,229,172,46,249,239,139,244,125,251,244,3,191,134,64,32,105,92,70,69,126,232,29,24,15,21,134,228,167,128,162,27,134,151,127,250,234,5,181,204,164,119,50,193,61,202,79,247,177,19,215,194,175,78,48,86,10,87,95,62,195,18,44,52,96,163,18,89,219,1,33,34,215,211,235,95,96,224,240,68,112,199,246,87,202,246,72,109,100,144,245,117,170,137,255,34,156,10,238,90,191,53,199,108];var c=[252,132,190,206,174,53,252,47,125,134,36,208,27,221,89,40,90,145,47,191,75,20,140,76,139,220,246,90,15,37,90,102,132,162,229,226,134,16,96,36,185,91,180,45,110,153,41,65,78,145,69,37,122,0,112,3,69,172,81,4,187,198,244,43,114,143,86,41,165,22,225,234,128,118,67,80,250,83,240,40,172,189,26,227,109,140,170,64,167,67,66,188,235,89,232,48,30,183,83,61,93,120,195,255,36,195,89,59,14,20,8,244,130,165,247,29,189,67,54,25,96,196,228,207,16,194,41,234,177,186,143,253,176,65,56,218,41,171,160,231,49,77,17,45,46,65,183,206,205,233,245,221,116,95,40,235,172,33,21,217,143,48,152,68,37,45,22,251,47,13,9,48,58,197,225,22,1,250,93,36,156,253,221,35,219,251,120,70,153,231,31,12,129,87,200,225,107,126,179,11,103,111,32,50,109,59,35,232,253,2,17,255,39,6,178,60,140,183,152,249,16,14,225,65,166,241,154,54,152,127,251,248,177,87,236,75,223,132,134,48,68,222,16,85,32,155,46,46,199,51,182,215,206,219,176,46,87,190,20,69,109,32,99,5,96,95,4,35,114,79,32,183,82,242,116,11,38,186,245,205,137,252,137,248,81,13,224,238,157,98,118,15,198,25,184,8,128,1,66,217,167,171,250,251,174,34,193,206,95,10,149,15,184,113,248,56,69,149,203,225,248,243,139,251,250,51,239,223,172,99,96,5,78,214,140,54,109,113,245,0,16,32,179,124,250,6,152,50,137,108,147,250,0,213,5,198,152,174,180,55,121,31,22,235,43,9,56,209,242,40,149,181,55,238,48,30,78,13,36,245,78,57,49,131,6,239,114,55,231,80,42,228,204,255,190,62,104,27,66,9,242,103,122,214,111,238,62,226,157,119,87,43,155,192,242,140,148,238,201,42,74,202,170,82,217,77,180,6,35,157,242,46,14,231,92,207,111,13,200,244,131,51,150,29,88,193,168,11,154,135,54,10,145,212,29,243,147,249,130,252,116,29,69,239,178,42,37,224,122,44,106,229,252,203,242,9,248,218,201,2,42,101,114,236,108,42,69,190,58,42,41,18,138,131,39,76,35,20,61,24,217,114,146,52,152,67,175,5,208,49,31,44,14,250,213,13,208,249,21,232,138,143,79,200,9,132,166,50,81,212,58,12,102,78,190,192,58,193,184,222,137,243,157,245,212,45,123,195,250,2,107,95,64,187,147,32,62,162,26,2,222,120,172,18,30,44,81,48,141,177,7,59,207,42,0,100,209,242,100,113,101,216,223,97,97,145,100,1,218,15,128,33,46,79,134,116,141,144,106,87];r.PCDN_Report_Init=function(e,t,r,n){a=e;s=t;u=r;f=n};r.PCDN_Report=function(e,t,r,i,p,h,g,y,_,m,v,b){var w,S,T,E,A,I,C,k,j,O,B;if(t==undefined){w=-1}else w=t;if(r==undefined){S=-1}else S=r;if(i==undefined){T=-1}else T=i;if(p==undefined){E=-1}else E=p;if(h==undefined){A=""}else A=h;if(g==undefined){I=""}else I=g;if(y==undefined){C=""}else C=y;if(_==undefined){k=-1}else k=_;if(m==undefined){j=-1}else j=m;if(v==undefined){O=-1}else O=v;if(b==undefined){B=-1}else B=b;var x=new proto.report.DCDNReport167Item;x.setKeyName(e);x.setIntData1(w);x.setIntData2(S);x.setIntData3(T);x.setIntData4(E);x.setStringData1(A);x.setStringData2(I);x.setStringData3(C);x.setInt64Data1(k);x.setInt64Data2(j);x.setInt64Data3(O);x.setInt64Data4(B);var D=x.serializeBinary();var R=G(1,100)%3;var P;if(1==R){P=d}else if(2==R){P=c}else{R=0;P=l}var M=q(P,D,D.length);var L=new proto.report.ClientReportItem;L.setType(167);L.setEncodeIndex(R);L.setEncoded(M);var D=L.serializeBinary();var x=new proto.report.ClientReportBody;x.addItem(L);var D=x.serializeBinary();var U=n.deflate(D);var x=new proto.report.ClientReportHead;x.setVersion(f);x.setClientid(u);x.setClientversion(a);x.setZip(2);x.setGuid(s);x.setRegion("cn");x.setClienttype("H5");var N=x.serializeBinary();var F=N.length;var W=F+U.length;var H=new Uint8Array(W)
;for(var V=0;V<F;++V){H[V]=N[V]}for(var V=F;V<W;++V){H[V]=U[V-F]}z(H,F);function q(e,t,r){var n=new Uint8Array(r);var i=r;var o=r;var s;if(o>=2){i=o+256*t[r-1]+t[r-2];var a=(o&255)*2;n[r-2]=t[r-2]^e[a];n[r-1]=t[r-1]^e[a+1];o-=2}a=0;var u=0;while(o>1){u=(i&255)*2;n[a]=t[a]^e[u];n[a+1]=t[a+1]^e[u+1];i++;a+=2;o-=2}if(o>0){n[a]=t[a]^e[(i&255)*2]}return n}function z(e,t){var r=new XMLHttpRequest;r.open("POST",o,true);r.setRequestHeader("Accept",t);r.responseType="arraybuffer";r.onload=function(e){if(this.status==200){}};r.send(e)}function G(e,t){var r=Math.random()*(t-e);var n=Math.round(r+e);n=Math.max(Math.min(n,t),e);return n}function $(e){console.log(e)}};function p(){for(var e=0;e<10;e++){r.PCDN_Report("ProducerInitialize",1);r.PCDN_Report("ProducerInitialize",1,2);r.PCDN_Report("ProducerInitialize",1,2,3);r.PCDN_Report("ProducerInitialize",1,2,3,4);r.PCDN_Report("ProducerInitialize",1,2,3,4,"5");r.PCDN_Report("ProducerInitialize",1,2,3,4,"5","6");r.PCDN_Report("ProducerInitialize",1,2,3,4,"5","6","7");r.PCDN_Report("ProducerInitialize",1,2,3,4,"5","6","7",8);r.PCDN_Report("ProducerInitialize",1,2,3,4,"5","6","7",8,9);r.PCDN_Report("ProducerInitialize",1,2,3,4,"5","6","7",8,9,10);r.PCDN_Report("ProducerInitialize",1,2,3,4,"5","6","7",8,9,10,11)}}},{}],83:[function(require,module,exports){(function(global){var $jscomp={scope:{},getGlobal:function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global?global:e}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return"jscomp_symbol_"+e+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var t=e[Symbol.iterator];if(t)return t.call(e);var r=0;return{next:function(){return r<e.length?{done:!1,value:e[r++]}:{done:!0}}}};$jscomp.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r};$jscomp.arrayFromIterable=function(e){return e instanceof Array?e:$jscomp.arrayFromIterator($jscomp.makeIterator(e))};$jscomp.inherits=function(e,t){function r(){}r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e;for(var n in t)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n]};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var r=0,n={next:function(){if(r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};$jscomp.initSymbol();$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return n};return n};$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,i=0;i<n;i++){var o=e[i];if(t.call(r,o,i,e))return{i:i,v:o}}return{i:-1,v:void 0}};$jscomp.array.from=function(e,t,r){$jscomp.initSymbolIterator();t=null!=t?t:function(e){return e};var n=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();var i=e[Symbol.iterator];"function"==typeof i&&(e=i.call(e));if("function"==typeof e.next)for(;!(i=e.next()).done;)n.push(t.call(r,i.value));else for(var i=e.length,o=0;o<i;o++)n.push(t.call(r,e[o]));return n};$jscomp.array.of=function(e){return $jscomp.array.from(arguments)};$jscomp.array.entries=function(){return $jscomp.iteratorFromArray(this,function(e,t){return[e,t]})};$jscomp.array.installHelper_=function(e,t){!Array.prototype[e]&&Object.defineProperties&&Object.defineProperty&&Object.defineProperty(Array.prototype,e,{configurable:!0,enumerable:!1,writable:!0,value:t})};$jscomp.array.entries$install=function(){$jscomp.array.installHelper_("entries",$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.iteratorFromArray(this,function(e){return e})};$jscomp.array.keys$install=function(){$jscomp.array.installHelper_("keys",$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.iteratorFromArray(this,function(e,t){return t})};$jscomp.array.values$install=function(){$jscomp.array.installHelper_("values",$jscomp.array.values)};$jscomp.array.copyWithin=function(e,t,r){var n=this.length;e=Number(e);t=Number(t);r=Number(null!=r?r:n);if(e<t)for(r=Math.min(r,n);t<r;)t in this?this[e++]=this[t++]:(delete this[e++],t++);else for(r=Math.min(r,n+t-e),e+=r-t;r>t;)--r in this?this[--e]=this[r]:delete this[e];return this};$jscomp.array.copyWithin$install=function(){$jscomp.array.installHelper_("copyWithin",$jscomp.array.copyWithin)};$jscomp.array.fill=function(e,t,r){var n=this.length||0;0>t&&(t=Math.max(0,n+t));if(null==r||r>n)r=n;r=Number(r);0>r&&(r=Math.max(0,n+r));for(t=Number(t||0);t<r;t++)this[t]=e;return this};$jscomp.array.fill$install=function(){$jscomp.array.installHelper_("fill",$jscomp.array.fill)};$jscomp.array.find=function(e,t){return $jscomp.findInternal(this,e,t).v};$jscomp.array.find$install=function(){$jscomp.array.installHelper_("find",$jscomp.array.find)};$jscomp.array.findIndex=function(e,t){return $jscomp.findInternal(this,e,t).i};$jscomp.array.findIndex$install=function(){$jscomp.array.installHelper_("findIndex",$jscomp.array.findIndex)};$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.Map$isConformant=function(){if($jscomp.ASSUME_NO_NATIVE_MAP)return!1;var e=$jscomp.global.Map;if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e($jscomp.makeIterator([[t,"s"]]));if("s"!=r.get(t)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();if(i.done||i.value[0]!=t||"s"!=i.value[1])return!1;i=n.next();return i.done||4!=i.value[0].x||"t"!=i.value[1]||!n.next().done?!1:!0}catch(e){return!1}};$jscomp.Map=function(e){this.data_={};this.head_=$jscomp.Map.createHead();this.size=0;if(e){e=$jscomp.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};$jscomp.Map.prototype.set=function(e,t){var r=$jscomp.Map.maybeGetEntry(this,e);r.list||(r.list=this.data_[r.id]=[]);r.entry?r.entry.value=t:(r.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},r.list.push(r.entry),this.head_.previous.next=r.entry,this.head_.previous=r.entry,this.size++);return this};$jscomp.Map.prototype["delete"]=function(e){e=$jscomp.Map.maybeGetEntry(this,e);return e.entry&&e.list?(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead();this.size=0};$jscomp.Map.prototype.has=function(e){return!!$jscomp.Map.maybeGetEntry(this,e).entry};$jscomp.Map.prototype.get=function(e){return(e=$jscomp.Map.maybeGetEntry(this,e).entry)&&e.value};$jscomp.Map.prototype.entries=function(){return $jscomp.Map.makeIterator_(this,function(e){return[e.key,e.value]})};$jscomp.Map.prototype.keys=function(){return $jscomp.Map.makeIterator_(this,function(e){return e.key})};$jscomp.Map.prototype.values=function(){return $jscomp.Map.makeIterator_(this,function(e){return e.value})};$jscomp.Map.prototype.forEach=function(e,t){for(var r=this.entries(),n;!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)};$jscomp.Map.maybeGetEntry=function(e,t){var r=$jscomp.Map.getId(t),n=e.data_[r];if(n&&Object.prototype.hasOwnProperty.call(e.data_,r))for(var i=0;i<n.length;i++){var o=n[i];if(t!==t&&o.key!==o.key||t===o.key)return{id:r,list:n,index:i,entry:o}}return{id:r,list:n,index:-1,entry:void 0}};$jscomp.Map.makeIterator_=function(e,t){var r=e.head_,n={next:function(){if(r){for(;r.head!=e.head_;)r=r.previous;for(;r.next!=r.head;)return r=r.next,{done:!1,value:t(r)};r=null}return{done:!0,value:void 0}}};$jscomp.initSymbol();$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return n};return n};$jscomp.Map.mapIndex_=0;$jscomp.Map.createHead=function(){var e={};return e.previous=e.next=e.head=e};$jscomp.Map.getId=function(e){if(!(e instanceof Object))return"p_"+e;if(!($jscomp.Map.idKey in e))try{$jscomp.Map.defineProperty(e,$jscomp.Map.idKey,{value:++$jscomp.Map.mapIndex_})}catch(e){}return $jscomp.Map.idKey in e?e[$jscomp.Map.idKey]:"o_ "+e};$jscomp.Map.defineProperty=Object.defineProperty?function(e,t,r){Object.defineProperty(e,t,{value:String(r)})}:function(e,t,r){e[t]=String(r)};$jscomp.Map.Entry=function(){};$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();$jscomp.Map$isConformant()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.idKey=Symbol("map-id-key"),$jscomp.Map$install=function(){})};$jscomp.math=$jscomp.math||{};$jscomp.math.clz32=function(e){e=Number(e)>>>0;if(0===e)return 32;var t=0;0===(e&4294901760)&&(e<<=16,t+=16);0===(e&4278190080)&&(e<<=8,t+=8);0===(e&4026531840)&&(e<<=4,t+=4);0===(e&3221225472)&&(e<<=2,t+=2);0===(e&2147483648)&&t++;return t};$jscomp.math.imul=function(e,t){e=Number(e);t=Number(t);var r=e&65535,n=t&65535;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(e){e=Number(e);return 0===e||isNaN(e)?e:0<e?1:-1};$jscomp.math.log10=function(e){return Math.log(e)/Math.LN10};$jscomp.math.log2=function(e){return Math.log(e)/Math.LN2};$jscomp.math.log1p=function(e){e=Number(e);if(.25>e&&-.25<e){for(var t=e,r=1,n=e,i=0,o=1;i!=n;)t*=e,o*=-1,n=(i=n)+o*t/++r;return n}return Math.log(1+e)};$jscomp.math.expm1=function(e){e=Number(e);if(.25>e&&-.25<e){for(var t=e,r=1,n=e,i=0;i!=n;)t*=e/++r,n=(i=n)+t;return n}return Math.exp(e)-1};$jscomp.math.cosh=function(e){e=Number(e);return(Math.exp(e)+Math.exp(-e))/2};$jscomp.math.sinh=function(e){e=Number(e);return 0===e?e:(Math.exp(e)-Math.exp(-e))/2};$jscomp.math.tanh=function(e){e=Number(e);if(0===e)return e;var t=Math.exp(-2*Math.abs(e)),t=(1-t)/(1+t);return 0>e?-t:t};$jscomp.math.acosh=function(e){e=Number(e);return Math.log(e+Math.sqrt(e*e-1))};$jscomp.math.asinh=function(e){e=Number(e);if(0===e)return e;var t=Math.log(Math.abs(e)+Math.sqrt(e*e+1));return 0>e?-t:t};$jscomp.math.atanh=function(e){e=Number(e);return($jscomp.math.log1p(e)-$jscomp.math.log1p(-e))/2};$jscomp.math.hypot=function(e,t,r){e=Number(e);t=Number(t);var n,i,o,s=Math.max(Math.abs(e),Math.abs(t));for(n=2;n<arguments.length;n++)s=Math.max(s,Math.abs(arguments[n]));if(1e100<s||1e-100>s){e/=s;t/=s;o=e*e+t*t;for(n=2;n<arguments.length;n++)i=Number(arguments[n])/s,o+=i*i;return Math.sqrt(o)*s}o=e*e+t*t;for(n=2;n<arguments.length;n++)i=Number(arguments[n]),o+=i*i;return Math.sqrt(o)};$jscomp.math.trunc=function(e){e=Number(e);if(isNaN(e)||Infinity===e||-Infinity===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t};$jscomp.math.cbrt=function(e){if(0===e)return e;e=Number(e);var t=Math.pow(Math.abs(e),1/3);return 0>e?-t:t};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(e){return"number"!==typeof e?!1:!isNaN(e)&&Infinity!==e&&-Infinity!==e};$jscomp.number.isInteger=function(e){return $jscomp.number.isFinite(e)?e===Math.floor(e):!1};$jscomp.number.isNaN=function(e){return"number"===typeof e&&isNaN(e)};$jscomp.number.isSafeInteger=function(e){return $jscomp.number.isInteger(e)&&Math.abs(e)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=function(){return Math.pow(2,-52)}();$jscomp.number.MAX_SAFE_INTEGER=function(){return 9007199254740991}();$jscomp.number.MIN_SAFE_INTEGER=function(){return-9007199254740991}();$jscomp.object=$jscomp.object||{};$jscomp.object.assign=function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};$jscomp.object.is=function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t};$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.Set$isConformant=function(){if($jscomp.ASSUME_NO_NATIVE_SET)return!1;var e=$jscomp.global.Set;if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e($jscomp.makeIterator([t]));if(!r.has(t)||1!=r.size||r.add(t)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();if(i.done||i.value[0]!=t||i.value[1]!=t)return!1;i=n.next();return i.done||i.value[0]==t||4!=i.value[0].x||i.value[1]!=i.value[0]?!1:n.next().done}catch(e){return!1}};$jscomp.Set=function(e){this.map_=new $jscomp.Map;if(e){e=$jscomp.makeIterator(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.map_.size};$jscomp.Set.prototype.add=function(e){this.map_.set(e,e);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(e){e=this.map_["delete"](e);this.size=this.map_.size;return e};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(e){return this.map_.has(e)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};$jscomp.Set.prototype.forEach=function(e,t){var r=this;this.map_.forEach(function(n){return e.call(t,n,n,r)})};$jscomp.Set$install=function(){$jscomp.Map$install();$jscomp.Set$isConformant()?$jscomp.Set=$jscomp.global.Set:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values,$jscomp.Set$install=function(){})};$jscomp.string=$jscomp.string||{};$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""};$jscomp.string.fromCodePoint=function(e){for(var t="",r=0;r<arguments.length;r++){var n=Number(arguments[r]);if(0>n||1114111<n||n!==Math.floor(n))throw new RangeError("invalid_code_point "+n);65535>=n?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(n>>>10&1023|55296),t+=String.fromCharCode(n&1023|56320))}return t};$jscomp.string.repeat=function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)if(e&1&&(r+=t),e>>>=1)t+=t;return r};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};$jscomp.string.codePointAt=function(e){var t=$jscomp.checkStringArgs(this,null,"codePointAt"),r=t.length;e=Number(e)||0;if(0<=e&&e<r){e|=0;var n=t.charCodeAt(e);if(55296>n||56319<n||e+1===r)return n;e=t.charCodeAt(e+1);return 56320>e||57343<e?n:1024*(n-55296)+e+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};$jscomp.string.includes=function(e,t){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,t||0)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};$jscomp.string.startsWith=function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";for(var n=r.length,i=e.length,o=Math.max(0,Math.min(t|0,r.length)),s=0;s<i&&o<n;)if(r[o++]!=e[s++])return!1;return s>=i};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};$jscomp.string.endsWith=function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="";void 0===t&&(t=r.length);for(var n=Math.max(0,Math.min(t|0,r.length)),i=e.length;0<i&&0<n;)if(r[--n]!=e[--i])return!1;return 0>=i};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(e){return void 0!==e};goog.exportPath_=function(e,t,r){e=e.split(".");r=r||goog.global;e[0]in r||!r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)!e.length&&goog.isDef(t)?r[n]=t:r=r[n]?r[n]:r[n]={}};goog.define=function(e,t){var r=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?r=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(r=goog.global.CLOSURE_DEFINES[e]));goog.exportPath_(e,r)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)};goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=e;if(!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}};goog.module.get=function(e){return goog.module.getInternal_(e)};goog.module.getInternal_=function(e){if(!COMPILED)return goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))};goog.forwardDeclare=function(e){};COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0});goog.getObjectByName=function(e,t){for(var r=e.split("."),n=t||goog.global,i;i=r.shift();)if(goog.isDefAndNotNull(n[i]))n=n[i];else return null;return n};goog.globalize=function(e,t){var r=t||goog.global,n;for(n in e)r[n]=e[n]};goog.addDependency=function(e,t,r,n){if(goog.DEPENDENCIES_ENABLED){var i;e=e.replace(/\\/g,"/");for(var o=goog.dependencies_,s=0;i=t[s];s++)o.nameToPath[i]=e,o.pathIsModule[e]=!!n;for(n=0;t=r[n];n++)e in o.requires||(o.requires[e]={}),o.requires[e][t]=!0}};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)};goog.require=function(e){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e);if(goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.writeScripts_(t),null}e="goog.require could not find: "+e;goog.logToConsole_(e);throw Error(e)}};goog.basePath="";goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(e){e.getInstance=function(){if(e.instance_)return e.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e);return e.instance_=new e}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("SCRIPT"),t=e.length-1;0<=t;--t){var r=e[t].src,n=r.lastIndexOf("?"),n=-1==n?r.length:n;if("base.js"==r.substr(n-7,7)){goog.basePath=r.substr(0,n-7);break}}},goog.importScript_=function(e,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(e){goog.importScript_("",'goog.retrieveAndExecModule_("'+e+'");')&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(0<e){var t=goog.queuedModules_;goog.queuedModules_=[];for(var r=0;r<e;r++)goog.maybeProcessDeferredPath_(t[r])}},goog.maybeProcessDeferredDep_=function(e){goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)&&(e=goog.getPathFromDeps_(e),goog.maybeProcessDeferredPath_(goog.basePath+e))},goog.isDeferredModule_=function(e){return(e=goog.getPathFromDeps_(e))&&goog.dependencies_.pathIsModule[e]?goog.basePath+e in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(e){if((e=goog.getPathFromDeps_(e))&&e in goog.dependencies_.requires)for(var t in goog.dependencies_.requires[e])if(!goog.isProvided_(t)&&!goog.isDeferredModule_(t))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e];goog.globalEval(t)}},goog.loadModuleFromUrl=function(e){goog.retrieveAndExecModule_(e)},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};var r;if(goog.isFunction(e))r=e.call(goog.global,{});else if(goog.isString(e))r=goog.loadModuleFromSource_.call(goog.global,e);else throw Error("Invalid module definition");var n=goog.moduleLoaderState_.moduleName;if(!goog.isString(n)||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(r);goog.loadedModules_[n]=r}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){eval(a);return{}},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"><\/script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,r=t.createElement("script");r.type="text/javascript";r.src=e;r.defer=!1;r.async=!1;t.head.appendChild(r)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var r=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==r.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}var n=goog.IS_OLD_IE_;void 0===t?n?(n=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",r.write('<script type="text/javascript" src="'+e+'"'+n+"><\/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e):r.write('<script type="text/javascript">'+t+"<\/script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(e){function t(e){if(!(e in i.written||e in i.visited)){i.visited[e]=!0;if(e in i.requires)for(var o in i.requires[e])if(!goog.isProvided_(o))if(o in i.nameToPath)t(i.nameToPath[o]);else throw Error("Undefined nameToPath for "+o);e in n||(n[e]=!0,r.push(e))}}var r=[],n={},i=goog.dependencies_;t(e);for(e=0;e<r.length;e++){var o=r[e];goog.dependencies_.written[o]=!0}var s=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(e=0;e<r.length;e++)if(o=r[e])i.pathIsModule[o]?goog.importModule_(goog.basePath+o):goog.importScript_(goog.basePath+o);else throw goog.moduleLoaderState_=s,Error("Undefined script input");goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")};goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;t.open("get",e,!1);t.send();return t.responseText};goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var r=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,n=goog.loadFileSync_(e);if(null!=n)n=goog.wrapModule_(e,n),goog.IS_OLD_IE_?(goog.dependencies_.deferred[t]=n,goog.queuedModules_.push(t)):r(e,n);else throw Error("load of "+e+"failed")}};goog.typeOf=function(e){var t=typeof e;if("object"==t)if(e){if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==t&&"undefined"==typeof e.call)return"object";return t};goog.isNull=function(e){return null===e};goog.isDefAndNotNull=function(e){return null!=e};goog.isArray=function(e){return"array"==goog.typeOf(e)};goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length};goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear};goog.isString=function(e){return"string"==typeof e};goog.isBoolean=function(e){return"boolean"==typeof e};goog.isNumber=function(e){return"number"==typeof e};goog.isFunction=function(e){return"function"==goog.typeOf(e)};goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t};goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]};goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}};goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var t="array"==t?[]:{},r;for(r in e)t[r]=goog.cloneObject(e[r]);return t}return e};goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)};goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(r,n);return e.apply(t,r)}}return function(){return e.apply(t,arguments)}};goog.bind=function(e,t,r){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();t.push.apply(t,arguments);return e.apply(this,t)}};goog.mixin=function(e,t){for(var r in t)e[r]=t[r]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("SCRIPT");r.type="text/javascript";r.defer=!1;r.appendChild(t.createTextNode(e));t.body.appendChild(r);t.body.removeChild(r)}}else throw Error("goog.globalEval not available")};goog.evalWorksForGlobals_=null;goog.getCssName=function(e,t){var r=function(e){return goog.cssNameMapping_[e]||e},n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(r(e[n]));return t.join("-")},n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(e){return e};return t?e+"-"+n(t):n(e)};goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e;goog.cssNameMappingStyle_=t};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(e,t){t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e}));return e};goog.getMsgWithFallback=function(e,t){return e};goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)};goog.exportProperty=function(e,t,r){e[t]=r};goog.inherits=function(e,t){function r(){}r.prototype=t.prototype;e.superClass_=t.prototype;e.prototype=new r;e.prototype.constructor=e;e.base=function(e,r,n){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[r].apply(e,i)}};goog.base=function(e,t,r){var n=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_){for(var i=Array(arguments.length-1),o=1;o<arguments.length;o++)i[o-1]=arguments[o];return n.superClass_.constructor.apply(e,i)}i=Array(arguments.length-2);for(o=2;o<arguments.length;o++)i[o-2]=arguments[o];for(var o=!1,s=e.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[t]===n)o=!0;else if(o)return s.prototype[t].apply(e,i);if(e[t]===n)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")};goog.scope=function(e){e.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);goog.defineClass=function(e,t){var r=t.constructor,n=t.statics;r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")});r=goog.defineClass.createSealingConstructor_(r,e);e&&goog.inherits(r,e);delete t.constructor;delete t.statics;goog.defineClass.applyProperties_(r.prototype,t);null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n));return r};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;goog.defineClass.createSealingConstructor_=function(e,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var r=function(){var t=e.apply(this,arguments)||this;t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_];this.constructor===r&&Object.seal(t);return t};return r}return e}
;goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";goog.dom={};goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.debug={};goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e));this.reportErrorToServer=!0};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.DETECT_DOUBLE_ESCAPING=!1;goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1;goog.string.Unicode={NBSP:" "};goog.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)};goog.string.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r};goog.string.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(0,t.length))};goog.string.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))};goog.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()};goog.string.subs=function(e,t){for(var r=e.split("%s"),n="",i=Array.prototype.slice.call(arguments,1);i.length&&1<r.length;)n+=r.shift()+i.shift();return n+r.join("%s")};goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)};goog.string.isEmptyString=function(e){return 0==e.length};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)};goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)};goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)};goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)};goog.string.isSpace=function(e){return" "==e};goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e};goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(e,t){var r=String(e).toLowerCase(),n=String(t).toLowerCase();return r<n?-1:r==n?0:1};goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=e.toLowerCase().match(r),i=t.toLowerCase().match(r),o=Math.min(n.length,i.length),s=0;s<o;s++){r=n[s];var a=i[s];if(r!=a)return e=parseInt(r,10),!isNaN(e)&&(t=parseInt(a,10),!isNaN(t)&&e-t)?e-t:r<a?-1:1}return n.length!=i.length?n.length-i.length:e<t?-1:1};goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)};goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)};goog.string.numerateCompare=goog.string.floatAwareCompare;goog.string.urlEncode=function(e){return encodeURIComponent(String(e))};goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))};goog.string.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")};goog.string.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.AMP_RE_,"&amp;"));-1!=e.indexOf("<")&&(e=e.replace(goog.string.LT_RE_,"&lt;"));-1!=e.indexOf(">")&&(e=e.replace(goog.string.GT_RE_,"&gt;"));-1!=e.indexOf('"')&&(e=e.replace(goog.string.QUOT_RE_,"&quot;"));-1!=e.indexOf("'")&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;"));-1!=e.indexOf("\0")&&(e=e.replace(goog.string.NULL_RE_,"&#0;"));goog.string.DETECT_DOUBLE_ESCAPING&&-1!=e.indexOf("e")&&(e=e.replace(goog.string.E_RE_,"&#101;"))}return e};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/;goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e};goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e};goog.string.unescapeEntitiesUsingDom_=function(e,t){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n;n=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var i=r[e];if(i)return i;if("#"==t.charAt(0)){var o=Number("0"+t.substr(1));isNaN(o)||(i=String.fromCharCode(o))}i||(n.innerHTML=e+" ",i=n.firstChild.nodeValue.slice(0,-1));return r[e]=i})};goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var r=Number("0"+t.substr(1));if(!isNaN(r))return String.fromCharCode(r)}return e}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)};goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(e,t){for(var r=t.length,n=0;n<r;n++){var i=1==r?t:t.charAt(n);if(e.charAt(0)==i&&e.charAt(e.length-1)==i)return e.substring(1,e.length-1)}return e};goog.string.truncate=function(e,t,r){r&&(e=goog.string.unescapeEntities(e));e.length>t&&(e=e.substring(0,t-3)+"...");r&&(e=goog.string.htmlEscape(e));return e};goog.string.truncateMiddle=function(e,t,r,n){r&&(e=goog.string.unescapeEntities(e));if(n&&e.length>t){n>t&&(n=t);var i=e.length-n;e=e.substring(0,t-n)+"..."+e.substring(i)}else e.length>t&&(n=Math.floor(t/2),i=e.length-n,e=e.substring(0,n+t%2)+"..."+e.substring(i));r&&(e=goog.string.htmlEscape(e));return e};goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(e){e=String(e);for(var t=['"'],r=0;r<e.length;r++){var n=e.charAt(r),i=n.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[n]||(31<i&&127>i?n:goog.string.escapeChar(n))}t.push('"');return t.join("")};goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")};goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t,r=e.charCodeAt(0);if(31<r&&127>r)t=e;else{if(256>r){if(t="\\x",16>r||256<r)t+="0"}else t="\\u",4096>r&&(t+="0");t+=r.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[e]=t};goog.string.contains=function(e,t){return-1!=e.indexOf(t)};goog.string.caseInsensitiveContains=function(e,t){return goog.string.contains(e.toLowerCase(),t.toLowerCase())};goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0};goog.string.removeAt=function(e,t,r){var n=e;0<=t&&t<e.length&&0<r&&(n=e.substr(0,t)+e.substr(t+r,e.length-t-r));return n};goog.string.remove=function(e,t){var r=new RegExp(goog.string.regExpEscape(t),"");return e.replace(r,"")};goog.string.removeAll=function(e,t){var r=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(r,"")};goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)};goog.string.padNumber=function(e,t,r){e=goog.isDef(r)?e.toFixed(r):String(e);r=e.indexOf(".");-1==r&&(r=e.length);return goog.string.repeat("0",Math.max(0,t-r))+e};goog.string.makeSafe=function(e){return null==e?"":String(e)};goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};goog.string.compareVersions=function(e,t){for(var r=0,n=goog.string.trim(String(e)).split("."),i=goog.string.trim(String(t)).split("."),o=Math.max(n.length,i.length),s=0;0==r&&s<o;s++){var a=n[s]||"",u=i[s]||"",f=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var d=f.exec(a)||["","",""],c=l.exec(u)||["","",""];if(0==d[0].length&&0==c[0].length)break;var r=0==d[1].length?0:parseInt(d[1],10),p=0==c[1].length?0:parseInt(c[1],10),r=goog.string.compareElements_(r,p)||goog.string.compareElements_(0==d[2].length,0==c[2].length)||goog.string.compareElements_(d[2],c[2])}while(0==r)}return r};goog.string.compareElements_=function(e,t){return e<t?-1:e>t?1:0};goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t};goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)};goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)};goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})};goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(e,t){var r=goog.isString(t)?goog.string.regExpEscape(t):"\\s";return e.replace(new RegExp("(^"+(r?"|["+r+"]+":"")+")([a-z])","g"),function(e,t,r){return t+r.toUpperCase()})};goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()};goog.string.parseInt=function(e){isFinite(e)&&(e=String(e));return goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN};goog.string.splitLimit=function(e,t,r){e=e.split(t);for(var n=[];0<r&&e.length;)n.push(e.shift()),r--;e.length&&n.push(e.join(t));return n};goog.string.editDistance=function(e,t){var r=[],n=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var i=0;i<t.length+1;i++)r[i]=i;for(i=0;i<e.length;i++){n[0]=i+1;for(var o=0;o<t.length;o++)n[o+1]=Math.min(n[o]+1,r[o+1]+1,r[o]+Number(e[i]!=t[o]));for(o=0;o<r.length;o++)r[o]=n[o]}return n[t.length]};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(e,t){t.unshift(e);goog.debug.Error.call(this,goog.string.subs.apply(null,t));t.shift();this.messagePattern=e};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;goog.asserts.doAssertFailure_=function(e,t,r,n){var i="Assertion failed";if(r)var i=i+(": "+r),o=n;else e&&(i+=": "+e,o=t);e=new goog.asserts.AssertionError(""+i,o||[]);goog.asserts.errorHandler_(e)};goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)};goog.asserts.assert=function(e,t,r){goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))};goog.asserts.assertNumber=function(e,t,r){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertString=function(e,t,r){goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertFunction=function(e,t,r){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertObject=function(e,t,r){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertArray=function(e,t,r){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertBoolean=function(e,t,r){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertElement=function(e,t,r){!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertInstanceof=function(e,t,r,n){!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3));return e};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")};goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e};var jspb={Map:function(e,t){this.arr_=e;this.valueCtor_=t;this.map_={};this.arrClean=!0;0<this.arr_.length&&this.loadFromArray_()}};jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],r=t[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,t[1])}this.arrClean=!0};jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e=this.map_,t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t].valueWrapper;r&&r.toArray()}}}else{this.arr_.length=0;e=this.stringKeys_();e.sort();for(t=0;t<e.length;t++){var n=this.map_[e[t]];(r=n.valueWrapper)&&r.toArray();this.arr_.push([n.key,n.value])}this.arrClean=!0}return this.arr_};jspb.Map.prototype.toObject=function(e,t){for(var r=this.toArray(),n=[],i=0;i<r.length;i++){var o=this.map_[r[i][0].toString()];this.wrapEntry_(o);var s=o.valueWrapper;s?(goog.asserts.assert(t),n.push([o.key,t(e,s)])):n.push([o.key,o.value])}return n};jspb.Map.fromObject=function(e,t,r){t=new jspb.Map([],t);for(var n=0;n<e.length;n++){var i=e[n][0],o=r(e[n][1]);t.set(i,o)}return t};jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0;this.arr_=e};jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}};$jscomp.initSymbol();"undefined"!=typeof Symbol&&($jscomp.initSymbol(),$jscomp.initSymbolIterator(),jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this});jspb.Map.prototype.getLength=function(){return this.stringKeys_().length};jspb.Map.prototype.clear=function(){this.map_={};this.arrClean=!1};jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);delete this.map_[e];this.arrClean=!1;return t};jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,n.value])}return e};jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,this.wrapEntry_(n)])}return new jspb.Map.ArrayIteratorIterable_(e)};jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.map_[t[r]].key);return new jspb.Map.ArrayIteratorIterable_(e)};jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.wrapEntry_(this.map_[t[r]]));return new jspb.Map.ArrayIteratorIterable_(e)};jspb.Map.prototype.forEach=function(e,t){var r=this.stringKeys_();r.sort();for(var n=0;n<r.length;n++){var i=this.map_[r[n]];e.call(t,this.wrapEntry_(i),i.key,this)}};jspb.Map.prototype.set=function(e,t){var r=new jspb.Map.Entry_(e);this.valueCtor_?(r.valueWrapper=t,r.value=t.toArray()):r.value=t;this.map_[e.toString()]=r;this.arrClean=!1;return this};jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value};jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)};jspb.Map.prototype.has=function(e){return e.toString()in this.map_};jspb.Map.prototype.serializeBinary=function(e,t,r,n,i){var o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var a=this.map_[o[s]];t.beginSubMessage(e);r.call(t,1,a.key);this.valueCtor_?n.call(t,2,this.wrapEntry_(a),i):n.call(t,2,a.value);t.endSubMessage()}};jspb.Map.deserializeBinary=function(e,t,r,n,i){for(var o=void 0,s=void 0;t.nextField()&&!t.isEndGroup();){var a=t.getFieldNumber();1==a?o=r.call(t):2==a&&(e.valueCtor_?(s=new e.valueCtor_,n.call(t,s,i)):s=n.call(t))}goog.asserts.assert(void 0!=o);goog.asserts.assert(void 0!=s);e.set(o,s)};jspb.Map.prototype.stringKeys_=function(){var e=this.map_,t=[],r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};jspb.Map.Entry_=function(e,t){this.key=e;this.value=t;this.valueWrapper=void 0};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.ASSUME_NATIVE_FUNCTIONS=!1;goog.array.peek=function(e){return e[e.length-1]};goog.array.last=goog.array.peek;goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){goog.asserts.assert(null!=e.length);return Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){r=null==r?0:0>r?Math.max(0,e.length+r):r;if(goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,r):-1;for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1};goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){goog.asserts.assert(null!=e.length);return Array.prototype.lastIndexOf.call(e,t,null==r?e.length-1:r)}:function(e,t,r){r=null==r?e.length-1:r;0>r&&(r=Math.max(0,e.length+r));if(goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,r):-1;for(;0<=r;r--)if(r in e&&e[r]===t)return r;return-1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length);Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<n;o++)o in i&&t.call(r,i[o],o,e)};goog.array.forEachRight=function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,n=n-1;0<=n;--n)n in i&&t.call(r,i[n],n,e)};goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){goog.asserts.assert(null!=e.length);return Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=[],o=0,s=goog.isString(e)?e.split(""):e,a=0;a<n;a++)if(a in s){var u=s[a];t.call(r,u,a,e)&&(i[o++]=u)}return i};goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){goog.asserts.assert(null!=e.length);return Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=Array(n),o=goog.isString(e)?e.split(""):e,s=0;s<n;s++)s in o&&(i[s]=t.call(r,o[s],s,e));return i};goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,n){goog.asserts.assert(null!=e.length);n&&(t=goog.bind(t,n));return Array.prototype.reduce.call(e,t,r)}:function(e,t,r,n){var i=r;goog.array.forEach(e,function(r,o){i=t.call(n,i,r,o,e)});return i};goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,n){goog.asserts.assert(null!=e.length);goog.asserts.assert(null!=t);n&&(t=goog.bind(t,n));return Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,n){var i=r;goog.array.forEachRight(e,function(r,o){i=t.call(n,i,r,o,e)});return i};goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){goog.asserts.assert(null!=e.length);return Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(r,i[o],o,e))return!0;return!1};goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){goog.asserts.assert(null!=e.length);return Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&!t.call(r,i[o],o,e))return!1;return!0};goog.array.count=function(e,t,r){var n=0;goog.array.forEach(e,function(e,i,o){t.call(r,e,i,o)&&++n},r);return n};goog.array.find=function(e,t,r){t=goog.array.findIndex(e,t,r);return 0>t?null:goog.isString(e)?e.charAt(t):e[t]};goog.array.findIndex=function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(r,i[o],o,e))return o;return-1};goog.array.findRight=function(e,t,r){t=goog.array.findIndexRight(e,t,r);return 0>t?null:goog.isString(e)?e.charAt(t):e[t]};goog.array.findIndexRight=function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,n=n-1;0<=n;n--)if(n in i&&t.call(r,i[n],n,e))return n;return-1};goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)};goog.array.isEmpty=function(e){return 0==e.length};goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0};goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)};goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)};goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)};goog.array.insertBefore=function(e,t,r){var n;2==arguments.length||0>(n=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,n)};goog.array.remove=function(e,t){var r=goog.array.indexOf(e,t),n;(n=0<=r)&&goog.array.removeAt(e,r);return n};goog.array.removeAt=function(e,t){goog.asserts.assert(null!=e.length);return 1==Array.prototype.splice.call(e,t,1).length};goog.array.removeIf=function(e,t,r){t=goog.array.findIndex(e,t,r);return 0<=t?(goog.array.removeAt(e,t),!0):!1};goog.array.removeAllIf=function(e,t,r){var n=0;goog.array.forEachRight(e,function(i,o){t.call(r,i,o,e)&&goog.array.removeAt(e,o)&&n++});return n};goog.array.concat=function(e){return Array.prototype.concat.apply(Array.prototype,arguments)};goog.array.join=function(e){return Array.prototype.concat.apply(Array.prototype,arguments)};goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(goog.isArrayLike(n)){var i=e.length||0,o=n.length||0;e.length=i+o;for(var s=0;s<o;s++)e[i+s]=n[s]}else e.push(n)}};goog.array.splice=function(e,t,r,n){goog.asserts.assert(null!=e.length);return Array.prototype.splice.apply(e,goog.array.slice(arguments,1))};goog.array.slice=function(e,t,r){goog.asserts.assert(null!=e.length);return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)};goog.array.removeDuplicates=function(e,t,r){t=t||e;var n=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};r=r||n;for(var n={},i=0,o=0;o<e.length;){var s=e[o++],a=r(s);Object.prototype.hasOwnProperty.call(n,a)||(n[a]=!0,t[i++]=s)}t.length=i};goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)};goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)};goog.array.binarySearch_=function(e,t,r,n,i){for(var o=0,s=e.length,a;o<s;){var u=o+s>>1,f;f=r?t.call(i,e[u],u,e):t(n,e[u]);0<f?o=u+1:(s=u,a=!f)}return a?o:~o};goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)};goog.array.stableSort=function(e,t){for(var r=0;r<e.length;r++)e[r]={index:r,value:e[r]};var n=t||goog.array.defaultCompare;goog.array.sort(e,function(e,t){return n(e.value,t.value)||e.index-t.index});for(r=0;r<e.length;r++)e[r]=e[r].value};goog.array.sortByKey=function(e,t,r){var n=r||goog.array.defaultCompare;goog.array.sort(e,function(e,r){return n(t(e),t(r))})};goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,function(e){return e[t]},r)};goog.array.isSorted=function(e,t,r){t=t||goog.array.defaultCompare;for(var n=1;n<e.length;n++){var i=t(e[n-1],e[n]);if(0<i||0==i&&r)return!1}return!0};goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var n=e.length;r=r||goog.array.defaultCompareEquality;for(var i=0;i<n;i++)if(!r(e[i],t[i]))return!1;return!0};goog.array.compare3=function(e,t,r){r=r||goog.array.defaultCompare;for(var n=Math.min(e.length,t.length),i=0;i<n;i++){var o=r(e[i],t[i]);if(0!=o)return o}return goog.array.defaultCompare(e.length,t.length)};goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0};goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)};goog.array.defaultCompareEquality=function(e,t){return e===t};goog.array.binaryInsert=function(e,t,r){r=goog.array.binarySearch(e,t,r);return 0>r?(goog.array.insertAt(e,t,-(r+1)),!0):!1};goog.array.binaryRemove=function(e,t,r){t=goog.array.binarySearch(e,t,r);return 0<=t?goog.array.removeAt(e,t):!1};goog.array.bucket=function(e,t,r){for(var n={},i=0;i<e.length;i++){var o=e[i],s=t.call(r,o,i,e);goog.isDef(s)&&(n[s]||(n[s]=[])).push(o)}return n};goog.array.toObject=function(e,t,r){var n={};goog.array.forEach(e,function(i,o){n[t.call(r,i,o,e)]=i});return n};goog.array.range=function(e,t,r){var n=[],i=0,o=e;r=r||1;void 0!==t&&(i=e,o=t);if(0>r*(o-i))return[];if(0<r)for(e=i;e<o;e+=r)n.push(e);else for(e=i;e>o;e+=r)n.push(e);return n};goog.array.repeat=function(e,t){for(var r=[],n=0;n<t;n++)r[n]=e;return r};goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var n=arguments[r];if(goog.isArray(n))for(var i=0;i<n.length;i+=8192)for(var o=goog.array.slice(n,i,i+8192),o=goog.array.flatten.apply(null,o),s=0;s<o.length;s++)t.push(o[s]);else t.push(n)}return t};goog.array.rotate=function(e,t){goog.asserts.assert(null!=e.length);e.length&&(t%=e.length,0<t?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t)));return e};goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length);goog.asserts.assert(0<=r&&r<e.length);t=Array.prototype.splice.call(e,t,1);Array.prototype.splice.call(e,r,0,t[0])};goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,n=1;n<arguments.length;n++)arguments[n].length<r&&(r=arguments[n].length);for(n=0;n<r;n++){for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o][n]);t.push(i)}return t};goog.array.shuffle=function(e,t){for(var r=t||Math.random,n=e.length-1;0<n;n--){var i=Math.floor(r()*(n+1)),o=e[n];e[n]=e[i];e[i]=o}};goog.array.copyByIndex=function(e,t){var r=[];goog.array.forEach(t,function(t){r.push(e[t])});return r};goog.crypt={};goog.crypt.stringToByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){for(var i=e.charCodeAt(n);255<i;)t[r++]=i&255,i>>=8;t[r++]=i}return t};goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192)var n=goog.array.slice(e,r,r+8192),t=t+String.fromCharCode.apply(null,n);return t};goog.crypt.byteArrayToHex=function(e){return goog.array.map(e,function(e){e=e.toString(16);return 1<e.length?e:"0"+e}).join("")};goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t};goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t[r++]=i:(2048>i?t[r++]=i>>6|192:(55296==(i&64512)&&n+1<e.length&&56320==(e.charCodeAt(n+1)&64512)?(i=65536+((i&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=i&63|128)}return t};goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],r=0,n=0;r<e.length;){var i=e[r++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=e[r++];t[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(239<i&&365>i){var o=e[r++],s=e[r++],a=e[r++],i=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[n++]=String.fromCharCode(55296+(i>>10));t[n++]=String.fromCharCode(56320+(i&1023))}else o=e[r++],s=e[r++],t[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}return t.join("")};goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var r=[],n=0;n<e.length;n++)r.push(e[n]^t[n]);return r};goog.labs={};goog.labs.userAgent={};goog.labs.userAgent.util={};goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""};goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator};goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_();goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()};goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_};goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent()
;return goog.string.contains(t,e)};goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,e)};goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t=RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),r=[],n;n=t.exec(e);)r.push([n[1],n[2],n[3]||void 0]);return r};goog.labs.userAgent.platform={};goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")};goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")};goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")};goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()};goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")};goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")};goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")};goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")};goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";goog.labs.userAgent.platform.isWindows()?(t=/Windows (?:NT|Phone) ([0-9.]+)/,t=(e=t.exec(e))?e[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,t=(e=t.exec(e))&&e[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(t=/Mac OS X ([0-9_.]+)/,t=(e=t.exec(e))?e[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(t=/Android\s+([^\);]+)(\)|;)/,t=(e=t.exec(e))&&e[1]):goog.labs.userAgent.platform.isChromeOS()&&(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,t=(e=t.exec(e))&&e[1]);return t||""};goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)};goog.object={};goog.object.forEach=function(e,t,r){for(var n in e)t.call(r,e[n],n,e)};goog.object.filter=function(e,t,r){var n={},i;for(i in e)t.call(r,e[i],i,e)&&(n[i]=e[i]);return n};goog.object.map=function(e,t,r){var n={},i;for(i in e)n[i]=t.call(r,e[i],i,e);return n};goog.object.some=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return!0;return!1};goog.object.every=function(e,t,r){for(var n in e)if(!t.call(r,e[n],n,e))return!1;return!0};goog.object.getCount=function(e){var t=0,r;for(r in e)t++;return t};goog.object.getAnyKey=function(e){for(var t in e)return t};goog.object.getAnyValue=function(e){for(var t in e)return e[t]};goog.object.contains=function(e,t){return goog.object.containsValue(e,t)};goog.object.getValues=function(e){var t=[],r=0,n;for(n in e)t[r++]=e[n];return t};goog.object.getKeys=function(e){var t=[],r=0,n;for(n in e)t[r++]=n;return t};goog.object.getValueByKeys=function(e,t){for(var r=goog.isArrayLike(t),n=r?t:arguments,r=r?0:1;r<n.length&&(e=e[n[r]],goog.isDef(e));r++);return e};goog.object.containsKey=function(e,t){return null!==e&&t in e};goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1};goog.object.findKey=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return n};goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]};goog.object.isEmpty=function(e){for(var t in e)return!1;return!0};goog.object.clear=function(e){for(var t in e)delete e[t]};goog.object.remove=function(e,t){var r;(r=t in e)&&delete e[t];return r};goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)};goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r};goog.object.set=function(e,t,r){e[t]=r};goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r};goog.object.setWithReturnValueIfNotSet=function(e,t,r){if(t in e)return e[t];r=r();return e[t]=r};goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(r in t)if(!(r in e))return!1;return!0};goog.object.clone=function(e){var t={},r;for(r in e)t[r]=e[r];return t};goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();var t="array"==t?[]:{},r;for(r in e)t[r]=goog.object.unsafeClone(e[r]);return t}return e};goog.object.transpose=function(e){var t={},r;for(r in e)t[e[r]]=r;return t};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.object.extend=function(e,t){for(var r,n,i=1;i<arguments.length;i++){n=arguments[i];for(r in n)e[r]=n[r];for(var o=0;o<goog.object.PROTOTYPE_FIELDS_.length;o++)r=goog.object.PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}};goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<t;n+=2)r[arguments[n]]=arguments[n+1];return r};goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<t;n++)r[arguments[n]]=!0;return r};goog.object.createImmutableView=function(e){var t=e;Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t));return t};goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)};goog.labs.userAgent.browser={};goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")};goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")};goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))};goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")};goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")};goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()&&!goog.labs.userAgent.browser.matchEdge_()};goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())};goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_;goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_;goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_;goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_;goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_;goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_;goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_;goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_;goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_;goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")};goog.labs.userAgent.browser.getVersion=function(){function e(e){e=goog.array.find(e,n);return r[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);var t=goog.labs.userAgent.util.extractVersionTuples(t),r={};goog.array.forEach(t,function(e){r[e[0]]=e[1]});var n=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera","OPR"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""};goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)};goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];var t="",r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==r[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=r[1];return t};goog.labs.userAgent.engine={};goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")};goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")};goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")};goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()};goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){var e=goog.labs.userAgent.util.extractVersionTuples(e),t=goog.labs.userAgent.engine.getEngineTuple_(e);if(t)return"Gecko"==t[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):t[1];var e=e[0],r;if(e&&(r=e[2])&&(r=/Trident\/([^\s;]+)/.exec(r)))return r[1]}return""};goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}};goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)};goog.labs.userAgent.engine.getVersionForKey_=function(e,t){var r=goog.array.find(e,function(e){return t==e[0]});return r&&r[1]||""};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_EDGE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()};goog.userAgent.getNavigator=function(){return goog.global.navigator||null};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE();goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge();goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit();goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigator();return e&&e.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows();goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()};goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigator();return!!e&&goog.string.contains(e.appVersion||"","X11")};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid();goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone();goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();goog.userAgent.operaVersion_=function(){var e=goog.global.opera.version;try{return e()}catch(t){return e}};goog.userAgent.determineVersion_=function(){if(goog.userAgent.OPERA&&goog.global.opera)return goog.userAgent.operaVersion_();var e="",t=goog.userAgent.getVersionRegexResult_();t&&(e=t?t[1]:"");return goog.userAgent.IE&&(t=goog.userAgent.getDocumentMode_(),t>parseFloat(e))?String(t):e};goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO)return/rv\:([^\);]+)(\)|;)/.exec(e);if(goog.userAgent.EDGE)return/Edge\/([\d\.]+)/.exec(e);if(goog.userAgent.IE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(goog.userAgent.WEBKIT)return/WebKit\/(\S+)/.exec(e)};goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[e]||(goog.userAgent.isVersionOrHigherCache_[e]=0<=goog.string.compareVersions(goog.userAgent.VERSION,e))};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document,t=goog.userAgent.getDocumentMode_();return e&&goog.userAgent.IE?t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0}();goog.userAgent.product={};goog.userAgent.product.ASSUME_FIREFOX=!1;goog.userAgent.product.ASSUME_IPHONE=!1;goog.userAgent.product.ASSUME_IPAD=!1;goog.userAgent.product.ASSUME_ANDROID=!1;goog.userAgent.product.ASSUME_CHROME=!1;goog.userAgent.product.ASSUME_SAFARI=!1;goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI;goog.userAgent.product.OPERA=goog.userAgent.OPERA;goog.userAgent.product.IE=goog.userAgent.IE;goog.userAgent.product.EDGE=goog.userAgent.EDGE;goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox();goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()};goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_();goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad();goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser();goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome();goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()};goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_();goog.crypt.base64={};goog.crypt.base64.byteToCharMap_=null;goog.crypt.base64.charToByteMap_=null;goog.crypt.base64.byteToCharMapWebSafe_=null;goog.crypt.base64.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.ENCODED_VALS_BASE+"+/=";goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.ENCODED_VALS_BASE+"-_.";goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA;goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa;goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob;goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter");goog.crypt.base64.init_();for(var r=t?goog.crypt.base64.byteToCharMapWebSafe_:goog.crypt.base64.byteToCharMap_,n=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,f=u?e[i+2]:0,l=o>>2,o=(o&3)<<4|a>>4,a=(a&15)<<2|f>>6,f=f&63;u||(f=64,s||(a=64));n.push(r[l],r[o],r[a],r[f])}return n.join("")};goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)};goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var r="";goog.crypt.base64.decodeStringInternal_(e,function(e){r+=String.fromCharCode(e)});return r};goog.crypt.base64.decodeStringToByteArray=function(e,t){var r=[];goog.crypt.base64.decodeStringInternal_(e,function(e){r.push(e)});return r};goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=new Uint8Array(Math.ceil(3*e.length/4)),r=0;goog.crypt.base64.decodeStringInternal_(e,function(e){t[r++]=e});return t.subarray(0,r)};goog.crypt.base64.decodeStringInternal_=function(e,t){function r(t){for(;n<e.length;){var r=e.charAt(n++),i=goog.crypt.base64.charToByteMap_[r];if(null!=i)return i;if(!goog.string.isEmptyOrWhitespace(r))throw Error("Unknown base64 encoding at char: "+r)}return t}goog.crypt.base64.init_();for(var n=0;;){var i=r(-1),o=r(0),s=r(64),a=r(64);if(64===a&&-1===i)break;t(i<<2|o>>4);64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}};goog.crypt.base64.init_=function(){if(!goog.crypt.base64.byteToCharMap_){goog.crypt.base64.byteToCharMap_={};goog.crypt.base64.charToByteMap_={};goog.crypt.base64.byteToCharMapWebSafe_={};for(var e=0;e<goog.crypt.base64.ENCODED_VALS.length;e++)goog.crypt.base64.byteToCharMap_[e]=goog.crypt.base64.ENCODED_VALS.charAt(e),goog.crypt.base64.charToByteMap_[goog.crypt.base64.byteToCharMap_[e]]=e,goog.crypt.base64.byteToCharMapWebSafe_[e]=goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e),e>=goog.crypt.base64.ENCODED_VALS_BASE.length&&(goog.crypt.base64.charToByteMap_[goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e)]=e)}};jspb.ExtensionFieldInfo=function(e,t,r,n,i){this.fieldIndex=e;this.fieldName=t;this.ctor=r;this.toObjectFn=n;this.isRepeated=i};jspb.ExtensionFieldBinaryInfo=function(e,t,r,n,i,o){this.fieldInfo=e;this.binaryReaderFn=t;this.binaryWriterFn=r;this.binaryMessageSerializeFn=n;this.binaryMessageDeserializeFn=i;this.isPacked=o};jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor};jspb.Message=function(){};jspb.Message.GENERATE_TO_OBJECT=!0;jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE;jspb.Message.GENERATE_TO_STRING=!0;jspb.Message.ASSUME_LOCAL_ARRAYS=!1;jspb.Message.MINIMIZE_MEMORY_ALLOCATIONS=COMPILED;jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array;jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_};jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_};jspb.Message.initialize=function(e,t,r,n,i,o){e.wrappers_=jspb.Message.MINIMIZE_MEMORY_ALLOCATIONS?null:{};t||(t=r?[r]:[]);e.messageId_=r?String(r):void 0;e.arrayIndexOffset_=0===r?-1:0;e.array=t;jspb.Message.initPivotAndExtensionObject_(e,n);e.convertedFloatingPointFields_={};if(i)for(t=0;t<i.length;t++)r=i[t],r<e.pivot_?(r=jspb.Message.getIndex_(e,r),e.array[r]=e.array[r]||(jspb.Message.MINIMIZE_MEMORY_ALLOCATIONS?jspb.Message.EMPTY_LIST_SENTINEL_:[])):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[r]=e.extensionObject_[r]||(jspb.Message.MINIMIZE_MEMORY_ALLOCATIONS?jspb.Message.EMPTY_LIST_SENTINEL_:[]));o&&o.length&&goog.array.forEach(o,goog.partial(jspb.Message.computeOneofCase,e))};jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[];jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:goog.isArray(e)};jspb.Message.initPivotAndExtensionObject_=function(e,t){if(e.array.length){var r=e.array.length-1,n=e.array[r];if(n&&"object"==typeof n&&!jspb.Message.isArray_(n)&&!(jspb.Message.SUPPORTS_UINT8ARRAY_&&n instanceof Uint8Array)){e.pivot_=r-e.arrayIndexOffset_;e.extensionObject_=n;return}}-1<t?(e.pivot_=t,e.extensionObject_=null):e.pivot_=Number.MAX_VALUE};jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})};jspb.Message.toObjectList=function(e,t,r){for(var n=[],i=0;i<e.length;i++)n[i]=t.call(e[i],r,e[i]);return n};jspb.Message.toObjectExtension=function(e,t,r,n,i){for(var o in r){var s=r[o],a=n.call(e,s);if(null!=a){for(var u in s.fieldName)if(s.fieldName.hasOwnProperty(u))break;t[u]=s.toObjectFn?s.isRepeated?jspb.Message.toObjectList(a,s.toObjectFn,i):s.toObjectFn(i,a):a}}};jspb.Message.serializeBinaryExtensions=function(e,t,r,n){for(var i in r){var o=r[i],s=o.fieldInfo;if(!o.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var a=n.call(e,s);if(null!=a)if(s.isMessageType())if(o.binaryMessageSerializeFn)o.binaryWriterFn.call(t,s.fieldIndex,a,o.binaryMessageSerializeFn);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else o.binaryWriterFn.call(t,s.fieldIndex,a)}};jspb.Message.readBinaryExtension=function(e,t,r,n,i){var o=r[t.getFieldNumber()];if(o){r=o.fieldInfo;if(!o.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");var s;r.isMessageType()?(s=new r.ctor,o.binaryReaderFn.call(t,s,o.binaryMessageDeserializeFn)):s=o.binaryReaderFn.call(t);r.isRepeated&&!o.isPacked?(t=n.call(e,r))?t.push(s):i.call(e,r,[s]):i.call(e,r,s)}else t.skipField()};jspb.Message.getField=function(e,t){if(t<e.pivot_){var r=jspb.Message.getIndex_(e,t),n=e.array[r];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[r]=[]:n}if(e.extensionObject_)return n=e.extensionObject_[t],n===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:n};jspb.Message.getRepeatedField=function(e,t){if(t<e.pivot_){var r=jspb.Message.getIndex_(e,t),n=e.array[r];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[r]=[]:n}n=e.extensionObject_[t];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:n};jspb.Message.getOptionalFloatingPointField=function(e,t){var r=jspb.Message.getField(e,t);return null==r?r:+r};jspb.Message.getRepeatedFloatingPointField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);e.convertedFloatingPointFields_||(e.convertedFloatingPointFields_={});if(!e.convertedFloatingPointFields_[t]){for(var n=0;n<r.length;n++)r[n]=+r[n];e.convertedFloatingPointFields_[t]=!0}return r};jspb.Message.bytesAsB64=function(e){if(null==e||goog.isString(e))return e;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return goog.crypt.base64.encodeByteArray(e);goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e));return null};jspb.Message.bytesAsU8=function(e){if(null==e||e instanceof Uint8Array)return e;if(goog.isString(e))return goog.crypt.base64.decodeStringToUint8Array(e);goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e));return null};jspb.Message.bytesListAsB64=function(e){jspb.Message.assertConsistentTypes_(e);return!e.length||goog.isString(e[0])?e:goog.array.map(e,jspb.Message.bytesAsB64)};jspb.Message.bytesListAsU8=function(e){jspb.Message.assertConsistentTypes_(e);return!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)};jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,function(e){goog.typeOf(e)!=t&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)})}};jspb.Message.getFieldWithDefault=function(e,t,r){e=jspb.Message.getField(e,t);return null==e?r:e};jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault;jspb.Message.getMapField=function(e,t,r,n){e.wrappers_||(e.wrappers_={});if(t in e.wrappers_)return e.wrappers_[t];if(!r)return r=jspb.Message.getField(e,t),r||(r=[],jspb.Message.setField(e,t,r)),e.wrappers_[t]=new jspb.Map(r,n)};jspb.Message.setField=function(e,t,r){t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=r)};jspb.Message.addToRepeatedField=function(e,t,r,n){e=jspb.Message.getRepeatedField(e,t);void 0!=n?e.splice(n,0,r):e.push(r)};jspb.Message.setOneofField=function(e,t,r,n){(r=jspb.Message.computeOneofCase(e,r))&&r!==t&&void 0!==n&&(e.wrappers_&&r in e.wrappers_&&(e.wrappers_[r]=void 0),jspb.Message.setField(e,r,void 0));jspb.Message.setField(e,t,n)};jspb.Message.computeOneofCase=function(e,t){var r,n;goog.array.forEach(t,function(t){var i=jspb.Message.getField(e,t);goog.isDefAndNotNull(i)&&(r=t,n=i,jspb.Message.setField(e,t,void 0))});return r?(jspb.Message.setField(e,r,n),r):0};jspb.Message.getWrapperField=function(e,t,r,n){e.wrappers_||(e.wrappers_={});if(!e.wrappers_[r]){var i=jspb.Message.getField(e,r);if(n||i)e.wrappers_[r]=new t(i)}return e.wrappers_[r]};jspb.Message.getRepeatedWrapperField=function(e,t,r){jspb.Message.wrapRepeatedField_(e,t,r);t=e.wrappers_[r];t==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[r]=[]);return t};jspb.Message.wrapRepeatedField_=function(e,t,r){e.wrappers_||(e.wrappers_={});if(!e.wrappers_[r]){for(var n=jspb.Message.getRepeatedField(e,r),i=[],o=0;o<n.length;o++)i[o]=new t(n[o]);e.wrappers_[r]=i}};jspb.Message.setWrapperField=function(e,t,r){e.wrappers_||(e.wrappers_={});var n=r?r.toArray():r;e.wrappers_[t]=r;jspb.Message.setField(e,t,n)};jspb.Message.setOneofWrapperField=function(e,t,r,n){e.wrappers_||(e.wrappers_={});var i=n?n.toArray():n;e.wrappers_[t]=n;jspb.Message.setOneofField(e,t,r,i)};jspb.Message.setRepeatedWrapperField=function(e,t,r){e.wrappers_||(e.wrappers_={});r=r||[];for(var n=[],i=0;i<r.length;i++)n[i]=r[i].toArray();e.wrappers_[t]=r;jspb.Message.setField(e,t,n)};jspb.Message.addToRepeatedWrapperField=function(e,t,r,n,i){jspb.Message.wrapRepeatedField_(e,n,t);var o=e.wrappers_[t];o||(o=e.wrappers_[t]=[]);r=r?r:new n;e=jspb.Message.getRepeatedField(e,t);void 0!=i?(o.splice(i,0,r),e.splice(i,0,r.toArray())):(o.push(r),e.push(r.toArray()));return r};jspb.Message.toMap=function(e,t,r,n){for(var i={},o=0;o<e.length;o++)i[t.call(e[o])]=r?r.call(e[o],n,e[o]):e[o];return i};jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(goog.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].toArray();else t&&t.toArray()}};jspb.Message.prototype.toArray=function(){this.syncMapFields_();return this.array};jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){this.syncMapFields_();return this.array.toString()});jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],function(t){return new e.ctor(t)})),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}};jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={});jspb.Message.maybeInitEmptyExtensionObject_(this);var r=e.fieldIndex;e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=goog.array.map(t,function(e){return e.toArray()})):this.extensionObject_[r]=t):e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=t?t.toArray():t):this.extensionObject_[r]=t;return this};jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var r=e.toArray(),n=t.toArray(),i=[],o=0,s=r.length>n.length?r.length:n.length;e.getJsPbMessageId()&&(i[0]=e.getJsPbMessageId(),o=1);for(;o<s;o++)jspb.Message.compareFields(r[o],n[o])||(i[o]=n[o]);return new e.constructor(i)};jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())};jspb.Message.compareExtensions=function(e,t){e=e||{};t=t||{};var r={},n;for(n in e)r[n]=0;for(n in t)r[n]=0;for(n in r)if(!jspb.Message.compareFields(e[n],t[n]))return!1;return!0};jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t)||e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}if(e.constructor===Array){for(var n=void 0,i=void 0,o=Math.max(e.length,t.length),r=0;r<o;r++){var s=e[r],a=t[r]
;s&&s.constructor==Object&&(goog.asserts.assert(void 0===n),goog.asserts.assert(r===e.length-1),n=s,s=void 0);a&&a.constructor==Object&&(goog.asserts.assert(void 0===i),goog.asserts.assert(r===t.length-1),i=a,a=void 0);if(!jspb.Message.compareFields(s,a))return!1}return n||i?(n=n||{},i=i||{},jspb.Message.compareExtensions(n,i)):!0}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")};jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)};jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)};jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)};jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))};jspb.Message.copyInto=function(e,t){goog.asserts.assertInstanceof(e,jspb.Message);goog.asserts.assertInstanceof(t,jspb.Message);goog.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type.");for(var r=jspb.Message.clone(e),n=t.toArray(),i=r.toArray(),o=n.length=0;o<i.length;o++)n[o]=i[o];t.wrappers_=r.wrappers_;t.extensionObject_=r.extensionObject_};jspb.Message.clone_=function(e){var t;if(goog.isArray(e)){for(var r=Array(e.length),n=0;n<e.length;n++)null!=(t=e[n])&&(r[n]="object"==typeof t?jspb.Message.clone_(t):t);return r}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);r={};for(n in e)null!=(t=e[n])&&(r[n]="object"==typeof t?jspb.Message.clone_(t):t);return r};jspb.Message.registerMessageType=function(e,t){jspb.Message.registry_[e]=t;t.messageId=e};jspb.Message.registry_={};jspb.Message.messageSetExtensions={};jspb.Message.messageSetExtensionsBinary={};jspb.arith={};jspb.arith.UInt64=function(e,t){this.lo=e;this.hi=t};jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1};jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)};jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)};jspb.arith.UInt64.prototype.msb=function(){return!!(this.hi&2147483648)};jspb.arith.UInt64.prototype.lsb=function(){return!!(this.lo&1)};jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi};jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)};jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)};jspb.arith.UInt64.mul32x32=function(e,t){for(var r=e&65535,n=e>>>16,i=t&65535,o=t>>>16,s=r*i+65536*(r*o&65535)+65536*(n*i&65535),r=n*o+(r*o>>>16)+(n*i>>>16);4294967296<=s;)s-=4294967296,r+=1;return new jspb.arith.UInt64(s>>>0,r>>>0)};jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);e=jspb.arith.UInt64.mul32x32(this.hi,e);e.hi=e.lo;e.lo=0;return t.add(e)};jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var n=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),n=n.leftShift();for(;!n.zero();)0>=e.cmp(r)&&(t=t.add(n),r=r.sub(e)),e=e.rightShift(),n=n.rightShift();return[t,r]};jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();)var t=t.div(10),r=t[0],e=t[1].lo+e,t=r;""==e&&(e="0");return e};jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),n=0;n<e.length;n++){if("0">e[n]||"9"<e[n])return null;var i=parseInt(e[n],10);r.lo=i;t=t.mul(10).add(r)}return t};jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)};jspb.arith.Int64=function(e,t){this.lo=e;this.hi=t};jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)};jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)};jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)};jspb.arith.Int64.prototype.toString=function(){var e=0!=(this.hi&2147483648),t=new jspb.arith.UInt64(this.lo,this.hi);e&&(t=new jspb.arith.UInt64(0,0).sub(t));return(e?"-":"")+t.toString()};jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];t&&(e=e.substring(1));e=jspb.arith.UInt64.fromString(e);if(null===e)return null;t&&(e=new jspb.arith.UInt64(0,0).sub(e));return new jspb.arith.Int64(e.lo,e.hi)};jspb.BinaryConstants={};jspb.ConstBinaryMessage=function(){};jspb.BinaryMessage=function(){};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31};jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5};jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return r.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return r.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return r.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return r.FIXED32;default:return r.INVALID}};jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1;jspb.BinaryConstants.FLOAT32_EPS=1.401298464324817e-45;jspb.BinaryConstants.FLOAT32_MIN=1.1754943508222875e-38;jspb.BinaryConstants.FLOAT32_MAX=3.4028234663852886e38;jspb.BinaryConstants.FLOAT64_EPS=5e-324;jspb.BinaryConstants.FLOAT64_MIN=2.2250738585072014e-308;jspb.BinaryConstants.FLOAT64_MAX=1.7976931348623157e308;jspb.BinaryConstants.TWO_TO_20=1048576;jspb.BinaryConstants.TWO_TO_23=8388608;jspb.BinaryConstants.TWO_TO_31=2147483648;jspb.BinaryConstants.TWO_TO_32=4294967296;jspb.BinaryConstants.TWO_TO_52=4503599627370496;jspb.BinaryConstants.TWO_TO_63=0x8000000000000000;jspb.BinaryConstants.TWO_TO_64=0x10000000000000000;jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0";jspb.utils={};jspb.utils.split64Low=0;jspb.utils.split64High=0;jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0;jspb.utils.split64Low=t;jspb.utils.split64High=e};jspb.utils.splitInt64=function(e){var t=0>e;e=Math.abs(e);var r=e>>>0;e=Math.floor((e-r)/jspb.BinaryConstants.TWO_TO_32);e>>>=0;t&&(e=~e>>>0,r=(~r>>>0)+1,4294967295<r&&(r=0,e++,4294967295<e&&(e=0)));jspb.utils.split64Low=r;jspb.utils.split64High=e};jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e);jspb.utils.splitUint64(e);e=jspb.utils.split64Low;var r=jspb.utils.split64High;t&&(0==e?0==r?r=e=4294967295:(r--,e=4294967295):e--);jspb.utils.split64Low=e;jspb.utils.split64High=r};jspb.utils.splitFloat32=function(e){var t=0>e?1:0;e=t?-e:e;var r;0===e?0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648):isNaN(e)?(jspb.utils.split64High=0,jspb.utils.split64Low=2147483647):e>jspb.BinaryConstants.FLOAT32_MAX?(jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0):e<jspb.BinaryConstants.FLOAT32_MIN?(e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0):(r=Math.floor(Math.log(e)/Math.LN2),e*=Math.pow(2,-r),e=Math.round(e*jspb.BinaryConstants.TWO_TO_23)&8388607,jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|r+127<<23|e)>>>0)};jspb.utils.splitFloat64=function(e){var t=0>e?1:0;e=t?-e:e;if(0===e)jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var r=e/Math.pow(2,-1074);e=r/jspb.BinaryConstants.TWO_TO_32;jspb.utils.split64High=(t<<31|e)>>>0;jspb.utils.split64Low=r>>>0}else{var n=Math.floor(Math.log(e)/Math.LN2);1024==n&&(n=1023);r=e*Math.pow(2,-n);e=r*jspb.BinaryConstants.TWO_TO_20&1048575;r=r*jspb.BinaryConstants.TWO_TO_52>>>0;jspb.utils.split64High=(t<<31|n+1023<<20|e)>>>0;jspb.utils.split64Low=r}};jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=e.charCodeAt(4),s=e.charCodeAt(5),a=e.charCodeAt(6);e=e.charCodeAt(7);jspb.utils.split64Low=t+(r<<8)+(n<<16)+(i<<24)>>>0;jspb.utils.split64High=o+(s<<8)+(a<<16)+(e<<24)>>>0};jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+e};jspb.utils.joinInt64=function(e,t){var r=t&2147483648;r&&(e=~e+1>>>0,t=~t>>>0,0==e&&(t=t+1>>>0));var n=jspb.utils.joinUint64(e,t);return r?-n:n};jspb.utils.joinZigzag64=function(e,t){var r=e&1;e=(e>>>1|t<<31)>>>0;t>>>=1;r&&(e=e+1>>>0,0==e&&(t=t+1>>>0));var n=jspb.utils.joinUint64(e,t);return r?-n:n};jspb.utils.joinFloat32=function(e,t){var r=2*(e>>31)+1,n=e>>>23&255,i=e&8388607;return 255==n?i?NaN:Infinity*r:0==n?r*Math.pow(2,-149)*i:r*Math.pow(2,n-150)*(i+Math.pow(2,23))};jspb.utils.joinFloat64=function(e,t){var r=2*(t>>31)+1,n=t>>>20&2047,i=jspb.BinaryConstants.TWO_TO_32*(t&1048575)+e;return 2047==n?i?NaN:Infinity*r:0==n?r*Math.pow(2,-1074)*i:r*Math.pow(2,n-1075)*(i+jspb.BinaryConstants.TWO_TO_52)};jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)};jspb.utils.DIGITS="0123456789abcdef".split("");jspb.utils.joinUnsignedDecimalString=function(e,t){function r(e){for(var t=1e7,r=0;7>r;r++){var t=t/10,n=e/t%10>>>0;if(0!=n||a)a=!0,u+=s[n]}}if(2097151>=t)return""+(jspb.BinaryConstants.TWO_TO_32*t+e);var n=(e>>>24|t<<8)>>>0&16777215,i=t>>16&65535,o=(e&16777215)+6777216*n+6710656*i,n=n+8147497*i,i=2*i;1e7<=o&&(n+=Math.floor(o/1e7),o%=1e7);1e7<=n&&(i+=Math.floor(n/1e7),n%=1e7);var s=jspb.utils.DIGITS,a=!1,u="";(i||a)&&r(i);(n||a)&&r(n);(o||a)&&r(o);return u};jspb.utils.joinSignedDecimalString=function(e,t){var r=t&2147483648;r&&(e=~e+1>>>0,t=~t+(0==e?1:0)>>>0);var n=jspb.utils.joinUnsignedDecimalString(e,t);return r?"-"+n:n};jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e);var r=jspb.utils.split64Low,n=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(r,n):jspb.utils.joinUnsignedDecimalString(r,n)};jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=jspb.utils.hash64ToDecimalString(e[n],t);return r};jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var r=0;8>r&&(1!==e||0<t);r++){var n=e*i[r]+t;i[r]=n&255;t=n>>>8}}function r(){for(var e=0;8>e;e++)i[e]=~i[e]&255}goog.asserts.assert(0<e.length);var n=!1;"-"===e[0]&&(n=!0,e=e.slice(1));for(var i=[0,0,0,0,0,0,0,0],o=0;o<e.length;o++)t(10,jspb.utils.DIGITS.indexOf(e[o]));n&&(r(),t(1,1));return goog.crypt.byteArrayToString(i)};jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))};jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0";t[1]="x";for(var r=0;8>r;r++){var n=e.charCodeAt(7-r);t[2*r+2]=jspb.utils.DIGITS[n>>4];t[2*r+3]=jspb.utils.DIGITS[n&15]}return t.join("")};jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase();goog.asserts.assert(18==e.length);goog.asserts.assert("0"==e[0]);goog.asserts.assert("x"==e[1]);for(var t="",r=0;8>r;r++)var n=jspb.utils.DIGITS.indexOf(e[2*r+2]),i=jspb.utils.DIGITS.indexOf(e[2*r+3]),t=String.fromCharCode(16*n+i)+t;return t};jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e);var r=jspb.utils.split64Low,n=jspb.utils.split64High;return t?jspb.utils.joinInt64(r,n):jspb.utils.joinUint64(r,n)};jspb.utils.numberToHash64=function(e){jspb.utils.splitInt64(e);return jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.utils.countVarints=function(e,t,r){for(var n=0,i=t;i<r;i++)n+=e[i]>>7;return r-t-n};jspb.utils.countVarintFields=function(e,t,r,n){var i=0;n=8*n+jspb.BinaryConstants.WireType.VARINT;if(128>n)for(;t<r&&e[t++]==n;)for(i++;;){var o=e[t++];if(0==(o&128))break}else for(;t<r;){for(o=n;128<o;){if(e[t]!=(o&127|128))return i;t++;o>>=7}if(e[t++]!=o)break;for(i++;o=e[t++],0!=(o&128););}return i};jspb.utils.countFixedFields_=function(e,t,r,n,i){var o=0;if(128>n)for(;t<r&&e[t++]==n;)o++,t+=i;else for(;t<r;){for(var s=n;128<s;){if(e[t++]!=(s&127|128))return o;s>>=7}if(e[t++]!=s)break;o++;t+=i}return o};jspb.utils.countFixed32Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED32,4)};jspb.utils.countFixed64Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED64,8)};jspb.utils.countDelimitedFields=function(e,t,r,n){var i=0;for(n=8*n+jspb.BinaryConstants.WireType.DELIMITED;t<r;){for(var o=n;128<o;){if(e[t++]!=(o&127|128))return i;o>>=7}if(e[t++]!=o)break;i++;for(var s=0,a=1;o=e[t++],s+=(o&127)*a,a*=128,0!=(o&128););t+=s}return i};jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var r=0;r<e.length;r++)t+="\\x",16>e[r]&&(t+="0"),t+=e[r].toString(16)}return t+'"'};jspb.utils.debugScalarToTextFormat=function(e){return goog.isString(e)?goog.string.quote(e):e.toString()};jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++){var n=e.charCodeAt(r);if(255<n)throw Error("Conversion error: string contains codepoint outside of byte range");t[r]=n}return t};jspb.utils.byteSourceToUint8Array=function(e){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer||e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return goog.crypt.base64.decodeStringToUint8Array(e);goog.asserts.fail("Type not convertible to Uint8Array.");return new Uint8Array(0)};jspb.BinaryEncoder=function(){this.buffer_=[]};jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length};jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;this.buffer_=[];return e};jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(t==Math.floor(t));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);for(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(e&127|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)};jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(t==Math.floor(t));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);this.writeUint32(e);this.writeUint32(t)};jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){goog.asserts.assert(e==Math.floor(e));for(goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(e&127|128),e>>>=7;this.buffer_.push(e)};jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31);if(0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(e&127|128),e>>=7;this.buffer_.push(1)}};jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64);jspb.utils.splitInt64(e);this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63);jspb.utils.splitInt64(e);this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31);this.writeUnsignedVarint32((e<<1^e>>31)>>>0)};jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63);jspb.utils.splitZigzag64(e);this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarint64(parseInt(e,10))};jspb.BinaryEncoder.prototype.writeUint8=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&256>e);this.buffer_.push(e>>>0&255)};jspb.BinaryEncoder.prototype.writeUint16=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&65536>e);this.buffer_.push(e>>>0&255);this.buffer_.push(e>>>8&255)};jspb.BinaryEncoder.prototype.writeUint32=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);this.buffer_.push(e>>>0&255);this.buffer_.push(e>>>8&255);this.buffer_.push(e>>>16&255);this.buffer_.push(e>>>24&255)};jspb.BinaryEncoder.prototype.writeUint64=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64);jspb.utils.splitUint64(e);this.writeUint32(jspb.utils.split64Low);this.writeUint32(jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeInt8=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(-128<=e&&128>e);this.buffer_.push(e>>>0&255)};jspb.BinaryEncoder.prototype.writeInt16=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(-32768<=e&&32768>e);this.buffer_.push(e>>>0&255);this.buffer_.push(e>>>8&255)};jspb.BinaryEncoder.prototype.writeInt32=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31);this.buffer_.push(e>>>0&255);this.buffer_.push(e>>>8&255);this.buffer_.push(e>>>16&255);this.buffer_.push(e>>>24&255)};jspb.BinaryEncoder.prototype.writeInt64=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63);jspb.utils.splitInt64(e);this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeInt64String=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63);jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e));this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeFloat=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX);jspb.utils.splitFloat32(e);this.writeUint32(jspb.utils.split64Low)};jspb.BinaryEncoder.prototype.writeDouble=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX);jspb.utils.splitFloat64(e);this.writeUint32(jspb.utils.split64Low);this.writeUint32(jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeBool=function(e){goog.asserts.assert(goog.isBoolean(e)||goog.isNumber(e));this.buffer_.push(e?1:0)};jspb.BinaryEncoder.prototype.writeEnum=function(e){goog.asserts.assert(e==Math.floor(e));goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31);this.writeSignedVarint32(e)};jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)};jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e);this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e);this.writeUint32(jspb.utils.split64Low);this.writeUint32(jspb.utils.split64High)};jspb.BinaryEncoder.prototype.writeString=function(e){for(var t=this.buffer_.length,r=0;r<e.length;r++){var n=e.charCodeAt(r);if(128>n)this.buffer_.push(n);else if(2048>n)this.buffer_.push(n>>6|192),this.buffer_.push(n&63|128);else if(65536>n)if(55296<=n&&56319>=n&&r+1<e.length){var i=e.charCodeAt(r+1);56320<=i&&57343>=i&&(n=1024*(n-55296)+i-56320+65536,this.buffer_.push(n>>18|240),this.buffer_.push(n>>12&63|128),this.buffer_.push(n>>6&63|128),this.buffer_.push(n&63|128),r++)}else this.buffer_.push(n>>12|224),this.buffer_.push(n>>6&63|128),this.buffer_.push(n&63|128)}return this.buffer_.length-t};jspb.BinaryWriter=function(){this.blocks_=[];this.totalLength_=0;this.encoder_=new jspb.BinaryEncoder;this.bookmarks_=[]};jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t);this.blocks_.push(e);this.totalLength_+=t.length+e.length};jspb.BinaryWriter.prototype.beginDelimited_=function(e){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);e=this.encoder_.end();this.blocks_.push(e);this.totalLength_+=e.length;e.push(this.totalLength_);return e};jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop(),t=this.totalLength_+this.encoder_.length()-t;for(goog.asserts.assert(0<=t);127<t;)e.push(t&127|128),t>>>=7,this.totalLength_++;e.push(t);this.totalLength_++};jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,r){this.appendUint8Array_(e.subarray(t,r))};jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,r){null!=e&&null!=t&&null!=r&&this.writeSerializedMessage(e,t,r)};jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[];this.encoder_.end();this.totalLength_=0;this.bookmarks_=[]};jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length,n=0,i=0;i<r;i++){var o=t[i];e.set(o,n);n+=o.length}t=this.encoder_.end();e.set(t,n);n+=t.length;goog.asserts.assert(n==e.length);this.blocks_=[e];return e};jspb.BinaryWriter.prototype.getResultBase64String=function(){return goog.crypt.base64.encodeByteArray(this.getResultBuffer())};jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))};jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length);this.endDelimited_(this.bookmarks_.pop())};jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){goog.asserts.assert(1<=e&&e==Math.floor(e));this.encoder_.writeUnsignedVarint32(8*e+t)};jspb.BinaryWriter.prototype.writeAny=function(e,t,r){var n=jspb.BinaryConstants.FieldType;switch(e){case n.DOUBLE:this.writeDouble(t,r);break;case n.FLOAT:this.writeFloat(t,r);break;case n.INT64:this.writeInt64(t,r);break;case n.UINT64:this.writeUint64(t,r);break;case n.INT32:this.writeInt32(t,r);break;case n.FIXED64:this.writeFixed64(t,r);break;case n.FIXED32:this.writeFixed32(t,r);break;case n.BOOL:this.writeBool(t,r);break;case n.STRING:this.writeString(t,r);break;case n.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case n.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case n.BYTES:this.writeBytes(t,r);break;case n.UINT32:this.writeUint32(t,r);break;case n.ENUM:this.writeEnum(t,r);break;case n.SFIXED32:this.writeSfixed32(t,r);break;case n.SFIXED64:this.writeSfixed64(t,r);break;case n.SINT32:this.writeSint32(t,r);break;case n.SINT64:this.writeSint64(t,r);break;case n.FHASH64:this.writeFixedHash64(t,r);break;case n.VHASH64:this.writeVarintHash64(t,r);break;default:goog.asserts.fail("Invalid field type in writeAny()")}};jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))};jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))};jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))};jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))};jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))};jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))};jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))};jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))};jspb.BinaryWriter.prototype.writeInt32String=function(e,t){if(null!=t){var r=parseInt(t,10);goog.asserts.assert(r>=-jspb.BinaryConstants.TWO_TO_31&&r<jspb.BinaryConstants.TWO_TO_31);this.writeSignedVarint32_(e,r)}};jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))};jspb.BinaryWriter.prototype.writeInt64String=function(e,t){if(null!=t){var r=jspb.arith.Int64.fromString(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);this.encoder_.writeSplitVarint64(r.lo,r.hi)}};jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))};jspb.BinaryWriter.prototype.writeUint32String=function(e,t){if(null!=t){var r=parseInt(t,10);goog.asserts.assert(0<=r&&r<jspb.BinaryConstants.TWO_TO_32);this.writeUnsignedVarint32_(e,r)}};jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))};jspb.BinaryWriter.prototype.writeUint64String=function(e,t){if(null!=t){var r=jspb.arith.UInt64.fromString(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);this.encoder_.writeSplitVarint64(r.lo,r.hi)}};jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))};jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))};jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&(goog.asserts.assert(+t>=-jspb.BinaryConstants.TWO_TO_63&&+t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64String_(e,t))};jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))};jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))};jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){if(null!=t){var r=jspb.arith.UInt64.fromString(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64);this.encoder_.writeSplitFixed64(r.lo,r.hi)}};jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))};jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))};jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){if(null!=t){var r=jspb.arith.Int64.fromString(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64);this.encoder_.writeSplitFixed64(r.lo,r.hi)}};jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))};jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))};jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(goog.asserts.assert(goog.isBoolean(t)||goog.isNumber(t)),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))};jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))};jspb.BinaryWriter.prototype.writeString=function(e,t){if(null!=t){var r=this.beginDelimited_(e);this.encoder_.writeString(t);this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writeBytes=function(e,t){if(null!=t){var r=jspb.utils.byteSourceToUint8Array(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(r.length);this.appendUint8Array_(r)}};jspb.BinaryWriter.prototype.writeMessage=function(e,t,r){null!=t&&(e=this.beginDelimited_(e),r(t,this),this.endDelimited_(e))};jspb.BinaryWriter.prototype.writeGroup=function(e,t,r){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))};jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))};jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))};jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt32String(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt64String(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint32String(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint64String(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])}
;jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed32(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64String(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed32(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFloat(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeDouble(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBool(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeEnum(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeString(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBytes(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++){var i=this.beginDelimited_(e);r(t[n],this);this.endDelimited_(i)}};jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t[n],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)};jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])};jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])};jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(t[n]);this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(parseInt(t[n],10));this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeSignedVarint64(t[n]);this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++){var i=jspb.arith.Int64.fromString(t[n]);this.encoder_.writeSplitVarint64(i.lo,i.hi)}this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(t[n]);this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(parseInt(t[n],10));this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint64(t[n]);this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++){var i=jspb.arith.UInt64.fromString(t[n]);this.encoder_.writeSplitVarint64(i.lo,i.hi)}this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeZigzagVarint32(t[n]);this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(t[n]);this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(parseInt(t[n],10));this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(4*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeUint32(t[r])}};jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeUint64(t[r])}};jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++){var n=jspb.arith.UInt64.fromString(t[r]);this.encoder_.writeSplitFixed64(n.lo,n.hi)}}};jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(4*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeInt32(t[r])}};jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeInt64(t[r])}};jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeInt64String(t[r])}};jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(4*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeFloat(t[r])}};jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeDouble(t[r])}};jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(t.length);for(var r=0;r<t.length;r++)this.encoder_.writeBool(t[r])}};jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeEnum(t[n]);this.endDelimited_(r)}};jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED);this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeFixedHash64(t[r])}};jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeVarintHash64(t[n]);this.endDelimited_(r)}};jspb.BinaryIterator=function(e,t,r){this.elements_=this.nextMethod_=this.decoder_=null;this.cursor_=0;this.nextValue_=null;this.atEnd_=!0;this.init_(e,t,r)};jspb.BinaryIterator.prototype.init_=function(e,t,r){e&&t&&(this.decoder_=e,this.nextMethod_=t);this.elements_=r||null;this.cursor_=0;this.nextValue_=null;this.atEnd_=!this.decoder_&&!this.elements_;this.next()};jspb.BinaryIterator.instanceCache_=[];jspb.BinaryIterator.alloc=function(e,t,r){if(jspb.BinaryIterator.instanceCache_.length){var n=jspb.BinaryIterator.instanceCache_.pop();n.init_(e,t,r);return n}return new jspb.BinaryIterator(e,t,r)};jspb.BinaryIterator.prototype.free=function(){this.clear();100>jspb.BinaryIterator.instanceCache_.length&&jspb.BinaryIterator.instanceCache_.push(this)};jspb.BinaryIterator.prototype.clear=function(){this.decoder_&&this.decoder_.free();this.elements_=this.nextMethod_=this.decoder_=null;this.cursor_=0;this.nextValue_=null;this.atEnd_=!0};jspb.BinaryIterator.prototype.get=function(){return this.nextValue_};jspb.BinaryIterator.prototype.atEnd=function(){return this.atEnd_};jspb.BinaryIterator.prototype.next=function(){var e=this.nextValue_;this.decoder_?this.decoder_.atEnd()?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.nextMethod_.call(this.decoder_):this.elements_&&(this.cursor_==this.elements_.length?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.elements_[this.cursor_++]);return e};jspb.BinaryDecoder=function(e,t,r){this.bytes_=null;this.tempHigh_=this.tempLow_=this.cursor_=this.end_=this.start_=0;this.error_=!1;e&&this.setBlock(e,t,r)};jspb.BinaryDecoder.instanceCache_=[];jspb.BinaryDecoder.alloc=function(e,t,r){if(jspb.BinaryDecoder.instanceCache_.length){var n=jspb.BinaryDecoder.instanceCache_.pop();e&&n.setBlock(e,t,r);return n}return new jspb.BinaryDecoder(e,t,r)};jspb.BinaryDecoder.prototype.free=function(){this.clear();100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)};jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)};jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null;this.cursor_=this.end_=this.start_=0;this.error_=!1};jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_};jspb.BinaryDecoder.prototype.setBlock=function(e,t,r){this.bytes_=jspb.utils.byteSourceToUint8Array(e);this.start_=goog.isDef(t)?t:0;this.end_=goog.isDef(r)?this.start_+r:this.bytes_.length;this.cursor_=this.start_};jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_};jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e};jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_};jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_};jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e};jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e;goog.asserts.assert(this.cursor_<=this.end_)};jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_};jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_};jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_};jspb.BinaryDecoder.prototype.readSplitVarint64_=function(){for(var e,t=0,r,n=0;4>n;n++)if(e=this.bytes_[this.cursor_++],t|=(e&127)<<7*n,128>e){this.tempLow_=t>>>0;this.tempHigh_=0;return}e=this.bytes_[this.cursor_++];t|=(e&127)<<28;r=0|(e&127)>>4;if(128>e)this.tempLow_=t>>>0,this.tempHigh_=r>>>0;else{for(n=0;5>n;n++)if(e=this.bytes_[this.cursor_++],r|=(e&127)<<7*n+3,128>e){this.tempLow_=t>>>0;this.tempHigh_=r>>>0;return}goog.asserts.fail("Failed to read varint, encoding is invalid.");this.error_=!0}};jspb.BinaryDecoder.prototype.skipVarint=function(){for(;this.bytes_[this.cursor_]&128;)this.cursor_++;this.cursor_++};jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--};jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e,t=this.bytes_;e=t[this.cursor_+0];var r=e&127;if(128>e)return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),r;e=t[this.cursor_+1];r|=(e&127)<<7;if(128>e)return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),r;e=t[this.cursor_+2];r|=(e&127)<<14;if(128>e)return this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),r;e=t[this.cursor_+3];r|=(e&127)<<21;if(128>e)return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),r;e=t[this.cursor_+4];r|=(e&15)<<28;if(128>e)return goog.asserts.assert(0==(e&240)),this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),r>>>0;goog.asserts.assert(240==(e&240));goog.asserts.assert(255==t[this.cursor_+5]);goog.asserts.assert(255==t[this.cursor_+6]);goog.asserts.assert(255==t[this.cursor_+7]);goog.asserts.assert(255==t[this.cursor_+8]);goog.asserts.assert(1==t[this.cursor_+9]);this.cursor_+=10;goog.asserts.assert(this.cursor_<=this.end_);return r};jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32;jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()};jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()};jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(e&1)};jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){this.readSplitVarint64_();return jspb.utils.joinUint64(this.tempLow_,this.tempHigh_)};jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){this.readSplitVarint64_();return jspb.utils.joinUnsignedDecimalString(this.tempLow_,this.tempHigh_)};jspb.BinaryDecoder.prototype.readSignedVarint64=function(){this.readSplitVarint64_();return jspb.utils.joinInt64(this.tempLow_,this.tempHigh_)};jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){this.readSplitVarint64_();return jspb.utils.joinSignedDecimalString(this.tempLow_,this.tempHigh_)};jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){this.readSplitVarint64_();return jspb.utils.joinZigzag64(this.tempLow_,this.tempHigh_)};jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readZigzagVarint64().toString()};jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];this.cursor_+=1;goog.asserts.assert(this.cursor_<=this.end_);return e};jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];this.cursor_+=2;goog.asserts.assert(this.cursor_<=this.end_);return e<<0|t<<8};jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];this.cursor_+=4;goog.asserts.assert(this.cursor_<=this.end_);return(e<<0|t<<8|r<<16|n<<24)>>>0};jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)};jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)};jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];this.cursor_+=1;goog.asserts.assert(this.cursor_<=this.end_);return e<<24>>24};jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];this.cursor_+=2;goog.asserts.assert(this.cursor_<=this.end_);return(e<<0|t<<8)<<16>>16};jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];this.cursor_+=4;goog.asserts.assert(this.cursor_<=this.end_);return e<<0|t<<8|r<<16|n<<24};jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)};jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)};jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)};jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)};jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]};jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()};jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,r=this.cursor_;e=r+e;for(var n=[],i="";r<e;){var o=t[r++];if(128>o)n.push(o);else if(192>o)continue;else if(224>o){var s=t[r++];n.push((o&31)<<6|s&63)}else if(240>o){var s=t[r++],a=t[r++];n.push((o&15)<<12|(s&63)<<6|a&63)}else if(248>o){var s=t[r++],a=t[r++],u=t[r++],o=(o&7)<<18|(s&63)<<12|(a&63)<<6|u&63,o=o-65536;n.push((o>>10&1023)+55296,(o&1023)+56320)}8192<=n.length&&(i+=String.fromCharCode.apply(null,n),n.length=0)}i+=goog.crypt.byteArrayToString(n);this.cursor_=r;return i};jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)};jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);this.cursor_+=e;goog.asserts.assert(this.cursor_<=this.end_);return t};jspb.BinaryDecoder.prototype.readVarintHash64=function(){this.readSplitVarint64_();return jspb.utils.joinHash64(this.tempLow_,this.tempHigh_)};jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,r=e[t+0],n=e[t+1],i=e[t+2],o=e[t+3],s=e[t+4],a=e[t+5],u=e[t+6],e=e[t+7];this.cursor_+=8;return String.fromCharCode(r,n,i,o,s,a,u,e)};jspb.BinaryReader=function(e,t,r){this.decoder_=jspb.BinaryDecoder.alloc(e,t,r);this.fieldCursor_=this.decoder_.getCursor();this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER;this.nextWireType_=jspb.BinaryConstants.WireType.INVALID;this.error_=!1;this.readCallbacks_=null};jspb.BinaryReader.instanceCache_=[];jspb.BinaryReader.alloc=function(e,t,r){if(jspb.BinaryReader.instanceCache_.length){var n=jspb.BinaryReader.instanceCache_.pop();e&&n.decoder_.setBlock(e,t,r);return n}return new jspb.BinaryReader(e,t,r)};jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc;jspb.BinaryReader.prototype.free=function(){this.decoder_.clear();this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER;this.nextWireType_=jspb.BinaryConstants.WireType.INVALID;this.error_=!1;this.readCallbacks_=null;100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)};jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_};jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()};jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()};jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_};jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_};jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP};jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()};jspb.BinaryReader.prototype.setBlock=function(e,t,r){this.decoder_.setBlock(e,t,r);this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER;this.nextWireType_=jspb.BinaryConstants.WireType.INVALID};jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset();this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER;this.nextWireType_=jspb.BinaryConstants.WireType.INVALID};jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)};jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3,e=e&7;if(e!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP)return goog.asserts.fail("Invalid wire type"),this.error_=!0,!1;this.nextField_=t;this.nextWireType_=e;return!0};jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)};jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()};jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()};jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}};jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)};jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)};jspb.BinaryReader.prototype.skipGroup=function(){var e=[this.nextField_];do{if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF");this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP)e.push(this.nextField_);else if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP&&this.nextField_!=e.pop()){goog.asserts.fail("Unmatched end-group tag");this.error_=!0;break}}while(0<e.length)};jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}};jspb.BinaryReader.prototype.registerReadCallback=function(e,t){goog.isNull(this.readCallbacks_)&&(this.readCallbacks_={});goog.asserts.assert(!this.readCallbacks_[e]);this.readCallbacks_[e]=t};jspb.BinaryReader.prototype.runReadCallback=function(e){goog.asserts.assert(!goog.isNull(this.readCallbacks_));e=this.readCallbacks_[e];goog.asserts.assert(e);return e(this)};jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0};jspb.BinaryReader.prototype.readMessage=function(e,t){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),n=this.decoder_.readUnsignedVarint32(),n=this.decoder_.getCursor()+n;this.decoder_.setEnd(n);t(e,this);this.decoder_.setCursor(n);this.decoder_.setEnd(r)};jspb.BinaryReader.prototype.readGroup=function(e,t,r){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP);goog.asserts.assert(this.nextField_==e);r(t,this);this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)};jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e,e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e);this.decoder_.setCursor(r);return e};jspb.BinaryReader.prototype.readInt32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint32()};jspb.BinaryReader.prototype.readInt32String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint32String()};jspb.BinaryReader.prototype.readInt64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint64()};jspb.BinaryReader.prototype.readInt64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint64String()};jspb.BinaryReader.prototype.readUint32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readUnsignedVarint32()};jspb.BinaryReader.prototype.readUint32String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readUnsignedVarint32String()};jspb.BinaryReader.prototype.readUint64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readUnsignedVarint64()};jspb.BinaryReader.prototype.readUint64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readUnsignedVarint64String()};jspb.BinaryReader.prototype.readSint32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readZigzagVarint32()};jspb.BinaryReader.prototype.readSint64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readZigzagVarint64()};jspb.BinaryReader.prototype.readSint64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readZigzagVarint64String()};jspb.BinaryReader.prototype.readFixed32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32);return this.decoder_.readUint32()};jspb.BinaryReader.prototype.readFixed64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readUint64()};jspb.BinaryReader.prototype.readFixed64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readUint64String()};jspb.BinaryReader.prototype.readSfixed32=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32);return this.decoder_.readInt32()};jspb.BinaryReader.prototype.readSfixed32String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32);return this.decoder_.readInt32().toString()};jspb.BinaryReader.prototype.readSfixed64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readInt64()};jspb.BinaryReader.prototype.readSfixed64String=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readInt64String()};jspb.BinaryReader.prototype.readFloat=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32);return this.decoder_.readFloat()};jspb.BinaryReader.prototype.readDouble=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readDouble()};jspb.BinaryReader.prototype.readBool=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return!!this.decoder_.readUnsignedVarint32()};jspb.BinaryReader.prototype.readEnum=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readSignedVarint64()};jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)};jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)};jspb.BinaryReader.prototype.readVarintHash64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT);return this.decoder_.readVarintHash64()};jspb.BinaryReader.prototype.readFixedHash64=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64);return this.decoder_.readFixedHash64()};jspb.BinaryReader.prototype.readPackedField_=function(e){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);for(var t=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor()+t,r=[];this.decoder_.getCursor()<t;)r.push(e.call(this.decoder_));return r};jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)};jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)};jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)};jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)};jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)};jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)};jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)};jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)};jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)};jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)};jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)};jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)};jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)};jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)};jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)};jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)};jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)};jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)};jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)};jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)}
;jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)};jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)};jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)};jspb.Export={};exports.Map=jspb.Map;exports.Message=jspb.Message;exports.BinaryReader=jspb.BinaryReader;exports.BinaryWriter=jspb.BinaryWriter;exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo;exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo;exports.exportSymbol=goog.exportSymbol;exports.inherits=goog.inherits;exports.object={extend:goog.object.extend};exports.typeOf=goog.typeOf}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],84:[function(e,t,r){"use strict";var n=e(89);var i=e(85);var o=e(86);var s=e(90);var a=e(92);var u=Object.prototype.toString;var f=0;var l=4;var d=0;var c=1;var p=2;var h=-1;var g=0;var y=8;function _(e){if(!(this instanceof _))return new _(e);this.options=i.assign({level:h,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},e||{});var t=this.options;if(t.raw&&t.windowBits>0){t.windowBits=-t.windowBits}else if(t.gzip&&t.windowBits>0&&t.windowBits<16){t.windowBits+=16}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new a;this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==d){throw new Error(s[r])}if(t.header){n.deflateSetHeader(this.strm,t.header)}if(t.dictionary){var f;if(typeof t.dictionary==="string"){f=o.string2buf(t.dictionary)}else if(u.call(t.dictionary)==="[object ArrayBuffer]"){f=new Uint8Array(t.dictionary)}else{f=t.dictionary}r=n.deflateSetDictionary(this.strm,f);if(r!==d){throw new Error(s[r])}this._dict_set=true}}_.prototype.push=function(e,t){var r=this.strm;var s=this.options.chunkSize;var a,h;if(this.ended){return false}h=t===~~t?t:t===true?l:f;if(typeof e==="string"){r.input=o.string2buf(e)}else if(u.call(e)==="[object ArrayBuffer]"){r.input=new Uint8Array(e)}else{r.input=e}r.next_in=0;r.avail_in=r.input.length;do{if(r.avail_out===0){r.output=new i.Buf8(s);r.next_out=0;r.avail_out=s}a=n.deflate(r,h);if(a!==c&&a!==d){this.onEnd(a);this.ended=true;return false}if(r.avail_out===0||r.avail_in===0&&(h===l||h===p)){if(this.options.to==="string"){this.onData(o.buf2binstring(i.shrinkBuf(r.output,r.next_out)))}else{this.onData(i.shrinkBuf(r.output,r.next_out))}}}while((r.avail_in>0||r.avail_out===0)&&a!==c);if(h===l){a=n.deflateEnd(this.strm);this.onEnd(a);this.ended=true;return a===d}if(h===p){this.onEnd(d);r.avail_out=0;return true}return true};_.prototype.onData=function(e){this.chunks.push(e)};_.prototype.onEnd=function(e){if(e===d){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=i.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function m(e,t){var r=new _(t);r.push(e,true);if(r.err){throw r.msg||s[r.err]}return r.result}function v(e,t){t=t||{};t.raw=true;return m(e,t)}function b(e,t){t=t||{};t.gzip=true;return m(e,t)}r.Deflate=_;r.deflate=m;r.deflateRaw=v;r.gzip=b},{}],85:[function(e,t,r){"use strict";var n=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.assign=function(e){var t=Array.prototype.slice.call(arguments,1);while(t.length){var r=t.shift();if(!r){continue}if(typeof r!=="object"){throw new TypeError(r+"must be non-object")}for(var n in r){if(i(r,n)){e[n]=r[n]}}}return e};r.shrinkBuf=function(e,t){if(e.length===t){return e}if(e.subarray){return e.subarray(0,t)}e.length=t;return e};var o={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),i);return}for(var o=0;o<n;o++){e[i+o]=t[r+o]}},flattenChunks:function(e){var t,r,n,i,o,s;n=0;for(t=0,r=e.length;t<r;t++){n+=e[t].length}s=new Uint8Array(n);i=0;for(t=0,r=e.length;t<r;t++){o=e[t];s.set(o,i);i+=o.length}return s}};var s={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++){e[i+o]=t[r+o]}},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){if(e){r.Buf8=Uint8Array;r.Buf16=Uint16Array;r.Buf32=Int32Array;r.assign(r,o)}else{r.Buf8=Array;r.Buf16=Array;r.Buf32=Array;r.assign(r,s)}};r.setTyped(n)},{}],86:[function(e,t,r){"use strict";var n=e(85);var i=true;var o=true;try{String.fromCharCode.apply(null,[0])}catch(e){i=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=false}var s=new n.Buf8(256);for(var a=0;a<256;a++){s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1}s[254]=s[254]=1;r.string2buf=function(e){var t,r,i,o,s,a=e.length,u=0;for(o=0;o<a;o++){r=e.charCodeAt(o);if((r&64512)===55296&&o+1<a){i=e.charCodeAt(o+1);if((i&64512)===56320){r=65536+(r-55296<<10)+(i-56320);o++}}u+=r<128?1:r<2048?2:r<65536?3:4}t=new n.Buf8(u);for(s=0,o=0;s<u;o++){r=e.charCodeAt(o);if((r&64512)===55296&&o+1<a){i=e.charCodeAt(o+1);if((i&64512)===56320){r=65536+(r-55296<<10)+(i-56320);o++}}if(r<128){t[s++]=r}else if(r<2048){t[s++]=192|r>>>6;t[s++]=128|r&63}else if(r<65536){t[s++]=224|r>>>12;t[s++]=128|r>>>6&63;t[s++]=128|r&63}else{t[s++]=240|r>>>18;t[s++]=128|r>>>12&63;t[s++]=128|r>>>6&63;t[s++]=128|r&63}}return t};function u(e,t){if(t<65537){if(e.subarray&&o||!e.subarray&&i){return String.fromCharCode.apply(null,n.shrinkBuf(e,t))}}var r="";for(var s=0;s<t;s++){r+=String.fromCharCode(e[s])}return r}r.buf2binstring=function(e){return u(e,e.length)};r.binstring2buf=function(e){var t=new n.Buf8(e.length);for(var r=0,i=t.length;r<i;r++){t[r]=e.charCodeAt(r)}return t};r.buf2string=function(e,t){var r,n,i,o;var a=t||e.length;var f=new Array(a*2);for(n=0,r=0;r<a;){i=e[r++];if(i<128){f[n++]=i;continue}o=s[i];if(o>4){f[n++]=65533;r+=o-1;continue}i&=o===2?31:o===3?15:7;while(o>1&&r<a){i=i<<6|e[r++]&63;o--}if(o>1){f[n++]=65533;continue}if(i<65536){f[n++]=i}else{i-=65536;f[n++]=55296|i>>10&1023;f[n++]=56320|i&1023}}return u(f,n)};r.utf8border=function(e,t){var r;t=t||e.length;if(t>e.length){t=e.length}r=t-1;while(r>=0&&(e[r]&192)===128){r--}if(r<0){return t}if(r===0){return t}return r+s[e[r]]>t?r:t}},{}],87:[function(e,t,r){"use strict";function n(e,t,r,n){var i=e&65535|0,o=e>>>16&65535|0,s=0;while(r!==0){s=r>2e3?2e3:r;r-=s;do{i=i+t[n++]|0;o=o+i|0}while(--s);i%=65521;o%=65521}return i|o<<16|0}t.exports=n},{}],88:[function(e,t,r){"use strict";function n(){var e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++){e=e&1?3988292384^e>>>1:e>>>1}t[r]=e}return t}var i=n();function o(e,t,r,n){var o=i,s=n+r;e^=-1;for(var a=n;a<s;a++){e=e>>>8^o[(e^t[a])&255]}return e^-1}t.exports=o},{}],89:[function(e,t,r){"use strict";var n=e(85);var i=e(91);var o=e(87);var s=e(88);var a=e(90);var u=0;var f=1;var l=3;var d=4;var c=5;var p=0;var h=1;var g=-2;var y=-3;var _=-5;var m=-1;var v=1;var b=2;var w=3;var S=4;var T=0;var E=2;var A=8;var I=9;var C=15;var k=8;var j=29;var O=256;var B=O+1+j;var x=30;var D=19;var R=2*B+1;var P=15;var M=3;var L=258;var U=L+M+1;var N=32;var F=42;var W=69;var H=73;var V=91;var q=103;var z=113;var G=666;var $=1;var X=2;var Y=3;var K=4;var Z=3;function J(e,t){e.msg=a[t];return t}function Q(e){return(e<<1)-(e>4?9:0)}function ee(e){var t=e.length;while(--t>=0){e[t]=0}}function te(e){var t=e.state;var r=t.pending;if(r>e.avail_out){r=e.avail_out}if(r===0){return}n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out);e.next_out+=r;t.pending_out+=r;e.total_out+=r;e.avail_out-=r;t.pending-=r;if(t.pending===0){t.pending_out=0}}function re(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t);e.block_start=e.strstart;te(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function ie(e,t){e.pending_buf[e.pending++]=t>>>8&255;e.pending_buf[e.pending++]=t&255}function oe(e,t,r,i){var a=e.avail_in;if(a>i){a=i}if(a===0){return 0}e.avail_in-=a;n.arraySet(t,e.input,e.next_in,a,r);if(e.state.wrap===1){e.adler=o(e.adler,t,a,r)}else if(e.state.wrap===2){e.adler=s(e.adler,t,a,r)}e.next_in+=a;e.total_in+=a;return a}function se(e,t){var r=e.max_chain_length;var n=e.strstart;var i;var o;var s=e.prev_length;var a=e.nice_match;var u=e.strstart>e.w_size-U?e.strstart-(e.w_size-U):0;var f=e.window;var l=e.w_mask;var d=e.prev;var c=e.strstart+L;var p=f[n+s-1];var h=f[n+s];if(e.prev_length>=e.good_match){r>>=2}if(a>e.lookahead){a=e.lookahead}do{i=t;if(f[i+s]!==h||f[i+s-1]!==p||f[i]!==f[n]||f[++i]!==f[n+1]){continue}n+=2;i++;do{}while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<c);o=L-(c-n);n=c-L;if(o>s){e.match_start=t;s=o;if(o>=a){break}p=f[n+s-1];h=f[n+s]}}while((t=d[t&l])>u&&--r!==0);if(s<=e.lookahead){return s}return e.lookahead}function ae(e){var t=e.w_size;var r,i,o,s,a;do{s=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-U)){n.arraySet(e.window,e.window,t,t,0);e.match_start-=t;e.strstart-=t;e.block_start-=t;i=e.hash_size;r=i;do{o=e.head[--r];e.head[r]=o>=t?o-t:0}while(--i);i=t;r=i;do{o=e.prev[--r];e.prev[r]=o>=t?o-t:0}while(--i);s+=t}if(e.strm.avail_in===0){break}i=oe(e.strm,e.window,e.strstart+e.lookahead,s);e.lookahead+=i;if(e.lookahead+e.insert>=M){a=e.strstart-e.insert;e.ins_h=e.window[a];e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;while(e.insert){e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+M-1])&e.hash_mask;e.prev[a&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=a;a++;e.insert--;if(e.lookahead+e.insert<M){break}}}}while(e.lookahead<U&&e.strm.avail_in!==0)}function ue(e,t){var r=65535;if(r>e.pending_buf_size-5){r=e.pending_buf_size-5}for(;;){if(e.lookahead<=1){ae(e);if(e.lookahead===0&&t===u){return $}if(e.lookahead===0){break}}e.strstart+=e.lookahead;e.lookahead=0;var n=e.block_start+r;if(e.strstart===0||e.strstart>=n){e.lookahead=e.strstart-n;e.strstart=n;re(e,false);if(e.strm.avail_out===0){return $}}if(e.strstart-e.block_start>=e.w_size-U){re(e,false);if(e.strm.avail_out===0){return $}}}e.insert=0;if(t===d){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.strstart>e.block_start){re(e,false);if(e.strm.avail_out===0){return $}}return $}function fe(e,t){var r;var n;for(;;){if(e.lookahead<U){ae(e);if(e.lookahead<U&&t===u){return $}if(e.lookahead===0){break}}r=0;if(e.lookahead>=M){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+M-1])&e.hash_mask;r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}if(r!==0&&e.strstart-r<=e.w_size-U){e.match_length=se(e,r)}if(e.match_length>=M){n=i._tr_tally(e,e.strstart-e.match_start,e.match_length-M);e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=M){e.match_length--;do{e.strstart++;e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+M-1])&e.hash_mask;r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}while(--e.match_length!==0);e.strstart++}else{e.strstart+=e.match_length;e.match_length=0;e.ins_h=e.window[e.strstart];e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}}else{n=i._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(n){re(e,false);if(e.strm.avail_out===0){return $}}}e.insert=e.strstart<M-1?e.strstart:M-1;if(t===d){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.last_lit){re(e,false);if(e.strm.avail_out===0){return $}}return X}function le(e,t){var r;var n;var o;for(;;){if(e.lookahead<U){ae(e);if(e.lookahead<U&&t===u){return $}if(e.lookahead===0){break}}r=0;if(e.lookahead>=M){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+M-1])&e.hash_mask;r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}e.prev_length=e.match_length;e.prev_match=e.match_start;e.match_length=M-1;if(r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-U){e.match_length=se(e,r);if(e.match_length<=5&&(e.strategy===v||e.match_length===M&&e.strstart-e.match_start>4096)){e.match_length=M-1}}if(e.prev_length>=M&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-M;n=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-M);e.lookahead-=e.prev_length-1;e.prev_length-=2;do{if(++e.strstart<=o){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+M-1])&e.hash_mask;r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}}while(--e.prev_length!==0);e.match_available=0;e.match_length=M-1;e.strstart++;if(n){re(e,false);if(e.strm.avail_out===0){return $}}}else if(e.match_available){n=i._tr_tally(e,0,e.window[e.strstart-1]);if(n){re(e,false)}e.strstart++;e.lookahead--;if(e.strm.avail_out===0){return $}}else{e.match_available=1;e.strstart++;e.lookahead--}}if(e.match_available){n=i._tr_tally(e,0,e.window[e.strstart-1]);e.match_available=0}e.insert=e.strstart<M-1?e.strstart:M-1;if(t===d){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.last_lit){re(e,false);if(e.strm.avail_out===0){return $}}return X}function de(e,t){var r;var n;var o,s;var a=e.window;for(;;){if(e.lookahead<=L){ae(e);if(e.lookahead<=L&&t===u){return $}if(e.lookahead===0){break}}e.match_length=0;if(e.lookahead>=M&&e.strstart>0){o=e.strstart-1;n=a[o];if(n===a[++o]&&n===a[++o]&&n===a[++o]){s=e.strstart+L;do{}while(n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&o<s);e.match_length=L-(s-o);if(e.match_length>e.lookahead){e.match_length=e.lookahead}}}if(e.match_length>=M){r=i._tr_tally(e,1,e.match_length-M);e.lookahead-=e.match_length;e.strstart+=e.match_length;e.match_length=0}else{r=i._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(r){re(e,false);if(e.strm.avail_out===0){return $}}}e.insert=0;if(t===d){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.last_lit){re(e,false);if(e.strm.avail_out===0){return $}}return X}function ce(e,t){var r;for(;;){if(e.lookahead===0){ae(e);if(e.lookahead===0){if(t===u){return $}break}}e.match_length=0;r=i._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++;if(r){re(e,false);if(e.strm.avail_out===0){return $}}}e.insert=0;if(t===d){re(e,true);if(e.strm.avail_out===0){return Y}return K}if(e.last_lit){re(e,false);if(e.strm.avail_out===0){return $}}return X}function pe(e,t,r,n,i){this.good_length=e;this.max_lazy=t;this.nice_length=r;this.max_chain=n;this.func=i}var he;he=[new pe(0,0,0,0,ue),new pe(4,4,8,4,fe),new pe(4,5,16,8,fe),new pe(4,6,32,32,fe),new pe(4,4,16,16,le),new pe(8,16,32,32,le),new pe(8,16,128,128,le),new pe(8,32,128,256,le),new pe(32,128,258,1024,le),new pe(32,258,258,4096,le)];function ge(e){e.window_size=2*e.w_size;ee(e.head);e.max_lazy_match=he[e.level].max_lazy;e.good_match=he[e.level].good_length;e.nice_match=he[e.level].nice_length;e.max_chain_length=he[e.level].max_chain;e.strstart=0;e.block_start=0;e.lookahead=0;e.insert=0;e.match_length=e.prev_length=M-1;e.match_available=0;e.ins_h=0}function ye(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=A;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new n.Buf16(R*2);this.dyn_dtree=new n.Buf16((2*x+1)*2);this.bl_tree=new n.Buf16((2*D+1)*2);ee(this.dyn_ltree);ee(this.dyn_dtree);ee(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new n.Buf16(P+1);this.heap=new n.Buf16(2*B+1);ee(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new n.Buf16(2*B+1);ee(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function _e(e){var t;if(!e||!e.state){return J(e,g)}e.total_in=e.total_out=0;e.data_type=E;t=e.state;t.pending=0;t.pending_out=0;if(t.wrap<0){t.wrap=-t.wrap}t.status=t.wrap?F:z;e.adler=t.wrap===2?0:1;t.last_flush=u;i._tr_init(t);return p}function me(e){var t=_e(e);if(t===p){ge(e.state)}return t}function ve(e,t){if(!e||!e.state){return g}if(e.state.wrap!==2){return g}e.state.gzhead=t;return p}function be(e,t,r,i,o,s){if(!e){return g}var a=1;if(t===m){t=6}if(i<0){a=0;i=-i}else if(i>15){a=2;i-=16}if(o<1||o>I||r!==A||i<8||i>15||t<0||t>9||s<0||s>S){return J(e,g)}if(i===8){i=9}var u=new ye;e.state=u;u.strm=e;u.wrap=a;u.gzhead=null;u.w_bits=i;u.w_size=1<<u.w_bits;u.w_mask=u.w_size-1;u.hash_bits=o+7;u.hash_size=1<<u.hash_bits;u.hash_mask=u.hash_size-1;u.hash_shift=~~((u.hash_bits+M-1)/M);u.window=new n.Buf8(u.w_size*2);u.head=new n.Buf16(u.hash_size);u.prev=new n.Buf16(u.w_size);u.lit_bufsize=1<<o+6;u.pending_buf_size=u.lit_bufsize*4;u.pending_buf=new n.Buf8(u.pending_buf_size);u.d_buf=1*u.lit_bufsize;u.l_buf=(1+2)*u.lit_bufsize;u.level=t;u.strategy=s;u.method=r;return me(e)}function we(e,t){return be(e,t,A,C,k,T)}function Se(e,t){var r,n;var o,a;if(!e||!e.state||t>c||t<0){return e?J(e,g):g}n=e.state;if(!e.output||!e.input&&e.avail_in!==0||n.status===G&&t!==d){return J(e,e.avail_out===0?_:g)}n.strm=e;r=n.last_flush;n.last_flush=t;if(n.status===F){if(n.wrap===2){e.adler=0;ne(n,31);ne(n,139);ne(n,8);if(!n.gzhead){ne(n,0);ne(n,0);ne(n,0);ne(n,0);ne(n,0);ne(n,n.level===9?2:n.strategy>=b||n.level<2?4:0);ne(n,Z);n.status=z}else{ne(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(!n.gzhead.extra?0:4)+(!n.gzhead.name?0:8)+(!n.gzhead.comment?0:16));ne(n,n.gzhead.time&255);ne(n,n.gzhead.time>>8&255);ne(n,n.gzhead.time>>16&255);ne(n,n.gzhead.time>>24&255);ne(n,n.level===9?2:n.strategy>=b||n.level<2?4:0);ne(n,n.gzhead.os&255);if(n.gzhead.extra&&n.gzhead.extra.length){ne(n,n.gzhead.extra.length&255);ne(n,n.gzhead.extra.length>>8&255)}if(n.gzhead.hcrc){e.adler=s(e.adler,n.pending_buf,n.pending,0)}n.gzindex=0;n.status=W}}else{var y=A+(n.w_bits-8<<4)<<8;var m=-1;if(n.strategy>=b||n.level<2){m=0}else if(n.level<6){m=1}else if(n.level===6){m=2}else{m=3}y|=m<<6;if(n.strstart!==0){y|=N}y+=31-y%31;n.status=z;ie(n,y);if(n.strstart!==0){ie(n,e.adler>>>16);ie(n,e.adler&65535)}e.adler=1}}if(n.status===W){if(n.gzhead.extra){o=n.pending;while(n.gzindex<(n.gzhead.extra.length&65535)){if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o){e.adler=s(e.adler,n.pending_buf,n.pending-o,o)}te(e);o=n.pending;if(n.pending===n.pending_buf_size){break}}ne(n,n.gzhead.extra[n.gzindex]&255);n.gzindex++}if(n.gzhead.hcrc&&n.pending>o){e.adler=s(e.adler,n.pending_buf,n.pending-o,o)}if(n.gzindex===n.gzhead.extra.length){n.gzindex=0;n.status=H}}else{n.status=H}}if(n.status===H){if(n.gzhead.name){o=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o){e.adler=s(e.adler,n.pending_buf,n.pending-o,o)}te(e);o=n.pending;if(n.pending===n.pending_buf_size){a=1;break}}if(n.gzindex<n.gzhead.name.length){a=n.gzhead.name.charCodeAt(n.gzindex++)&255}else{a=0}ne(n,a)}while(a!==0);if(n.gzhead.hcrc&&n.pending>o){e.adler=s(e.adler,n.pending_buf,n.pending-o,o)}if(a===0){n.gzindex=0;n.status=V}}else{n.status=V}}if(n.status===V){if(n.gzhead.comment){o=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o){e.adler=s(e.adler,n.pending_buf,n.pending-o,o)}te(e);o=n.pending;if(n.pending===n.pending_buf_size){a=1;break}}if(n.gzindex<n.gzhead.comment.length){a=n.gzhead.comment.charCodeAt(n.gzindex++)&255}else{a=0}ne(n,a)}while(a!==0);if(n.gzhead.hcrc&&n.pending>o){e.adler=s(e.adler,n.pending_buf,n.pending-o,o)}if(a===0){n.status=q}}else{n.status=q}}if(n.status===q){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size){te(e)}if(n.pending+2<=n.pending_buf_size){ne(n,e.adler&255);ne(n,e.adler>>8&255);e.adler=0;n.status=z}}else{n.status=z}}if(n.pending!==0){te(e);if(e.avail_out===0){n.last_flush=-1;return p}}else if(e.avail_in===0&&Q(t)<=Q(r)&&t!==d){return J(e,_)}if(n.status===G&&e.avail_in!==0){return J(e,_)}if(e.avail_in!==0||n.lookahead!==0||t!==u&&n.status!==G){var v=n.strategy===b?ce(n,t):n.strategy===w?de(n,t):he[n.level].func(n,t);if(v===Y||v===K){n.status=G}if(v===$||v===Y){if(e.avail_out===0){n.last_flush=-1}return p}if(v===X){if(t===f){i._tr_align(n)}else if(t!==c){i._tr_stored_block(n,0,0,false);if(t===l){ee(n.head);if(n.lookahead===0){n.strstart=0;n.block_start=0;n.insert=0}}}te(e);if(e.avail_out===0){n.last_flush=-1;return p}}}if(t!==d){return p}if(n.wrap<=0){return h}if(n.wrap===2){ne(n,e.adler&255);ne(n,e.adler>>8&255);ne(n,e.adler>>16&255);ne(n,e.adler>>24&255);ne(n,e.total_in&255);ne(n,e.total_in>>8&255);ne(n,e.total_in>>16&255);ne(n,e.total_in>>24&255)}else{ie(n,e.adler>>>16);ie(n,e.adler&65535)}te(e);if(n.wrap>0){n.wrap=-n.wrap}return n.pending!==0?p:h}function Te(e){var t;if(!e||!e.state){return g}t=e.state.status;if(t!==F&&t!==W&&t!==H&&t!==V&&t!==q&&t!==z&&t!==G){return J(e,g)}e.state=null;return t===z?J(e,y):p}function Ee(e,t){var r=t.length;var i;var s,a;var u;var f;var l;var d;var c;if(!e||!e.state){return g}i=e.state;u=i.wrap;if(u===2||u===1&&i.status!==F||i.lookahead){return g}if(u===1){e.adler=o(e.adler,t,r,0)}i.wrap=0;if(r>=i.w_size){if(u===0){ee(i.head);i.strstart=0;i.block_start=0;i.insert=0}c=new n.Buf8(i.w_size);n.arraySet(c,t,r-i.w_size,i.w_size,0);t=c;r=i.w_size}f=e.avail_in;l=e.next_in;d=e.input;e.avail_in=r;e.next_in=0;e.input=t;ae(i);while(i.lookahead>=M){s=i.strstart;a=i.lookahead-(M-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+M-1])&i.hash_mask;i.prev[s&i.w_mask]=i.head[i.ins_h];i.head[i.ins_h]=s;s++}while(--a);i.strstart=s;i.lookahead=M-1;ae(i)}i.strstart+=i.lookahead;i.block_start=i.strstart;i.insert=i.lookahead;i.lookahead=0;i.match_length=i.prev_length=M-1;i.match_available=0;e.next_in=l;e.input=d;e.avail_in=f;i.wrap=u;return p}r.deflateInit=we;r.deflateInit2=be;r.deflateReset=me;r.deflateResetKeep=_e;r.deflateSetHeader=ve;r.deflate=Se;r.deflateEnd=Te;r.deflateSetDictionary=Ee;r.deflateInfo="pako deflate (from Nodeca project)"},{}],90:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],91:[function(e,t,r){"use strict";var n=e(85);var i=4;var o=0;var s=1;var a=2;function u(e){var t=e.length;while(--t>=0){e[t]=0}}var f=0;var l=1;var d=2;var c=3;var p=258;var h=29;var g=256;var y=g+1+h;var _=30;var m=19;var v=2*y+1;var b=15;var w=16;var S=7;var T=256;var E=16;var A=17;var I=18;var C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var B=512;var x=new Array((y+2)*2);u(x);var D=new Array(_*2);u(D);var R=new Array(B);u(R);var P=new Array(p-c+1);u(P);var M=new Array(h);u(M);var L=new Array(_);u(L);function U(e,t,r,n,i){this.static_tree=e;this.extra_bits=t;this.extra_base=r;this.elems=n;this.max_length=i;this.has_stree=e&&e.length}var N;var F;var W;function H(e,t){this.dyn_tree=e;this.max_code=0;this.stat_desc=t}function V(e){return e<256?R[e]:R[256+(e>>>7)]}function q(e,t){e.pending_buf[e.pending++]=t&255;e.pending_buf[e.pending++]=t>>>8&255}function z(e,t,r){if(e.bi_valid>w-r){e.bi_buf|=t<<e.bi_valid&65535;q(e,e.bi_buf);e.bi_buf=t>>w-e.bi_valid;e.bi_valid+=r-w}else{e.bi_buf|=t<<e.bi_valid&65535;e.bi_valid+=r}}function G(e,t,r){z(e,r[t*2],r[t*2+1])}function $(e,t){var r=0;do{r|=e&1;e>>>=1;r<<=1}while(--t>0);return r>>>1}function X(e){if(e.bi_valid===16){q(e,e.bi_buf);e.bi_buf=0;e.bi_valid=0}else if(e.bi_valid>=8){e.pending_buf[e.pending++]=e.bi_buf&255;e.bi_buf>>=8;e.bi_valid-=8}}function Y(e,t){var r=t.dyn_tree;var n=t.max_code;var i=t.stat_desc.static_tree;var o=t.stat_desc.has_stree;var s=t.stat_desc.extra_bits;var a=t.stat_desc.extra_base;var u=t.stat_desc.max_length;var f;var l,d;var c;var p;var h;var g=0;for(c=0;c<=b;c++){e.bl_count[c]=0}r[e.heap[e.heap_max]*2+1]=0;for(f=e.heap_max+1;f<v;f++){l=e.heap[f];c=r[r[l*2+1]*2+1]+1;if(c>u){c=u;g++}r[l*2+1]=c;if(l>n){continue}e.bl_count[c]++;p=0;if(l>=a){p=s[l-a]}h=r[l*2];e.opt_len+=h*(c+p);if(o){e.static_len+=h*(i[l*2+1]+p)}}if(g===0){return}do{c=u-1;while(e.bl_count[c]===0){c--}e.bl_count[c]--;e.bl_count[c+1]+=2;e.bl_count[u]--;g-=2}while(g>0);for(c=u;c!==0;c--){l=e.bl_count[c];while(l!==0){d=e.heap[--f];if(d>n){continue}if(r[d*2+1]!==c){e.opt_len+=(c-r[d*2+1])*r[d*2];r[d*2+1]=c}l--}}}function K(e,t,r){var n=new Array(b+1);var i=0;var o;var s;for(o=1;o<=b;o++){n[o]=i=i+r[o-1]<<1}for(s=0;s<=t;s++){var a=e[s*2+1];if(a===0){continue}e[s*2]=$(n[a]++,a)}}function Z(){var e;var t;var r;var n;var i;var o=new Array(b+1);r=0;for(n=0;n<h-1;n++){M[n]=r;for(e=0;e<1<<C[n];e++){P[r++]=n}}P[r-1]=n;i=0;for(n=0;n<16;n++){L[n]=i;for(e=0;e<1<<k[n];e++){R[i++]=n}}i>>=7;for(;n<_;n++){L[n]=i<<7;for(e=0;e<1<<k[n]-7;e++){R[256+i++]=n}}for(t=0;t<=b;t++){o[t]=0}e=0;while(e<=143){x[e*2+1]=8;e++;o[8]++}while(e<=255){x[e*2+1]=9;e++;o[9]++}while(e<=279){x[e*2+1]=7;e++;o[7]++}while(e<=287){x[e*2+1]=8;e++;o[8]++}K(x,y+1,o);for(e=0;e<_;e++){D[e*2+1]=5;D[e*2]=$(e,5)}N=new U(x,C,g+1,y,b);F=new U(D,k,0,_,b);W=new U(new Array(0),j,0,m,S)}function J(e){var t;for(t=0;t<y;t++){e.dyn_ltree[t*2]=0}for(t=0;t<_;t++){e.dyn_dtree[t*2]=0}for(t=0;t<m;t++){e.bl_tree[t*2]=0}e.dyn_ltree[T*2]=1;e.opt_len=e.static_len=0;e.last_lit=e.matches=0}function Q(e){if(e.bi_valid>8){q(e,e.bi_buf)}else if(e.bi_valid>0){e.pending_buf[e.pending++]=e.bi_buf}e.bi_buf=0;e.bi_valid=0}function ee(e,t,r,i){Q(e);if(i){q(e,r);q(e,~r)}n.arraySet(e.pending_buf,e.window,t,r,e.pending);e.pending+=r}function te(e,t,r,n){var i=t*2;var o=r*2;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function re(e,t,r){var n=e.heap[r];var i=r<<1;while(i<=e.heap_len){if(i<e.heap_len&&te(t,e.heap[i+1],e.heap[i],e.depth)){i++}if(te(t,n,e.heap[i],e.depth)){break}e.heap[r]=e.heap[i];r=i;i<<=1}e.heap[r]=n}function ne(e,t,r){var n;var i;var o=0;var s;var a;if(e.last_lit!==0){do{n=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1];i=e.pending_buf[e.l_buf+o];o++;if(n===0){G(e,i,t)}else{s=P[i];G(e,s+g+1,t);a=C[s];if(a!==0){i-=M[s];z(e,i,a)}n--;s=V(n);G(e,s,r);a=k[s];if(a!==0){n-=L[s];z(e,n,a)}}}while(o<e.last_lit)}G(e,T,t)}function ie(e,t){var r=t.dyn_tree;var n=t.stat_desc.static_tree;var i=t.stat_desc.has_stree;var o=t.stat_desc.elems;var s,a;var u=-1;var f;e.heap_len=0;e.heap_max=v;for(s=0;s<o;s++){if(r[s*2]!==0){e.heap[++e.heap_len]=u=s;e.depth[s]=0}else{r[s*2+1]=0}}while(e.heap_len<2){f=e.heap[++e.heap_len]=u<2?++u:0;r[f*2]=1;e.depth[f]=0;e.opt_len--;if(i){e.static_len-=n[f*2+1]}}t.max_code=u;for(s=e.heap_len>>1;s>=1;s--){re(e,r,s)}f=o;do{s=e.heap[1];e.heap[1]=e.heap[e.heap_len--];re(e,r,1);a=e.heap[1];e.heap[--e.heap_max]=s;e.heap[--e.heap_max]=a;r[f*2]=r[s*2]+r[a*2];e.depth[f]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1;r[s*2+1]=r[a*2+1]=f;e.heap[1]=f++;re(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1];Y(e,t);K(r,u,e.bl_count)}function oe(e,t,r){var n;var i=-1;var o;var s=t[0*2+1];var a=0;var u=7;var f=4;if(s===0){u=138;f=3}t[(r+1)*2+1]=65535;for(n=0;n<=r;n++){o=s;s=t[(n+1)*2+1];if(++a<u&&o===s){continue}else if(a<f){e.bl_tree[o*2]+=a}else if(o!==0){if(o!==i){e.bl_tree[o*2]++}e.bl_tree[E*2]++}else if(a<=10){e.bl_tree[A*2]++}else{e.bl_tree[I*2]++}a=0;i=o;if(s===0){u=138;f=3}else if(o===s){u=6;f=3}else{u=7;f=4}}}function se(e,t,r){var n;var i=-1;var o;var s=t[0*2+1];var a=0;var u=7;var f=4;if(s===0){u=138;f=3}for(n=0;n<=r;n++){o=s;s=t[(n+1)*2+1];if(++a<u&&o===s){continue}else if(a<f){do{G(e,o,e.bl_tree)}while(--a!==0)}else if(o!==0){if(o!==i){G(e,o,e.bl_tree);a--}G(e,E,e.bl_tree);z(e,a-3,2)}else if(a<=10){G(e,A,e.bl_tree);z(e,a-3,3)}else{G(e,I,e.bl_tree);z(e,a-11,7)}a=0;i=o;if(s===0){u=138;f=3}else if(o===s){u=6;f=3}else{u=7;f=4}}}function ae(e){var t;oe(e,e.dyn_ltree,e.l_desc.max_code);oe(e,e.dyn_dtree,e.d_desc.max_code);ie(e,e.bl_desc);for(t=m-1;t>=3;t--){if(e.bl_tree[O[t]*2+1]!==0){break}}e.opt_len+=3*(t+1)+5+5+4;return t}function ue(e,t,r,n){var i;z(e,t-257,5);z(e,r-1,5);z(e,n-4,4);for(i=0;i<n;i++){z(e,e.bl_tree[O[i]*2+1],3)}se(e,e.dyn_ltree,t-1);se(e,e.dyn_dtree,r-1)}function fe(e){var t=4093624447;var r;for(r=0;r<=31;r++,t>>>=1){if(t&1&&e.dyn_ltree[r*2]!==0){return o}}if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0){return s}for(r=32;r<g;r++){if(e.dyn_ltree[r*2]!==0){return s}}return o}var le=false;function de(e){if(!le){Z();le=true}e.l_desc=new H(e.dyn_ltree,N);e.d_desc=new H(e.dyn_dtree,F);e.bl_desc=new H(e.bl_tree,W);e.bi_buf=0;e.bi_valid=0;J(e)}function ce(e,t,r,n){z(e,(f<<1)+(n?1:0),3);ee(e,t,r,true)}function pe(e){z(e,l<<1,3);G(e,T,x);X(e)}function he(e,t,r,n){var o,s;var u=0;if(e.level>0){if(e.strm.data_type===a){e.strm.data_type=fe(e)}ie(e,e.l_desc);ie(e,e.d_desc);u=ae(e);o=e.opt_len+3+7>>>3;s=e.static_len+3+7>>>3;if(s<=o){o=s}}else{o=s=r+5}if(r+4<=o&&t!==-1){ce(e,t,r,n)}else if(e.strategy===i||s===o){z(e,(l<<1)+(n?1:0),3);ne(e,x,D)}else{z(e,(d<<1)+(n?1:0),3);ue(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1);ne(e,e.dyn_ltree,e.dyn_dtree)}J(e);if(n){Q(e)}}function ge(e,t,r){e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255;e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255;e.pending_buf[e.l_buf+e.last_lit]=r&255;e.last_lit++;if(t===0){e.dyn_ltree[r*2]++}else{e.matches++;t--;e.dyn_ltree[(P[r]+g+1)*2]++;e.dyn_dtree[V(t)*2]++}return e.last_lit===e.lit_bufsize-1}r._tr_init=de;r._tr_stored_block=ce;r._tr_flush_block=he;r._tr_tally=ge;r._tr_align=pe},{}],92:[function(e,t,r){"use strict";function n(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}t.exports=n},{}],93:[function(e,t,r){var n=e(83);var i=n;var o=Function("return this")();i.exportSymbol("proto.report.ClientReportBody",null,o);i.exportSymbol("proto.report.ClientReportHead",null,o);i.exportSymbol("proto.report.ClientReportItem",null,o);i.exportSymbol("proto.report.DCDNReport167Item",null,o);proto.report.ClientReportItem=function(e){n.Message.initialize(this,e,0,-1,null,null)};i.inherits(proto.report.ClientReportItem,n.Message);if(i.DEBUG&&!COMPILED){proto.report.ClientReportItem.displayName="proto.report.ClientReportItem"}if(n.Message.GENERATE_TO_OBJECT){proto.report.ClientReportItem.prototype.toObject=function(e){return proto.report.ClientReportItem.toObject(e,this)};proto.report.ClientReportItem.toObject=function(e,t){var r,i={type:n.Message.getField(t,1),encodeIndex:n.Message.getField(t,2),encoded:t.getEncoded_asB64()};if(e){i.$jspbMessageInstance=t}return i}}proto.report.ClientReportItem.deserializeBinary=function(e){var t=new n.BinaryReader(e);var r=new proto.report.ClientReportItem;return proto.report.ClientReportItem.deserializeBinaryFromReader(r,t)};proto.report.ClientReportItem.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup()){break}var r=t.getFieldNumber();switch(r){case 1:var n=t.readInt32();e.setType(n);break;case 2:var n=t.readInt32();e.setEncodeIndex(n);break;case 3:var n=t.readBytes();e.setEncoded(n);break;default:t.skipField();break}}return e};proto.report.ClientReportItem.prototype.serializeBinary=function(){var e=new n.BinaryWriter;proto.report.ClientReportItem.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.report.ClientReportItem.serializeBinaryToWriter=function(e,t){var r=undefined;r=n.Message.getField(e,1);if(r!=null){t.writeInt32(1,r)}r=n.Message.getField(e,2);if(r!=null){t.writeInt32(2,r)}r=n.Message.getField(e,3);if(r!=null){t.writeBytes(3,r)}};proto.report.ClientReportItem.prototype.getType=function(){return n.Message.getFieldWithDefault(this,1,0)};proto.report.ClientReportItem.prototype.setType=function(e){n.Message.setField(this,1,e)};proto.report.ClientReportItem.prototype.clearType=function(){n.Message.setField(this,1,undefined)};proto.report.ClientReportItem.prototype.hasType=function(){
return n.Message.getField(this,1)!=null};proto.report.ClientReportItem.prototype.getEncodeIndex=function(){return n.Message.getFieldWithDefault(this,2,0)};proto.report.ClientReportItem.prototype.setEncodeIndex=function(e){n.Message.setField(this,2,e)};proto.report.ClientReportItem.prototype.clearEncodeIndex=function(){n.Message.setField(this,2,undefined)};proto.report.ClientReportItem.prototype.hasEncodeIndex=function(){return n.Message.getField(this,2)!=null};proto.report.ClientReportItem.prototype.getEncoded=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.report.ClientReportItem.prototype.getEncoded_asB64=function(){return n.Message.bytesAsB64(this.getEncoded())};proto.report.ClientReportItem.prototype.getEncoded_asU8=function(){return n.Message.bytesAsU8(this.getEncoded())};proto.report.ClientReportItem.prototype.setEncoded=function(e){n.Message.setField(this,3,e)};proto.report.ClientReportItem.prototype.clearEncoded=function(){n.Message.setField(this,3,undefined)};proto.report.ClientReportItem.prototype.hasEncoded=function(){return n.Message.getField(this,3)!=null};proto.report.ClientReportHead=function(e){n.Message.initialize(this,e,0,-1,null,null)};i.inherits(proto.report.ClientReportHead,n.Message);if(i.DEBUG&&!COMPILED){proto.report.ClientReportHead.displayName="proto.report.ClientReportHead"}if(n.Message.GENERATE_TO_OBJECT){proto.report.ClientReportHead.prototype.toObject=function(e){return proto.report.ClientReportHead.toObject(e,this)};proto.report.ClientReportHead.toObject=function(e,t){var r,i={version:n.Message.getField(t,1),clientid:n.Message.getField(t,2),clientversion:n.Message.getField(t,3),zip:n.Message.getField(t,4),guid:n.Message.getField(t,5),region:n.Message.getField(t,6),clienttype:n.Message.getField(t,7)};if(e){i.$jspbMessageInstance=t}return i}}proto.report.ClientReportHead.deserializeBinary=function(e){var t=new n.BinaryReader(e);var r=new proto.report.ClientReportHead;return proto.report.ClientReportHead.deserializeBinaryFromReader(r,t)};proto.report.ClientReportHead.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup()){break}var r=t.getFieldNumber();switch(r){case 1:var n=t.readInt32();e.setVersion(n);break;case 2:var n=t.readInt32();e.setClientid(n);break;case 3:var n=t.readString();e.setClientversion(n);break;case 4:var n=t.readInt32();e.setZip(n);break;case 5:var n=t.readString();e.setGuid(n);break;case 6:var n=t.readString();e.setRegion(n);break;case 7:var n=t.readString();e.setClienttype(n);break;default:t.skipField();break}}return e};proto.report.ClientReportHead.prototype.serializeBinary=function(){var e=new n.BinaryWriter;proto.report.ClientReportHead.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.report.ClientReportHead.serializeBinaryToWriter=function(e,t){var r=undefined;r=n.Message.getField(e,1);if(r!=null){t.writeInt32(1,r)}r=n.Message.getField(e,2);if(r!=null){t.writeInt32(2,r)}r=n.Message.getField(e,3);if(r!=null){t.writeString(3,r)}r=n.Message.getField(e,4);if(r!=null){t.writeInt32(4,r)}r=n.Message.getField(e,5);if(r!=null){t.writeString(5,r)}r=n.Message.getField(e,6);if(r!=null){t.writeString(6,r)}r=n.Message.getField(e,7);if(r!=null){t.writeString(7,r)}};proto.report.ClientReportHead.prototype.getVersion=function(){return n.Message.getFieldWithDefault(this,1,0)};proto.report.ClientReportHead.prototype.setVersion=function(e){n.Message.setField(this,1,e)};proto.report.ClientReportHead.prototype.clearVersion=function(){n.Message.setField(this,1,undefined)};proto.report.ClientReportHead.prototype.hasVersion=function(){return n.Message.getField(this,1)!=null};proto.report.ClientReportHead.prototype.getClientid=function(){return n.Message.getFieldWithDefault(this,2,0)};proto.report.ClientReportHead.prototype.setClientid=function(e){n.Message.setField(this,2,e)};proto.report.ClientReportHead.prototype.clearClientid=function(){n.Message.setField(this,2,undefined)};proto.report.ClientReportHead.prototype.hasClientid=function(){return n.Message.getField(this,2)!=null};proto.report.ClientReportHead.prototype.getClientversion=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.report.ClientReportHead.prototype.setClientversion=function(e){n.Message.setField(this,3,e)};proto.report.ClientReportHead.prototype.clearClientversion=function(){n.Message.setField(this,3,undefined)};proto.report.ClientReportHead.prototype.hasClientversion=function(){return n.Message.getField(this,3)!=null};proto.report.ClientReportHead.prototype.getZip=function(){return n.Message.getFieldWithDefault(this,4,0)};proto.report.ClientReportHead.prototype.setZip=function(e){n.Message.setField(this,4,e)};proto.report.ClientReportHead.prototype.clearZip=function(){n.Message.setField(this,4,undefined)};proto.report.ClientReportHead.prototype.hasZip=function(){return n.Message.getField(this,4)!=null};proto.report.ClientReportHead.prototype.getGuid=function(){return n.Message.getFieldWithDefault(this,5,"")};proto.report.ClientReportHead.prototype.setGuid=function(e){n.Message.setField(this,5,e)};proto.report.ClientReportHead.prototype.clearGuid=function(){n.Message.setField(this,5,undefined)};proto.report.ClientReportHead.prototype.hasGuid=function(){return n.Message.getField(this,5)!=null};proto.report.ClientReportHead.prototype.getRegion=function(){return n.Message.getFieldWithDefault(this,6,"")};proto.report.ClientReportHead.prototype.setRegion=function(e){n.Message.setField(this,6,e)};proto.report.ClientReportHead.prototype.clearRegion=function(){n.Message.setField(this,6,undefined)};proto.report.ClientReportHead.prototype.hasRegion=function(){return n.Message.getField(this,6)!=null};proto.report.ClientReportHead.prototype.getClienttype=function(){return n.Message.getFieldWithDefault(this,7,"")};proto.report.ClientReportHead.prototype.setClienttype=function(e){n.Message.setField(this,7,e)};proto.report.ClientReportHead.prototype.clearClienttype=function(){n.Message.setField(this,7,undefined)};proto.report.ClientReportHead.prototype.hasClienttype=function(){return n.Message.getField(this,7)!=null};proto.report.ClientReportBody=function(e){n.Message.initialize(this,e,0,-1,proto.report.ClientReportBody.repeatedFields_,null)};i.inherits(proto.report.ClientReportBody,n.Message);if(i.DEBUG&&!COMPILED){proto.report.ClientReportBody.displayName="proto.report.ClientReportBody"}proto.report.ClientReportBody.repeatedFields_=[1];if(n.Message.GENERATE_TO_OBJECT){proto.report.ClientReportBody.prototype.toObject=function(e){return proto.report.ClientReportBody.toObject(e,this)};proto.report.ClientReportBody.toObject=function(e,t){var r,i={itemList:n.Message.toObjectList(t.getItemList(),proto.report.ClientReportItem.toObject,e)};if(e){i.$jspbMessageInstance=t}return i}}proto.report.ClientReportBody.deserializeBinary=function(e){var t=new n.BinaryReader(e);var r=new proto.report.ClientReportBody;return proto.report.ClientReportBody.deserializeBinaryFromReader(r,t)};proto.report.ClientReportBody.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup()){break}var r=t.getFieldNumber();switch(r){case 1:var n=new proto.report.ClientReportItem;t.readMessage(n,proto.report.ClientReportItem.deserializeBinaryFromReader);e.addItem(n);break;default:t.skipField();break}}return e};proto.report.ClientReportBody.prototype.serializeBinary=function(){var e=new n.BinaryWriter;proto.report.ClientReportBody.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.report.ClientReportBody.serializeBinaryToWriter=function(e,t){var r=undefined;r=e.getItemList();if(r.length>0){t.writeRepeatedMessage(1,r,proto.report.ClientReportItem.serializeBinaryToWriter)}};proto.report.ClientReportBody.prototype.getItemList=function(){return n.Message.getRepeatedWrapperField(this,proto.report.ClientReportItem,1)};proto.report.ClientReportBody.prototype.setItemList=function(e){n.Message.setRepeatedWrapperField(this,1,e)};proto.report.ClientReportBody.prototype.addItem=function(e,t){return n.Message.addToRepeatedWrapperField(this,1,e,proto.report.ClientReportItem,t)};proto.report.ClientReportBody.prototype.clearItemList=function(){this.setItemList([])};proto.report.DCDNReport167Item=function(e){n.Message.initialize(this,e,0,-1,null,null)};i.inherits(proto.report.DCDNReport167Item,n.Message);if(i.DEBUG&&!COMPILED){proto.report.DCDNReport167Item.displayName="proto.report.DCDNReport167Item"}if(n.Message.GENERATE_TO_OBJECT){proto.report.DCDNReport167Item.prototype.toObject=function(e){return proto.report.DCDNReport167Item.toObject(e,this)};proto.report.DCDNReport167Item.toObject=function(e,t){var r,i={keyName:n.Message.getField(t,1),stringData1:n.Message.getField(t,2),stringData2:n.Message.getField(t,3),stringData3:n.Message.getField(t,4),intData1:n.Message.getField(t,5),intData2:n.Message.getField(t,6),intData3:n.Message.getField(t,7),intData4:n.Message.getField(t,8),int64Data1:n.Message.getField(t,9),int64Data2:n.Message.getField(t,10),int64Data3:n.Message.getField(t,11),int64Data4:n.Message.getField(t,12)};if(e){i.$jspbMessageInstance=t}return i}}proto.report.DCDNReport167Item.deserializeBinary=function(e){var t=new n.BinaryReader(e);var r=new proto.report.DCDNReport167Item;return proto.report.DCDNReport167Item.deserializeBinaryFromReader(r,t)};proto.report.DCDNReport167Item.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup()){break}var r=t.getFieldNumber();switch(r){case 1:var n=t.readString();e.setKeyName(n);break;case 2:var n=t.readString();e.setStringData1(n);break;case 3:var n=t.readString();e.setStringData2(n);break;case 4:var n=t.readString();e.setStringData3(n);break;case 5:var n=t.readInt32();e.setIntData1(n);break;case 6:var n=t.readInt32();e.setIntData2(n);break;case 7:var n=t.readInt32();e.setIntData3(n);break;case 8:var n=t.readInt32();e.setIntData4(n);break;case 9:var n=t.readInt64();e.setInt64Data1(n);break;case 10:var n=t.readInt64();e.setInt64Data2(n);break;case 11:var n=t.readInt64();e.setInt64Data3(n);break;case 12:var n=t.readInt64();e.setInt64Data4(n);break;default:t.skipField();break}}return e};proto.report.DCDNReport167Item.prototype.serializeBinary=function(){var e=new n.BinaryWriter;proto.report.DCDNReport167Item.serializeBinaryToWriter(this,e);return e.getResultBuffer()};proto.report.DCDNReport167Item.serializeBinaryToWriter=function(e,t){var r=undefined;r=n.Message.getField(e,1);if(r!=null){t.writeString(1,r)}r=n.Message.getField(e,2);if(r!=null){t.writeString(2,r)}r=n.Message.getField(e,3);if(r!=null){t.writeString(3,r)}r=n.Message.getField(e,4);if(r!=null){t.writeString(4,r)}r=n.Message.getField(e,5);if(r!=null){t.writeInt32(5,r)}r=n.Message.getField(e,6);if(r!=null){t.writeInt32(6,r)}r=n.Message.getField(e,7);if(r!=null){t.writeInt32(7,r)}r=n.Message.getField(e,8);if(r!=null){t.writeInt32(8,r)}r=n.Message.getField(e,9);if(r!=null){t.writeInt64(9,r)}r=n.Message.getField(e,10);if(r!=null){t.writeInt64(10,r)}r=n.Message.getField(e,11);if(r!=null){t.writeInt64(11,r)}r=n.Message.getField(e,12);if(r!=null){t.writeInt64(12,r)}};proto.report.DCDNReport167Item.prototype.getKeyName=function(){return n.Message.getFieldWithDefault(this,1,"")};proto.report.DCDNReport167Item.prototype.setKeyName=function(e){n.Message.setField(this,1,e)};proto.report.DCDNReport167Item.prototype.clearKeyName=function(){n.Message.setField(this,1,undefined)};proto.report.DCDNReport167Item.prototype.hasKeyName=function(){return n.Message.getField(this,1)!=null};proto.report.DCDNReport167Item.prototype.getStringData1=function(){return n.Message.getFieldWithDefault(this,2,"")};proto.report.DCDNReport167Item.prototype.setStringData1=function(e){n.Message.setField(this,2,e)};proto.report.DCDNReport167Item.prototype.clearStringData1=function(){n.Message.setField(this,2,undefined)};proto.report.DCDNReport167Item.prototype.hasStringData1=function(){return n.Message.getField(this,2)!=null};proto.report.DCDNReport167Item.prototype.getStringData2=function(){return n.Message.getFieldWithDefault(this,3,"")};proto.report.DCDNReport167Item.prototype.setStringData2=function(e){n.Message.setField(this,3,e)};proto.report.DCDNReport167Item.prototype.clearStringData2=function(){n.Message.setField(this,3,undefined)};proto.report.DCDNReport167Item.prototype.hasStringData2=function(){return n.Message.getField(this,3)!=null};proto.report.DCDNReport167Item.prototype.getStringData3=function(){return n.Message.getFieldWithDefault(this,4,"")};proto.report.DCDNReport167Item.prototype.setStringData3=function(e){n.Message.setField(this,4,e)};proto.report.DCDNReport167Item.prototype.clearStringData3=function(){n.Message.setField(this,4,undefined)};proto.report.DCDNReport167Item.prototype.hasStringData3=function(){return n.Message.getField(this,4)!=null};proto.report.DCDNReport167Item.prototype.getIntData1=function(){return n.Message.getFieldWithDefault(this,5,0)};proto.report.DCDNReport167Item.prototype.setIntData1=function(e){n.Message.setField(this,5,e)};proto.report.DCDNReport167Item.prototype.clearIntData1=function(){n.Message.setField(this,5,undefined)};proto.report.DCDNReport167Item.prototype.hasIntData1=function(){return n.Message.getField(this,5)!=null};proto.report.DCDNReport167Item.prototype.getIntData2=function(){return n.Message.getFieldWithDefault(this,6,0)};proto.report.DCDNReport167Item.prototype.setIntData2=function(e){n.Message.setField(this,6,e)};proto.report.DCDNReport167Item.prototype.clearIntData2=function(){n.Message.setField(this,6,undefined)};proto.report.DCDNReport167Item.prototype.hasIntData2=function(){return n.Message.getField(this,6)!=null};proto.report.DCDNReport167Item.prototype.getIntData3=function(){return n.Message.getFieldWithDefault(this,7,0)};proto.report.DCDNReport167Item.prototype.setIntData3=function(e){n.Message.setField(this,7,e)};proto.report.DCDNReport167Item.prototype.clearIntData3=function(){n.Message.setField(this,7,undefined)};proto.report.DCDNReport167Item.prototype.hasIntData3=function(){return n.Message.getField(this,7)!=null};proto.report.DCDNReport167Item.prototype.getIntData4=function(){return n.Message.getFieldWithDefault(this,8,0)};proto.report.DCDNReport167Item.prototype.setIntData4=function(e){n.Message.setField(this,8,e)};proto.report.DCDNReport167Item.prototype.clearIntData4=function(){n.Message.setField(this,8,undefined)};proto.report.DCDNReport167Item.prototype.hasIntData4=function(){return n.Message.getField(this,8)!=null};proto.report.DCDNReport167Item.prototype.getInt64Data1=function(){return n.Message.getFieldWithDefault(this,9,0)};proto.report.DCDNReport167Item.prototype.setInt64Data1=function(e){n.Message.setField(this,9,e)};proto.report.DCDNReport167Item.prototype.clearInt64Data1=function(){n.Message.setField(this,9,undefined)};proto.report.DCDNReport167Item.prototype.hasInt64Data1=function(){return n.Message.getField(this,9)!=null};proto.report.DCDNReport167Item.prototype.getInt64Data2=function(){return n.Message.getFieldWithDefault(this,10,0)};proto.report.DCDNReport167Item.prototype.setInt64Data2=function(e){n.Message.setField(this,10,e)};proto.report.DCDNReport167Item.prototype.clearInt64Data2=function(){n.Message.setField(this,10,undefined)};proto.report.DCDNReport167Item.prototype.hasInt64Data2=function(){return n.Message.getField(this,10)!=null};proto.report.DCDNReport167Item.prototype.getInt64Data3=function(){return n.Message.getFieldWithDefault(this,11,0)};proto.report.DCDNReport167Item.prototype.setInt64Data3=function(e){n.Message.setField(this,11,e)};proto.report.DCDNReport167Item.prototype.clearInt64Data3=function(){n.Message.setField(this,11,undefined)};proto.report.DCDNReport167Item.prototype.hasInt64Data3=function(){return n.Message.getField(this,11)!=null};proto.report.DCDNReport167Item.prototype.getInt64Data4=function(){return n.Message.getFieldWithDefault(this,12,0)};proto.report.DCDNReport167Item.prototype.setInt64Data4=function(e){n.Message.setField(this,12,e)};proto.report.DCDNReport167Item.prototype.clearInt64Data4=function(){n.Message.setField(this,12,undefined)};proto.report.DCDNReport167Item.prototype.hasInt64Data4=function(){return n.Message.getField(this,12)!=null};i.object.extend(r,proto.report)},{}],94:[function(e,t,r){(function(n){(function(e){if("object"==typeof r&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;i="undefined"==typeof window?"undefined"==typeof n?"undefined"==typeof self?this:self:n:window,i.WebTorrent=e()}})(function(){var t=Math.pow,r=Math.floor,i=Math.abs,o=String.fromCharCode,s=Math.ceil,a=Math.max,u=Math.min,f;return function t(r,n,i){function o(a,u){if(!n[a]){if(!r[a]){var f="function"==typeof e&&e;if(!u&&f)return f(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[a]={exports:{}};r[a][0].call(d.exports,function(e){var t=r[a][1][e];return o(t?t:e)},d,d.exports,t,r,n,i)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t){function r(e,t){o.Readable.call(this,t),this.destroyed=!1,this._torrent=e._torrent;var r=t&&t.start||0,n=t&&t.end&&t.end<e.length?t.end:e.length-1,i=e._torrent.pieceLength;this._startPiece=0|(r+e.offset)/i,this._endPiece=0|(n+e.offset)/i,this._piece=this._startPiece,this._offset=r+e.offset-this._startPiece*i,this._missing=n-r+1,this._reading=!1,this._notifying=!1,this._criticalLength=u(0|1048576/i,2)}t.exports=r;var n=e("debug")("webtorrent:file-stream"),i=e("inherits"),o=e("readable-stream");i(r,o.Readable),r.prototype._read=function(){this._reading||(this._reading=!0,this._notify())},r.prototype._notify=function(){var e=this;if(e._reading&&0!==e._missing){if(!e._torrent.bitfield.get(e._piece))return e._torrent.critical(e._piece,e._piece+e._criticalLength);if(!e._notifying){if(e._notifying=!0,e._torrent.destroyed)return e._destroy(new Error("Torrent removed"));var t=e._piece;e._torrent.store.get(t,function(r,i){return e._notifying=!1,e.destroyed?void 0:r?e._destroy(r):void(n("read %s (length %s) (err %s)",t,i.length,r&&r.message),e._offset&&(i=i.slice(e._offset),e._offset=0),e._missing<i.length&&(i=i.slice(0,e._missing)),e._missing-=i.length,n("pushing buffer of length %s",i.length),e._reading=!1,e.push(i),0===e._missing&&e.push(null))}),e._piece+=1}}},r.prototype.destroy=function(e){this._destroy(null,e)},r.prototype._destroy=function(e,t){this.destroyed||(this.destroyed=!0,!this._torrent.destroyed&&this._torrent.deselect(this._startPiece,this._endPiece,!0),e&&this.emit("error",e),this.emit("close"),t&&t())}},{debug:33,inherits:44,"readable-stream":86}],2:[function(e,t){(function(r){function n(e,t){o.call(this),this._torrent=e,this._destroyed=!1,this.name=t.name,this.path=t.path,this.length=t.length,this.offset=t.offset,this.done=!1;var r=t.offset,n=r+t.length-1;this._startPiece=0|r/this._torrent.pieceLength,this._endPiece=0|n/this._torrent.pieceLength,0===this.length&&(this.done=!0,this.emit("done"))}t.exports=n;var i=e("end-of-stream"),o=e("events").EventEmitter,s=e("./file-stream"),a=e("inherits"),u=e("path"),f=e("render-media"),l=e("readable-stream"),d=e("stream-to-blob"),c=e("stream-to-blob-url"),p=e("stream-with-known-length-to-buffer");a(n,o),Object.defineProperty(n.prototype,"downloaded",{get:function(){if(!this._torrent.bitfield)return 0;for(var e=0,t=this._startPiece;t<=this._endPiece;++t)if(this._torrent.bitfield.get(t))e+=t===this._endPiece?this._torrent.lastPieceLength:this._torrent.pieceLength;else{var r=this._torrent.pieces[t];e+=r.length-r.missing}return e}}),Object.defineProperty(n.prototype,"progress",{get:function(){return this.length?this.downloaded/this.length:0}}),n.prototype.select=function(e){0===this.length||this._torrent.select(this._startPiece,this._endPiece,e)},n.prototype.deselect=function(){0===this.length||this._torrent.deselect(this._startPiece,this._endPiece,!1)},n.prototype.createReadStream=function(e){var t=this;if(0===this.length){var n=new l.PassThrough;return r.nextTick(function(){n.end()}),n}var o=new s(t,e);return t._torrent.select(o._startPiece,o._endPiece,!0,function(){o._notify()}),i(o,function(){t._destroyed||!t._torrent.destroyed&&t._torrent.deselect(o._startPiece,o._endPiece,!0)}),o},n.prototype.getBuffer=function(e){p(this.createReadStream(),this.length,e)},n.prototype.getBlob=function(e){if("undefined"==typeof window)throw new Error("browser-only method");d(this.createReadStream(),this._getMimeType(),e)},n.prototype.getBlobURL=function(e){if("undefined"==typeof window)throw new Error("browser-only method");c(this.createReadStream(),this._getMimeType(),e)},n.prototype.appendTo=function(e,t,r){if("undefined"==typeof window)throw new Error("browser-only method");f.append(this,e,t,r)},n.prototype.renderTo=function(e,t,r){if("undefined"==typeof window)throw new Error("browser-only method");f.render(this,e,t,r)},n.prototype._getMimeType=function(){return f.mime[u.extname(this.name).toLowerCase()]},n.prototype._destroy=function(){this._destroyed=!0,this._torrent=null}}).call(this,e("_process"))},{"./file-stream":1,_process:69,"end-of-stream":36,events:37,inherits:44,path:66,"readable-stream":86,"render-media":87,"stream-to-blob":110,"stream-to-blob-url":109,"stream-with-known-length-to-buffer":111}],3:[function(e,t,r){function n(e,t){var r=this;r.id=e,r.type=t,s("new Peer %s",e),r.addr=null,r.conn=null,r.swarm=null,r.wire=null,r.connected=!1,r.destroyed=!1,r.timeout=null,r.retries=0,r.sentHandshake=!1}function i(){}var o=e("unordered-array-remove"),s=e("debug")("webtorrent:peer"),a=e("bittorrent-protocol"),u=e("./webconn");r.createWebRTCPeer=function(e,t){var r=new n(e.id,"webrtc");return r.conn=e,r.swarm=t,r.conn.connected?r.onConnect():(r.conn.once("connect",function(){r.onConnect()}),r.conn.once("error",function(e){r.destroy(e)}),r.startConnectTimeout()),r},r.createTCPIncomingPeer=function(e){var t=e.remoteAddress+":"+e.remotePort,r=new n(t,"tcpIncoming");return r.conn=e,r.addr=t,r.onConnect(),r},r.createTCPOutgoingPeer=function(e,t){var r=new n(e,"tcpOutgoing");return r.addr=e,r.swarm=t,r},r.createWebSeedPeer=function(e,t){var r=new n(e,"webSeed");return r.swarm=t,r.conn=new u(e,t),r.onConnect(),r},n.prototype.onConnect=function(){var e=this;if(!e.destroyed){e.connected=!0,s("Peer %s connected",e.id),clearTimeout(e.connectTimeout);var t=e.conn;t.once("end",function(){e.destroy()}),t.once("close",function(){e.destroy()}),t.once("finish",function(){e.destroy()}),t.once("error",function(t){e.destroy(t)});var r=e.wire=new a;r.type=e.type,r.once("end",function(){e.destroy()}),r.once("close",function(){e.destroy()}),r.once("finish",function(){e.destroy()}),r.once("error",function(t){e.destroy(t)}),r.once("handshake",function(t,r){e.onHandshake(t,r)}),e.startHandshakeTimeout(),t.pipe(r).pipe(t),e.swarm&&!e.sentHandshake&&e.handshake()}},n.prototype.onHandshake=function(e,t){var r=this;if(r.swarm&&!r.destroyed){if(r.swarm.destroyed)return r.destroy(new Error("swarm already destroyed"));if(e!==r.swarm.infoHash)return r.destroy(new Error("unexpected handshake info hash for this swarm"));if(t===r.swarm.peerId)return r.destroy(new Error("refusing to connect to ourselves"));s("Peer %s got handshake %s",r.id,e),clearTimeout(r.handshakeTimeout),r.retries=0;var n=r.addr;!n&&r.conn.remoteAddress&&(n=r.conn.remoteAddress+":"+r.conn.remotePort),r.swarm._onWire(r.wire,n),r.swarm&&!r.swarm.destroyed&&(r.sentHandshake||r.handshake())}},n.prototype.handshake=function(){var e=this,t={dht:!e.swarm.private&&!!e.swarm.client.dht};e.wire.handshake(e.swarm.infoHash,e.swarm.client.peerId,t),e.sentHandshake=!0},n.prototype.startConnectTimeout=function(){var e=this;clearTimeout(e.connectTimeout),e.connectTimeout=setTimeout(function(){e.destroy(new Error("connect timeout"))},"webrtc"===e.type?25e3:5e3),e.connectTimeout.unref&&e.connectTimeout.unref()},n.prototype.startHandshakeTimeout=function(){var e=this;clearTimeout(e.handshakeTimeout),e.handshakeTimeout=setTimeout(function(){e.destroy(new Error("handshake timeout"))},25e3),e.handshakeTimeout.unref&&e.handshakeTimeout.unref()},n.prototype.destroy=function(e){var t=this;if(!t.destroyed){t.destroyed=!0,t.connected=!1,s("destroy %s (error: %s)",t.id,e&&(e.message||e)),clearTimeout(t.connectTimeout),clearTimeout(t.handshakeTimeout);var r=t.swarm,n=t.conn,a=t.wire;t.swarm=null,t.conn=null,t.wire=null,r&&a&&o(r.wires,r.wires.indexOf(a)),n&&(n.on("error",i),n.destroy()),a&&a.destroy(),r&&r.removePeer(t.id)}}},{"./webconn":6,"bittorrent-protocol":14,debug:33,"unordered-array-remove":123}],4:[function(e,t){function r(e){var t=this;t._torrent=e,t._numPieces=e.pieces.length,t._pieces=[],t._onWire=function(e){t.recalculate(),t._initWire(e)},t._onWireHave=function(e){t._pieces[e]+=1},t._onWireBitfield=function(){t.recalculate()},t._torrent.wires.forEach(function(e){t._initWire(e)}),t._torrent.on("wire",t._onWire),t.recalculate()}function n(){return!0}t.exports=r,r.prototype.getRarestPiece=function(e){e||(e=n);for(var t=[],r=Infinity,i=0;i<this._numPieces;++i)if(e(i)){var o=this._pieces[i];o===r?t.push(i):o<r&&(t=[i],r=o)}return 0<t.length?t[0|Math.random()*t.length]:-1},r.prototype.destroy=function(){var e=this;e._torrent.removeListener("wire",e._onWire),e._torrent.wires.forEach(function(t){e._cleanupWireEvents(t)}),e._torrent=null,e._pieces=null,e._onWire=null,e._onWireHave=null,e._onWireBitfield=null},r.prototype._initWire=function(e){var t=this;e._onClose=function(){t._cleanupWireEvents(e);for(var r=0;r<this._numPieces;++r)t._pieces[r]-=e.peerPieces.get(r)},e.on("have",t._onWireHave),e.on("bitfield",t._onWireBitfield),e.once("close",e._onClose)},r.prototype.recalculate=function(){var e;for(e=0;e<this._numPieces;++e)this._pieces[e]=0;var t=this._torrent.wires.length;for(e=0;e<t;++e)for(var r=this._torrent.wires[e],n=0;n<this._numPieces;++n)this._pieces[n]+=r.peerPieces.get(n)},r.prototype._cleanupWireEvents=function(e){e.removeListener("have",this._onWireHave),e.removeListener("bitfield",this._onWireBitfield),e._onClose&&e.removeListener("close",e._onClose),e._onClose=null}},{}],5:[function(e,t){(function(r,n){function i(e,t,r){_.call(this),this._debugId="unknown infohash",this.client=t,this.announce=r.announce,this.urlList=r.urlList,this.path=r.path,this._store=r.store||w,this._getAnnounceOpts=r.getAnnounceOpts,this.strategy=r.strategy||"sequential",this.maxWebConns=r.maxWebConns||4,this._rechokeNumSlots=!1===r.uploads||0===r.uploads?0:+r.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this.ready=!1,this.destroyed=!1,this.paused=!1,this.done=!1,this.metadata=null,this.store=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=[],this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=M(),this._uploadSpeed=M(),this._servers=[],this._xsRequests=[],this._fileModtimes=r.fileModtimes,null!==e&&this._onTorrentId(e),this._debug("new torrent")}function o(e,t){return 2+s(t*e.downloadSpeed()/x.BLOCK_LENGTH)}function f(e,t,r){return 1+s(t*e.downloadSpeed()/r)}function l(e){return 0|Math.random()*e}function d(){}t.exports=i;var c=e("addr-to-ip-port"),p=e("bitfield"),h=e("chunk-store-stream/write"),g=e("debug")("webtorrent:torrent"),y=e("torrent-discovery"),_=e("events").EventEmitter,m=e("xtend"),v=e("xtend/mutable"),b=e("fs"),w=e("fs-chunk-store"),S=e("simple-get"),T=e("immediate-chunk-store"),E=e("inherits"),A=e("multistream"),I=e("net"),C=e("os"),k=e("run-parallel"),j=e("run-parallel-limit"),O=e("parse-torrent"),B=e("path"),x=e("torrent-piece"),D=e("pump"),R=e("random-iterate"),P=e("simple-sha1"),M=e("speedometer"),L=e("uniq"),U=e("ut_metadata"),N=e("ut_pex"),F=e("./file"),W=e("./peer"),H=e("./rarity-map"),V=e("./server"),q=5e3,z=3*x.BLOCK_LENGTH,G=1,$=2,X=[1e3,5e3,15e3],Y=e("../package.json").version,K="WebTorrent/"+Y+" (https://webtorrent.io)",Z;try{Z=B.join(b.statSync("/tmp")&&"/tmp","webtorrent")}catch(e){Z=B.join("function"==typeof C.tmpdir?C.tmpdir():"/","webtorrent")}E(i,_),Object.defineProperty(i.prototype,"timeRemaining",{get:function(){return this.done?0:0===this.downloadSpeed?Infinity:1e3*((this.length-this.downloaded)/this.downloadSpeed)}}),Object.defineProperty(i.prototype,"downloaded",{get:function(){if(!this.bitfield)return 0;for(var e=0,t=0,r=this.pieces.length;t<r;++t)if(this.bitfield.get(t))e+=t===r-1?this.lastPieceLength:this.pieceLength;else{var n=this.pieces[t];e+=n.length-n.missing}return e}}),Object.defineProperty(i.prototype,"downloadSpeed",{get:function(){return this._downloadSpeed()}}),Object.defineProperty(i.prototype,"uploadSpeed",{get:function(){return this._uploadSpeed()}}),Object.defineProperty(i.prototype,"progress",{get:function(){return this.length?this.downloaded/this.length:0}}),Object.defineProperty(i.prototype,"ratio",{get:function(){return this.uploaded/(this.received||1)}}),Object.defineProperty(i.prototype,"numPeers",{get:function(){return this.wires.length}}),Object.defineProperty(i.prototype,"torrentFileBlobURL",{get:function(){if("undefined"==typeof window)throw new Error("browser-only property");return this.torrentFile?URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"})):null}}),Object.defineProperty(i.prototype,"_numQueued",{get:function(){return this._queue.length+(this._peersLength-this._numConns)}}),Object.defineProperty(i.prototype,"_numConns",{get:function(){var e=this,t=0;for(var r in e._peers)e._peers[r].connected&&(t+=1);return t}}),Object.defineProperty(i.prototype,"swarm",{get:function(){return console.warn("WebTorrent: `torrent.swarm` is deprecated. Use `torrent` directly instead."),this}}),i.prototype._onTorrentId=function(e){var t=this;if(!t.destroyed){var n;try{n=O(e)}catch(e){}n?(t.infoHash=n.infoHash,t._debugId=n.infoHash.toString("hex").substring(0,7),r.nextTick(function(){t.destroyed||t._onParsedTorrent(n)})):O.remote(e,function(e,r){return t.destroyed?void 0:e?t._destroy(e):void t._onParsedTorrent(r)})}},i.prototype._onParsedTorrent=function(e){var t=this;if(!t.destroyed){if(t._processParsedTorrent(e),!t.infoHash)return t._destroy(new Error("Malformed torrent data: No info hash"));(t.path||(t.path=B.join(Z,t.infoHash)),t._rechokeIntervalId=setInterval(function(){t._rechoke()},1e4),t._rechokeIntervalId.unref&&t._rechokeIntervalId.unref(),t.emit("_infoHash",t.infoHash),!t.destroyed)&&(t.emit("infoHash",t.infoHash),t.destroyed||(t.client.listening?t._onListening():t.client.once("listening",function(){t._onListening()})))}},i.prototype._processParsedTorrent=function(e){this._debugId=e.infoHash.toString("hex").substring(0,7),this.announce&&(e.announce=e.announce.concat(this.announce)),this.client.tracker&&n.WEBTORRENT_ANNOUNCE&&!this.private&&(e.announce=e.announce.concat(n.WEBTORRENT_ANNOUNCE)),this.urlList&&(e.urlList=e.urlList.concat(this.urlList)),L(e.announce),L(e.urlList),v(this,e),this.magnetURI=O.toMagnetURI(e),this.torrentFile=O.toTorrentFile(e)},i.prototype._onListening=function(){function e(e){o._destroy(e)}function t(e){"string"==typeof e&&o.done||o.addPeer(e)}function r(){o.emit("trackerAnnounce"),0===o.numPeers&&o.emit("noPeers","tracker")}function n(){o.emit("dhtAnnounce"),0===o.numPeers&&o.emit("noPeers","dht")}function i(e){o.emit("warning",e)}var o=this;if(!(o.discovery||o.destroyed)){var s=o.client.tracker;s&&(s=m(o.client.tracker,{getAnnounceOpts:function(){var e={uploaded:o.uploaded,downloaded:o.downloaded,left:a(o.length-o.downloaded,0)};return o.client.tracker.getAnnounceOpts&&v(e,o.client.tracker.getAnnounceOpts()),o._getAnnounceOpts&&v(e,o._getAnnounceOpts()),e}})),o.discovery=new y({infoHash:o.infoHash,announce:o.announce,peerId:o.client.peerId,dht:!o.private&&o.client.dht,tracker:s,port:o.client.torrentPort,userAgent:K}),o.discovery.on("error",e),o.discovery.on("peer",t),o.discovery.on("trackerAnnounce",r),o.discovery.on("dhtAnnounce",n),o.discovery.on("warning",i),o.info?o._onMetadata(o):o.xs&&o._getMetadataFromServer()}},i.prototype._getMetadataFromServer=function(){function e(e,r){function n(n,i,o){
if(t.destroyed)return r(null);if(t.metadata)return r(null);if(n)return t.emit("warning",new Error("http error from xs param: "+e)),r(null);if(200!==i.statusCode)return t.emit("warning",new Error("non-200 status code "+i.statusCode+" from xs param: "+e)),r(null);var s;try{s=O(o)}catch(e){}return s?s.infoHash===t.infoHash?void(t._onMetadata(s),r(null)):(t.emit("warning",new Error("got torrent file with incorrect info hash from xs param: "+e)),r(null)):(t.emit("warning",new Error("got invalid torrent file from xs param: "+e)),r(null))}if(0!==e.indexOf("http://")&&0!==e.indexOf("https://"))return t.emit("warning",new Error("skipping non-http xs param: "+e)),r(null);var i;try{i=S.concat({url:e,method:"GET",headers:{"user-agent":K}},n)}catch(n){return t.emit("warning",new Error("skipping invalid url xs param: "+e)),r(null)}t._xsRequests.push(i)}var t=this,r=Array.isArray(t.xs)?t.xs:[t.xs],n=r.map(function(t){return function(r){e(t,r)}});k(n)},i.prototype._onMetadata=function(e){var t=this;if(!(t.metadata||t.destroyed)){t._debug("got metadata"),t._xsRequests.forEach(function(e){e.abort()}),t._xsRequests=[];var r;if(e&&e.infoHash)r=e;else try{r=O(e)}catch(e){return t._destroy(e)}t._processParsedTorrent(r),t.metadata=t.torrentFile,t.client.enableWebSeeds&&t.urlList.forEach(function(e){t.addWebSeed(e)}),0!==t.pieces.length&&t.select(0,t.pieces.length-1,!1),t._rarityMap=new H(t),t.store=new T(new t._store(t.pieceLength,{torrent:{infoHash:t.infoHash},files:t.files.map(function(e){return{path:B.join(t.path,e.path),length:e.length,offset:e.offset}}),length:t.length})),t.files=t.files.map(function(e){return new F(t,e)}),t._hashes=t.pieces,t.pieces=t.pieces.map(function(e,r){var n=r===t.pieces.length-1?t.lastPieceLength:t.pieceLength;return new x(n)}),t._reservations=t.pieces.map(function(){return[]}),t.bitfield=new p(t.pieces.length),t.wires.forEach(function(e){e.ut_metadata&&e.ut_metadata.setMetadata(t.metadata),t._onWireWithMetadata(e)}),t._debug("verifying existing torrent data"),t._fileModtimes&&t._store===w?t.getFileModtimes(function(e,r){if(e)return t._destroy(e);var n=t.files.map(function(e,n){return r[n]===t._fileModtimes[n]}).every(function(e){return e});if(n){for(var i=0;i<t.pieces.length;i++)t._markVerified(i);t._onStore()}else t._verifyPieces()}):t._verifyPieces(),t.emit("metadata")}},i.prototype.getFileModtimes=function(e){var t=this,r=[];j(t.files.map(function(e,n){return function(i){b.stat(B.join(t.path,e.path),function(e,t){return e&&"ENOENT"!==e.code?i(e):void(r[n]=t&&t.mtime.getTime(),i(null))})}}),$,function(n){t._debug("done getting file modtimes"),e(n,r)})},i.prototype._verifyPieces=function(){var e=this;j(e.pieces.map(function(t,n){return function(t){return e.destroyed?t(new Error("torrent is destroyed")):void e.store.get(n,function(i,o){return e.destroyed?t(new Error("torrent is destroyed")):i?r.nextTick(t,null):void P(o,function(r){if(e.destroyed)return t(new Error("torrent is destroyed"));if(r===e._hashes[n]){if(!e.pieces[n])return;e._debug("piece verified %s",n),e._markVerified(n)}else e._debug("piece invalid %s",n);t(null)})})}}),$,function(t){return t?e._destroy(t):void(e._debug("done verifying"),e._onStore())})},i.prototype._markVerified=function(e){this.pieces[e]=null,this._reservations[e]=null,this.bitfield.set(e,!0)},i.prototype._onStore=function(){var e=this;e.destroyed||(e._debug("on store"),e.ready=!0,e.emit("ready"),e._checkDone(),e._updateSelections())},i.prototype.destroy=function(e){var t=this;t._destroy(null,e)},i.prototype._destroy=function(e,t){var r=this;if(!r.destroyed){for(var n in r.destroyed=!0,r._debug("destroy"),r.client._remove(r),clearInterval(r._rechokeIntervalId),r._xsRequests.forEach(function(e){e.abort()}),r._rarityMap&&r._rarityMap.destroy(),r._peers)r.removePeer(n);r.files.forEach(function(e){e instanceof F&&e._destroy()});var i=r._servers.map(function(e){return function(t){e.destroy(t)}});r.discovery&&i.push(function(e){r.discovery.destroy(e)}),r.store&&i.push(function(e){r.store.close(e)}),k(i,t),e&&(0===r.listenerCount("error")?r.client.emit("error",e):r.emit("error",e)),r.emit("close"),r.client=null,r.files=[],r.discovery=null,r.store=null,r._rarityMap=null,r._peers=null,r._servers=null,r._xsRequests=null}},i.prototype.addPeer=function(e){var t=this;if(t.destroyed)throw new Error("torrent is destroyed");if(!t.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");if(t.client.blocked){var r;if("string"==typeof e){var n;try{n=c(e)}catch(r){return t._debug("ignoring peer: invalid %s",e),t.emit("invalidPeer",e),!1}r=n[0]}else"string"==typeof e.remoteAddress&&(r=e.remoteAddress);if(r&&t.client.blocked.contains(r))return t._debug("ignoring peer: blocked %s",e),"string"!=typeof e&&e.destroy(),t.emit("blockedPeer",e),!1}var i=!!t._addPeer(e);return i?t.emit("peer",e):t.emit("invalidPeer",e),i},i.prototype._addPeer=function(e){var t=this;if(t.destroyed)return"string"!=typeof e&&e.destroy(),null;if("string"==typeof e&&!t._validAddr(e))return t._debug("ignoring peer: invalid %s",e),null;var r=e&&e.id||e;if(t._peers[r])return t._debug("ignoring peer: duplicate (%s)",r),"string"!=typeof e&&e.destroy(),null;if(t.paused)return t._debug("ignoring peer: torrent is paused"),"string"!=typeof e&&e.destroy(),null;t._debug("add peer %s",r);var n;return n="string"==typeof e?W.createTCPOutgoingPeer(e,t):W.createWebRTCPeer(e,t),t._peers[n.id]=n,t._peersLength+=1,"string"==typeof e&&(t._queue.push(n),t._drain()),n},i.prototype.addWebSeed=function(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!/^https?:\/\/.+/.test(e))return this.emit("warning",new Error("ignoring invalid web seed: "+e)),void this.emit("invalidPeer",e);if(this._peers[e])return this.emit("warning",new Error("ignoring duplicate web seed: "+e)),void this.emit("invalidPeer",e);this._debug("add web seed %s",e);var t=W.createWebSeedPeer(e,this);this._peers[t.id]=t,this._peersLength+=1,this.emit("peer",e)},i.prototype._addIncomingPeer=function(e){var t=this;return t.destroyed?e.destroy(new Error("torrent is destroyed")):t.paused?e.destroy(new Error("torrent is paused")):void(this._debug("add incoming peer %s",e.id),t._peers[e.id]=e,t._peersLength+=1)},i.prototype.removePeer=function(e){var t=this,r=e&&e.id||e;e=t._peers[r];e&&(this._debug("removePeer %s",r),delete t._peers[r],t._peersLength-=1,e.destroy(),t._drain())},i.prototype.select=function(e,t,r,n){var i=this;if(i.destroyed)throw new Error("torrent is destroyed");if(0>e||t<e||i.pieces.length<=t)throw new Error("invalid selection ",e,":",t);r=+r||0,i._debug("select %s-%s (priority %s)",e,t,r),i._selections.push({from:e,to:t,offset:0,priority:r,notify:n||d}),i._selections.sort(function(e,t){return t.priority-e.priority}),i._updateSelections()},i.prototype.deselect=function(e,t,r){var n=this;if(n.destroyed)throw new Error("torrent is destroyed");r=+r||0,n._debug("deselect %s-%s (priority %s)",e,t,r);for(var i=0,o;i<n._selections.length;++i)if(o=n._selections[i],o.from===e&&o.to===t&&o.priority===r){n._selections.splice(i,1);break}n._updateSelections()},i.prototype.critical=function(e,t){var r=this;if(r.destroyed)throw new Error("torrent is destroyed");r._debug("critical %s-%s",e,t);for(var n=e;n<=t;++n)r._critical[n]=!0;r._updateSelections()},i.prototype._onWire=function(e,t){var n=this;if(n._debug("got wire %s (%s)",e._debugId,t||"Unknown"),e.on("download",function(e){n.destroyed||(n.received+=e,n._downloadSpeed(e),n.client._downloadSpeed(e),n.emit("download",e),n.client.emit("download",e))}),e.on("upload",function(e){n.destroyed||(n.uploaded+=e,n._uploadSpeed(e),n.client._uploadSpeed(e),n.emit("upload",e),n.client.emit("upload",e))}),n.wires.push(e),t){var i=c(t);e.remoteAddress=i[0],e.remotePort=i[1]}n.client.dht&&n.client.dht.listening&&e.on("port",function(r){return n.destroyed||n.client.dht.destroyed?void 0:e.remoteAddress?0===r||65536<r?n._debug("ignoring invalid PORT from peer"):void(n._debug("port: %s (from %s)",r,t),n.client.dht.addNode({host:e.remoteAddress,port:r})):n._debug("ignoring PORT from peer with no address")}),e.on("timeout",function(){n._debug("wire timeout (%s)",t),e.destroy()}),e.setTimeout(3e4,!0),e.setKeepAlive(!0),e.use(U(n.metadata)),e.ut_metadata.on("warning",function(e){n._debug("ut_metadata warning: %s",e.message)}),n.metadata||(e.ut_metadata.on("metadata",function(e){n._debug("got metadata via ut_metadata"),n._onMetadata(e)}),e.ut_metadata.fetch()),"function"!=typeof N||n.private||(e.use(N()),e.ut_pex.on("peer",function(e){n.done||(n._debug("ut_pex: got peer: %s (from %s)",e,t),n.addPeer(e))}),e.ut_pex.on("dropped",function(e){var r=n._peers[e];r&&!r.connected&&(n._debug("ut_pex: dropped peer: %s (from %s)",e,t),n.removePeer(e))}),e.once("close",function(){e.ut_pex.reset()})),n.emit("wire",e,t),n.metadata&&r.nextTick(function(){n._onWireWithMetadata(e)})},i.prototype._onWireWithMetadata=function(e){function t(){n.destroyed||e.destroyed||(n._numQueued>2*(n._numConns-n.numPeers)&&e.amInterested?e.destroy():(i=setTimeout(t,q),i.unref&&i.unref()))}function r(){if(e.peerPieces.buffer.length===n.bitfield.buffer.length){for(o=0;o<n.pieces.length;++o)if(!e.peerPieces.get(o))return;e.isSeeder=!0,e.choke()}}var n=this,i=null,o;e.on("bitfield",function(){r(),n._update()}),e.on("have",function(){r(),n._update()}),e.once("interested",function(){e.unchoke()}),e.once("close",function(){clearTimeout(i)}),e.on("choke",function(){clearTimeout(i),i=setTimeout(t,q),i.unref&&i.unref()}),e.on("unchoke",function(){clearTimeout(i),n._update()}),e.on("request",function(t,r,i,o){return i>131072?e.destroy():void(n.pieces[t]||n.store.get(t,{offset:r,length:i},o))}),e.bitfield(n.bitfield),e.interested(),e.peerExtensions.dht&&n.client.dht&&n.client.dht.listening&&e.port(n.client.dht.address().port),"webSeed"!==e.type&&(i=setTimeout(t,q),i.unref&&i.unref()),e.isSeeder=!1,r()},i.prototype._updateSelections=function(){var e=this;!e.ready||e.destroyed||(r.nextTick(function(){e._gcSelections()}),e._updateInterest(),e._update())},i.prototype._gcSelections=function(){for(var e=this,t=0;t<e._selections.length;++t){for(var r=e._selections[t],n=r.offset;e.bitfield.get(r.from+r.offset)&&r.from+r.offset<r.to;)r.offset+=1;n!==r.offset&&r.notify(),r.to===r.from+r.offset&&e.bitfield.get(r.from+r.offset)&&(e._selections.splice(t,1),t-=1,r.notify(),e._updateInterest())}e._selections.length||e.emit("idle")},i.prototype._updateInterest=function(){var e=this,t=e._amInterested;e._amInterested=!!e._selections.length,e.wires.forEach(function(t){e._amInterested?t.interested():t.uninterested()});t===e._amInterested||(e._amInterested?e.emit("interested"):e.emit("uninterested"))},i.prototype._update=function(){var e=this;if(!e.destroyed)for(var t=R(e.wires),r;r=t();)e._updateWire(r)},i.prototype._updateWire=function(e){function t(t,r,n,i){return function(o){return o>=t&&o<=r&&!(o in n)&&e.peerPieces.get(o)&&(!i||i(o))}}function r(){if(!e.requests.length)for(var r=u._selections.length;r--;){var n=u._selections[r],i;if("rarest"===u.strategy)for(var o=n.from+n.offset,s=n.to,a={},f=0,l=t(o,s,a);f<s-o+1&&(i=u._rarityMap.getRarestPiece(l),!(0>i));){if(u._request(e,i,!1))return;a[i]=!0,f+=1}else for(i=n.to;i>=n.from+n.offset;--i)if(e.peerPieces.get(i)&&u._request(e,i,!1))return}}function n(){var t=e.downloadSpeed()||1;if(t>z)return function(){return!0};var r=a(1,e.requests.length)*x.BLOCK_LENGTH/t,n=10,i=0;return function(e){if(!n||u.bitfield.get(e))return!0;for(var o=u.pieces[e].missing;i<u.wires.length;i++){var s=u.wires[i],a=s.downloadSpeed();if(!(a<z)&&!(a<=t)&&s.peerPieces.get(e)&&!(0<(o-=a*r)))return n--,!1}return!0}}function i(e){for(var t=e,r=e;r<u._selections.length&&u._selections[r].priority;r++)t=r;var n=u._selections[e];u._selections[e]=u._selections[t],u._selections[t]=n}function s(r){if(e.requests.length>=l)return!0;for(var o=n(),s=0;s<u._selections.length;s++){var a=u._selections[s],f;if("rarest"===u.strategy)for(var d=a.from+a.offset,c=a.to,p={},h=0,g=t(d,c,p,o);h<c-d+1&&(f=u._rarityMap.getRarestPiece(g),!(0>f));){for(;u._request(e,f,u._critical[f]||r););if(e.requests.length<l){p[f]=!0,h++;continue}return a.priority&&i(s),!0}else for(f=a.from+a.offset;f<=a.to;f++)if(e.peerPieces.get(f)&&o(f)){for(;u._request(e,f,u._critical[f]||r););if(!(e.requests.length<l))return a.priority&&i(s),!0}}return!1}var u=this;if(!e.peerChoking){if(!e.downloaded)return r();var f=o(e,.5);if(!(e.requests.length>=f)){var l=o(e,G);s(!1)||s(!0)}}},i.prototype._rechoke=function(){function e(e,t){return e.downloadSpeed===t.downloadSpeed?e.uploadSpeed===t.uploadSpeed?e.wire.amChoking===t.wire.amChoking?e.salt-t.salt:e.wire.amChoking?1:-1:t.uploadSpeed-e.uploadSpeed:t.downloadSpeed-e.downloadSpeed}var t=this;if(t.ready){0<t._rechokeOptimisticTime?t._rechokeOptimisticTime-=1:t._rechokeOptimisticWire=null;var r=[];t.wires.forEach(function(e){e.isSeeder||e===t._rechokeOptimisticWire||r.push({wire:e,downloadSpeed:e.downloadSpeed(),uploadSpeed:e.uploadSpeed(),salt:Math.random(),isChoked:!0})}),r.sort(e);for(var n=0,i=0;i<r.length&&n<t._rechokeNumSlots;++i)r[i].isChoked=!1,r[i].wire.peerInterested&&(n+=1);if(!t._rechokeOptimisticWire&&i<r.length&&t._rechokeNumSlots){var o=r.slice(i).filter(function(e){return e.wire.peerInterested}),s=o[l(o.length)];s&&(s.isChoked=!1,t._rechokeOptimisticWire=s.wire,t._rechokeOptimisticTime=2)}r.forEach(function(e){e.wire.amChoking!==e.isChoked&&(e.isChoked?e.wire.choke():e.wire.unchoke())})}},i.prototype._hotswap=function(e,t){var r=this,n=e.downloadSpeed();if(n<x.BLOCK_LENGTH)return!1;if(!r._reservations[t])return!1;var i=r._reservations[t];if(!i)return!1;var o=Infinity,s,a;for(a=0;a<i.length;a++){var u=i[a];if(u&&u!==e){var f=u.downloadSpeed();f>=z||2*f>n||f>o||(s=u,o=f)}}if(!s)return!1;for(a=0;a<i.length;a++)i[a]===s&&(i[a]=null);for(a=0;a<s.requests.length;a++){var l=s.requests[a];l.piece===t&&r.pieces[t].cancel(0|l.offset/x.BLOCK_LENGTH)}return r.emit("hotswap",s,e,t),!0},i.prototype._request=function(e,t,n){function i(){r.nextTick(function(){s._update()})}var s=this,a=e.requests.length,l="webSeed"===e.type;if(s.bitfield.get(t))return!1;var d=l?u(f(e,G,s.pieceLength),s.maxWebConns):o(e,G);if(a>=d)return!1;var c=s.pieces[t],p=l?c.reserveRemaining():c.reserve();if(-1===p&&n&&s._hotswap(e,t)&&(p=l?c.reserveRemaining():c.reserve()),-1===p)return!1;var h=s._reservations[t];h||(h=s._reservations[t]=[]);var g=h.indexOf(null);-1===g&&(g=h.length),h[g]=e;var y=c.chunkOffset(p),_=l?c.chunkLengthRemaining(p):c.chunkLength(p);return e.request(t,y,_,function r(n,o){if(!s.destroyed){if(!s.ready)return s.once("ready",function(){r(n,o)});if(h[g]===e&&(h[g]=null),c!==s.pieces[t])return i();if(n)return s._debug("error getting piece %s (offset: %s length: %s) from %s: %s",t,y,_,e.remoteAddress+":"+e.remotePort,n.message),l?c.cancelRemaining(p):c.cancel(p),void i();if(s._debug("got piece %s (offset: %s length: %s) from %s",t,y,_,e.remoteAddress+":"+e.remotePort),!c.set(p,o,e))return i();var a=c.flush();P(a,function(e){if(!s.destroyed){if(e===s._hashes[t]){if(!s.pieces[t])return;s._debug("piece verified %s",t),s.pieces[t]=null,s._reservations[t]=null,s.bitfield.set(t,!0),s.store.put(t,a),s.wires.forEach(function(e){e.have(t)}),s._checkDone()&&!s.destroyed&&s.discovery.complete()}else s.pieces[t]=new x(c.length),s.emit("warning",new Error("Piece "+t+" failed verification"));i()}})}}),!0},i.prototype._checkDone=function(){var e=this;if(!e.destroyed){e.files.forEach(function(t){if(!t.done){for(var r=t._startPiece;r<=t._endPiece;++r)if(!e.bitfield.get(r))return;t.done=!0,t.emit("done"),e._debug("file done: "+t.name)}});for(var t=!0,r=0,n;r<e._selections.length;r++){n=e._selections[r];for(var i=n.from;i<=n.to;i++)if(!e.bitfield.get(i)){t=!1;break}if(!t)break}return!e.done&&t&&(e.done=!0,e._debug("torrent done: "+e.infoHash),e.emit("done")),e._gcSelections(),t}},i.prototype.load=function(e,t){var r=this;if(r.destroyed)throw new Error("torrent is destroyed");if(!r.ready)return r.once("ready",function(){r.load(e,t)});Array.isArray(e)||(e=[e]),t||(t=d);var n=new A(e),i=new h(r.store,r.pieceLength);D(n,i,function(e){return e?t(e):void(r.pieces.forEach(function(e,t){r.pieces[t]=null,r._reservations[t]=null,r.bitfield.set(t,!0)}),r._checkDone(),t(null))})},i.prototype.createServer=function(e){if("function"!=typeof V)throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");var t=new V(this,e);return this._servers.push(t),t},i.prototype.pause=function(){this.destroyed||(this._debug("pause"),this.paused=!0)},i.prototype.resume=function(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())},i.prototype._debug=function(){if(!this.destroyed){var e=[].slice.call(arguments);e[0]="["+this.client._debugId+"] ["+this._debugId+"] "+e[0],g.apply(null,e)}},i.prototype._drain=function(){var e=this;if(this._debug("_drain numConns %s maxConns %s",e._numConns,e.client.maxConns),!("function"!=typeof I.connect||e.destroyed||e.paused||e._numConns>=e.client.maxConns)){this._debug("drain (%s queued, %s/%s peers)",e._numQueued,e.numPeers,e.client.maxConns);var t=e._queue.shift();if(t){this._debug("tcp connect attempt to %s",t.addr);var r=c(t.addr),n={host:r[0],port:r[1]},i=t.conn=I.connect(n);i.once("connect",function(){t.onConnect()}),i.once("error",function(e){t.destroy(e)}),t.startConnectTimeout(),i.on("close",function(){if(!e.destroyed){if(t.retries>=X.length)return void e._debug("conn %s closed: will not re-add (max %s attempts)",t.addr,X.length);var r=X[t.retries];e._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",t.addr,r,t.retries+1);var n=setTimeout(function(){var r=e._addPeer(t.addr);r&&(r.retries=t.retries+1)},r);n.unref&&n.unref()}})}}},i.prototype._validAddr=function(e){var t;try{t=c(e)}catch(t){return!1}var r=t[0],n=t[1];return 0<n&&65535>n&&("127.0.0.1"!==r||n!==this.client.torrentPort)}}).call(this,e("_process"),"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{"../package.json":136,"./file":2,"./peer":3,"./rarity-map":4,"./server":25,_process:69,"addr-to-ip-port":7,bitfield:13,"chunk-store-stream/write":29,debug:33,events:37,fs:26,"fs-chunk-store":53,"immediate-chunk-store":43,inherits:44,multistream:61,net:25,os:25,"parse-torrent":65,path:66,pump:70,"random-iterate":75,"run-parallel":92,"run-parallel-limit":91,"simple-get":96,"simple-sha1":100,speedometer:104,"torrent-discovery":116,"torrent-piece":119,uniq:122,ut_metadata:126,ut_pex:25,xtend:133,"xtend/mutable":134}],6:[function(e,t){function r(e,t){d.call(this),this.url=e,this.webPeerId=l.sync(e),this._torrent=t,this._init()}t.exports=r;var n=e("bitfield"),i=e("safe-buffer").Buffer,o=e("debug")("webtorrent:webconn"),s=e("simple-get"),f=e("inherits"),l=e("simple-sha1"),d=e("bittorrent-protocol"),c=e("../package.json").version;f(r,d),r.prototype._init=function(){var e=this;e.setKeepAlive(!0),e.once("handshake",function(t){if(!e.destroyed){e.handshake(t,e.webPeerId);for(var r=e._torrent.pieces.length,i=new n(r),o=0;o<=r;o++)i.set(o,!0);e.bitfield(i)}}),e.once("interested",function(){o("interested"),e.unchoke()}),e.on("uninterested",function(){o("uninterested")}),e.on("choke",function(){o("choke")}),e.on("unchoke",function(){o("unchoke")}),e.on("bitfield",function(){o("bitfield")}),e.on("request",function(t,r,n,i){o("request pieceIndex=%d offset=%d length=%d",t,r,n),e.httpRequest(t,r,n,i)})},r.prototype.httpRequest=function(e,t,r,n){var f=this,l=e*f._torrent.pieceLength,d=l+t,p=d+r-1,h=f._torrent.files,g;if(1>=h.length)g=[{url:f.url,start:d,end:p}];else{var y=h.filter(function(e){return e.offset<=p&&e.offset+e.length>d});if(1>y.length)return n(new Error("Could not find file corresponnding to web seed range request"));g=y.map(function(e){var t=e.offset+e.length-1,r=f.url+("/"===f.url[f.url.length-1]?"":"/")+e.path;return{url:r,fileOffsetInRange:a(e.offset-d,0),start:a(d-e.offset,0),end:u(t,p-e.offset)}})}var _=0,m=!1,v;1<g.length&&(v=i.alloc(r)),g.forEach(function(i){function a(e,t){return 200>e.statusCode||300<=e.statusCode?(m=!0,n(new Error("Unexpected HTTP status code "+e.statusCode))):void(o("Got data of length %d",t.length),1===g.length?n(null,t):(t.copy(v,i.fileOffsetInRange),++_===g.length&&n(null,v)))}var u=i.url,f=i.start,l=i.end;o("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",u,e,t,r,f,l);var d={url:u,method:"GET",headers:{"user-agent":"WebTorrent/"+c+" (https://webtorrent.io)",range:"bytes="+f+"-"+l}};s.concat(d,function(e,t,r){return m?void 0:e?"undefined"==typeof window||u.startsWith(window.location.origin+"/")?(m=!0,n(e)):s.head(u,function(t,r){return m?void 0:t?(m=!0,n(t)):200>r.statusCode||300<=r.statusCode?(m=!0,n(new Error("Unexpected HTTP status code "+r.statusCode))):r.url===u?(m=!0,n(e)):void(d.url=r.url,s.concat(d,function(e,t,r){return m?void 0:e?(m=!0,n(e)):void a(t,r)}))}):void a(t,r)})})},r.prototype.destroy=function(){d.prototype.destroy.call(this),this._torrent=null}},{"../package.json":136,bitfield:13,"bittorrent-protocol":14,debug:33,inherits:44,"safe-buffer":94,"simple-get":96,"simple-sha1":100}],7:[function(e,t){var r=/^\[?([^\]]+)\]?:(\d+)$/,n={},i=0;t.exports=function(e){if(1e5==i&&t.exports.reset(),!n[e]){var o=r.exec(e);if(!o)throw new Error("invalid addr: "+e);n[e]=[o[1],+o[2]],i+=1}return n[e]},t.exports.reset=function(){n={},i=0}},{}],8:[function(e,t,r){"use strict";function n(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return s[63&e>>18]+s[63&e>>12]+s[63&e>>6]+s[63&e]}function o(e,t,r){for(var n=[],o=t,s;o<r;o+=3)s=(e[o]<<16)+(e[o+1]<<8)+e[o+2],n.push(i(s));return n.join("")}r.byteLength=function(e){return 3*e.length/4-n(e)},r.toByteArray=function(e){var t=e.length,r,i,o,s,f;s=n(e),f=new u(3*t/4-s),i=0<s?t-4:t;var l=0;for(r=0;r<i;r+=4)o=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],f[l++]=255&o>>16,f[l++]=255&o>>8,f[l++]=255&o;return 2===s?(o=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,f[l++]=255&o):1===s&&(o=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,f[l++]=255&o>>8,f[l++]=255&o),f},r.fromByteArray=function(e){for(var t=e.length,r=t%3,n="",i=[],a=16383,u=0,f=t-r,l;u<f;u+=a)i.push(o(e,u,u+a>f?f:u+a));return 1==r?(l=e[t-1],n+=s[l>>2],n+=s[63&l<<4],n+="=="):2==r&&(l=(e[t-2]<<8)+e[t-1],n+=s[l>>10],n+=s[63&l>>4],n+=s[63&l<<2],n+="="),i.push(n),i.join("")};for(var s=[],a=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,d=f.length;l<d;++l)s[l]=f[l],a[f.charCodeAt(l)]=l;a[45]=62,a[95]=63},{}],9:[function(e,t){(function(e){function r(e,t,r){for(var n=0,i=1,o=t,s;o<r;o++){if(s=e[o],58>s&&48<=s){n=10*n+(s-48);continue}if(o!==t||43!==s){if(o===t&&45===s){i=-1;continue}if(46===s)break;throw new Error("not a number: buffer["+o+"] = "+s)}}return n*i}function n(t,r,i,o){return null==t||0===t.length?null:("number"!=typeof r&&null==o&&(o=r,r=void 0),"number"!=typeof i&&null==o&&(o=i,i=void 0),n.position=0,n.encoding=o||null,n.data=e.isBuffer(t)?t.slice(r,i):new e(t),n.bytes=n.data.length,n.next())}const i=101;n.bytes=0,n.position=0,n.data=null,n.encoding=null,n.next=function(){switch(n.data[n.position]){case 100:return n.dictionary();case 108:return n.list();case 105:return n.integer();default:return n.buffer()}},n.find=function(e){for(var t=n.position,r=n.data.length,i=n.data;t<r;){if(i[t]===e)return t;t++}throw new Error('Invalid data: Missing delimiter "'+o(e)+'" [0x'+e.toString(16)+"]")},n.dictionary=function(){n.position++;for(var e={};n.data[n.position]!==i;)e[n.buffer()]=n.next();return n.position++,e},n.list=function(){n.position++;for(var e=[];n.data[n.position]!==i;)e.push(n.next());return n.position++,e},n.integer=function(){var e=n.find(i),t=r(n.data,n.position+1,e);return n.position+=e+1-n.position,t},n.buffer=function(){var e=n.find(58),t=r(n.data,n.position,e),i=++e+t;return n.position=i,n.encoding?n.data.toString(n.encoding,e,i):n.data.slice(e,i)},t.exports=n}).call(this,e("buffer").Buffer)},{buffer:27}],10:[function(e,t){function r(e,t,i){var o=[],s=null;return r._encode(o,e),s=n.concat(o),r.bytes=s.length,n.isBuffer(t)?(s.copy(t,i),t):s}var n=e("safe-buffer").Buffer;r.bytes=-1,r._floatConversionDetected=!1,r._encode=function(e,t){if(n.isBuffer(t))return e.push(n.from(t.length+":")),void e.push(t);if(null!=t)switch(typeof t){case"string":r.buffer(e,t);break;case"number":r.number(e,t);break;case"object":t.constructor===Array?r.list(e,t):r.dict(e,t);break;case"boolean":r.number(e,t?1:0)}};var i=n.from("e"),o=n.from("d"),s=n.from("l");r.buffer=function(e,t){e.push(n.from(n.byteLength(t)+":"+t))},r.number=function(e,t){var i=2147483648,o=(t/i<<0)*i+(t%i<<0);e.push(n.from("i"+o+"e")),o===t||r._floatConversionDetected||(r._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+o+'"'),console.trace())},r.dict=function(e,t){e.push(o);for(var n=0,s=Object.keys(t).sort(),a=s.length,u;n<a;n++)u=s[n],null==t[u]||(r.buffer(e,u),r._encode(e,t[u]));e.push(i)},r.list=function(e,t){var n=0,o=t.length;for(e.push(s);n<o;n++)null!=t[n]&&r._encode(e,t[n]);e.push(i)},t.exports=r},{"safe-buffer":94}],11:[function(e,t){var r=t.exports;r.encode=e("./encode"),r.decode=e("./decode"),r.byteLength=r.encodingLength=function(e){return r.encode(e).length}},{"./decode":9,"./encode":10}],12:[function(e,t){t.exports=function(e,t,r,n,i){var o,s;if(void 0===n)n=0;else if(n|=0,0>n||n>=e.length)throw new RangeError("invalid lower bound");if(void 0===i)i=e.length-1;else if(i|=0,i<n||i>=e.length)throw new RangeError("invalid upper bound");for(;n<=i;)if(o=n+(i-n>>1),s=+r(e[o],t,o,e),0>s)n=o+1;else if(0<s)i=o-1;else return o;return~n}},{}],13:[function(e,t){(function(e){function r(e,t){return this instanceof r?void(0===arguments.length&&(e=0),this.grow=t&&(isFinite(t.grow)&&n(t.grow)||t.grow)||0,("number"==typeof e||e===void 0)&&(e=new i(n(e)),e.fill&&!e._isBuffer&&e.fill(0)),this.buffer=e):new r(e,t)}function n(e){var t=e>>3;return 0!=e%8&&t++,t}var i="undefined"==typeof e?"undefined"==typeof Int8Array?function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0}:Int8Array:e;r.prototype.get=function(e){var t=e>>3;return t<this.buffer.length&&!!(this.buffer[t]&128>>e%8)},r.prototype.set=function(e,t){var r=e>>3;t||1===arguments.length?(this.buffer.length<r+1&&this._grow(a(r+1,u(2*this.buffer.length,this.grow))),this.buffer[r]|=128>>e%8):r<this.buffer.length&&(this.buffer[r]&=~(128>>e%8))},r.prototype._grow=function(e){if(this.buffer.length<e&&e<=this.grow){var t=new i(e);if(t.fill&&t.fill(0),this.buffer.copy)this.buffer.copy(t,0);else for(var r=0;r<this.buffer.length;r++)t[r]=this.buffer[r];this.buffer=t}},"undefined"!=typeof t&&(t.exports=r)}).call(this,e("buffer").Buffer)},{buffer:27}],14:[function(e,t){function r(e,t,r,n){this.piece=e,this.offset=t,this.length=r,this.callback=n}function n(){return this instanceof n?void(h.Duplex.call(this),this._debugId=c(4).toString("hex"),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=null,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new a(0,{grow:g}),this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=p(),this.downloadSpeed=p(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this.destroyed=!1,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this.on("finish",this._onFinish),this._parseHandshake()):new n}function i(e,t,r,n){for(var i=0,s;i<e.length;i++)if(s=e[i],s.piece===t&&s.offset===r&&s.length===n)return o(e,i),s;return null}t.exports=n;var o=e("unordered-array-remove"),s=e("bencode"),a=e("bitfield"),u=e("safe-buffer").Buffer,f=e("debug")("bittorrent-protocol"),l=e("xtend"),d=e("inherits"),c=e("randombytes"),p=e("speedometer"),h=e("readable-stream"),g=4e5,y=u.from("BitTorrent protocol"),_=u.from([0,0,0,0]),m=u.from([0,0,0,1,0]),v=u.from([0,0,0,1,1]),b=u.from([0,0,0,1,2]),w=u.from([0,0,0,1,3]),S=[0,0,0,0,0,0,0,0],T=[0,0,0,3,9,0,0];d(n,h.Duplex),n.prototype.setKeepAlive=function(e){var t=this;t._debug("setKeepAlive %s",e),clearInterval(t._keepAliveInterval);!1===e||(t._keepAliveInterval=setInterval(function(){t.keepAlive()},55e3))},n.prototype.setTimeout=function(e,t){this._debug("setTimeout ms=%d unref=%s",e,t),this._clearTimeout(),this._timeoutMs=e,this._timeoutUnref=!!t,this._updateTimeout()},n.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this._debug("destroy"),this.emit("close"),this.end())},n.prototype.end=function(){this._debug("end"),this._onUninterested(),this._onChoke(),h.Duplex.prototype.end.apply(this,arguments)},n.prototype.use=function(e){function t(){}var r=e.prototype.name;if(!r)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",r);var n=this._nextExt,i=new e(this);"function"!=typeof i.onHandshake&&(i.onHandshake=t),"function"!=typeof i.onExtendedHandshake&&(i.onExtendedHandshake=t),"function"!=typeof i.onMessage&&(i.onMessage=t),this.extendedMapping[n]=r,this._ext[r]=i,this[r]=i,this._nextExt+=1},n.prototype.keepAlive=function(){this._debug("keep-alive"),this._push(_)},n.prototype.handshake=function(e,t,r){var n,i;if("string"==typeof e?n=u.from(e,"hex"):(n=e,e=n.toString("hex")),"string"==typeof t?i=u.from(t,"hex"):(i=t,t=i.toString("hex")),20!==n.length||20!==i.length)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",e,t,r);var o=u.from(S);o[5]|=16,r&&r.dht&&(o[7]|=1),this._push(u.concat([y,o,n,i])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()},n.prototype._sendExtendedHandshake=function(){var e=l(this.extendedHandshake);for(var t in e.m={},this.extendedMapping){var r=this.extendedMapping[t];e.m[r]=+t}this.extended(0,s.encode(e)),this._extendedHandshakeSent=!0},n.prototype.choke=function(){if(!this.amChoking){for(this.amChoking=!0,this._debug("choke");this.peerRequests.length;)this.peerRequests.pop();this._push(m)}},n.prototype.unchoke=function(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(v))},n.prototype.interested=function(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(b))},n.prototype.uninterested=function(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(w))},n.prototype.have=function(e){this._debug("have %d",e),this._message(4,[e],null)},n.prototype.bitfield=function(e){this._debug("bitfield"),u.isBuffer(e)||(e=e.buffer),this._message(5,[],e)},n.prototype.request=function(e,t,n,i){return i||(i=function(){}),this._finished?i(new Error("wire is closed")):this.peerChoking?i(new Error("peer is choking")):void(this._debug("request index=%d offset=%d length=%d",e,t,n),this.requests.push(new r(e,t,n,i)),this._updateTimeout(),this._message(6,[e,t,n],null))},n.prototype.piece=function(e,t,r){this._debug("piece index=%d offset=%d",e,t),this.uploaded+=r.length,this.uploadSpeed(r.length),this.emit("upload",r.length),this._message(7,[e,t],r)},n.prototype.cancel=function(e,t,r){this._debug("cancel index=%d offset=%d length=%d",e,t,r),this._callback(i(this.requests,e,t,r),new Error("request was cancelled"),null),this._message(8,[e,t,r],null)},n.prototype.port=function(e){this._debug("port %d",e);var t=u.from(T);t.writeUInt16BE(e,5),this._push(t)},n.prototype.extended=function(e,t){if(this._debug("extended ext=%s",e),"string"==typeof e&&this.peerExtendedMapping[e]&&(e=this.peerExtendedMapping[e]),"number"==typeof e){var r=u.from([e]),n=u.isBuffer(t)?t:s.encode(t);this._message(20,[],u.concat([r,n]))
}else throw new Error("Unrecognized extension: "+e)},n.prototype._read=function(){},n.prototype._message=function(e,t,r){var n=r?r.length:0,i=u.allocUnsafe(5+4*t.length);i.writeUInt32BE(i.length+n-4,0),i[4]=e;for(var o=0;o<t.length;o++)i.writeUInt32BE(t[o],5+4*o);this._push(i),r&&this._push(r)},n.prototype._push=function(e){return this._finished?void 0:this.push(e)},n.prototype._onKeepAlive=function(){this._debug("got keep-alive"),this.emit("keep-alive")},n.prototype._onHandshake=function(e,t,r){var n=e.toString("hex"),i=t.toString("hex");this._debug("got handshake i=%s p=%s exts=%o",n,i,r),this.peerId=i,this.peerIdBuffer=t,this.peerExtensions=r,this.emit("handshake",n,i,r);for(var o in this._ext)this._ext[o].onHandshake(n,i,r);r.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()},n.prototype._onChoke=function(){for(this.peerChoking=!0,this._debug("got choke"),this.emit("choke");this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)},n.prototype._onUnchoke=function(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")},n.prototype._onInterested=function(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")},n.prototype._onUninterested=function(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")},n.prototype._onHave=function(e){this.peerPieces.get(e)||(this._debug("got have %d",e),this.peerPieces.set(e,!0),this.emit("have",e))},n.prototype._onBitField=function(e){this.peerPieces=new a(e),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)},n.prototype._onRequest=function(e,t,n){var o=this;if(!o.amChoking){o._debug("got request index=%d offset=%d length=%d",e,t,n);var s=function(r,s){return a===i(o.peerRequests,e,t,n)?r?o._debug("error satisfying request index=%d offset=%d length=%d (%s)",e,t,n,r.message):void o.piece(e,t,s):void 0},a=new r(e,t,n,s);o.peerRequests.push(a),o.emit("request",e,t,n,s)}},n.prototype._onPiece=function(e,t,r){this._debug("got piece index=%d offset=%d",e,t),this._callback(i(this.requests,e,t,r.length),null,r),this.downloaded+=r.length,this.downloadSpeed(r.length),this.emit("download",r.length),this.emit("piece",e,t,r)},n.prototype._onCancel=function(e,t,r){this._debug("got cancel index=%d offset=%d length=%d",e,t,r),i(this.peerRequests,e,t,r),this.emit("cancel",e,t,r)},n.prototype._onPort=function(e){this._debug("got port %d",e),this.emit("port",e)},n.prototype._onExtended=function(e,t){if(0===e){var r;try{r=s.decode(t)}catch(e){this._debug("ignoring invalid extended handshake: %s",e.message||e)}if(!r)return;this.peerExtendedHandshake=r;if("object"==typeof r.m)for(var n in r.m)this.peerExtendedMapping[n]=+r.m[n].toString();for(n in this._ext)this.peerExtendedMapping[n]&&this._ext[n].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[e]&&(e=this.extendedMapping[e],this._ext[e]&&this._ext[e].onMessage(t)),this._debug("got extended message ext=%s",e),this.emit("extended",e,t)},n.prototype._onTimeout=function(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")},n.prototype._write=function(e,t,r){for(this._bufferSize+=e.length,this._buffer.push(e);this._bufferSize>=this._parserSize;){var n=1===this._buffer.length?this._buffer[0]:u.concat(this._buffer);this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[n.slice(this._parserSize)]:[],this._parser(n.slice(0,this._parserSize))}r(null)},n.prototype._callback=function(e,t,r){e&&(this._clearTimeout(),!this.peerChoking&&!this._finished&&this._updateTimeout(),e.callback(t,r))},n.prototype._clearTimeout=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)},n.prototype._updateTimeout=function(){var e=this;e._timeoutMs&&e.requests.length&&!e._timeout&&(e._timeout=setTimeout(function(){e._onTimeout()},e._timeoutMs),e._timeoutUnref&&e._timeout.unref&&e._timeout.unref())},n.prototype._parse=function(e,t){this._parserSize=e,this._parser=t},n.prototype._onMessageLength=function(e){var t=e.readUInt32BE(0);0<t?this._parse(t,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))},n.prototype._onMessage=function(e){switch(this._parse(4,this._onMessageLength),e[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(e.readUInt32BE(1));case 5:return this._onBitField(e.slice(1));case 6:return this._onRequest(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 7:return this._onPiece(e.readUInt32BE(1),e.readUInt32BE(5),e.slice(9));case 8:return this._onCancel(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 9:return this._onPort(e.readUInt16BE(1));case 20:return this._onExtended(e.readUInt8(1),e.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",e)}},n.prototype._parseHandshake=function(){var e=this;e._parse(1,function(t){var r=t.readUInt8(0);e._parse(r+48,function(t){var n=t.slice(0,r);return"BitTorrent protocol"===n.toString()?void(t=t.slice(r),e._onHandshake(t.slice(8,28),t.slice(28,48),{dht:!!(1&t[7]),extended:!!(16&t[5])}),e._parse(4,e._onMessageLength)):(e._debug("Error: wire not speaking BitTorrent protocol (%s)",n.toString()),void e.end())})})},n.prototype._onFinish=function(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,function(){});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)},n.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._debugId+"] "+e[0],f.apply(null,e)}},{bencode:11,bitfield:13,debug:15,inherits:44,randombytes:76,"readable-stream":86,"safe-buffer":94,speedometer:104,"unordered-array-remove":123,xtend:133}],15:[function(e,t,r){(function(n){function i(){var e;try{e=r.storage.debug}catch(e){}return!e&&"undefined"!=typeof n&&"env"in n&&(e=n.env.DEBUG),e}r=t.exports=e("./debug"),r.log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!!t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"===e||(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)}},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=i,r.useColors=function(){return"undefined"!=typeof window&&window.process&&"renderer"===window.process.type||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(i())}).call(this,e("_process"))},{"./debug":16,_process:69}],16:[function(e,t,r){function n(e){var t=0,n;for(n in e)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[i(t)%r.colors.length]}function o(e){function t(){if(t.enabled){var e=t,n=+new Date,i=n-(s||n);e.diff=i,e.prev=s,e.curr=n,s=n;for(var o=Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=r.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;u++;var i=r.formatters[n];if("function"==typeof i){var s=o[u];t=i.call(e,s),o.splice(u,1),u--}return t}),r.formatArgs.call(e,o);var f=t.log||r.log||console.log.bind(console);f.apply(e,o)}}return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=n(e),"function"==typeof r.init&&r.init(t),t}r=t.exports=o.debug=o["default"]=o,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){r.save(e),r.names=[],r.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var s},{ms:60}],17:[function(e,t){(function(r){function n(e){function t(e){r.nextTick(function(){a.emit("warning",e)})}var a=this;if(!(a instanceof n))return new n(e);if(s.call(a),e||(e={}),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");if(!r.browser&&!e.port)throw new Error("Option `port` is required");a.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),a._peerIdBuffer=i.from(a.peerId,"hex"),a._peerIdBinary=a._peerIdBuffer.toString("binary"),a.infoHash="string"==typeof e.infoHash?e.infoHash:e.infoHash.toString("hex"),a._infoHashBuffer=i.from(a.infoHash,"hex"),a._infoHashBinary=a._infoHashBuffer.toString("binary"),o("new client %s",a.infoHash),a.destroyed=!1,a._port=e.port,a._getAnnounceOpts=e.getAnnounceOpts,a._rtcConfig=e.rtcConfig,a._userAgent=e.userAgent,a._wrtc="function"==typeof e.wrtc?e.wrtc():e.wrtc;var u="string"==typeof e.announce?[e.announce]:null==e.announce?[]:e.announce;u=u.map(function(e){return e=e.toString(),"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),e}),u=c(u);var f=!1!==a._wrtc&&(!!a._wrtc||d.WEBRTC_SUPPORT);a._trackers=u.map(function(e){var r=p.parse(e).protocol;return("http:"===r||"https:"===r)&&"function"==typeof g?new g(a,e):"udp:"===r&&"function"==typeof y?new y(a,e):("ws:"===r||"wss:"===r)&&f?"ws:"===r&&"undefined"!=typeof window&&"https:"===window.location.protocol?(t(new Error("Unsupported tracker protocol: "+e)),null):new _(a,e):(t(new Error("Unsupported tracker protocol: "+e)),null)}).filter(Boolean)}t.exports=n;var i=e("safe-buffer").Buffer,o=e("debug")("bittorrent-tracker:client"),s=e("events").EventEmitter,a=e("xtend"),u=e("inherits"),f=e("once"),l=e("run-parallel"),d=e("simple-peer"),c=e("uniq"),p=e("url"),h=e("./lib/common"),g=e("./lib/client/http-tracker"),y=e("./lib/client/udp-tracker"),_=e("./lib/client/websocket-tracker");u(n,s),n.scrape=function(e,t){if(t=f(t),!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");var r=a(e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:i.from("01234567890123456789"),port:6881}),o=new n(r);o.once("error",t),o.once("warning",t);var s=Array.isArray(e.infoHash)?e.infoHash.length:1,u={};return o.on("scrape",function(e){if(s-=1,u[e.infoHash]=e,0===s){o.destroy();var r=Object.keys(u);1===r.length?t(null,u[r[0]]):t(null,u)}}),e.infoHash=Array.isArray(e.infoHash)?e.infoHash.map(function(e){return i.from(e,"hex")}):i.from(e.infoHash,"hex"),o.scrape({infoHash:e.infoHash}),o},n.prototype.start=function(e){var t=this;o("send `start`"),e=t._defaultAnnounceOpts(e),e.event="started",t._announce(e),t._trackers.forEach(function(e){e.setInterval()})},n.prototype.stop=function(e){var t=this;o("send `stop`"),e=t._defaultAnnounceOpts(e),e.event="stopped",t._announce(e)},n.prototype.complete=function(e){var t=this;o("send `complete`"),e||(e={}),e=t._defaultAnnounceOpts(e),e.event="completed",t._announce(e)},n.prototype.update=function(e){var t=this;o("send `update`"),e=t._defaultAnnounceOpts(e),e.event&&delete e.event,t._announce(e)},n.prototype._announce=function(e){var t=this;t._trackers.forEach(function(t){t.announce(e)})},n.prototype.scrape=function(e){var t=this;o("send `scrape`"),e||(e={}),t._trackers.forEach(function(t){t.scrape(e)})},n.prototype.setInterval=function(e){var t=this;o("setInterval %d",e),t._trackers.forEach(function(t){t.setInterval(e)})},n.prototype.destroy=function(e){var t=this;if(!t.destroyed){t.destroyed=!0,o("destroy");var r=t._trackers.map(function(e){return function(t){e.destroy(t)}});l(r,e),t._trackers=[],t._getAnnounceOpts=null}},n.prototype._defaultAnnounceOpts=function(e){var t=this;return e||(e={}),null==e.numwant&&(e.numwant=h.DEFAULT_ANNOUNCE_PEERS),null==e.uploaded&&(e.uploaded=0),null==e.downloaded&&(e.downloaded=0),t._getAnnounceOpts&&(e=a(e,t._getAnnounceOpts())),e}}).call(this,e("_process"))},{"./lib/client/http-tracker":25,"./lib/client/udp-tracker":25,"./lib/client/websocket-tracker":19,"./lib/common":20,_process:69,debug:21,events:37,inherits:44,once:63,"run-parallel":92,"safe-buffer":94,"simple-peer":97,uniq:122,url:124,xtend:133}],18:[function(e,t){function r(e,t){var r=this;n.call(r),r.client=e,r.announceUrl=t,r.interval=null,r.destroyed=!1}t.exports=r;var n=e("events").EventEmitter,i=e("inherits");i(r,n),r.prototype.setInterval=function(e){var t=this;null==e&&(e=t.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(t.interval),e&&(t.interval=setInterval(function(){t.announce(t.client._defaultAnnounceOpts())},e),t.interval.unref&&t.interval.unref())}},{events:37,inherits:44}],19:[function(e,n){function i(e,t){var r=this;h.call(r,e,t),s("new websocket tracker %s",t),r.peers={},r.socket=null,r.reconnecting=!1,r.retries=0,r.reconnectTimer=null,r.expectingResponse=!1,r._openSocket()}function o(){}n.exports=i;var s=e("debug")("bittorrent-tracker:websocket-tracker"),a=e("xtend"),f=e("inherits"),l=e("simple-peer"),d=e("randombytes"),c=e("simple-websocket"),p=e("../common"),h=e("./tracker"),g={};f(i,h),i.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,i.prototype.announce=function(e){var t=this;if(!(t.destroyed||t.reconnecting)){if(!t.socket.connected)return void t.socket.once("connect",function(){t.announce(e)});var r=a(e,{action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary});if(t._trackerId&&(r.trackerid=t._trackerId),"stopped"===e.event||"completed"===e.event)t._send(r);else{var n=u(e.numwant,10);t._generateOffers(n,function(e){r.numwant=n,r.offers=e,t._send(r)})}}},i.prototype.scrape=function(e){var t=this;if(!(t.destroyed||t.reconnecting)){if(!t.socket.connected)return void t.socket.once("connect",function(){t.scrape(e)});var r=Array.isArray(e.infoHash)&&0<e.infoHash.length?e.infoHash.map(function(e){return e.toString("binary")}):e.infoHash&&e.infoHash.toString("binary")||t.client._infoHashBinary;t._send({action:"scrape",info_hash:r})}},i.prototype.destroy=function(e){function t(){a&&(clearTimeout(a),a=null),s.removeListener("data",t),s.destroy(),s=null}var r=this;if(e||(e=o),r.destroyed)return e(null);for(var n in r.destroyed=!0,clearInterval(r.interval),clearTimeout(r.reconnectTimer),r.peers){var i=r.peers[n];clearTimeout(i.trackerTimeout),i.destroy()}if(r.peers=null,r.socket&&(r.socket.removeListener("connect",r._onSocketConnectBound),r.socket.removeListener("data",r._onSocketDataBound),r.socket.removeListener("close",r._onSocketCloseBound),r.socket.removeListener("error",r._onSocketErrorBound),r.socket=null),r._onSocketConnectBound=null,r._onSocketErrorBound=null,r._onSocketDataBound=null,r._onSocketCloseBound=null,g[r.announceUrl]&&(g[r.announceUrl].consumers-=1),0<g[r.announceUrl].consumers)return e();var s=g[r.announceUrl];if(delete g[r.announceUrl],s.on("error",o),s.once("close",e),!r.expectingResponse)return t();var a=setTimeout(t,p.DESTROY_TIMEOUT);s.once("data",t)},i.prototype._openSocket=function(){var e=this;e.destroyed=!1,e.peers||(e.peers={}),e._onSocketConnectBound=function(){e._onSocketConnect()},e._onSocketErrorBound=function(t){e._onSocketError(t)},e._onSocketDataBound=function(t){e._onSocketData(t)},e._onSocketCloseBound=function(){e._onSocketClose()},e.socket=g[e.announceUrl],e.socket?g[e.announceUrl].consumers+=1:(e.socket=g[e.announceUrl]=new c(e.announceUrl),e.socket.consumers=1,e.socket.once("connect",e._onSocketConnectBound)),e.socket.on("data",e._onSocketDataBound),e.socket.once("close",e._onSocketCloseBound),e.socket.once("error",e._onSocketErrorBound)},i.prototype._onSocketConnect=function(){var e=this;e.destroyed||e.reconnecting&&(e.reconnecting=!1,e.retries=0,e.announce(e.client._defaultAnnounceOpts()))},i.prototype._onSocketData=function(e){var t=this;if(!t.destroyed){t.expectingResponse=!1;try{e=JSON.parse(e)}catch(e){return void t.client.emit("warning",new Error("Invalid tracker response"))}"announce"===e.action?t._onAnnounceResponse(e):"scrape"===e.action?t._onScrapeResponse(e):t._onSocketError(new Error("invalid action in WS response: "+e.action))}},i.prototype._onAnnounceResponse=function(e){var t=this;if(e.info_hash!==t.client._infoHashBinary)return void s("ignoring websocket data from %s for %s (looking for %s: reused socket)",t.announceUrl,p.binaryToHex(e.info_hash),t.client.infoHash);if(!(e.peer_id&&e.peer_id===t.client._peerIdBinary)){s("received %s from %s for %s",JSON.stringify(e),t.announceUrl,t.client.infoHash);var r=e["failure reason"];if(r)return t.client.emit("warning",new Error(r));var n=e["warning message"];n&&t.client.emit("warning",new Error(n));var i=e.interval||e["min interval"];i&&t.setInterval(1e3*i);var o=e["tracker id"];if(o&&(t._trackerId=o),null!=e.complete){var a=Object.assign({},e,{announce:t.announceUrl,infoHash:p.binaryToHex(e.info_hash)});t.client.emit("update",a)}var u;if(e.offer&&e.peer_id&&(s("creating peer (from remote offer)"),u=t._createPeer(),u.id=p.binaryToHex(e.peer_id),u.once("signal",function(r){var n={action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary,to_peer_id:e.peer_id,answer:r,offer_id:e.offer_id};t._trackerId&&(n.trackerid=t._trackerId),t._send(n)}),u.signal(e.offer),t.client.emit("peer",u)),e.answer&&e.peer_id){var f=p.binaryToHex(e.offer_id);u=t.peers[f],u?(u.id=p.binaryToHex(e.peer_id),u.signal(e.answer),t.client.emit("peer",u),clearTimeout(u.trackerTimeout),u.trackerTimeout=null,delete t.peers[f]):s("got unexpected answer: "+JSON.stringify(e.answer))}}},i.prototype._onScrapeResponse=function(e){var t=this;e=e.files||{};var r=Object.keys(e);return 0===r.length?void t.client.emit("warning",new Error("invalid scrape response")):void r.forEach(function(r){var n=Object.assign(e[r],{announce:t.announceUrl,infoHash:p.binaryToHex(r)});t.client.emit("scrape",n)})},i.prototype._onSocketClose=function(){var e=this;e.destroyed||(e.destroy(),e._startReconnectTimer())},i.prototype._onSocketError=function(e){var t=this;t.destroyed||(t.destroy(),t.client.emit("warning",e),t._startReconnectTimer())},i.prototype._startReconnectTimer=function(){var e=this,n=r(Math.random()*3e4)+u(t(2,e.retries)*15e3,18e5);e.reconnecting=!0,clearTimeout(e.reconnectTimer),e.reconnectTimer=setTimeout(function(){e.retries++,e._openSocket()},n),e.reconnectTimer.unref&&e.reconnectTimer.unref(),s("reconnecting socket in %s ms",n)},i.prototype._send=function(e){var t=this;if(!t.destroyed){t.expectingResponse=!0;var r=JSON.stringify(e);s("send %s",r),t.socket.send(r)}},i.prototype._generateOffers=function(e,t){function r(){var e=d(20).toString("hex");s("creating peer (from _generateOffers)");var t=i.peers[e]=i._createPeer({initiator:!0});t.once("signal",function(t){o.push({offer:t,offer_id:p.hexToBinary(e)}),n()}),t.trackerTimeout=setTimeout(function(){s("tracker timeout: destroying peer"),t.trackerTimeout=null,delete i.peers[e],t.destroy()},5e4),t.trackerTimeout.unref&&t.trackerTimeout.unref()}function n(){o.length===e&&(s("generated %s offers",e),t(o))}var i=this,o=[];s("generating %s offers",e);for(var a=0;a<e;++a)r();n()},i.prototype._createPeer=function(e){function t(e){n.client.emit("warning",new Error("Connection error: "+e.message)),i.destroy()}function r(){i.removeListener("error",t),i.removeListener("connect",r)}var n=this;e=Object.assign({trickle:!1,config:n.client._rtcConfig,wrtc:n.client._wrtc},e);var i=new l(e);return i.once("error",t),i.once("connect",r),i}},{"../common":20,"./tracker":18,debug:21,inherits:44,randombytes:76,"simple-peer":97,"simple-websocket":101,xtend:133}],20:[function(e,t,r){var n=e("safe-buffer").Buffer,i=e("xtend/mutable");r.DEFAULT_ANNOUNCE_PEERS=50,r.MAX_ANNOUNCE_PEERS=82,r.binaryToHex=function(e){return"string"!=typeof e&&(e+=""),n.from(e,"binary").toString("hex")},r.hexToBinary=function(e){return"string"!=typeof e&&(e+=""),n.from(e,"hex").toString("binary")};var o=e("./common-node");i(r,o)},{"./common-node":25,"safe-buffer":94,"xtend/mutable":134}],21:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{"./debug":22,_process:69,dup:15}],22:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{dup:16,ms:60}],23:[function(e,t){(function(e){t.exports=function(t,r){function n(t){i.removeEventListener("loadend",n,!1),t.error?r(t.error):r(null,new e(i.result))}if("undefined"==typeof Blob||!(t instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof r)throw new Error("second argument must be a function");var i=new FileReader;i.addEventListener("loadend",n,!1),i.readAsArrayBuffer(t)}}).call(this,e("buffer").Buffer)},{buffer:27}],24:[function(e,t){(function(r){function n(e,t){return this instanceof n?void(o.call(this),!t&&(t={}),"object"==typeof e&&(t=e,e=t.size),this.size=e||512,this._zeroPadding=!t.nopad&&s(t.zeroPadding,!0),this._buffered=[],this._bufferedBytes=0):new n(e,t)}var i=e("inherits"),o=e("readable-stream").Transform,s=e("defined");t.exports=n,i(n,o),n.prototype._transform=function(e,t,n){for(this._bufferedBytes+=e.length,this._buffered.push(e);this._bufferedBytes>=this.size;){var i=r.concat(this._buffered);this._bufferedBytes-=this.size,this.push(i.slice(0,this.size)),this._buffered=[i.slice(this.size,i.length)]}n()},n.prototype._flush=function(){if(this._bufferedBytes&&this._zeroPadding){var e=new r(this.size-this._bufferedBytes);e.fill(0),this._buffered.push(e),this.push(r.concat(this._buffered)),this._buffered=null}else this._bufferedBytes&&(this.push(r.concat(this._buffered)),this._buffered=null);this.push(null)}}).call(this,e("buffer").Buffer)},{buffer:27,defined:35,inherits:44,"readable-stream":86}],25:[function(){},{}],26:[function(e,t,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],27:[function(e,r,n){"use strict";function i(e){if(e>J)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(e)}return a(e,t,r)}function a(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return $(e)?h(e,t,r):"string"==typeof e?c(e,t):g(e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');else if(0>e)throw new RangeError('"size" argument must not be negative')}function l(e,t,r){return f(e),0>=e?i(e):void 0===t?i(e):"string"==typeof r?i(e).fill(t,r):i(e).fill(t)}function d(e){return f(e),i(0>e?0:0|y(e))}function c(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=0|_(e,t),n=i(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}function p(e){for(var t=0>e.length?0:0|y(e.length),r=i(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(0>t||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),n.__proto__=s.prototype,n}function g(e){if(s.isBuffer(e)){var t=0|y(e.length),r=i(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e){if(X(e)||"length"in e)return"number"!=typeof e.length||Y(e.length)?i(0):p(e);if("Buffer"===e.type&&Array.isArray(e.data))return p(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=J)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+J.toString(16)+" bytes");return 0|e}function _(e,t){if(s.isBuffer(e))return e.length;if(X(e)||$(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return H(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),0>=r)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return j(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:-2147483648>r&&(r=-2147483648),r=+r,Y(r)&&(r=i?0:e.length-1),0>r&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(0>r)if(i)r=0;else return-1;if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){function o(e,t){return 1==s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&(n=(n+"").toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;s=2,a/=2,u/=2,r/=2}var f;if(i){var l=-1;for(f=r;f<a;f++)if(o(e,f)!==o(t,-1==l?0:f-l))-1!=l&&(f-=f-l),l=-1;else if(-1==l&&(l=f),f-l+1===u)return l*s}else for(r+u>a&&(r=a-u),f=r;0<=f;f--){for(var d=!0,c=0;c<u;c++)if(o(e,f+c)!==o(t,c)){d=!1;break}if(d)return f}return-1}function S(e,t,r,n){r=+r||0;var i=e.length-r;n?(n=+n,n>i&&(n=i)):n=i;var o=t.length;if(0!=o%2)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0,a;s<n;++s){if(a=parseInt(t.substr(2*s,2),16),Y(a))return s;e[r+s]=a}return s}function T(e,t,r,n){return G(H(t,e.length-r),e,r,n)}function E(e,t,r,n){return G(V(t),e,r,n)}function A(e,t,r,n){return E(e,t,r,n)}function I(e,t,r,n){return G(z(t),e,r,n)}function C(e,t,r,n){return G(q(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,r))}function j(e,t,r){r=u(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=239<o?4:223<o?3:191<o?2:1;if(i+a<=r){var f,l,d,c;1==a?128>o&&(s=o):2==a?(f=e[i+1],128==(192&f)&&(c=(31&o)<<6|63&f,127<c&&(s=c))):3==a?(f=e[i+1],l=e[i+2],128==(192&f)&&128==(192&l)&&(c=(15&o)<<12|(63&f)<<6|63&l,2047<c&&(55296>c||57343<c)&&(s=c))):4==a?(f=e[i+1],l=e[i+2],d=e[i+3],128==(192&f)&&128==(192&l)&&128==(192&d)&&(c=(15&o)<<18|(63&f)<<12|(63&l)<<6|63&d,65535<c&&1114112>c&&(s=c))):void 0}null===s?(s=65533,a=1):65535<s&&(s-=65536,n.push(55296|1023&s>>>10),s=56320|1023&s),n.push(s),i+=a}return O(n)}function O(e){var t=e.length;if(t<=Q)return o.apply(String,e);for(var r="",n=0;n<t;)r+=o.apply(String,e.slice(n,n+=Q));return r}function B(e,t,r){var n="";r=u(e.length,r);for(var i=t;i<r;++i)n+=o(127&e[i]);return n}function x(e,t,r){var n="";r=u(e.length,r);for(var i=t;i<r;++i)n+=o(e[i]);return n}function D(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=W(e[o]);return i}function R(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=o(n[s]+256*n[s+1]);return i}function P(e,t,r){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function U(e,t,r,n,i){return t=+t,r>>>=0,i||L(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,i){return t=+t,r>>>=0,i||L(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,r,n,52,8),r+8}function F(e){if(e=e.trim().replace(ee,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function W(e){return 16>e?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||Infinity;for(var r=e.length,n=null,i=[],o=0,s;o<r;++o){if(s=e.charCodeAt(o),55295<s&&57344>s){if(!n){if(56319<s){-1<(t-=3)&&i.push(239,191,189);continue}else if(o+1===r){-1<(t-=3)&&i.push(239,191,189);continue}n=s;continue}if(56320>s){-1<(t-=3)&&i.push(239,191,189),n=s;continue}s=(n-55296<<10|s-56320)+65536}else n&&-1<(t-=3)&&i.push(239,191,189);if(n=null,128>s){if(0>(t-=1))break;i.push(s)}else if(2048>s){if(0>(t-=2))break;i.push(192|s>>6,128|63&s)}else if(65536>s){if(0>(t-=3))break;i.push(224|s>>12,128|63&s>>6,128|63&s)}else if(1114112>s){if(0>(t-=4))break;i.push(240|s>>18,128|63&s>>12,128|63&s>>6,128|63&s)}else throw new Error("Invalid code point")}return i}function V(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function q(e,t){for(var r=[],n=0,i,o,s;n<e.length&&!(0>(t-=2));++n)i=e.charCodeAt(n),o=i>>8,s=i%256,r.push(s),r.push(o);return r}function z(e){return K.toByteArray(F(e))}function G(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function $(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function X(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function Y(e){return e!==e}var K=e("base64-js"),Z=e("ieee754");n.Buffer=s,n.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},n.INSPECT_MAX_BYTES=50;var J=2147483647;n.kMaxLength=J,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,r){return a(e,t,r)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,r){return l(e,t,r)},s.allocUnsafe=function(e){return d(e)},s.allocUnsafeSlow=function(e){return d(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=u(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}
return r<n?-1:n<r?1:0},s.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=s.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},s.byteLength=_,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?j(this,0,e):m.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,r,n,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),0>t||r>e.length||0>n||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,a=r-t,f=u(o,a),l=this.slice(n,i),d=e.slice(t,r),c=0;c<f;++c)if(l[c]!==d[c]){o=l[c],a=d[c];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-t;if((void 0===r||r>i)&&(r=i),0<e.length&&(0>r||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return A(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;s.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=s.prototype,n},s.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},s.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},s.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,r,n){e>>>=0,r>>>=0,n||P(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=t(2,8*r)),i},s.prototype.readIntBE=function(e,r,n){e>>>=0,r>>>=0,n||P(e,r,this.length);for(var i=r,o=1,s=this[e+--i];0<i&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=t(2,8*r)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),Z.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),Z.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),Z.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),Z.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r>>>=0,n>>>=0,!i){var o=t(2,8*n)-1;M(this,e,r,n,o,0)}var s=1,a=0;for(this[r]=255&e;++a<n&&(s*=256);)this[r+a]=255&e/s;return r+n},s.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r>>>=0,n>>>=0,!i){var o=t(2,8*n)-1;M(this,e,r,n,o,0)}var s=n-1,a=1;for(this[r+s]=255&e;0<=--s&&(a*=256);)this[r+s]=255&e/a;return r+n},s.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r>>>=0,!i){var o=t(2,8*n-1);M(this,e,r,n,o-1,-o)}var s=0,a=1,u=0;for(this[r]=255&e;++s<n&&(a*=256);)0>e&&0==u&&0!==this[r+s-1]&&(u=1),this[r+s]=255&(e/a>>0)-u;return r+n},s.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r>>>=0,!i){var o=t(2,8*n-1);M(this,e,r,n,o-1,-o)}var s=n-1,a=1,u=0;for(this[r+s]=255&e;0<=--s&&(a*=256);)0>e&&0==u&&0!==this[r+s+1]&&(u=1),this[r+s]=255&(e/a>>0)-u;return r+n},s.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r,o;if(this===e&&r<t&&t<n)for(o=i-1;0<=o;--o)e[o+t]=this[o+r];else if(1e3>i)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},s.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);256>i&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=r===void 0?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=s.isBuffer(e)?e:new s(e,n),u=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g},{"base64-js":8,ieee754:42}],28:[function(e,t){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],29:[function(e,t){function r(e,t,i){var s=this;if(!(s instanceof r))return new r(e,t,i);if(o.Writable.call(s,i),i||(i={}),!e||!e.put||!e.get)throw new Error("First argument must be an abstract-chunk-store compliant store");if(t=+t,!t)throw new Error("Second argument must be a chunk length");s._blockstream=new n(t,{zeroPadding:!1}),s._blockstream.on("data",function(t){s.destroyed||(e.put(a,t),a+=1)}).on("error",function(e){s.destroy(e)});var a=0;s.on("finish",function(){this._blockstream.end()})}t.exports=r;var n=e("block-stream2"),i=e("inherits"),o=e("readable-stream");i(r,o.Writable),r.prototype._write=function(e,t,r){this._blockstream.write(e,t,r)},r.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}},{"block-stream2":24,inherits:44,"readable-stream":86}],30:[function(e,t){t.exports=function(e,t,r){for(var n=Infinity,o=0,s=t.length-1,a,u,f;o<=s&&(a=o+(s-o>>1),f=t[a]-e,0>f?o=a+1:0<f?s=a-1:void 0,f=i(f),f<n&&(n=f,u=a),t[a]!==e););return r?u:t[u]}},{}],31:[function(e,t,r){(function(e){function t(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNull=function(e){return null===e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e},r.isString=function(e){return"string"==typeof e},r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=function(e){return void 0===e},r.isRegExp=function(e){return"[object RegExp]"===t(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isDate=function(e){return"[object Date]"===t(e)},r.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},r.isFunction=function(e){return"function"==typeof e},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e},r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":46}],32:[function(e,t){(function(r,n,i){function o(e,t,r){return"function"==typeof t?o(e,null,t):void(t=t?C(t):{},u(e,t,function(e,n,i){return e?r(e):void(t.singleFileTorrent=i,h(n,t,r))}))}function a(e,t,r){return"function"==typeof t?a(e,null,t):void(t=t?C(t):{},u(e,t,r))}function u(e,t,n){function o(){P(e.map(function(e){return function(t){var r={};if(y(e))r.getStream=v(e),r.length=e.size;else if(i.isBuffer(e))r.getStream=b(e),r.length=e.length;else if(m(e))r.getStream=S(e,r),r.length=0;else{if("string"==typeof e){if("function"!=typeof O.stat)throw new Error("filesystem paths do not work in the browser");var n=1<a||u;return void f(e,n,t)}throw new Error("invalid input type")}r.path=e.path,t(null,r)}}),function(e,t){return e?n(e):void(t=j(t),n(null,t,u))})}if(Array.isArray(e)&&0===e.length)throw new Error("invalid input type");_(e)&&(e=Array.prototype.slice.call(e)),Array.isArray(e)||(e=[e]),e=e.map(function(e){return y(e)&&"string"==typeof e.path&&"function"==typeof O.stat?e.path:e}),1!==e.length||"string"==typeof e[0]||e[0].name||(e[0].name=t.name);var s=null;e.forEach(function(t,r){if("string"!=typeof t){var n=t.fullPath||t.name;n||(n="Unknown File "+(r+1),t.unknownName=!0),t.path=n.split("/"),t.path[0]||t.path.shift(),2>t.path.length?s=null:0===r&&1<e.length?s=t.path[0]:t.path[0]!==s&&(s=null)}}),e=e.filter(function(e){if("string"==typeof e)return!0;var t=e.path[e.path.length-1];return c(t)&&x.not(t)}),s&&e.forEach(function(e){var t=(i.isBuffer(e)||m(e))&&!e.path;"string"==typeof e||t||e.path.shift()}),!t.name&&s&&(t.name=s),t.name||e.some(function(e){return"string"==typeof e?(t.name=I.basename(e),!0):e.unknownName?void 0:(t.name=e.path[e.path.length-1],!0)}),t.name||(t.name="Unnamed Torrent "+Date.now());var a=e.reduce(function(e,t){return e+ +("string"==typeof t)},0),u=1===e.length;if(1===e.length&&"string"==typeof e[0]){if("function"!=typeof O.stat)throw new Error("filesystem paths do not work in the browser");B(e[0],function(e,t){return e?n(e):void(u=t,o())})}else r.nextTick(function(){o()})}function f(e,t,r){d(e,l,function(n,i){return n?r(n):void(i=Array.isArray(i)?j(i):[i],e=I.normalize(e),t&&(e=e.slice(0,e.lastIndexOf(I.sep)+1)),e[e.length-1]!==I.sep&&(e+=I.sep),i.forEach(function(t){t.getStream=w(t.path),t.path=t.path.replace(e,"").split(I.sep)}),r(null,i))})}function l(e,t){t=R(t),O.stat(e,function(r,n){if(r)return t(r);var i={length:n.size,path:e};t(null,i)})}function d(e,t,r){O.stat(e,function(n,i){return n?r(n):void(i.isDirectory()?O.readdir(e,function(n,i){return n?r(n):void P(i.filter(c).filter(x.not).map(function(r){return function(n){d(I.join(e,r),t,n)}}),r)}):i.isFile()&&t(e,r))})}function c(e){return"."!==e[0]}function p(e,t,r){function n(e){l+=e.length;var t=p;M(e,function(e){f[t]=e,c-=1,u()}),c+=1,p+=1}function o(){h=!0,u()}function s(e){a(),r(e)}function a(){g.removeListener("error",s),y.removeListener("data",n),y.removeListener("end",o),y.removeListener("error",s)}function u(){h&&0==c&&(a(),r(null,i.from(f.join(""),"hex"),l))}r=R(r);var f=[],l=0,d=e.map(function(e){return e.getStream}),c=0,p=0,h=!1,g=new D(d),y=new E(t,{zeroPadding:!1});g.on("error",s),g.pipe(y).on("data",n).on("end",o).on("error",s)}function h(e,r,i){var o=r.announceList;o||("string"==typeof r.announce?o=[[r.announce]]:Array.isArray(r.announce)&&(o=r.announce.map(function(e){return[e]}))),o||(o=[]),n.WEBTORRENT_ANNOUNCE&&("string"==typeof n.WEBTORRENT_ANNOUNCE?o.push([[n.WEBTORRENT_ANNOUNCE]]):Array.isArray(n.WEBTORRENT_ANNOUNCE)&&(o=o.concat(n.WEBTORRENT_ANNOUNCE.map(function(e){return[e]})))),r.announce===void 0&&r.announceList===void 0&&(o=o.concat(t.exports.announceList)),"string"==typeof r.urlList&&(r.urlList=[r.urlList]);var a={info:{name:r.name},"creation date":s((+r.creationDate||Date.now())/1e3),encoding:"UTF-8"};0!==o.length&&(a.announce=o[0][0],a["announce-list"]=o),r.comment!==void 0&&(a.comment=r.comment),r.createdBy!==void 0&&(a["created by"]=r.createdBy),r.private!==void 0&&(a.info.private=+r.private),r.sslCert!==void 0&&(a.info["ssl-cert"]=r.sslCert),r.urlList!==void 0&&(a["url-list"]=r.urlList);var u=r.pieceLength||A(e.reduce(g,0));a.info["piece length"]=u,p(e,u,function(t,n,o){return t?i(t):void(a.info.pieces=n,e.forEach(function(e){delete e.getStream}),r.singleFileTorrent?a.info.length=o:a.info.files=e,i(null,T.encode(a)))})}function g(e,t){return e+t.length}function y(e){return"undefined"!=typeof Blob&&e instanceof Blob}function _(e){return"undefined"!=typeof FileList&&e instanceof FileList}function m(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}function v(e){return function(){return new k(e)}}function b(e){return function(){var t=new L.PassThrough;return t.end(e),t}}function w(e){return function(){return O.createReadStream(e)}}function S(e,t){return function(){var r=new L.Transform;return r._transform=function(e,r,n){t.length+=e.length,this.push(e),n()},e.pipe(r),r}}t.exports=o,t.exports.parseInput=a,t.exports.announceList=[];var T=e("bencode"),E=e("block-stream2"),A=e("piece-length"),I=e("path"),C=e("xtend"),k=e("filestream/read"),j=e("flatten"),O=e("fs"),B=e("is-file"),x=e("junk"),D=e("multistream"),R=e("once"),P=e("run-parallel"),M=e("simple-sha1"),L=e("readable-stream")}).call(this,e("_process"),"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n,e("buffer").Buffer)},{_process:69,bencode:11,"block-stream2":24,buffer:27,"filestream/read":38,flatten:39,fs:26,"is-file":47,junk:50,multistream:61,once:63,path:66,"piece-length":67,"readable-stream":86,"run-parallel":92,"simple-sha1":100,xtend:133}],33:[function(e,t,r){(function(n){function i(){var e;try{e=r.storage.debug}catch(e){}return!e&&"undefined"!=typeof n&&"env"in n&&(e=n.env.DEBUG),e}r=t.exports=e("./debug"),r.log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!!t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"===e||(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)}},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=i,r.useColors=function(){return"undefined"!=typeof window&&window.process&&"renderer"===window.process.type||("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(i())}).call(this,e("_process"))},{"./debug":34,_process:69}],34:[function(e,t,r){function n(e){var t=0,n;for(n in e)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[i(t)%r.colors.length]}function o(e){function t(){if(t.enabled){var e=t,n=+new Date,o=n-(i||n);e.diff=o,e.prev=i,e.curr=n,i=n;for(var s=Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;u++;var i=r.formatters[n];if("function"==typeof i){var o=s[u];t=i.call(e,o),s.splice(u,1),u--}return t}),r.formatArgs.call(e,s);var f=t.log||r.log||console.log.bind(console);f.apply(e,s)}}var i;return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=n(e),t.destroy=s,"function"==typeof r.init&&r.init(t),r.instances.push(t),t}function s(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}r=t.exports=o.debug=o["default"]=o,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){r.save(e),r.names=[],r.skips=[];var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,i;for(i=0;i<n;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(i=0;i<r.instances.length;i++){var o=r.instances[i];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={}},{ms:60}],35:[function(e,t){t.exports=function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==void 0)return arguments[e]}},{}],36:[function(e,t){var r=e("once"),n=function(){},i=function(e){return e.setHeader&&"function"==typeof e.abort},o=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},s=function(e,t,a){if("function"==typeof t)return s(e,null,t);t||(t={}),a=r(a||n);var u=e._writableState,f=e._readableState,l=t.readable||!1!==t.readable&&e.readable,d=t.writable||!1!==t.writable&&e.writable,c=function(){e.writable||p()},p=function(){d=!1,l||a.call(e)},h=function(){l=!1,d||a.call(e)},g=function(t){a.call(e,t?new Error("exited with error code: "+t):null)},y=function(){return l&&!(f&&f.ended)?a.call(e,new Error("premature close")):d&&!(u&&u.ended)?a.call(e,new Error("premature close")):void 0},_=function(){e.req.on("finish",p)};return i(e)?(e.on("complete",p),e.on("abort",y),e.req?_():e.on("request",_)):d&&!u&&(e.on("end",c),e.on("close",c)),o(e)&&e.on("exit",g),e.on("end",h),e.on("finish",p),!1!==t.error&&e.on("error",a),e.on("close",y),function(){e.removeListener("complete",p),e.removeListener("abort",y),e.removeListener("request",_),e.req&&e.req.removeListener("finish",p),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",p),e.removeListener("exit",g),e.removeListener("end",h),e.removeListener("error",a),e.removeListener("close",y)}};t.exports=s},{once:63}],37:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=100,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,a,u,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))if(t=arguments[1],t instanceof Error)throw t;else{var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(r=this._events[e],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),f=r.slice(),i=f.length,u=0;u<i;u++)f[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&0<i&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,s,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(a=s;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){i=a;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],38:[function(e,t){function r(e,t){var i=this;return this instanceof r?void(t=t||{},n.call(this,t),this._offset=0,this._ready=!1,this._file=e,this._size=e.size,this._chunkSize=t.chunkSize||a(this._size/1e3,204800),this.reader=new FileReader,this._generateHeaderBlocks(e,t,function(e,t){return e?i.emit("error",e):void(Array.isArray(t)&&t.forEach(function(e){i.push(e)}),i._ready=!0,i.emit("_ready"))})):new r(e,t)}var n=e("readable-stream").Readable,i=e("inherits"),o=/^.*\.(\w+)$/,s=e("typedarray-to-buffer");i(r,n),t.exports=r,r.prototype._generateHeaderBlocks=function(e,t,r){r(null,[])},r.prototype._read=function(){if(!this._ready)return void this.once("_ready",this._read.bind(this));var e=this,t=this.reader,r=this._offset,n=this._offset+this._chunkSize;return n>this._size&&(n=this._size),r===this._size?(this.destroy(),void this.push(null)):void(t.onload=function(){e._offset=n,e.push(s(t.result))},t.onerror=function(){e.emit("error",t.error)},t.readAsArrayBuffer(this._file.slice(r,n)))},r.prototype.destroy=function(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch(e){}}this.reader=null}},{inherits:44,"readable-stream":86,"typedarray-to-buffer":120}],39:[function(e,t){t.exports=function(e,t){function r(e,n){return e.reduce(function(e,i){return Array.isArray(i)&&n<t?e.concat(r(i,n+1)):e.concat(i)},[])}return t="number"==typeof t?t:Infinity,t?r(e,1):Array.isArray(e)?e.map(function(e){return e}):e}},{}],40:[function(e,t){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],41:[function(e,t){function r(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}var n=e("http"),i=e("url"),o=t.exports;for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);o.request=function(e,t){return e=r(e),n.request.call(this,e,t)},o.get=function(e,t){return e=r(e),n.get.call(this,e,t)}},{http:105,url:124}],42:[function(e,n,o){o.read=function(e,r,n,i,o){var s=8*o-i-1,a=(1<<s)-1,u=a>>1,f=-7,l=n?o-1:0,d=n?-1:1,c=e[r+l],p,h;for(l+=d,p=c&(1<<-f)-1,c>>=-f,f+=s;0<f;p=256*p+e[r+l],l+=d,f-=8);for(h=p&(1<<-f)-1,p>>=-f,f+=i;0<f;h=256*h+e[r+l],l+=d,f-=8);if(0===p)p=1-u;else{if(p===a)return h?NaN:(c?-1:1)*Infinity;h+=t(2,i),p-=u}return(c?-1:1)*h*t(2,p-i)},o.write=function(e,n,o,s,a,u){var f=8*u-a-1,l=(1<<f)-1,d=l>>1,c=23===a?5.960464477539063e-8-6.617444900424222e-24:0,p=s?0:u-1,h=s?1:-1,g=0>n||0===n&&0>1/n?1:0,y,_,m;for(n=i(n),isNaN(n)||n===Infinity?(_=isNaN(n)?1:0,y=l):(y=r(Math.log(n)/Math.LN2),1>n*(m=t(2,-y))&&(y--,m*=2),n+=1<=y+d?c/m:c*t(2,1-d),2<=n*m&&(y++,m/=2),y+d>=l?(_=0,y=l):1<=y+d?(_=(n*m-1)*t(2,a),y+=d):(_=n*t(2,d-1)*t(2,a),y=0));8<=a;e[o+p]=255&_,p+=h,_/=256,a-=8);for(y=y<<a|_,f+=a;0<f;e[o+p]=255&y,p+=h,y/=256,f-=8);e[o+p-h]|=128*g}},{}],43:[function(e,t){(function(e){function r(e){if(!(this instanceof r))return new r(e);if(this.store=e,this.chunkLength=e.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}function n(t,r,n){e.nextTick(function(){t&&t(r,n)})}t.exports=r,r.prototype.put=function(e,t,r){var n=this;n.mem[e]=t,n.store.put(e,t,function(t){n.mem[e]=null,r&&r(t)})},r.prototype.get=function(e,t,r){if("function"==typeof t)return this.get(e,null,t);var i=t&&t.offset||0,o=t&&t.length&&i+t.length,s=this.mem[e];return s?n(r,null,t?s.slice(i,o):s):void this.store.get(e,t,r)},r.prototype.close=function(e){this.store.close(e)},r.prototype.destroy=function(e){this.store.destroy(e)}}).call(this,e("_process"))},{_process:69}],44:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,
e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],45:[function(e,t){t.exports=function(e){for(var t=0,r=e.length;t<r;++t)if(e.charCodeAt(t)>127)return!1;return!0}},{}],46:[function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||n(e)||!!e._isBuffer)}},{}],47:[function(e,t){"use strict";function r(e){return n.existsSync(e)&&n.statSync(e).isFile()}var n=e("fs");t.exports=function(e,t){return t?void n.stat(e,function(e,r){return e?t(e):t(null,r.isFile())}):r(e)},t.exports.sync=r},{fs:26}],48:[function(e,t){function r(e){return n(e)||i(e)}function n(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function i(e){return s[o.call(e)]}t.exports=r,r.strict=n,r.loose=i;var o=Object.prototype.toString,s={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0}},{}],49:[function(e,t){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],50:[function(e,t,r){"use strict";r.regex=r.re=/^npm-debug\.log$|^\..*\.swp$|^\.DS_Store$|^\.AppleDouble$|^\.LSOverride$|^Icon\r$|^\._.*|^\.Spotlight-V100(?:$|\/)|\.Trashes|^__MACOSX$|~$|^Thumbs\.db$|^ehthumbs\.db$|^Desktop\.ini$|^@eaDir$/,r.is=function(e){return r.re.test(e)},r.not=function(e){return!r.is(e)}},{}],51:[function(e,t){function r(e){var t={},r=e.split("magnet:?")[1],o=r&&0<=r.length?r.split("&"):[];o.forEach(function(e){var r=e.split("=");if(2===r.length){var n=r[0],i=r[1];if("dn"===n&&(i=decodeURIComponent(i).replace(/\+/g," ")),("tr"===n||"xs"===n||"as"===n||"ws"===n)&&(i=decodeURIComponent(i)),"kt"===n&&(i=decodeURIComponent(i).split("+")),"ix"===n&&(i=+i),!t[n])t[n]=i;else if(Array.isArray(t[n]))t[n].push(i);else{var o=t[n];t[n]=[o,i]}}});var a;if(t.xt){var u=Array.isArray(t.xt)?t.xt:[t.xt];u.forEach(function(e){if(a=e.match(/^urn:btih:(.{40})/))t.infoHash=a[1].toLowerCase();else if(a=e.match(/^urn:btih:(.{32})/)){var r=n.decode(a[1]);t.infoHash=i.from(r,"binary").toString("hex")}})}return t.infoHash&&(t.infoHashBuffer=i.from(t.infoHash,"hex")),t.dn&&(t.name=t.dn),t.kt&&(t.keywords=t.kt),t.announce="string"==typeof t.tr?[t.tr]:Array.isArray(t.tr)?t.tr:[],t.urlList=[],("string"==typeof t.as||Array.isArray(t.as))&&(t.urlList=t.urlList.concat(t.as)),("string"==typeof t.ws||Array.isArray(t.ws))&&(t.urlList=t.urlList.concat(t.ws)),s(t.announce),s(t.urlList),t}t.exports=r,t.exports.decode=r,t.exports.encode=function(e){e=o(e),e.infoHashBuffer&&(e.xt="urn:btih:"+e.infoHashBuffer.toString("hex")),e.infoHash&&(e.xt="urn:btih:"+e.infoHash),e.name&&(e.dn=e.name),e.keywords&&(e.kt=e.keywords),e.announce&&(e.tr=e.announce),e.urlList&&(e.ws=e.urlList,delete e.as);var t="magnet:?";return Object.keys(e).filter(function(e){return 2===e.length}).forEach(function(r,n){var i=Array.isArray(e[r])?e[r]:[e[r]];i.forEach(function(e,i){(0<n||0<i)&&("kt"!==r||0===i)&&(t+="&"),"dn"===r&&(e=encodeURIComponent(e).replace(/%20/g,"+")),("tr"===r||"xs"===r||"as"===r||"ws"===r)&&(e=encodeURIComponent(e)),"kt"===r&&(e=encodeURIComponent(e)),t+="kt"===r&&0<i?"+"+e:r+"="+e})}),t};var n=e("thirty-two"),i=e("safe-buffer").Buffer,o=e("xtend"),s=e("uniq")},{"safe-buffer":94,"thirty-two":113,uniq:122,xtend:133}],52:[function(e,t){function r(e,t){var n=this;if(!(n instanceof r))return new r(e,t);if(!a)throw new Error("web browser lacks MediaSource support");t||(t={}),n._bufferDuration=t.bufferDuration||u,n._elem=e,n._mediaSource=new a,n._streams=[],n.detailedError=null,n._errorHandler=function(){n._elem.removeEventListener("error",n._errorHandler);var e=n._streams.slice();e.forEach(function(e){e.destroy(n._elem.error)})},n._elem.addEventListener("error",n._errorHandler),n._elem.src=window.URL.createObjectURL(n._mediaSource)}function n(e,t){var r=this;if(o.Writable.call(r),r._wrapper=e,r._elem=e._elem,r._mediaSource=e._mediaSource,r._allStreams=e._streams,r._allStreams.push(r),r._bufferDuration=e._bufferDuration,r._sourceBuffer=null,r._openHandler=function(){r._onSourceOpen()},r._flowHandler=function(){r._flow()},"string"==typeof t)r._type=t,"open"===r._mediaSource.readyState?r._createSourceBuffer():r._mediaSource.addEventListener("sourceopen",r._openHandler);else if(null===t._sourceBuffer)t.destroy(),r._type=t._type,r._mediaSource.addEventListener("sourceopen",r._openHandler);else if(t._sourceBuffer)t.destroy(),r._type=t._type,r._sourceBuffer=t._sourceBuffer,r._sourceBuffer.addEventListener("updateend",r._flowHandler);else throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");r._elem.addEventListener("timeupdate",r._flowHandler),r.on("error",function(e){r._wrapper.error(e)}),r.on("finish",function(){if(!r.destroyed&&(r._finished=!0,r._allStreams.every(function(e){return e._finished})))try{r._mediaSource.endOfStream()}catch(e){}})}t.exports=r;var i=e("inherits"),o=e("readable-stream"),s=e("to-arraybuffer"),a="undefined"!=typeof window&&window.MediaSource,u=60;r.prototype.createWriteStream=function(e){var t=this;return new n(t,e)},r.prototype.error=function(e){var t=this;t.detailedError||(t.detailedError=e);try{t._mediaSource.endOfStream("decode")}catch(e){}},i(n,o.Writable),n.prototype._onSourceOpen=function(){var e=this;e.destroyed||(e._mediaSource.removeEventListener("sourceopen",e._openHandler),e._createSourceBuffer())},n.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,t._allStreams.splice(t._allStreams.indexOf(t),1),t._mediaSource.removeEventListener("sourceopen",t._openHandler),t._elem.removeEventListener("timeupdate",t._flowHandler),t._sourceBuffer&&(t._sourceBuffer.removeEventListener("updateend",t._flowHandler),"open"===t._mediaSource.readyState&&t._sourceBuffer.abort()),e&&t.emit("error",e),t.emit("close"))},n.prototype._createSourceBuffer=function(){var e=this;if(!e.destroyed)if(!a.isTypeSupported(e._type))e.destroy(new Error("The provided type is not supported"));else if(e._sourceBuffer=e._mediaSource.addSourceBuffer(e._type),e._sourceBuffer.addEventListener("updateend",e._flowHandler),e._cb){var t=e._cb;e._cb=null,t()}},n.prototype._write=function(e,t,r){var n=this;if(!n.destroyed){if(!n._sourceBuffer)return void(n._cb=function(i){return i?r(i):void n._write(e,t,r)});if(n._sourceBuffer.updating)return r(new Error("Cannot append buffer while source buffer updating"));try{n._sourceBuffer.appendBuffer(s(e))}catch(e){return void n.destroy(e)}n._cb=r}},n.prototype._flow=function(){var e=this;if(!(e.destroyed||!e._sourceBuffer||e._sourceBuffer.updating)&&!("open"===e._mediaSource.readyState&&e._getBufferDuration()>e._bufferDuration)&&e._cb){var t=e._cb;e._cb=null,t()}};n.prototype._getBufferDuration=function(){for(var e=this,t=e._sourceBuffer.buffered,r=e._elem.currentTime,n=-1,i=0;i<t.length;i++){var o=t.start(i),s=t.end(i)+0;if(o>r)break;else(0<=n||r<=s)&&(n=s)}var a=n-r;return 0>a&&(a=0),a}},{inherits:44,"readable-stream":86,"to-arraybuffer":115}],53:[function(e,t){(function(e){function r(e,t){if(!(this instanceof r))return new r(e,t);if(t||(t={}),this.chunkLength=+e,!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=+t.length||Infinity,this.length!==Infinity&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=s(this.length/this.chunkLength)-1)}function n(t,r,n){e.nextTick(function(){t&&t(r,n)})}t.exports=r,r.prototype.put=function(e,t,r){if(this.closed)return n(r,new Error("Storage is closed"));var i=e===this.lastChunkIndex;return i&&t.length!==this.lastChunkLength?n(r,new Error("Last chunk length must be "+this.lastChunkLength)):i||t.length===this.chunkLength?void(this.chunks[e]=t,n(r,null)):n(r,new Error("Chunk length must be "+this.chunkLength))},r.prototype.get=function(e,t,r){if("function"==typeof t)return this.get(e,null,t);if(this.closed)return n(r,new Error("Storage is closed"));var i=this.chunks[e];if(!i){var o=new Error("Chunk not found");return o.notFound=!0,n(r,o)}if(!t)return n(r,null,i);var s=t.offset||0,a=t.length||i.length-s;n(r,null,i.slice(s,a+s))},r.prototype.close=r.prototype.destroy=function(e){return this.closed?n(e,new Error("Storage is closed")):void(this.closed=!0,this.chunks=null,n(e,null))}}).call(this,e("_process"))},{_process:69}],54:[function(e,t,n){(function(t){function i(e,t,r){for(var n=t;n<r;n++)e[n]=0}function o(e,t,n){t.writeUInt32BE(r((e.getTime()+m)/1e3),n)}function s(e,t,n){t.writeUInt16BE(r(e)%65536,n),t.writeUInt16BE(r(256*(256*e))%65536,n+2)}function a(e,t,n){t[n]=r(e)%256,t[n+1]=r(256*e)%256}function f(e,t,r){e||(e=[0,0,0,0,0,0,0,0,0]);for(var n=0;n<e.length;n++)s(e[n],t,r+4*n)}function l(e,r,n){var i=new t(e,"utf8");i.copy(r,n),r[n+i.length]=0}function d(e){for(var t=Array(e.length/4),r=0;r<t.length;r++)t[r]=p(e,4*r);return t}function c(e,t){return new Date(1e3*e.readUInt32BE(t)-m)}function p(e,t){return e.readUInt16BE(t)+e.readUInt16BE(t+2)/65536}function h(e,t){return e[t]+e[t+1]/256}function g(e,t,r){var n;for(n=0;n<r&&!(0===e[t+n]);n++);return e.toString("utf8",t,t+n)}var y=e("./index"),_=e("./descriptor"),m=20828448e5;n.fullBoxes={};["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"].forEach(function(e){n.fullBoxes[e]=!0}),n.ftyp={},n.ftyp.encode=function(e,r,i){r=r?r.slice(i):new t(n.ftyp.encodingLength(e));var o=e.compatibleBrands||[];r.write(e.brand,0,4,"ascii"),r.writeUInt32BE(e.brandVersion,4);for(var s=0;s<o.length;s++)r.write(o[s],8+4*s,4,"ascii");return n.ftyp.encode.bytes=8+4*o.length,r},n.ftyp.decode=function(e,t){e=e.slice(t);for(var r=e.toString("ascii",0,4),n=e.readUInt32BE(4),i=[],o=8;o<e.length;o+=4)i.push(e.toString("ascii",o,o+4));return{brand:r,brandVersion:n,compatibleBrands:i}},n.ftyp.encodingLength=function(e){return 8+4*(e.compatibleBrands||[]).length},n.mvhd={},n.mvhd.encode=function(e,r,u){return r=r?r.slice(u):new t(96),o(e.ctime||new Date,r,0),o(e.mtime||new Date,r,4),r.writeUInt32BE(e.timeScale||0,8),r.writeUInt32BE(e.duration||0,12),s(e.preferredRate||0,r,16),a(e.preferredVolume||0,r,20),i(r,22,32),f(e.matrix,r,32),r.writeUInt32BE(e.previewTime||0,68),r.writeUInt32BE(e.previewDuration||0,72),r.writeUInt32BE(e.posterTime||0,76),r.writeUInt32BE(e.selectionTime||0,80),r.writeUInt32BE(e.selectionDuration||0,84),r.writeUInt32BE(e.currentTime||0,88),r.writeUInt32BE(e.nextTrackId||0,92),n.mvhd.encode.bytes=96,r},n.mvhd.decode=function(e,t){return e=e.slice(t),{ctime:c(e,0),mtime:c(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),preferredRate:p(e,16),preferredVolume:h(e,20),matrix:d(e.slice(32,68)),previewTime:e.readUInt32BE(68),previewDuration:e.readUInt32BE(72),posterTime:e.readUInt32BE(76),selectionTime:e.readUInt32BE(80),selectionDuration:e.readUInt32BE(84),currentTime:e.readUInt32BE(88),nextTrackId:e.readUInt32BE(92)}},n.mvhd.encodingLength=function(){return 96},n.tkhd={},n.tkhd.encode=function(e,r,s){return r=r?r.slice(s):new t(80),o(e.ctime||new Date,r,0),o(e.mtime||new Date,r,4),r.writeUInt32BE(e.trackId||0,8),i(r,12,16),r.writeUInt32BE(e.duration||0,16),i(r,20,28),r.writeUInt16BE(e.layer||0,28),r.writeUInt16BE(e.alternateGroup||0,30),r.writeUInt16BE(e.volume||0,32),f(e.matrix,r,36),r.writeUInt32BE(e.trackWidth||0,72),r.writeUInt32BE(e.trackHeight||0,76),n.tkhd.encode.bytes=80,r},n.tkhd.decode=function(e,t){return e=e.slice(t),{ctime:c(e,0),mtime:c(e,4),trackId:e.readUInt32BE(8),duration:e.readUInt32BE(16),layer:e.readUInt16BE(28),alternateGroup:e.readUInt16BE(30),volume:e.readUInt16BE(32),matrix:d(e.slice(36,72)),trackWidth:e.readUInt32BE(72),trackHeight:e.readUInt32BE(76)}},n.tkhd.encodingLength=function(){return 80},n.mdhd={},n.mdhd.encode=function(e,r,i){return r=r?r.slice(i):new t(20),o(e.ctime||new Date,r,0),o(e.mtime||new Date,r,4),r.writeUInt32BE(e.timeScale||0,8),r.writeUInt32BE(e.duration||0,12),r.writeUInt16BE(e.language||0,16),r.writeUInt16BE(e.quality||0,18),n.mdhd.encode.bytes=20,r},n.mdhd.decode=function(e,t){return e=e.slice(t),{ctime:c(e,0),mtime:c(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),language:e.readUInt16BE(16),quality:e.readUInt16BE(18)}},n.mdhd.encodingLength=function(){return 20},n.vmhd={},n.vmhd.encode=function(e,r,i){r=r?r.slice(i):new t(8),r.writeUInt16BE(e.graphicsMode||0,0);var o=e.opcolor||[0,0,0];return r.writeUInt16BE(o[0],2),r.writeUInt16BE(o[1],4),r.writeUInt16BE(o[2],6),n.vmhd.encode.bytes=8,r},n.vmhd.decode=function(e,t){return e=e.slice(t),{graphicsMode:e.readUInt16BE(0),opcolor:[e.readUInt16BE(2),e.readUInt16BE(4),e.readUInt16BE(6)]}},n.vmhd.encodingLength=function(){return 8},n.smhd={},n.smhd.encode=function(e,r,o){return r=r?r.slice(o):new t(4),r.writeUInt16BE(e.balance||0,0),i(r,2,4),n.smhd.encode.bytes=4,r},n.smhd.decode=function(e,t){return e=e.slice(t),{balance:e.readUInt16BE(0)}},n.smhd.encodingLength=function(){return 4},n.stsd={},n.stsd.encode=function(e,r,i){r=r?r.slice(i):new t(n.stsd.encodingLength(e));var o=e.entries||[];r.writeUInt32BE(o.length,0);for(var s=4,a=0,u;a<o.length;a++)u=o[a],y.encode(u,r,s),s+=y.encode.bytes;return n.stsd.encode.bytes=s,r},n.stsd.decode=function(e,t,r){e=e.slice(t);for(var n=e.readUInt32BE(0),i=Array(n),o=4,s=0,a;s<n;s++)a=y.decode(e,o,r),i[s]=a,o+=a.length;return{entries:i}},n.stsd.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var r=0;r<e.entries.length;r++)t+=y.encodingLength(e.entries[r]);return t},n.avc1=n.VisualSampleEntry={},n.VisualSampleEntry.encode=function(e,r,o){r=r?r.slice(o):new t(n.VisualSampleEntry.encodingLength(e)),i(r,0,6),r.writeUInt16BE(e.dataReferenceIndex||0,6),i(r,8,24),r.writeUInt16BE(e.width||0,24),r.writeUInt16BE(e.height||0,26),r.writeUInt32BE(e.hResolution||4718592,28),r.writeUInt32BE(e.vResolution||4718592,32),i(r,36,40),r.writeUInt16BE(e.frameCount||1,40);var s=e.compressorName||"",a=u(s.length,31);r.writeUInt8(a,42),r.write(s,43,a,"utf8"),r.writeUInt16BE(e.depth||24,74),r.writeInt16BE(-1,76);var f=78,l=e.children||[];l.forEach(function(e){y.encode(e,r,f),f+=y.encode.bytes}),n.VisualSampleEntry.encode.bytes=f},n.VisualSampleEntry.decode=function(e,t,r){e=e.slice(t);for(var n=r-t,i=u(e.readUInt8(42),31),o={dataReferenceIndex:e.readUInt16BE(6),width:e.readUInt16BE(24),height:e.readUInt16BE(26),hResolution:e.readUInt32BE(28),vResolution:e.readUInt32BE(32),frameCount:e.readUInt16BE(40),compressorName:e.toString("utf8",43,43+i),depth:e.readUInt16BE(74),children:[]},s=78;8<=n-s;){var a=y.decode(e,s,n);o.children.push(a),o[a.type]=a,s+=a.length}return o},n.VisualSampleEntry.encodingLength=function(e){var t=78,r=e.children||[];return r.forEach(function(e){t+=y.encodingLength(e)}),t},n.avcC={},n.avcC.encode=function(e,r,i){r=r?r.slice(i):t(e.buffer.length),e.buffer.copy(r),n.avcC.encode.bytes=e.buffer.length},n.avcC.decode=function(e,r,n){return e=e.slice(r,n),{mimeCodec:e.toString("hex",1,4),buffer:new t(e)}},n.avcC.encodingLength=function(e){return e.buffer.length},n.mp4a=n.AudioSampleEntry={},n.AudioSampleEntry.encode=function(e,r,o){r=r?r.slice(o):new t(n.AudioSampleEntry.encodingLength(e)),i(r,0,6),r.writeUInt16BE(e.dataReferenceIndex||0,6),i(r,8,16),r.writeUInt16BE(e.channelCount||2,16),r.writeUInt16BE(e.sampleSize||16,18),i(r,20,24),r.writeUInt32BE(e.sampleRate||0,24);var s=28,a=e.children||[];a.forEach(function(e){y.encode(e,r,s),s+=y.encode.bytes}),n.AudioSampleEntry.encode.bytes=s},n.AudioSampleEntry.decode=function(e,t,r){e=e.slice(t,r);for(var n=r-t,i={dataReferenceIndex:e.readUInt16BE(6),channelCount:e.readUInt16BE(16),sampleSize:e.readUInt16BE(18),sampleRate:e.readUInt32BE(24),children:[]},o=28;8<=n-o;){var s=y.decode(e,o,n);i.children.push(s),i[s.type]=s,o+=s.length}return i},n.AudioSampleEntry.encodingLength=function(e){var t=28,r=e.children||[];return r.forEach(function(e){t+=y.encodingLength(e)}),t},n.esds={},n.esds.encode=function(e,r,i){r=r?r.slice(i):t(e.buffer.length),e.buffer.copy(r,0),n.esds.encode.bytes=e.buffer.length},n.esds.decode=function(e,r,n){e=e.slice(r,n);var i=_.Descriptor.decode(e,0,e.length),o="ESDescriptor"===i.tagName?i:{},s=o.DecoderConfigDescriptor||{},a=s.oti||0,u=s.DecoderSpecificInfo,f=u?(248&u.buffer.readUInt8(0))>>3:0,l=null;return a&&(l=a.toString(16),f&&(l+="."+f)),{mimeCodec:l,buffer:new t(e.slice(0))}},n.esds.encodingLength=function(e){return e.buffer.length},n.stsz={},n.stsz.encode=function(e,r,i){var o=e.entries||[];r=r?r.slice(i):t(n.stsz.encodingLength(e)),r.writeUInt32BE(0,0),r.writeUInt32BE(o.length,4);for(var s=0;s<o.length;s++)r.writeUInt32BE(o[s],4*s+8);return n.stsz.encode.bytes=8+4*o.length,r},n.stsz.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=e.readUInt32BE(4),i=Array(n),o=0;o<n;o++)i[o]=0===r?e.readUInt32BE(4*o+8):r;return{entries:i}},n.stsz.encodingLength=function(e){return 8+4*e.entries.length},n.stss=n.stco={},n.stco.encode=function(e,r,i){var o=e.entries||[];r=r?r.slice(i):new t(n.stco.encodingLength(e)),r.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++)r.writeUInt32BE(o[s],4*s+4);return n.stco.encode.bytes=4+4*o.length,r},n.stco.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=Array(r),i=0;i<r;i++)n[i]=e.readUInt32BE(4*i+4);return{entries:n}},n.stco.encodingLength=function(e){return 4+4*e.entries.length},n.stts={},n.stts.encode=function(e,r,i){var o=e.entries||[];r=r?r.slice(i):new t(n.stts.encodingLength(e)),r.writeUInt32BE(o.length,0);for(var s=0,a;s<o.length;s++)a=8*s+4,r.writeUInt32BE(o[s].count||0,a),r.writeUInt32BE(o[s].duration||0,a+4);return n.stts.encode.bytes=4+8*e.entries.length,r},n.stts.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=Array(r),i=0,o;i<r;i++)o=8*i+4,n[i]={count:e.readUInt32BE(o),duration:e.readUInt32BE(o+4)};return{entries:n}},n.stts.encodingLength=function(e){return 4+8*e.entries.length},n.ctts={},n.ctts.encode=function(e,r,i){var o=e.entries||[];r=r?r.slice(i):new t(n.ctts.encodingLength(e)),r.writeUInt32BE(o.length,0);for(var s=0,a;s<o.length;s++)a=8*s+4,r.writeUInt32BE(o[s].count||0,a),r.writeUInt32BE(o[s].compositionOffset||0,a+4);return n.ctts.encode.bytes=4+8*o.length,r},n.ctts.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=Array(r),i=0,o;i<r;i++)o=8*i+4,n[i]={count:e.readUInt32BE(o),compositionOffset:e.readInt32BE(o+4)};return{entries:n}},n.ctts.encodingLength=function(e){return 4+8*e.entries.length},n.stsc={},n.stsc.encode=function(e,r,i){var o=e.entries||[];r=r?r.slice(i):new t(n.stsc.encodingLength(e)),r.writeUInt32BE(o.length,0);for(var s=0,a;s<o.length;s++)a=12*s+4,r.writeUInt32BE(o[s].firstChunk||0,a),r.writeUInt32BE(o[s].samplesPerChunk||0,a+4),r.writeUInt32BE(o[s].sampleDescriptionId||0,a+8);return n.stsc.encode.bytes=4+12*o.length,r},n.stsc.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=Array(r),i=0,o;i<r;i++)o=12*i+4,n[i]={firstChunk:e.readUInt32BE(o),samplesPerChunk:e.readUInt32BE(o+4),sampleDescriptionId:e.readUInt32BE(o+8)};return{entries:n}},n.stsc.encodingLength=function(e){return 4+12*e.entries.length},n.dref={},n.dref.encode=function(e,r,i){r=r?r.slice(i):new t(n.dref.encodingLength(e));var o=e.entries||[];r.writeUInt32BE(o.length,0);for(var s=4,a=0;a<o.length;a++){var u=o[a],f=(u.buf?u.buf.length:0)+4+4;r.writeUInt32BE(f,s),s+=4,r.write(u.type,s,4,"ascii"),s+=4,u.buf&&(u.buf.copy(r,s),s+=u.buf.length)}return n.dref.encode.bytes=s,r},n.dref.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=Array(r),i=4,o=0;o<r;o++){var s=e.readUInt32BE(i),a=e.toString("ascii",i+4,i+8),u=e.slice(i+8,i+s);i+=s,n[o]={type:a,buf:u}}return{entries:n}},n.dref.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var r=0,n;r<e.entries.length;r++)n=e.entries[r].buf,t+=(n?n.length:0)+4+4;return t},n.elst={},n.elst.encode=function(e,r,i){var o=e.entries||[];r=r?r.slice(i):new t(n.elst.encodingLength(e)),r.writeUInt32BE(o.length,0);for(var a=0,u;a<o.length;a++)u=12*a+4,r.writeUInt32BE(o[a].trackDuration||0,u),r.writeUInt32BE(o[a].mediaTime||0,u+4),s(o[a].mediaRate||0,r,u+8);return n.elst.encode.bytes=4+12*o.length,r},n.elst.decode=function(e,t){e=e.slice(t);for(var r=e.readUInt32BE(0),n=Array(r),i=0,o;i<r;i++)o=12*i+4,n[i]={trackDuration:e.readUInt32BE(o),mediaTime:e.readInt32BE(o+4),mediaRate:p(e,o+8)};return{entries:n}},n.elst.encodingLength=function(e){return 4+12*e.entries.length},n.hdlr={},n.hdlr.encode=function(e,r,i){r=r?r.slice(i):new t(n.hdlr.encodingLength(e));var o=21+(e.name||"").length;return r.fill(0,0,o),r.write(e.handlerType||"",4,4,"ascii"),l(e.name||"",r,20),n.hdlr.encode.bytes=o,r},n.hdlr.decode=function(e,t,r){return e=e.slice(t),{handlerType:e.toString("ascii",4,8),name:g(e,20,r)}},n.hdlr.encodingLength=function(e){return 21+(e.name||"").length},n.mehd={},n.mehd.encode=function(e,r,i){return r=r?r.slice(i):new t(4),r.writeUInt32BE(e.fragmentDuration||0,0),n.mehd.encode.bytes=4,r},n.mehd.decode=function(e,t){return e=e.slice(t),{fragmentDuration:e.readUInt32BE(0)}},n.mehd.encodingLength=function(){return 4},n.trex={},n.trex.encode=function(e,r,i){return r=r?r.slice(i):new t(20),r.writeUInt32BE(e.trackId||0,0),r.writeUInt32BE(e.defaultSampleDescriptionIndex||0,4),r.writeUInt32BE(e.defaultSampleDuration||0,8),r.writeUInt32BE(e.defaultSampleSize||0,12),r.writeUInt32BE(e.defaultSampleFlags||0,16),n.trex.encode.bytes=20,r},n.trex.decode=function(e,t){return e=e.slice(t),{trackId:e.readUInt32BE(0),defaultSampleDescriptionIndex:e.readUInt32BE(4),defaultSampleDuration:e.readUInt32BE(8),defaultSampleSize:e.readUInt32BE(12),defaultSampleFlags:e.readUInt32BE(16)}},n.trex.encodingLength=function(){return 20},n.mfhd={},n.mfhd.encode=function(e,r,i){return r=r?r.slice(i):new t(4),r.writeUInt32BE(e.sequenceNumber||0,0),n.mfhd.encode.bytes=4,r},n.mfhd.decode=function(e){return{sequenceNumber:e.readUint32BE(0)}},n.mfhd.encodingLength=function(){return 4},n.tfhd={},n.tfhd.encode=function(e,r,i){return r=r?r.slice(i):new t(4),r.writeUInt32BE(e.trackId,0),n.tfhd.encode.bytes=4,r},n.tfhd.decode=function(){},n.tfhd.encodingLength=function(){return 4},n.tfdt={},n.tfdt.encode=function(e,r,i){return r=r?r.slice(i):new t(4),r.writeUInt32BE(e.baseMediaDecodeTime||0,0),n.tfdt.encode.bytes=4,r},n.tfdt.decode=function(){},n.tfdt.encodingLength=function(){return 4},n.trun={},n.trun.encode=function(e,r,i){r=r?r.slice(i):new t(8+16*e.entries.length),r.writeUInt32BE(e.entries.length,0),r.writeInt32BE(e.dataOffset,4);for(var o=8,s=0,a;s<e.entries.length;s++)a=e.entries[s],r.writeUInt32BE(a.sampleDuration,o),o+=4,r.writeUInt32BE(a.sampleSize,o),o+=4,r.writeUInt32BE(a.sampleFlags,o),o+=4,r.writeUInt32BE(a.sampleCompositionTimeOffset,o),o+=4;n.trun.encode.bytes=o},n.trun.decode=function(){},n.trun.encodingLength=function(e){return 8+16*e.entries.length},n.mdat={},n.mdat.encode=function(e,t,r){e.buffer?(e.buffer.copy(t,r),n.mdat.encode.bytes=e.buffer.length):n.mdat.encode.bytes=n.mdat.encodingLength(e)},n.mdat.decode=function(e,r,n){return{buffer:new t(e.slice(r,n))}},n.mdat.encodingLength=function(e){return e.buffer?e.buffer.length:e.contentLength}}).call(this,e("buffer").Buffer)},{"./descriptor":55,"./index":56,buffer:27}],55:[function(e,t,r){(function(e){var t={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};r.Descriptor={},r.Descriptor.decode=function(n,i,o){var s=n.readUInt8(i),a=i+1,u=0,f;do{f=n.readUInt8(a++),u=u<<7|127&f}while(128&f);var l=t[s],d;return d=r[l]?r[l].decode(n,a,o):{buffer:new e(n.slice(a,a+u))},d.tag=s,d.tagName=l,d.length=a-i+u,d.contentsLen=u,d},r.DescriptorArray={},r.DescriptorArray.decode=function(e,n,i){for(var o=n,s={};o+2<=i;){var a=r.Descriptor.decode(e,o,i);o+=a.length;var u=t[a.tag]||"Descriptor"+a.tag;s[u]=a}return s},r.ESDescriptor={},r.ESDescriptor.decode=function(e,t,n){var i=e.readUInt8(t+2),o=t+3;if(128&i&&(o+=2),64&i){var s=e.readUInt8(o);o+=s+1}return 32&i&&(o+=2),r.DescriptorArray.decode(e,o,n)},r.DecoderConfigDescriptor={},r.DecoderConfigDescriptor.decode=function(e,t,n){var i=e.readUInt8(t),o=r.DescriptorArray.decode(e,t+13,n);return o.oti=i,o}}).call(this,e("buffer").Buffer)},{buffer:27}],56:[function(e,t,r){(function(t){var n=e("uint64be"),i=e("./boxes"),o=4294967295,s=r,a=r.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","trun","sbgps","sgpds","subss","saizs","saios","tfdt","meta"]};s.encode=function(e,r,n){return s.encodingLength(e),n=n||0,r=r||new t(e.length),s._encode(e,r,n)},s._encode=function(e,t,r){var u=e.type,f=e.length;f>o&&(f=1),t.writeUInt32BE(f,r),t.write(e.type,r+4,4,"ascii");var l=r+8;if(1===f&&(n.encode(e.length,t,l),l+=8),i.fullBoxes[u]&&(t.writeUInt32BE(e.flags||0,l),t.writeUInt8(e.version||0,l),l+=4),a[u]){var d=a[u];d.forEach(function(r){if(5===r.length){var n=e[r]||[];r=r.substr(0,4),n.forEach(function(e){s._encode(e,t,l),l+=s.encode.bytes})}else e[r]&&(s._encode(e[r],t,l),l+=s.encode.bytes)}),e.otherBoxes&&e.otherBoxes.forEach(function(e){s._encode(e,t,l),l+=s.encode.bytes})}else if(i[u]){var c=i[u].encode;c(e,t,l),l+=c.bytes}else if(e.buffer){var p=e.buffer;p.copy(t,l),l+=e.buffer.length}else throw new Error("Either `type` must be set to a known type (not'"+u+"') or `buffer` must be set");return s.encode.bytes=l-r,t},s.readHeaders=function(e,t,r){if(t=t||0,r=r||e.length,8>r-t)return 8;var o=e.readUInt32BE(t),s=e.toString("ascii",t+4,t+8),a=t+8;if(1===o){if(16>r-t)return 16;o=n.decode(e,a),a+=8}var u,f;return i.fullBoxes[s]&&(u=e.readUInt8(a),f=16777215&e.readUInt32BE(a),a+=4),{length:o,headersLen:a-t,contentLen:o-(a-t),type:s,version:u,flags:f}},s.decode=function(e,t,r){t=t||0,r=r||e.length;var n=s.readHeaders(e,t,r);if(!n||n.length>r-t)throw new Error("Data too short");return s.decodeWithoutHeaders(n,e,t+n.headersLen,t+n.length)},s.decodeWithoutHeaders=function(e,r,n,o){n=n||0,o=o||r.length;var u=e.type,f={};if(a[u]){f.otherBoxes=[];for(var l=a[u],d=n,c;8<=o-d;)if(c=s.decode(r,d,o),d+=c.length,0<=l.indexOf(c.type))f[c.type]=c;else if(0<=l.indexOf(c.type+"s")){var p=c.type+"s",h=f[p]=f[p]||[];h.push(c)}else f.otherBoxes.push(c)}else if(i[u]){var g=i[u].decode;f=g(r,n,o)}else f.buffer=new t(r.slice(n,o));return f.length=e.length,f.contentLen=e.contentLen,f.type=e.type,f.version=e.version,f.flags=e.flags,f},s.encodingLength=function(e){var t=e.type,r=8;if(i.fullBoxes[t]&&(r+=4),a[t]){var n=a[t];n.forEach(function(t){if(5===t.length){var n=e[t]||[];t=t.substr(0,4),n.forEach(function(e){e.type=t,r+=s.encodingLength(e)})}else if(e[t]){var i=e[t];i.type=t,r+=s.encodingLength(i)}}),e.otherBoxes&&e.otherBoxes.forEach(function(e){r+=s.encodingLength(e)})}else if(i[t])r+=i[t].encodingLength(e);else if(e.buffer)r+=e.buffer.length;else throw new Error("Either `type` must be set to a known type (not'"+t+"') or `buffer` must be set");return r>o&&(r+=8),e.length=r,r}}).call(this,e("buffer").Buffer)},{"./boxes":54,buffer:27,uint64be:121}],57:[function(e,t){(function(r){function n(){return this instanceof n?void(o.Writable.call(this),this.destroyed=!1,this._pending=0,this._missing=0,this._buf=null,this._str=null,this._cb=null,this._ondrain=null,this._writeBuffer=null,this._writeCb=null,this._ondrain=null,this._kick()):new n}function i(e){this._parent=e,this.destroyed=!1,o.PassThrough.call(this)}var o=e("readable-stream"),s=e("inherits"),a=e("next-event"),u=e("mp4-box-encoding"),f=new r(0);t.exports=n,s(n,o.Writable),n.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))},n.prototype._write=function(e,t,r){if(!this.destroyed){for(var n=!this._str||!this._str._writableState.needDrain;e.length&&!this.destroyed;){if(!this._missing)return this._writeBuffer=e,void(this._writeCb=r);var i=e.length<this._missing?e.length:this._missing;if(this._buf?e.copy(this._buf,this._buf.length-this._missing):this._str&&(n=this._str.write(i===e.length?e:e.slice(0,i))),this._missing-=i,!this._missing){var o=this._buf,s=this._cb,a=this._str;this._buf=this._cb=this._str=this._ondrain=null,n=!0,a&&a.end(),s&&s(o)}e=i===e.length?f:e.slice(i)}return this._pending&&!this._missing?(this._writeBuffer=e,void(this._writeCb=r)):void(n?r():this._ondrain(r))}},n.prototype._buffer=function(e,t){this._missing=e,this._buf=new r(e),this._cb=t},n.prototype._stream=function(e,t){var r=this;return this._missing=e,this._str=new i(this),this._ondrain=a(this._str,"drain"),this._pending++,this._str.on("end",function(){r._pending--,r._kick()}),this._cb=t,this._str},n.prototype._readBox=function(){function e(n,i){t._buffer(n,function(n){i=i?r.concat([i,n]):n;var o=u.readHeaders(i);"number"==typeof o?e(o-i.length,i):(t._pending++,t._headers=o,t.emit("box",o))})}var t=this;e(8)},n.prototype.stream=function(){var e=this;if(!e._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=e._headers;return e._headers=null,e._stream(t.contentLen,null)},n.prototype.decode=function(e){var t=this;if(!t._headers)throw new Error("this function can only be called once after 'box' is emitted");var r=t._headers;t._headers=null,t._buffer(r.contentLen,function(n){var i=u.decodeWithoutHeaders(r,n);e(i),t._pending--,t._kick()})},n.prototype.ignore=function(){var e=this;if(!e._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=e._headers;e._headers=null,this._missing=t.contentLen,this._cb=function(){e._pending--,e._kick()}},n.prototype._kick=function(){if(!this._pending&&(this._buf||this._str||this._readBox(),this._writeBuffer)){var e=this._writeCb,t=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(t,null,e)}},s(i,o.PassThrough),i.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}).call(this,e("buffer").Buffer)},{buffer:27,inherits:44,"mp4-box-encoding":56,"next-event":62,"readable-stream":86}],58:[function(e,t){(function(r,n){function i(){}function o(){if(!(this instanceof o))return new o;a.Readable.call(this),this.destroyed=!1,this._reading=!1,this._stream=null,this._drain=null,this._want=!1,this._onreadable=function(){e._want&&(e._want=!1,e._read())},this._onend=function(){e._stream=null};var e=this}function s(e){this._parent=e,this.destroyed=!1,a.PassThrough.call(this)}var a=e("readable-stream"),u=e("inherits"),f=e("mp4-box-encoding");t.exports=o,u(o,a.Readable),o.prototype.mediaData=o.prototype.mdat=function(e,t){var r=new s(this);return this.box({type:"mdat",contentLength:e,encodeBufferLen:8,stream:r},t),r},o.prototype.box=function(e,t){if(t||(t=i),this.destroyed)return t(new Error("Encoder is destroyed"));var o;if(e.encodeBufferLen&&(o=new n(e.encodeBufferLen)),e.stream)e.buffer=null,o=f.encode(e,o),this.push(o),this._stream=e.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",t),this._forward();else{o=f.encode(e,o);var s=this.push(o);if(s)return r.nextTick(t);this._drain=t}},o.prototype.destroy=function(e){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var t=this._drain
;this._drain=null,t(e)}e&&this.emit("error",e),this.emit("close")}},o.prototype.finalize=function(){this.push(null)},o.prototype._forward=function(){if(this._stream)for(;!this.destroyed;){var e=this._stream.read();if(!e)return void(this._want=!!this._stream);if(!this.push(e))return}},o.prototype._read=function(){if(!(this._reading||this.destroyed)){if(this._reading=!0,this._stream&&this._forward(),this._drain){var e=this._drain;this._drain=null,e()}this._reading=!1}},u(s,a.PassThrough),s.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}).call(this,e("_process"),e("buffer").Buffer)},{_process:69,buffer:27,inherits:44,"mp4-box-encoding":56,"readable-stream":86}],59:[function(e,t,r){r.decode=e("./decode"),r.encode=e("./encode")},{"./decode":57,"./encode":58}],60:[function(e,t){function n(e){if(e+="",!(100<e.length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();return"years"===n||"year"===n||"yrs"===n||"yr"===n||"y"===n?r*c:"days"===n||"day"===n||"d"===n?r*d:"hours"===n||"hour"===n||"hrs"===n||"hr"===n||"h"===n?r*l:"minutes"===n||"minute"===n||"mins"===n||"min"===n||"m"===n?r*f:"seconds"===n||"second"===n||"secs"===n||"sec"===n||"s"===n?r*u:"milliseconds"===n||"millisecond"===n||"msecs"===n||"msec"===n||"ms"===n?r:void 0}}}function i(e){var t=Math.round;return e>=d?t(e/d)+"d":e>=l?t(e/l)+"h":e>=f?t(e/f)+"m":e>=u?t(e/u)+"s":e+"ms"}function o(e){return a(e,d,"day")||a(e,l,"hour")||a(e,f,"minute")||a(e,u,"second")||e+" ms"}function a(e,t,n){return e<t?void 0:e<1.5*t?r(e/t)+" "+n:s(e/t)+" "+n+"s"}var u=1e3,f=60*u,l=60*f,d=24*l,c=365.25*d;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"==r&&0<e.length)return n(e);if("number"==r&&!1===isNaN(e))return t.long?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],61:[function(e,t){function r(e,t){var i=this;return i instanceof r?void(o.Readable.call(i,t),i.destroyed=!1,i._drained=!1,i._forwarding=!1,i._current=null,"function"==typeof e?i._queue=e:(i._queue=e.map(n),i._queue.forEach(function(e){"function"!=typeof e&&i._attachErrorListener(e)})),i._next()):new r(e,t)}function n(e){if(!e||"function"==typeof e||e._readableState)return e;var t=(new o.Readable).wrap(e);return e.destroy&&(t.destroy=e.destroy.bind(e)),t}t.exports=r;var i=e("inherits"),o=e("readable-stream");i(r,o.Readable),r.obj=function(e){return new r(e,{objectMode:!0,highWaterMark:16})},r.prototype._read=function(){this._drained=!0,this._forward()},r.prototype._forward=function(){if(!this._forwarding&&this._drained&&this._current){this._forwarding=!0;for(var e;null!==(e=this._current.read());)this._drained=this.push(e);this._forwarding=!1}},r.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach(function(e){e.destroy&&e.destroy()}),e&&this.emit("error",e),this.emit("close"))},r.prototype._next=function(){var e=this;if(e._current=null,"function"==typeof e._queue)e._queue(function(t,r){return t?e.destroy(t):void(r=n(r),e._attachErrorListener(r),e._gotNextStream(r))});else{var t=e._queue.shift();"function"==typeof t&&(t=n(t()),e._attachErrorListener(t)),e._gotNextStream(t)}},r.prototype._gotNextStream=function(e){function t(){i._forward()}function r(){e._readableState.ended||i.destroy()}function n(){i._current=null,e.removeListener("readable",t),e.removeListener("end",n),e.removeListener("close",r),i._next()}var i=this;return e?void(i._current=e,i._forward(),e.on("readable",t),e.once("end",n),e.once("close",r)):(i.push(null),void i.destroy())},r.prototype._attachErrorListener=function(e){function t(n){e.removeListener("error",t),r.destroy(n)}var r=this;e&&e.once("error",t)}},{inherits:44,"readable-stream":86}],62:[function(e,t){t.exports=function(e,t){var r=null;return e.on(t,function(e){if(r){var t=r;r=null,t(e)}}),function(e){r=e}}},{}],63:[function(e,t){function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function n(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var i=e("wrappy");t.exports=i(r),t.exports.strict=i(n),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})})},{wrappy:132}],64:[function(e,t){(function(r){function n(e){r.isBuffer(e)&&(e=a.decode(e)),s(e.info,"info"),s(e.info["name.utf-8"]||e.info.name,"info.name"),s(e.info["piece length"],"info['piece length']"),s(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach(function(e){s("number"==typeof e.length,"info.files[0].length"),s(e["path.utf-8"]||e.path,"info.files[0].path")}):s("number"==typeof e.info.length,"info.length");var t={};t.info=e.info,t.infoBuffer=a.encode(e.info),t.infoHash=f.sync(t.infoBuffer),t.infoHashBuffer=r.from(t.infoHash,"hex"),t.name=(e.info["name.utf-8"]||e.info.name).toString(),void 0!==e.info.private&&(t.private=!!e.info.private),e["creation date"]&&(t.created=new Date(1e3*e["creation date"])),e["created by"]&&(t.createdBy=e["created by"].toString()),r.isBuffer(e.comment)&&(t.comment=e.comment.toString()),t.announce=[],e["announce-list"]&&e["announce-list"].length?e["announce-list"].forEach(function(e){e.forEach(function(e){t.announce.push(e.toString())})}):e.announce&&t.announce.push(e.announce.toString()),r.isBuffer(e["url-list"])&&(e["url-list"]=0<e["url-list"].length?[e["url-list"]]:[]),t.urlList=(e["url-list"]||[]).map(function(e){return e.toString()}),l(t.announce),l(t.urlList);var n=e.info.files||[e.info];t.files=n.map(function(e,r){var o=[].concat(t.name,e["path.utf-8"]||e.path||[]).map(function(e){return e.toString()});return{path:u.join.apply(null,[u.sep].concat(o)).slice(1),name:o[o.length-1],length:e.length,offset:n.slice(0,r).reduce(i,0)}}),t.length=n.reduce(i,0);var d=t.files[t.files.length-1];return t.pieceLength=e.info["piece length"],t.lastPieceLength=(d.offset+d.length)%t.pieceLength||t.pieceLength,t.pieces=o(e.info.pieces),t}function i(e,t){return e+t.length}function o(e){for(var t=[],r=0;r<e.length;r+=20)t.push(e.slice(r,r+20).toString("hex"));return t}function s(e,t){if(!e)throw new Error("Torrent is missing required field: "+t)}t.exports=n,t.exports.decode=n,t.exports.encode=function(e){var t={info:e.info};return t["announce-list"]=(e.announce||[]).map(function(e){return t.announce||(t.announce=e),e=r.from(e,"utf8"),[e]}),t["url-list"]=e.urlList||[],e.created&&(t["creation date"]=0|e.created.getTime()/1e3),e.createdBy&&(t["created by"]=e.createdBy),e.comment&&(t.comment=e.comment),a.encode(t)};var a=e("bencode"),u=e("path"),f=e("simple-sha1"),l=e("uniq")}).call(this,e("buffer").Buffer)},{bencode:11,buffer:27,path:66,"simple-sha1":100,uniq:122}],65:[function(e,t){(function(r,n){function i(e){if("string"==typeof e&&/^(stream-)?magnet:/.test(e))return f(e);if("string"==typeof e&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e)))return f("magnet:?xt=urn:btih:"+e);if(n.isBuffer(e)&&20===e.length)return f("magnet:?xt=urn:btih:"+e.toString("hex"));if(n.isBuffer(e))return l(e);if(e&&e.infoHash)return e.announce||(e.announce=[]),"string"==typeof e.announce&&(e.announce=[e.announce]),e.urlList||(e.urlList=[]),e;throw new Error("Invalid torrent identifier")}function o(e){return"undefined"!=typeof Blob&&e instanceof Blob}t.exports=i,t.exports.remote=function(e,t){function n(e){try{f=i(e)}catch(e){return t(e)}f&&f.infoHash?t(null,f):t(new Error("Invalid torrent identifier"))}var f;if("function"!=typeof t)throw new Error("second argument must be a Function");try{f=i(e)}catch(e){}f&&f.infoHash?r.nextTick(function(){t(null,f)}):o(e)?s(e,function(e,r){return e?t(new Error("Error converting Blob: "+e.message)):void n(r)}):"function"==typeof u&&/^https?:/.test(e)?u.concat({url:e,timeout:3e4,headers:{"user-agent":"WebTorrent (http://webtorrent.io)"}},function(e,r,i){return e?t(new Error("Error downloading torrent: "+e.message)):void n(i)}):"function"==typeof a.readFile&&"string"==typeof e?a.readFile(e,function(e,r){return e?t(new Error("Invalid torrent identifier")):void n(r)}):r.nextTick(function(){t(new Error("Invalid torrent identifier"))})};var s=e("blob-to-buffer"),a=e("fs"),u=e("simple-get"),f=e("magnet-uri"),l=e("parse-torrent-file");t.exports.toMagnetURI=f.encode,t.exports.toTorrentFile=l.encode;(function(){n.alloc(0)})()}).call(this,e("_process"),e("buffer").Buffer)},{_process:69,"blob-to-buffer":23,buffer:27,fs:26,"magnet-uri":51,"parse-torrent-file":64,"simple-get":96}],66:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1,i;0<=n;n--)i=e[n],"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--);if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1,s;-1<=o&&!i;o--){if(s=0<=o?arguments[o]:e.cwd(),"string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");else if(!s)continue;r=s+"/"+r,i="/"===s.charAt(0)}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),o="/"===s(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),s=u(i.length,o.length),a=s,f=0;f<s;f++)if(i[f]!==o[f]){a=f;break}for(var l=[],f=a;f<i.length;f++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o(e)[3]};var s=function(e,t,r){return e.substr(t,r)}}).call(this,e("_process"))},{_process:69}],67:[function(e,r){for(var n=e("closest-to"),i=1024,o=13,s=[];22>o++;)s.push(t(2,o));r.exports=function(e){return n(e/i,s)}},{"closest-to":30}],68:[function(e,t){(function(e){"use strict";t.exports=e.version&&0!==e.version.indexOf("v0.")&&(0!==e.version.indexOf("v1.")||0===e.version.indexOf("v1.8."))?e.nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o=arguments.length,s,a;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(s=Array(o-1),a=0;a<s.length;)s[a++]=arguments[a];return e.nextTick(function(){t.apply(null,s)})}}}).call(this,e("_process"))},{_process:69}],69:[function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function s(){h&&y&&(h=!1,y.length?p=y.concat(p):g=-1,p.length&&a())}function a(){if(!h){var e=i(s);h=!0;for(var t=p.length;t;){for(y=p,p=[];++g<t;)y&&y[g].run();g=-1,t=p.length}y=null,h=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function f(){}var l=t.exports={},d,c;(function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}})();var p=[],h=!1,g=-1,y;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new u(e,t)),1!==p.length||h||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=f,l.addListener=f,l.once=f,l.off=f,l.removeListener=f,l.removeAllListeners=f,l.emit=f,l.prependListener=f,l.prependOnceListener=f,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],70:[function(e,t){var r=e("once"),n=e("end-of-stream"),i=e("fs"),o=function(){},s=function(e){return"function"==typeof e},a=function(e){return!!i&&(e instanceof(i.ReadStream||o)||e instanceof(i.WriteStream||o))&&s(e.close)},u=function(e){return e.setHeader&&s(e.abort)},f=function(e,t,i,o){o=r(o);var f=!1;e.on("close",function(){f=!0}),n(e,{readable:t,writable:i},function(e){return e?o(e):void(f=!0,o())});var l=!1;return function(t){if(!f)return l?void 0:(l=!0,a(e)?e.close():u(e)?e.abort():s(e.destroy)?e.destroy():void o(t||new Error("stream was destroyed")))}},l=function(e){e()},d=function(e,t){return e.pipe(t)};t.exports=function(){var e=Array.prototype.slice.call(arguments),t=s(e[e.length-1]||o)&&e.pop()||o;if(Array.isArray(e[0])&&(e=e[0]),2>e.length)throw new Error("pump requires two streams per minimum");var r=e.map(function(i,o){var s=o<e.length-1;return f(i,s,0<o,function(e){n||(n=e),e&&r.forEach(l),s||(r.forEach(l),t(n))})}),n;return e.reduce(d)}},{"end-of-stream":36,fs:25,once:63}],71:[function(e,t,i){(function(e){(function(n){function s(e){throw new RangeError(x[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";1<r.length&&(n=r[0]+"@",e=r[1]),e=e.replace(B,".");var i=e.split("."),o=a(i,t).join(".");return n+o}function l(e){for(var t=[],r=0,n=e.length,i,o;r<n;)i=e.charCodeAt(r++),55296<=i&&56319>=i&&r<n?(o=e.charCodeAt(r++),56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)):t.push(i);return t}function d(e){return a(e,function(e){var t="";return 65535<e&&(e-=65536,t+=P(55296|1023&e>>>10),e=56320|1023&e),t+=P(e),t}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:w}function p(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,r){var n=0;for(e=r?R(e/A):e>>1,e+=R(e/t);e>D*T>>1;n+=w)e=R(e/D);return R(n+(D+1)*e/(e+E))}function g(e){var t=[],r=e.length,n=0,i=C,o=I,a,u,f,l,p,g,y,_,m,v;for(u=e.lastIndexOf(k),0>u&&(u=0),f=0;f<u;++f)128<=e.charCodeAt(f)&&s("not-basic"),t.push(e.charCodeAt(f));for(l=0<u?u+1:0;l<r;){for(p=n,g=1,y=w;;y+=w){if(l>=r&&s("invalid-input"),_=c(e.charCodeAt(l++)),(_>=w||_>R((b-n)/g))&&s("overflow"),n+=_*g,m=y<=o?S:y>=o+T?T:y-o,_<m)break;v=w-m,g>R(b/v)&&s("overflow"),g*=v}a=t.length+1,o=h(n-p,a,0==p),R(n/a)>b-i&&s("overflow"),i+=R(n/a),n%=a,t.splice(n++,0,i)}return d(t)}function y(e){var t=[],r,n,i,o,a,u,f,d,c,g,y,_,m,v,E;for(e=l(e),_=e.length,r=C,n=0,a=I,u=0;u<_;++u)y=e[u],128>y&&t.push(P(y));for(i=o=t.length,o&&t.push(k);i<_;){for(f=b,u=0;u<_;++u)y=e[u],y>=r&&y<f&&(f=y);for(m=i+1,f-r>R((b-n)/m)&&s("overflow"),n+=(f-r)*m,r=f,u=0;u<_;++u)if(y=e[u],y<r&&++n>b&&s("overflow"),y==r){for(d=n,c=w;;c+=w){if(g=c<=a?S:c>=a+T?T:c-a,d<g)break;E=d-g,v=w-g,t.push(P(p(g+E%v,0))),d=R(E/v)}t.push(P(p(d,0))),a=h(n,m,i==o),n=0,++i}++n,++r}return t.join("")}var _="object"==typeof i&&i&&!i.nodeType&&i,m="object"==typeof t&&t&&!t.nodeType&&t,v="object"==typeof e&&e;(v.global===v||v.window===v||v.self===v)&&(n=v);var b=2147483647,w=36,S=1,T=26,E=38,A=700,I=72,C=128,k="-",j=/^xn--/,O=/[^\x20-\x7E]/,B=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=w-S,R=r,P=o,M,L;if(M={version:"1.4.1",ucs2:{decode:l,encode:d},decode:g,encode:y,toASCII:function(e){return u(e,function(e){return O.test(e)?"xn--"+y(e):e})},toUnicode:function(e){return u(e,function(e){return j.test(e)?g(e.slice(4).toLowerCase()):e})}},"function"==typeof f&&"object"==typeof f.amd&&f.amd)f("punycode",function(){return M});else if(!(_&&m))n.punycode=M;else if(t.exports==_)m.exports=M;else for(L in M)M.hasOwnProperty(L)&&(_[L]=M[L])})(this)}).call(this,"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{}],72:[function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,o){t=t||"&",i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var f=e.length;0<u&&f>u&&(f=u);for(var l=0;l<f;++l){var d=e[l].replace(a,"%20"),c=d.indexOf(i),p,h,g,y;0<=c?(p=d.substr(0,c),h=d.substr(c+1)):(p=d,h=""),g=decodeURIComponent(p),y=decodeURIComponent(h),r(s,g)?n(s[g])?s[g].push(y):s[g]=[s[g],y]:s[g]=y}return s};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],73:[function(e,t){"use strict";function r(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,s,a){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?r(o(e),function(o){var a=encodeURIComponent(n(o))+s;return i(e[o])?r(e[o],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[o]))}).join(t):a?encodeURIComponent(n(a))+s+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],74:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":72,"./encode":73}],75:[function(e,t){t.exports=function(e){var t=0;return function(){if(t===e.length)return null;var r=e.length-t,n=0|Math.random()*r,i=e[t+n],o=e[t];return e[t]=i,e[t+n]=o,t++,i}}},{}],76:[function(e,t){(function(r,n){"use strict";var i=e("safe-buffer").Buffer,o=n.crypto||n.msCrypto;t.exports=o&&o.getRandomValues?function(e,t){if(65536<e)throw new Error("requested too many random bytes");var s=new n.Uint8Array(e);0<e&&o.getRandomValues(s);var a=i.from(s.buffer);return"function"==typeof t?r.nextTick(function(){t(null,a)}):a}:function(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}).call(this,e("_process"),"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{_process:69,"safe-buffer":94}],77:[function(e,t){function r(e,t){var n=this;return n instanceof r?void(i.Writable.call(n,t),n.destroyed=!1,n._queue=[],n._position=e||0,n._cb=null,n._buffer=null,n._out=null):new r(e)}var n=e("inherits"),i=e("readable-stream");t.exports=r,n(r,i.Writable),r.prototype._write=function(e,t,r){for(var n=this,i=!0;;){if(n.destroyed)return;if(0===n._queue.length)return n._buffer=e,void(n._cb=r);n._buffer=null;var o=n._queue[0],s=a(o.start-n._position,0),u=o.end-n._position;if(s>=e.length)return n._position+=e.length,r(null);var f;if(u>e.length){n._position+=e.length,f=0===s?e:e.slice(s),i=o.stream.write(f)&&i;break}n._position+=u,f=0===s&&u===e.length?e:e.slice(s,u),i=o.stream.write(f)&&i,o.last&&o.stream.end(),e=e.slice(u),n._queue.shift()}i?r(null):o.stream.once("drain",r.bind(null,null))},r.prototype.slice=function(e){var t=this;if(t.destroyed)return null;e instanceof Array||(e=[e]);var r=new i.PassThrough;return e.forEach(function(n,i){t._queue.push({start:n.start,end:n.end,stream:r,last:i===e.length-1})}),t._buffer&&t._write(t._buffer,null,t._cb),r},r.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,e&&t.emit("error",e))}},{inherits:44,"readable-stream":86}],78:[function(e,t){"use strict";function r(e){return this instanceof r?void(u.call(this,e),f.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",n)):new r(e)}function n(){this.allowHalfOpen||this._writableState.ended||o(i,this)}function i(e){e.end()}var o=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=r;var a=e("core-util-is");a.inherits=e("inherits");var u=e("./_stream_readable"),f=e("./_stream_writable");a.inherits(r,u);for(var l=s(f.prototype),d=0,c;d<l.length;d++)c=l[d],r.prototype[c]||(r.prototype[c]=f.prototype[c]);Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),o(t,e)}},{"./_stream_readable":80,"./_stream_writable":82,"core-util-is":31,inherits:44,"process-nextick-args":68}],79:[function(e,t){"use strict";function r(e){return this instanceof r?void n.call(this,e):new r(e)}t.exports=r;var n=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(r,n),r.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":81,"core-util-is":31,inherits:44}],80:[function(e,t){(function(n,i){"use strict";function o(e){return N.from(e)}function s(e){return N.isBuffer(e)||e instanceof F}function a(e,t,r){return"function"==typeof e.prependListener?e.prependListener(t,r):void(e._events&&e._events[t]?R(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r))}function u(t,n){P=P||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof P&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=r(this.highWaterMark),this.buffer=new q,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!G&&(G=e("string_decoder/").StringDecoder),this.decoder=new G(t.encoding),this.encoding=t.encoding)}function f(t){return P=P||e("./_stream_duplex"),this instanceof f?void(this._readableState=new u(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),U.call(this)):new f(t)}function l(e,t,r,n,i){var s=e._readableState;if(null===t)s.reading=!1,y(e,s);else{var a;i||(a=c(s,t)),a?e.emit("error",a):s.objectMode||t&&0<t.length?("string"!=typeof t&&!s.objectMode&&Object.getPrototypeOf(t)!==N.prototype&&(t=o(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):d(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?d(e,s,t,!1):v(e,s)):d(e,s,t,!1))):!n&&(s.reading=!1)}return p(s)}function d(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&_(e)),v(e,t)}function c(e,t){var r;return s(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function p(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=X?e=X:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function g(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function y(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,_(e)}}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(V("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?D(m,e):m(e))}function m(e){V("emit readable"),e.emit("readable"),A(e)}function v(e,t){t.readingMore||(t.readingMore=!0,D(b,e,t))}function b(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(V("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function w(e){return function(){var t=e._readableState;V("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&L(e,"data")&&(t.flowing=!0,A(e))}}function S(e){V("readable nexttick read 0"),e.read(0)}function T(e,t){t.resumeScheduled||(t.resumeScheduled=!0,D(E,e,t))}function E(e,t){t.reading||(V("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(V("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=C(e,t.buffer,t.decoder),r}function C(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?k(e,t):j(e,t),n}function k(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(i+=s===o.length?o:o.slice(0,e),e-=s,0===e){s===o.length?(++n,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}function j(e,t){var r=N.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),e-=s,0===e){s===o.length?(++i,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}function O(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,D(B,t,e))}function B(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function x(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var D=e("process-nextick-args");t.exports=f;var R=e("isarray"),P;f.ReadableState=u;var M=e("events").EventEmitter,L=function(e,t){return e.listeners(t).length},U=e("./internal/streams/stream"),N=e("safe-buffer").Buffer,F=i.Uint8Array||function(){},W=e("core-util-is");W.inherits=e("inherits");var H=e("util"),V;V=H&&H.debuglog?H.debuglog("stream"):function(){};var q=e("./internal/streams/BufferList"),z=e("./internal/streams/destroy"),G;W.inherits(f,U);var $=["error","close","destroy","pause","resume"];Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),f.prototype.destroy=z.destroy,f.prototype._undestroy=z.undestroy,f.prototype._destroy=function(e,t){this.push(null),t(e)},f.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=N.from(e,t),t=""),n=!0),l(this,e,t,!1,n)},f.prototype.unshift=function(e){return l(this,e,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(t){return G||(G=e("string_decoder/").StringDecoder),this._readableState.decoder=new G(t),this._readableState.encoding=t,this};var X=8388608;f.prototype.read=function(e){V("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return V("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):_(this),null;if(e=g(e,t),0===e&&t.ended)return 0===t.length&&O(this),null;var n=t.needReadable;V("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,V("length less than watermark",n)),t.ended||t.reading?(n=!1,V("reading or ended",n)):n&&(V("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=g(r,t)));var i;return i=0<e?I(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(!t.ended&&(t.needReadable=!0),r!==e&&t.ended&&O(this)),null!==i&&this.emit("data",i),i},f.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(e,t){function r(e,t){V("onunpipe"),e===c&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){V("onend"),e.end()}function o(){V("cleanup"),e.removeListener("close",f),e.removeListener("finish",l),e.removeListener("drain",y),e.removeListener("error",u),e.removeListener("unpipe",r),c.removeListener("end",i),c.removeListener("end",d),c.removeListener("data",s),_=!0,p.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&y()}function s(t){V("ondata"),m=!1;var r=e.write(t);!1!==r||m||((1===p.pipesCount&&p.pipes===e||1<p.pipesCount&&-1!==x(p.pipes,e))&&!_&&(V("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,m=!0),c.pause())}function u(t){V("onerror",t),d(),e.removeListener("error",u),0===L(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",l),d()}function l(){V("onfinish"),e.removeListener("close",f),d()}function d(){V("unpipe"),c.unpipe(e)}var c=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,V("pipe count=%d opts=%j",p.pipesCount,t);var h=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,g=h?i:d;p.endEmitted?D(g):c.once("end",g),e.on("unpipe",r);var y=w(c);e.on("drain",y);var _=!1,m=!1;return c.on("data",s),a(e,"error",u),e.once("close",f),e.once("finish",l),e.emit("pipe",c),p.flowing||(V("pipe resume"),c.resume()),e},f.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=x(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},f.prototype.on=function(e,t){var r=U.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&_(this):D(S,this))}return r},f.prototype.addListener=f.prototype.on,f.prototype.resume=function(){var e=this._readableState;return e.flowing||(V("resume"),e.flowing=!0,
T(this,e)),this},f.prototype.pause=function(){return V("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(V("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",function(){if(V("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if((V("wrapped data"),t.decoder&&(i=t.decoder.write(i)),!(t.objectMode&&(null===i||void 0===i)))&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<$.length;o++)e.on($[o],n.emit.bind(n,$[o]));return n._read=function(t){V("wrapped _read",t),r&&(r=!1,e.resume())},n},f._fromList=I}).call(this,e("_process"),"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{"./_stream_duplex":78,"./internal/streams/BufferList":83,"./internal/streams/destroy":84,"./internal/streams/stream":85,_process:69,"core-util-is":31,events:37,inherits:44,isarray:49,"process-nextick-args":68,"safe-buffer":94,"string_decoder/":112,util:25}],81:[function(e,t){"use strict";function r(e){this.afterTransform=function(t,r){return n(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function n(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==r&&r!==void 0&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){o(t,e,r)}):o(t)})}function o(e,t,r){if(t)return e.emit("error",t);null!==r&&r!==void 0&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(e,t){var r=this;s.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},{"./_stream_duplex":78,"core-util-is":31,inherits:44}],82:[function(e,t){(function(n,i){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){C(t,e)}}function s(e){return R.from(e)}function a(e){return R.isBuffer(e)||e instanceof P}function u(){}function f(t,n){O=O||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof O&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:s,this.highWaterMark=r(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(t){return O=O||e("./_stream_duplex"),L.call(l,this)||this instanceof O?void(this._writableState=new f(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),D.call(this)):new l(t)}function d(e,t){var r=new Error("write after end");e.emit("error",r),k(t,r)}function c(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"!=typeof r&&void 0!==r&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),k(n,o),i=!1),i}function p(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=R.from(t,r)),t}function h(e,t,r,n,i,o){if(!r){var s=p(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,a,n,i,o);return u}function g(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function y(e,t,r,n,i){--t.pendingcb,r?(k(i,n),k(A,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),A(e,t))}function _(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(_(r),t)y(e,r,n,t,i);else{var o=S(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?j(v,e,r,o,i):v(e,r,o,i)}}function v(e,t,r,n){r||b(e,t),t.pendingcb--,n(),A(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,g(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t)}else{for(;r;){var f=r.chunk,l=r.encoding,d=r.callback,c=t.objectMode?1:f.length;if(g(e,t,!1,c,f,l,d),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),A(e,t)})}function E(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,k(T,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function A(e,t){var r=S(t);return r&&(E(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function I(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?k(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function C(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var k=e("process-nextick-args");t.exports=l;var j=!n.browser&&-1<["v0.10","v0.9."].indexOf(n.version.slice(0,5))?setImmediate:k,O;l.WritableState=f;var B=e("core-util-is");B.inherits=e("inherits");var x={deprecate:e("util-deprecate")},D=e("./internal/streams/stream"),R=e("safe-buffer").Buffer,P=i.Uint8Array||function(){},M=e("./internal/streams/destroy");B.inherits(l,D),f.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(f.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var L;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!L.call(this,e)||e&&e._writableState instanceof f}})):L=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=a(e)&&!n.objectMode;return o&&!R.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":!t&&(t=n.defaultEncoding),"function"!=typeof r&&(r=u),n.ended?d(this,r):(o||c(this,n,e,r))&&(n.pendingcb++,i=h(this,n,o,e,t,r)),i},l.prototype.cork=function(){var e=this._writableState;e.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&w(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},l.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==void 0&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||I(this,n,r)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=M.destroy,l.prototype._undestroy=M.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{"./_stream_duplex":78,"./internal/streams/destroy":84,"./internal/streams/stream":85,_process:69,"core-util-is":31,inherits:44,"process-nextick-args":68,"safe-buffer":94,"util-deprecate":129}],83:[function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,r){e.copy(t,r)}var i=e("safe-buffer").Buffer;t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,o=0;r;)n(r.data,t,o),o+=r.data.length,r=r.next;return t},e}()},{"safe-buffer":94}],84:[function(e,t){"use strict";function r(e,t){e.emit("error",t)}var n=e("process-nextick-args");t.exports={destroy:function(e,t){var i=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?void(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&n(r,this,e)):void(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n(r,i,e),i._writableState&&(i._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":68}],85:[function(e,t){t.exports=e("events").EventEmitter},{events:37}],86:[function(e,t,r){r=t.exports=e("./lib/_stream_readable.js"),r.Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":78,"./lib/_stream_passthrough.js":79,"./lib/_stream_readable.js":80,"./lib/_stream_transform.js":81,"./lib/_stream_writable.js":82}],87:[function(e,t,r){function n(e,t,r,n){function o(){E.removeEventListener("loadstart",o),r.autoplay&&E.play()}function a(){E.removeEventListener("canplay",a),n(null,E)}function c(){E=t("iframe"),i(e,function(e,t){return e?b(e):void(E.src=t,".pdf"!==S&&(E.sandbox="allow-forms allow-scripts"),n(null,E))})}function b(t){t.message='Error rendering file "'+e.name+'": '+t.message,u(t.message),n(t)}var S=d.extname(e.name).toLowerCase(),T=0,E;0<=y.indexOf(S)?function(){function n(){u("Use MediaSource API for "+e.name),y(),E.addEventListener("error",c),E.addEventListener("loadstart",o),E.addEventListener("canplay",a);var t=new l(E),r=t.createWriteStream(s(e.name));e.createReadStream().pipe(r),T&&(E.currentTime=T)}function f(){u("Use Blob URL for "+e.name),y(),E.addEventListener("error",b),E.addEventListener("loadstart",o),E.addEventListener("canplay",a),i(e,function(e,t){return e?b(e):void(E.src=t,T&&(E.currentTime=T))})}function d(e){u("videostream error: fallback to MediaSource API: %o",e.message||e),E.removeEventListener("error",d),E.removeEventListener("canplay",a),n()}function c(t){return u("MediaSource API error: fallback to Blob URL: %o",t.message||t),"number"==typeof e.length&&e.length>r.maxBlobLength?(u("File length too large for Blob URL approach: %d (max: %d)",e.length,r.maxBlobLength),b(new Error("File length too large for Blob URL approach: "+e.length+" (max: "+r.maxBlobLength+")"))):void(E.removeEventListener("error",c),E.removeEventListener("canplay",a),f())}function y(){E||(E=t(_),E.addEventListener("progress",function(){T=E.currentTime}))}var _=0<=g.indexOf(S)?"video":"audio";w?0<=h.indexOf(S)?function(){u("Use `videostream` package for "+e.name),y(),E.addEventListener("error",d),E.addEventListener("loadstart",o),E.addEventListener("canplay",a),p(e,E)}():n():f()}():0<=_.indexOf(S)?function(){E=t("audio"),i(e,function(e,t){return e?b(e):void(E.addEventListener("error",b),E.addEventListener("loadstart",o),E.addEventListener("canplay",a),E.src=t)})}():0<=m.indexOf(S)?function(){E=t("img"),i(e,function(t,r){return t?b(t):void(E.src=r,E.alt=e.name,n(null,E))})}():0<=v.indexOf(S)?c():function(){u('Unknown file extension "%s" - will attempt to render into iframe',S);var t="";e.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",function(e){t+=e}).on("end",function(){f(t)?(u('File extension "%s" appears ascii, so will render.',S),c()):(u('File extension "%s" appears non-ascii, will not render.',S),n(new Error('Unsupported file type "'+S+'": Cannot append to DOM')))}).on("error",n)}()}function i(e,t){var n=d.extname(e.name).toLowerCase();c(e.createReadStream(),r.mime[n],t)}function o(e){if(null==e)throw new Error("file cannot be null or undefined");if("string"!=typeof e.name)throw new Error("missing or invalid file.name property");if("function"!=typeof e.createReadStream)throw new Error("missing or invalid file.createReadStream property")}function s(e){var t=d.extname(e).toLowerCase();return{".m4a":'audio/mp4; codecs="mp4a.40.5"',".m4v":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".mkv":'video/webm; codecs="avc1.640029, mp4a.40.5"',".mp3":"audio/mpeg",".mp4":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".webm":'video/webm; codecs="vorbis, vp8"'}[t]}function a(e){null==e.autoplay&&(e.autoplay=!0),null==e.controls&&(e.controls=!0),null==e.maxBlobLength&&(e.maxBlobLength=b)}r.render=function(e,t,r,i){"function"==typeof r&&(i=r,r={}),r||(r={}),i||(i=function(){}),o(e),a(r),"string"==typeof t&&(t=document.querySelector(t)),n(e,function(r){if(t.nodeName!==r.toUpperCase()){var n=d.extname(e.name).toLowerCase();throw new Error('Cannot render "'+n+'" inside a "'+t.nodeName.toLowerCase()+'" element, expected "'+r+'"')}return t},r,i)},r.append=function(e,t,r,i){function s(e){var n=u(e);return r.controls&&(n.controls=!0),r.autoplay&&(n.autoplay=!0),t.appendChild(n),n}function u(e){var r=document.createElement(e);return t.appendChild(r),r}if("function"==typeof r&&(i=r,r={}),r||(r={}),i||(i=function(){}),o(e),a(r),"string"==typeof t&&(t=document.querySelector(t)),t&&("VIDEO"===t.nodeName||"AUDIO"===t.nodeName))throw new Error("Invalid video/audio node argument. Argument must be root element that video/audio tag will be appended to.");n(e,function(e){return"video"===e||"audio"===e?s(e):u(e)},r,function(e,t){e&&t&&t.remove(),i(e,t)})},r.mime=e("./lib/mime.json");var u=e("debug")("render-media"),f=e("is-ascii"),l=e("mediasource"),d=e("path"),c=e("stream-to-blob-url"),p=e("videostream"),h=[".m4a",".m4v",".mp4"],g=[".m4v",".mkv",".mp4",".webm"],y=[].concat(g,[".m4a",".mp3"]),_=[".aac",".oga",".ogg",".wav"],m=[".bmp",".gif",".jpeg",".jpg",".png",".svg"],v=[".css",".html",".js",".md",".pdf",".txt"],b=2e8,w="undefined"!=typeof window&&window.MediaSource},{"./lib/mime.json":88,debug:89,"is-ascii":45,mediasource:52,path:66,"stream-to-blob-url":109,videostream:131}],88:[function(e,t){t.exports={".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/mp4",".m4v":"video/mp4",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"}},{}],89:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{"./debug":90,_process:69,dup:15}],90:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{dup:16,ms:60}],91:[function(e,t){(function(e){t.exports=function(t,r,n){function i(t){function r(){n&&n(t,a),n=null}s?e.nextTick(r):r()}function o(e,r,n){if(a[e]=n,r&&(d=!0),0==--f||r)i(r);else if(!d&&c<u){var s;l?(s=l[c],c+=1,t[s](function(e,t){o(s,e,t)})):(s=c,c+=1,t[s](function(e,t){o(s,e,t)}))}}if("number"!=typeof r)throw new Error("second argument must be a Number");var s=!0,a,u,f,l,d;Array.isArray(t)?(a=[],f=u=t.length):(l=Object.keys(t),a={},f=u=l.length);var c=r;f?l?l.some(function(e,n){if(t[e](function(t,r){o(e,t,r)}),n===r-1)return!0}):t.some(function(e,t){if(e(function(e,r){o(t,e,r)}),t===r-1)return!0}):i(null),s=!1}}).call(this,e("_process"))},{_process:69}],92:[function(e,t){(function(e){t.exports=function(t,r){function n(t){function n(){r&&r(t,s),r=null}o?e.nextTick(n):n()}function i(e,t,r){s[e]=r,(0==--a||t)&&n(t)}var o=!0,s,a,u;Array.isArray(t)?(s=[],a=t.length):(u=Object.keys(t),s={},a=u.length),a?u?u.forEach(function(e){t[e](function(t,r){i(e,t,r)})}):t.forEach(function(e,t){e(function(e,r){i(t,e,r)})}):n(null),o=!1}}).call(this,e("_process"))},{_process:69}],93:[function(e,t){(function(e){(function(){function r(e){"use strict";for(var t={fill:0},o=function(e){for(e+=9;0<e%64;e+=1);return e},s=function(e,t){var r=new Uint8Array(e.buffer),n=t%4,i=t-n;switch(n){case 0:r[i+3]=0;case 1:r[i+2]=0;case 2:r[i+1]=0;case 3:r[i+0]=0}for(var o=(t>>2)+1;o<e.length;o++)e[o]=0},a=function(e,t,r){e[t>>2]|=128<<24-(t%4<<3),e[(-16&(t>>2)+2)+14]=0|r/536870912,e[(-16&(t>>2)+2)+15]=r<<3},f=function(e,t,r,n,i){var o=this,s=i%4,a=(n+s)%4,u=n-a,f;switch(s){case 0:e[i]=o.charCodeAt(r+3);case 1:e[0|i+1-(s<<1)]=o.charCodeAt(r+2);case 2:e[0|i+2-(s<<1)]=o.charCodeAt(r+1);case 3:e[0|i+3-(s<<1)]=o.charCodeAt(r)}if(!(n<a+s)){for(f=4-s;f<u;f=0|f+4)t[i+f>>2]=o.charCodeAt(r+f)<<24|o.charCodeAt(r+f+1)<<16|o.charCodeAt(r+f+2)<<8|o.charCodeAt(r+f+3);switch(a){case 3:e[0|i+u+1]=o.charCodeAt(r+u+2);case 2:e[0|i+u+2]=o.charCodeAt(r+u+1);case 1:e[0|i+u+3]=o.charCodeAt(r+u)}}},l=function(e,t,r,n,i){var o=this,s=i%4,a=(n+s)%4,u=n-a,f;switch(s){case 0:e[i]=o[r+3];case 1:e[0|i+1-(s<<1)]=o[r+2];case 2:e[0|i+2-(s<<1)]=o[r+1];case 3:e[0|i+3-(s<<1)]=o[r]}if(!(n<a+s)){for(f=4-s;f<u;f=0|f+4)t[0|i+f>>2]=o[r+f]<<24|o[r+f+1]<<16|o[r+f+2]<<8|o[r+f+3];switch(a){case 3:e[0|i+u+1]=o[r+u+2];case 2:e[0|i+u+2]=o[r+u+1];case 1:e[0|i+u+3]=o[r+u]}}},d=function(e,t,r,n,o){var s=this,a=o%4,u=(n+a)%4,f=n-u,l=new Uint8Array(i.readAsArrayBuffer(s.slice(r,r+n))),d;switch(a){case 0:e[o]=l[3];case 1:e[0|o+1-(a<<1)]=l[2];case 2:e[0|o+2-(a<<1)]=l[1];case 3:e[0|o+3-(a<<1)]=l[0]}if(!(n<u+a)){for(d=4-a;d<f;d=0|d+4)t[0|o+d>>2]=l[d]<<24|l[d+1]<<16|l[d+2]<<8|l[d+3];switch(u){case 3:e[0|o+f+1]=l[f+2];case 2:e[0|o+f+2]=l[f+1];case 1:e[0|o+f+3]=l[f]}}},c=function(e){switch(n.getDataType(e)){case"string":return f.bind(e);case"array":return l.bind(e);case"buffer":return l.bind(e);case"arraybuffer":return l.bind(new Uint8Array(e));case"view":return l.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return d.bind(e)}},p=Array(256),h=0;256>h;h++)p[h]=(16>h?"0":"")+h.toString(16);var g=function(e){for(var t=new Uint8Array(e),r=Array(e.byteLength),n=0;n<r.length;n++)r[n]=p[t[n]];return r.join("")},y=function(e){var t;if(65536>=e)return 65536;if(16777216>e)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t};(function(e){if(0<e%64)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=o(e),t.heap=new ArrayBuffer(y(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new r._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null})(e||65536);var _=function(e,r){t.offset=0;var n=new Int32Array(e,r+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},m=function(e,r){var n=o(e),i=new Int32Array(t.heap,0,n>>2);return s(i,e),a(i,e,r),n},v=function(e,r,n,i){c(e)(t.h8,t.h32,r,n,i||0)},b=function(e,r,n,i,o){var s=n;v(e,r,n),o&&(s=m(n,i)),t.core.hash(s,t.padMaxChunkLen)},w=function(e,t){var r=new Int32Array(e,t+320,5),n=new Int32Array(5),i=new DataView(n.buffer);return i.setInt32(0,r[0],!1),i.setInt32(4,r[1],!1),i.setInt32(8,r[2],!1),i.setInt32(12,r[3],!1),i.setInt32(16,r[4],!1),n},S=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;_(t.heap,t.padMaxChunkLen);var n=0,i=t.maxChunkLen;for(n=0;r>n+i;n+=i)b(e,n,i,r,!1);return b(e,n,r-n,r,!0),w(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return g(S(e).buffer)},this.resetState=function(){return _(t.heap,t.padMaxChunkLen),this},this.append=function(e){var r=0,n=e.byteLength||e.length||e.size||0,i=t.offset%t.maxChunkLen,o;for(t.offset+=n;r<n;)o=u(n-r,t.maxChunkLen-i),v(e,r,o,i),i+=o,r+=o,i===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),i=0);return this},this.getState=function(){var e=t.offset%t.maxChunkLen,r;if(!e){var n=new Int32Array(t.heap,t.padMaxChunkLen+320,5);r=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}else r=t.heap.slice(0);return{offset:t.offset,heap:r}},this.setState=function(e){if(t.offset=e.offset,20===e.heap.byteLength){var r=new Int32Array(t.heap,t.padMaxChunkLen+320,5);r.set(new Int32Array(e.heap))}else t.h32.set(new Int32Array(e.heap));return this};var T=this.rawEnd=function(){var e=t.offset,r=e%t.maxChunkLen,n=m(r,e);t.core.hash(n,t.padMaxChunkLen);var i=w(t.heap,t.padMaxChunkLen);return _(t.heap,t.padMaxChunkLen),i};this.end=function(){return g(T().buffer)}}var n={getDataType:function(t){if("string"==typeof t)return"string";if(t instanceof Array)return"array";if("undefined"!=typeof e&&e.Buffer&&e.Buffer.isBuffer(t))return"buffer";if(t instanceof ArrayBuffer)return"arraybuffer";if(t.buffer instanceof ArrayBuffer)return"view";if(t instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(r._core=function(e,t,r){"use asm";var n=new e.Int32Array(r);return{hash:function(e,t){e|=0,t|=0;var r=0,i=0,o=0,s=0,a=0,u=0,f=0,l=0,d=0,c=0,p=0,h=0,g=0,y=0;for(o=0|n[t+320>>2],a=0|n[t+324>>2],f=0|n[t+328>>2],d=0|n[t+332>>2],p=0|n[t+336>>2],r=0;(0|r)<(0|e);r=0|r+64){for(s=o,u=a,l=f,c=d,h=p,i=0;64>(0|i);i=0|i+4)y=0|n[r+i>>2],g=0|(0|(o<<5|o>>>27)+(a&f|~a&d))+(0|(0|y+p)+1518500249),p=d,d=f,f=a<<30|a>>>2,a=o,o=g,n[e+i>>2]=y;for(i=0|e+64;(0|i)<(0|e+80);i=0|i+4)y=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31,g=0|(0|(o<<5|o>>>27)+(a&f|~a&d))+(0|(0|y+p)+1518500249),p=d,d=f,f=a<<30|a>>>2,a=o,o=g,n[i>>2]=y;for(i=0|e+80;(0|i)<(0|e+160);i=0|i+4)y=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31,g=0|(0|(o<<5|o>>>27)+(a^f^d))+(0|(0|y+p)+1859775393),p=d,d=f,f=a<<30|a>>>2,a=o,o=g,n[i>>2]=y;for(i=0|e+160;(0|i)<(0|e+240);i=0|i+4)y=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31,g=0|(0|(o<<5|o>>>27)+(a&f|a&d|f&d))+(0|(0|y+p)-1894007588),p=d,d=f,f=a<<30|a>>>2,a=o,o=g,n[i>>2]=y;for(i=0|e+240;(0|i)<(0|e+320);i=0|i+4)y=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31,g=0|(0|(o<<5|o>>>27)+(a^f^d))+(0|(0|y+p)-899497514),p=d,d=f,f=a<<30|a>>>2,a=o,o=g,n[i>>2]=y;o=0|o+s,a=0|a+u,f=0|f+l,d=0|d+c,p=0|p+h}n[t+320>>2]=o,n[t+324>>2]=a,n[t+328>>2]=f,n[t+332>>2]=d,n[t+336>>2]=p}}},"undefined"==typeof t?"undefined"!=typeof window&&(window.Rusha=r):t.exports=r,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,o=function(e,t,r){try{return r(null,e.digest(t))}catch(t){return r(t)}},s=function(e,t,r,n,i){var o=new self.FileReader;o.onloadend=function(){var a=o.result;t+=o.result.byteLength;try{e.append(a)}catch(e){return void i(e)}t<n.size?s(e,t,r,n,i):i(null,e.end())},o.readAsArrayBuffer(n.slice(t,t+r))};self.onmessage=function(e){var t=e.data.data,n=e.data.file,i=e.data.id;if("undefined"!=typeof i&&(n||t)){var a=e.data.blockSize||4194304,u=new r(a);u.resetState();var f=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&o(u,t,f),n&&s(u,0,a,n,f)}}}})()}).call(this,"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{}],94:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return s(e,t,r)}var o=e("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(n(o,r),r.Buffer=i),n(s,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0===t?n.fill(0):"string"==typeof r?n.fill(t,r):n.fill(t),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:27}],95:[function(e,t){(function(e){t.exports=function(t,r){var n=[];t.on("data",function(e){n.push(e)}),t.once("end",function(){r&&r(null,e.concat(n)),r=null}),t.once("error",function(e){r&&r(e),r=null})}}).call(this,e("buffer").Buffer)},{buffer:27}],96:[function(e,t){(function(r){function n(e,t){e="string"==typeof e?{url:e}:Object.assign({},e),e.headers=Object.assign({},e.headers),t=f(t),e.url&&i(e),null==e.maxRedirects&&(e.maxRedirects=10);var s;e.form&&(s="string"==typeof e.form?e.form:l.stringify(e.form)),e.body&&(s=e.json&&!o(e.body)?JSON.stringify(e.body):e.body),e.json&&(e.headers.accept="application/json"),e.json&&s&&(e.headers["content-type"]="application/json"),e.form&&(e.headers["content-type"]="application/x-www-form-urlencoded"),s&&!o(s)&&(e.headers["content-length"]=r.byteLength(s)),delete e.body,delete e.form,s&&!e.method&&(e.method="POST"),e.method&&(e.method=e.method.toUpperCase());var c=Object.keys(e.headers).some(function(e){return"accept-encoding"===e.toLowerCase()});c||(e.headers["accept-encoding"]="gzip, deflate");var p="https:"===e.protocol?u:a,h=p.request(e,function(r){if(300<=r.statusCode&&400>r.statusCode&&"location"in r.headers)return e.url=r.headers.location,r.resume(),void(0<e.maxRedirects?(e.maxRedirects-=1,n(e,t)):t(new Error("too many redirects")));var i="function"==typeof d&&"HEAD"!==e.method;t(null,i?d(r):r)});return h.on("timeout",function(){h.abort(),t(new Error("Request timed out"))}),h.on("error",t),s&&o(s)?s.on("error",t).pipe(h):h.end(s),h}function i(e){var t=c.parse(e.url);t.hostname&&(e.hostname=t.hostname),t.port&&(e.port=t.port),t.protocol&&(e.protocol=t.protocol),t.auth&&(e.auth=t.auth),e.path=t.path,delete e.url}function o(e){return"function"==typeof e.pipe}t.exports=n;var s=e("simple-concat"),a=e("http"),u=e("https"),f=e("once"),l=e("querystring"),d=e("decompress-response"),c=e("url");n.concat=function(e,t){return n(e,function(r,n){return r?t(r):void s(n,function(r,i){if(r)return t(r);if(e.json)try{i=JSON.parse(i.toString())}catch(e){return t(e,n,i)}t(null,n,i)})})},["get","post","put","patch","head","delete"].forEach(function(e){n[e]=function(t,r){return"string"==typeof t&&(t={url:t}),t.method=e.toUpperCase(),n(t,r)}})}).call(this,e("buffer").Buffer)},{buffer:27,"decompress-response":25,http:105,https:41,once:63,querystring:74,"simple-concat":95,url:124}],97:[function(e,t){(function(r){function n(e){var t=this;if(!(t instanceof n))return new n(e);if(t._id=u(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1},e),f.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||u(20).toString("hex"):null,t._isChromium="undefined"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,
t.channelConfig=e.channelConfig||n.channelConfig,t.config=e.config||n.config,t.constraints=t._transformConstraints(e.constraints||n.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0===e.trickle||e.trickle,t._earlyMessage=null,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:s(),!t._wrtc)if("undefined"==typeof window)throw new Error("No WebRTC support: Specify `opts.wrtc` option in this environment");else throw new Error("No WebRTC support: Not a supported browser");if(t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._previousStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator){var r=!1;t._pc.onnegotiationneeded=function(){r||t._createOffer(),r=!0},t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)})}else t._pc.ondatachannel=function(e){t._setupData(e)};"addTrack"in t._pc?(t.stream&&t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream)}),t._pc.ontrack=function(e){t._onTrack(e)}):(t.stream&&t._pc.addStream(t.stream),t._pc.onaddstream=function(e){t._onAddStream(e)}),t.initiator&&t._isWrtc&&t._pc.onnegotiationneeded(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function i(){}t.exports=n;var o=e("debug")("simple-peer"),s=e("get-browser-rtc"),a=e("inherits"),u=e("randombytes"),f=e("readable-stream"),l=65536;a(n,f.Duplex),n.WEBRTC_SUPPORT=!!s(),n.config={iceServers:[{urls:"stun:112.80.249.198:34780"}]},n.constraints={},n.channelConfig={},Object.defineProperty(n.prototype,"bufferSize",{get:function(){var e=this;return e._channel&&e._channel.bufferedAmount||0}}),n.prototype.address=function(){var e=this;return{port:e.localPort,family:"IPv4",address:e.localAddress}},n.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.candidate&&(t._pc.remoteDescription?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t._destroy(e)}),e.sdp||e.candidate||t._destroy(new Error("signal() called with invalid signal data"))},n.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),i,function(e){t._destroy(e)})}catch(e){t._destroy(new Error("error adding candidate: "+e.message))}},n.prototype.send=function(e){var t=this;t._isWrtc&&r.isBuffer(e)&&(e=new Uint8Array(e)),t._channel.send(e)},n.prototype.destroy=function(e){var t=this;t._destroy(null,e)},n.prototype._destroy=function(e,t){var r=this;if(!r.destroyed){if(t&&r.once("close",t),r._debug("destroy (error: %s)",e&&(e.message||e)),r.readable=r.writable=!1,r._readableState.ended||r.push(null),r._writableState.finished||r.end(),r.destroyed=!0,r.connected=!1,r._pcReady=!1,r._channelReady=!1,r._previousStreams=null,r._earlyMessage=null,clearInterval(r._interval),clearTimeout(r._reconnectTimeout),r._interval=null,r._reconnectTimeout=null,r._chunk=null,r._cb=null,r._onFinishBound&&r.removeListener("finish",r._onFinishBound),r._onFinishBound=null,r._pc){try{r._pc.close()}catch(e){}r._pc.oniceconnectionstatechange=null,r._pc.onicegatheringstatechange=null,r._pc.onsignalingstatechange=null,r._pc.onicecandidate=null,"addTrack"in r._pc?r._pc.ontrack=null:r._pc.onaddstream=null,r._pc.onnegotiationneeded=null,r._pc.ondatachannel=null}if(r._channel){try{r._channel.close()}catch(e){}r._channel.onmessage=null,r._channel.onopen=null,r._channel.onclose=null,r._channel.onerror=null}r._pc=null,r._channel=null,e&&r.emit("error",e),r.emit("close")}},n.prototype._setupData=function(e){var t=this;return e.channel?void(t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=l),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._channelReady?t._onChannelMessage(e):(t._earlyMessage=e,t._onChannelOpen())},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._channelReady||t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t._destroy(e)}):t._destroy(new Error("Data channel event is missing `channel` property"))},n.prototype._read=function(){},n.prototype._write=function(e,t,r){var n=this;if(n.destroyed)return r(new Error("cannot write after peer is destroyed"));if(n.connected){try{n.send(e)}catch(e){return n._destroy(e)}n._channel.bufferedAmount>l?(n._debug("start backpressure: bufferedAmount %d",n._channel.bufferedAmount),n._cb=r):r(null)}else n._debug("write before connect"),n._chunk=e,n._cb=r},n.prototype._onFinish=function(){function e(){setTimeout(function(){t._destroy()},1e3)}var t=this;t.destroyed||(t.connected?e():t.once("connect",e))},n.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){function r(){var r=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:r.type,sdp:r.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){e.destroyed||(e.trickle||e._iceComplete?r():e.once("_iceComplete",r))},function(t){e._destroy(t)}))},function(t){e._destroy(t)},e.offerConstraints)},n.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function r(){var r=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:r.type,sdp:r.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){e.destroyed||(e.trickle||e._iceComplete?r():e.once("_iceComplete",r))},function(t){e._destroy(t)}))},function(t){e._destroy(t)},e.answerConstraints)},n.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,r=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,r),e.emit("iceStateChange",t,r),("connected"===t||"completed"===t)&&(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===t&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"failed"===t&&e._destroy(new Error("Ice connection failed.")),"closed"===t&&e._destroy()}},n.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var r=[];t.forEach(function(e){r.push(e)}),e(null,r)},function(t){e(t)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var r=[];t.forEach(function(e){r.push(e)}),e(null,r)},function(t){e(t)}):0<t._pc.getStats.length?t._pc.getStats(function(t){var r=[];t.result().forEach(function(e){var t={};e.names().forEach(function(r){t[r]=e.stat(r)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,r.push(t)}),e(null,r)},function(t){e(t)}):e(null,[])},n.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady);e.connected||e._connecting||!e._pcReady||!e._channelReady||(e._connecting=!0,e.getStats(function(t,r){function n(t){var r=o[t.localCandidateId];r&&r.ip?(e.localAddress=r.ip,e.localPort=+r.port):r&&r.ipAddress?(e.localAddress=r.ipAddress,e.localPort=+r.portNumber):"string"==typeof t.googLocalAddress&&(r=t.googLocalAddress.split(":"),e.localAddress=r[0],e.localPort=+r[1]);var n=i[t.remoteCandidateId];n&&n.ip?(e.remoteAddress=n.ip,e.remotePort=+n.port):n&&n.ipAddress?(e.remoteAddress=n.ipAddress,e.remotePort=+n.portNumber):"string"==typeof t.googRemoteAddress&&(n=t.googRemoteAddress.split(":"),e.remoteAddress=n[0],e.remotePort=+n[1]),e.remoteFamily="IPv4",e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}if(!e.destroyed){t&&(r=[]),e._connecting=!1,e.connected=!0;var i={},o={},s={};if(r.forEach(function(e){("remotecandidate"===e.type||"remote-candidate"===e.type)&&(i[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(o[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(s[e.id]=e)}),r.forEach(function(e){"transport"===e.type&&n(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&n(e)}),e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var a=e._cb;e._cb=null,a(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect"),e._earlyMessage&&(e._onChannelMessage(e._earlyMessage),e._earlyMessage=null)}}))},n.prototype._onInterval=function(){this._cb&&this._channel&&!(this._channel.bufferedAmount>l)&&this._onChannelBufferedAmountLow()},n.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},n.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&(t._iceComplete=!0,t.emit("_iceComplete")))},n.prototype._onChannelMessage=function(e){var t=this;if(!t.destroyed){var n=e.data;n instanceof ArrayBuffer&&(n=r.from(n)),t.push(n)}},n.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},n.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},n.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e._destroy())},n.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug("on add stream"),t.emit("stream",e.stream))},n.prototype._onTrack=function(e){var t=this;if(!t.destroyed){t._debug("on track");var r=e.streams[0].id;-1!==t._previousStreams.indexOf(r)||(t._previousStreams.push(r),t.emit("stream",e.streams[0]))}},n.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0],o.apply(null,t)},n.prototype._transformConstraints=function(e){var t=this;if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&&!t._isChromium){var r=Object.assign({},e.optional,e.mandatory);return void 0!==r.OfferToReceiveVideo&&(r.offerToReceiveVideo=r.OfferToReceiveVideo,delete r.OfferToReceiveVideo),void 0!==r.OfferToReceiveAudio&&(r.offerToReceiveAudio=r.OfferToReceiveAudio,delete r.OfferToReceiveAudio),r}return e.mandatory||e.optional||!t._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})}}).call(this,e("buffer").Buffer)},{buffer:27,debug:98,"get-browser-rtc":40,inherits:44,randombytes:76,"readable-stream":86}],98:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{"./debug":99,_process:69,dup:15}],99:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{dup:16,ms:60}],100:[function(e,t){function r(e){return s.digest(e)}function n(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function i(e){for(var t=e.length,r=[],n=0,i;n<t;n++)i=e[n],r.push((i>>>4).toString(16)),r.push((15&i).toString(16));return r.join("")}var o=e("rusha"),s=new o,a="undefined"==typeof window?self:window,u=a.crypto||a.msCrypto||{},f=u.subtle||u.webkitSubtle;try{f.digest({name:"sha-1"},new Uint8Array).catch(function(){f=!1})}catch(e){f=!1}t.exports=function(e,t){return f?void("string"==typeof e&&(e=n(e)),f.digest({name:"sha-1"},e).then(function(e){t(i(new Uint8Array(e)))},function(){t(r(e))})):void setTimeout(t,0,r(e))},t.exports.sync=r},{rusha:93}],101:[function(e,t){(function(r){function n(e){var t=this;if(!(t instanceof n))return new n(e);if(e||(e={}),"string"==typeof e&&(e={url:e}),null==e.url&&null==e.socket)throw new Error("Missing required `url` or `socket` option");if(null!=e.url&&null!=e.socket)throw new Error("Must specify either `url` or `socket` option, not both");if(t._id=a(4).toString("hex").slice(0,7),t._debug("new websocket: %o",e),e=Object.assign({allowHalfOpen:!1},e),u.Duplex.call(t,e),t.connected=!1,t.destroyed=!1,t._chunk=null,t._cb=null,t._interval=null,e.socket)t.url=e.socket.url,t._ws=e.socket;else{t.url=e.url;try{t._ws="function"==typeof f?new l(e.url,e):new l(e.url)}catch(e){return void r.nextTick(function(){t._destroy(e)})}}t._ws.binaryType="arraybuffer",t._ws.onopen=function(){t._onOpen()},t._ws.onmessage=function(e){t._onMessage(e)},t._ws.onclose=function(){t._onClose()},t._ws.onerror=function(){t._destroy(new Error("connection error to "+t.url))},t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}t.exports=n;var i=e("safe-buffer").Buffer,o=e("debug")("simple-websocket"),s=e("inherits"),a=e("randombytes"),u=e("readable-stream"),f=e("ws"),l="function"==typeof f?f:WebSocket,d=65536;s(n,u.Duplex),n.WEBSOCKET_SUPPORT=!!l,n.prototype.send=function(e){this._ws.send(e)},n.prototype.destroy=function(e){this._destroy(null,e)},n.prototype._destroy=function(e,t){var r=this;if(!r.destroyed){if(t&&r.once("close",t),r._debug("destroy (error: %s)",e&&(e.message||e)),r.readable=r.writable=!1,r._readableState.ended||r.push(null),r._writableState.finished||r.end(),r.connected=!1,r.destroyed=!0,clearInterval(r._interval),r._interval=null,r._chunk=null,r._cb=null,r._onFinishBound&&r.removeListener("finish",r._onFinishBound),r._onFinishBound=null,r._ws){var n=r._ws,i=function(){n.onclose=null};if(n.readyState===l.CLOSED)i();else try{n.onclose=i,n.close()}catch(e){i()}n.onopen=null,n.onmessage=null,n.onerror=null}r._ws=null,e&&r.emit("error",e),r.emit("close")}},n.prototype._read=function(){},n.prototype._write=function(e,t,r){if(this.destroyed)return r(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(e){return this._destroy(e)}"function"!=typeof f&&this._ws.bufferedAmount>d?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r},n.prototype._onFinish=function(){function e(){setTimeout(function(){t._destroy()},1e3)}var t=this;t.destroyed||(t.connected?e():t.once("connect",e))},n.prototype._onMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=i.from(t)),this.push(t)}},n.prototype._onOpen=function(){var e=this;if(!(e.connected||e.destroyed)){if(e.connected=!0,e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var t=e._cb;e._cb=null,t(null)}"function"!=typeof f&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}},n.prototype._onInterval=function(){if(this._cb&&this._ws&&!(this._ws.bufferedAmount>d)){this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);var e=this._cb;this._cb=null,e(null)}},n.prototype._onClose=function(){this.destroyed||(this._debug("on close"),this._destroy())},n.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],o.apply(null,e)}}).call(this,e("_process"))},{_process:69,debug:102,inherits:44,randombytes:76,"readable-stream":86,"safe-buffer":94,ws:25}],102:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{"./debug":103,_process:69,dup:15}],103:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{dup:16,ms:60}],104:[function(e,t){var r=1,n=65535,i=4,o=setInterval(function(){r=r+1&n},0|1e3/i);o.unref&&o.unref(),t.exports=function(e){var t=i*(e||5),o=[0],s=1,a=r-1&n;return function(e){var u=r-a&n;for(u>t&&(u=t),a=r;u--;)s==t&&(s=0),o[s]=o[0==s?t-1:s-1],s++;e&&(o[s-1]+=e);var f=o[s-1],l=o.length<t?0:o[s==t?0:s];return o.length<i?f:(f-l)*i/o.length}}},{}],105:[function(e,t,r){(function(t){var n=e("./lib/request"),i=e("xtend"),o=e("builtin-status-codes"),s=e("url"),a=r;a.request=function(e,r){e="string"==typeof e?s.parse(e):i(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||o,u=e.hostname||e.host,f=e.port,l=e.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),e.url=(u?a+"//"+u:"")+(f?":"+f:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var d=new n(e);return r&&d.on("response",r),d},a.get=function(e,t){var r=a.request(e,t);return r.end(),r},a.Agent=function(){},a.Agent.defaultMaxSockets=4,a.STATUS_CODES=o,a.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{"./lib/request":107,"builtin-status-codes":28,url:124,xtend:133}],106:[function(e,t,r){(function(e){function t(){if(a!=void 0)return a;if(e.XMLHttpRequest){a=new e.XMLHttpRequest;try{a.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){a=null}}else a=null;return a}function n(e){var r=t();if(!r)return!1;try{return r.responseType=e,r.responseType===e}catch(e){}return!1}function i(e){return"function"==typeof e}r.fetch=i(e.fetch)&&i(e.ReadableStream),r.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),r.blobConstructor=!0}catch(t){}var o="undefined"!=typeof e.ArrayBuffer,s=o&&i(e.ArrayBuffer.prototype.slice),a;r.arraybuffer=r.fetch||o&&n("arraybuffer"),r.msstream=!r.fetch&&s&&n("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&o&&n("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||!!t()&&i(t().overrideMimeType),r.vbArray=i(e.VBArray),a=null}).call(this,"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{}],107:[function(e,t){(function(r,n,i){function o(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}function s(e){try{var t=e.status;return null!==t&&0!==t}catch(t){return!1}}var a=e("./capability"),u=e("inherits"),f=e("./response"),l=e("readable-stream"),d=e("to-arraybuffer"),c=f.IncomingMessage,p=f.readyStates,h=t.exports=function(e){var t=this;l.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new i(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var r=!0,n;if("disable-fetch"===e.mode||"timeout"in e)r=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!a.overrideMimeType;else if(!e.mode||"default"===e.mode||"prefer-fast"===e.mode)n=!0;else throw new Error("Invalid value for opts.mode");t._mode=o(n,r),t.on("finish",function(){t._onFinish()})};u(h,l.Writable),h.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();-1!==g.indexOf(n)||(r._headers[n]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,o=e._headers,s=null;"GET"!==t.method&&"HEAD"!==t.method&&(a.blobConstructor?s=new n.Blob(e._body.map(function(e){return d(e)}),{type:(o["content-type"]||{}).value||""}):s=i.concat(e._body).toString());var u=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,r=o[e].value;Array.isArray(r)?r.forEach(function(e){u.push([t,e])}):u.push([t,r])}),"fetch"===e._mode)n.fetch(e._opts.url,{method:e._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var f=e._xhr=new n.XMLHttpRequest;try{f.open(e._opts.method,e._opts.url,!0)}catch(t){return void r.nextTick(function(){e.emit("error",t)})}"responseType"in f&&(f.responseType=e._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in t&&(f.timeout=t.timeout,f.ontimeout=function(){e.emit("timeout")}),u.forEach(function(e){f.setRequestHeader(e[0],e[1])}),e._response=null,f.onreadystatechange=function(){switch(f.readyState){case p.LOADING:case p.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(f.onprogress=function(){e._onXHRProgress()}),f.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{f.send(s)}catch(t){return void r.nextTick(function(){e.emit("error",t)})}}}},h.prototype._onXHRProgress=function(){var e=this;!s(e._xhr)||e._destroyed||(!e._response&&e._connect(),e._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new c(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},h.prototype._write=function(e,t,r){var n=this;n._body.push(e),r()},h.prototype.abort=h.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},h.prototype.end=function(e,t,r){var n=this;"function"==typeof e&&(r=e,e=void 0),l.Writable.prototype.end.call(n,e,t,r)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,e("_process"),"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n,e("buffer").Buffer)},{"./capability":106,"./response":108,_process:69,buffer:27,inherits:44,"readable-stream":86,"to-arraybuffer":115}],108:[function(e,t,r){(function(t,n,i){var o=e("./capability"),s=e("inherits"),a=e("readable-stream"),u=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},f=r.IncomingMessage=function(e,r,n){var s=this;if(a.Readable.call(s),s._mode=n,s.headers={},s.rawHeaders=[],s.trailers={},s.rawTrailers=[],s.on("end",function(){t.nextTick(function(){s.emit("close")})}),"fetch"===n){function e(){u.read().then(function(t){return s._destroyed?void 0:t.done?void s.push(null):void(s.push(new i(t.value)),e())}).catch(function(e){s.emit("error",e)})}s._fetchResponse=r,s.url=r.url,s.statusCode=r.status,s.statusMessage=r.statusText,r.headers.forEach(function(e,t){s.headers[t.toLowerCase()]=e,s.rawHeaders.push(t,e)});var u=r.body.getReader();e()}else{s._xhr=e,s._pos=0,s.url=e.responseURL,s.statusCode=e.status,s.statusMessage=e.statusText;var f=e.getAllResponseHeaders().split(/\r?\n/);if(f.forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===s.headers[r]&&(s.headers[r]=[]),s.headers[r].push(t[2])):void 0===s.headers[r]?s.headers[r]=t[2]:s.headers[r]+=", "+t[2],s.rawHeaders.push(t[1],t[2])}}),s._charset="x-user-defined",!o.overrideMimeType){var l=s.rawHeaders["mime-type"];if(l){var d=l.match(/;\s*charset=([^;])(;|$)/);d&&(s._charset=d[1].toLowerCase())}s._charset||(s._charset="utf-8")}}};s(f,a.Readable),f.prototype._read=function(){},f.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new n.VBArray(t.responseBody).toArray()}catch(t){}if(null!==r){e.push(new i(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var o=r.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new i(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);e.push(s)}else e.push(o,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new i(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new i(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var f=new n.MSStreamReader;f.onprogress=function(){f.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(f.result.slice(e._pos)))),e._pos=f.result.byteLength)},f.onload=function(){e.push(null)},f.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n,e("buffer").Buffer)},{"./capability":106,_process:69,buffer:27,inherits:44,"readable-stream":86}],109:[function(e,t){var r=e("stream-to-blob");t.exports=function e(t,n,i){return"function"==typeof n?e(t,null,n):void r(t,n,function(e,t){if(e)return i(e);var r=URL.createObjectURL(t);i(null,r)})}},{"stream-to-blob":110}],110:[function(e,t){var r=e("once");t.exports=function e(t,n,i){if("function"==typeof n)return e(t,null,n);i=r(i);var o=[];t.on("data",function(e){o.push(e)}).on("end",function(){var e=n?new Blob(o,{type:n}):new Blob(o);i(null,e)}).on("error",i)}},{once:63}],111:[function(e,t){(function(r){var n=e("once");t.exports=function(e,t,i){i=n(i);var o=new r(t),s=0;e.on("data",function(e){e.copy(o,s),s+=e.length}).on("end",function(){i(null,o)}).on("error",i)}}).call(this,e("buffer").Buffer)},{buffer:27,once:63}],112:[function(e,t,r){"use strict";function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=n(e);if("string"!=typeof t&&(y.isEncoding===_||!_(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=l,this.end=d,t=4;break;case"utf8":this.fillLast=f,t=4;break;case"base64":this.text=c,this.end=p,t=3;break;default:return this.write=h,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(t)}function s(e){if(127>=e)return 0;return 6==e>>5?2:14==e>>4?3:30==e>>3?4:-1}function a(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--n<r?0:(i=s(t[n]),0<=i)?(0<i&&(e.lastNeed=i-2),i):--n<r?0:(i=s(t[n]),0<=i?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0)}function u(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(r);if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(r+1);if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(r+2)}}function f(e){var t=this.lastTotal-this.lastNeed,r=u(this,e,t);return void 0===r?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):r}function l(e,t){if(0==(e.length-t)%2){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(55296<=n&&56319>=n)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var y=e("safe-buffer").Buffer,_=y.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},o.prototype.text=function(e,t){var r=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},{"safe-buffer":94}],113:[function(e,t,r){var n=e("./thirty-two");r.encode=n.encode,r.decode=n.decode},{"./thirty-two":114}],114:[function(e,t,n){(function(e){"use strict";function t(e){var t=r(e.length/5);return 0==e.length%5?t:t+1}var i=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];n.encode=function(r){e.isBuffer(r)||(r=new e(r));for(var n=0,i=0,o=0,s=0,a=new e(8*t(r));n<r.length;){var u=r[n];3<o?(s=u&255>>o,o=(o+5)%8,s=s<<o|(n+1<r.length?r[n+1]:0)>>8-o,n++):(s=31&u>>8-(o+5),o=(o+5)%8,0==o&&n++),a[i]="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charCodeAt(s),i++}for(n=i;n<a.length;n++)a[n]=61;return a},n.decode=function(t){var r=0,n=0,o=0,a;e.isBuffer(t)||(t=new e(t));for(var u=new e(s(5*t.length/8)),f=0;f<t.length&&!(61===t[f]);f++){var l=t[f]-48;if(l<i.length)n=i[l],3>=r?(r=(r+5)%8,0==r?(a|=n,u[o]=a,o++,a=0):a|=255&n<<8-r):(r=(r+5)%8,a|=255&n>>>r,u[o]=a,o++,a=255&n<<8-r);else throw new Error("Invalid input - it is not base32 encoded string")}return u.slice(0,o)}}).call(this,e("buffer").Buffer)},{buffer:27}],115:[function(e,t){var r=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:27}],116:[function(e,t){(function(n){function i(e){function t(e,t){
var n=new s(t);return n.on("warning",r._onWarning),n.on("error",r._onError),n.listen(e),r._internalDHT=!0,n}var r=this;if(!(r instanceof i))return new i(e);if(a.call(r),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!n.browser&&!e.port)throw new Error("Option `port` is required");r.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),r.infoHash="string"==typeof e.infoHash?e.infoHash:e.infoHash.toString("hex"),r._port=e.port,r._userAgent=e.userAgent,r.destroyed=!1,r._announce=e.announce||[],r._intervalMs=e.intervalMs||9e5,r._trackerOpts=null,r._dhtAnnouncing=!1,r._dhtTimeout=!1,r._internalDHT=!1,r._onWarning=function(e){r.emit("warning",e)},r._onError=function(e){r.emit("error",e)},r._onDHTPeer=function(e,t){t.toString("hex")!==r.infoHash||r.emit("peer",e.host+":"+e.port,"dht")},r._onTrackerPeer=function(e){r.emit("peer",e,"tracker")},r._onTrackerAnnounce=function(){r.emit("trackerAnnounce")},!1===e.tracker?r.tracker=null:e.tracker&&"object"==typeof e.tracker?(r._trackerOpts=u(e.tracker),r.tracker=r._createTracker()):r.tracker=r._createTracker(),r.dht=!1===e.dht||"function"!=typeof s?null:e.dht&&"function"==typeof e.dht.addNode?e.dht:e.dht&&"object"==typeof e.dht?t(e.dhtPort,e.dht):t(e.dhtPort),r.dht&&(r.dht.on("peer",r._onDHTPeer),r._dhtAnnounce())}t.exports=i;var o=e("debug")("torrent-discovery"),s=e("bittorrent-dht/client"),a=e("events").EventEmitter,u=e("xtend"),f=e("inherits"),l=e("run-parallel"),d=e("bittorrent-tracker/client");f(i,a),i.prototype.updatePort=function(e){var t=this;e===t._port||(t._port=e,t.dht&&t._dhtAnnounce(),t.tracker&&(t.tracker.stop(),t.tracker.destroy(function(){t.tracker=t._createTracker()})))},i.prototype.complete=function(e){this.tracker&&this.tracker.complete(e)},i.prototype.destroy=function(e){var t=this;if(!t.destroyed){t.destroyed=!0,clearTimeout(t._dhtTimeout);var r=[];t.tracker&&(t.tracker.stop(),t.tracker.removeListener("warning",t._onWarning),t.tracker.removeListener("error",t._onError),t.tracker.removeListener("peer",t._onTrackerPeer),t.tracker.removeListener("update",t._onTrackerAnnounce),r.push(function(e){t.tracker.destroy(e)})),t.dht&&t.dht.removeListener("peer",t._onDHTPeer),t._internalDHT&&(t.dht.removeListener("warning",t._onWarning),t.dht.removeListener("error",t._onError),r.push(function(e){t.dht.destroy(e)})),l(r,e),t.dht=null,t.tracker=null,t._announce=null}},i.prototype._createTracker=function(){var e=u(this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),t=new d(e);return t.on("warning",this._onWarning),t.on("error",this._onError),t.on("peer",this._onTrackerPeer),t.on("update",this._onTrackerAnnounce),t.setInterval(this._intervalMs),t.start(),t},i.prototype._dhtAnnounce=function(){function e(){return t._intervalMs+r(Math.random()*t._intervalMs/5)}var t=this;t._dhtAnnouncing||(o("dht announce"),t._dhtAnnouncing=!0,clearTimeout(t._dhtTimeout),t.dht.announce(t.infoHash,t._port,function(r){t._dhtAnnouncing=!1,o("dht announce complete"),r&&t.emit("warning",r),t.emit("dhtAnnounce"),t.destroyed||(t._dhtTimeout=setTimeout(function(){t._dhtAnnounce()},e()),t._dhtTimeout.unref&&t._dhtTimeout.unref())}))}}).call(this,e("_process"))},{_process:69,"bittorrent-dht/client":25,"bittorrent-tracker/client":17,debug:117,events:37,inherits:44,"run-parallel":92,xtend:133}],117:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{"./debug":118,_process:69,dup:15}],118:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{dup:16,ms:60}],119:[function(e,t){(function(e){function r(e){return this instanceof r?void(this.length=e,this.missing=e,this.sources=null,this._chunks=s(e/n),this._remainder=e%n||n,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1):new r(e)}t.exports=r;var n=16384;r.BLOCK_LENGTH=n,r.prototype.chunkLength=function(e){return e===this._chunks-1?this._remainder:n},r.prototype.chunkLengthRemaining=function(e){return this.length-e*n},r.prototype.chunkOffset=function(e){return e*n},r.prototype.reserve=function(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1},r.prototype.reserveRemaining=function(){if(!this.init())return-1;if(this._reservations<this._chunks){var e=this._reservations;return this._reservations=this._chunks,e}return-1},r.prototype.cancel=function(e){this.init()&&this._cancellations.push(e)},r.prototype.cancelRemaining=function(e){this.init()&&(this._reservations=e)},r.prototype.get=function(e){return this.init()?this._buffer[e]:null},r.prototype.set=function(e,t,r){if(!this.init())return!1;for(var i=t.length,o=s(i/n),a=0;a<o;a++)if(!this._buffer[e+a]){var u=a*n,f=t.slice(u,u+n);this._buffered++,this._buffer[e+a]=f,this.missing-=f.length,-1===this.sources.indexOf(r)&&this.sources.push(r)}return this._buffered===this._chunks},r.prototype.flush=function(){if(!this._buffer||this._chunks!==this._buffered)return null;var t=e.concat(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,t},r.prototype.init=function(){return!this._flushed&&(!!this._buffer||(this._buffer=Array(this._chunks),this._cancellations=[],this.sources=[],!0))}}).call(this,e("buffer").Buffer)},{buffer:27}],120:[function(e,t){(function(r){var n=e("is-typedarray").strict;t.exports=function(e){if(n(e)){var t=new r(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return new r(e)}}).call(this,e("buffer").Buffer)},{buffer:27,"is-typedarray":48}],121:[function(e,t,n){(function(e){var t=4294967295;n.encodingLength=function(){return 8},n.encode=function(n,i,o){i||(i=new e(8)),o||(o=0);var s=r(n/t);return i.writeUInt32BE(s,o),i.writeUInt32BE(n-s*t,o+4),i},n.decode=function(r,n){n||(n=0),r||(r=new e(4)),n||(n=0);var i=r.readUInt32BE(n),o=r.readUInt32BE(n+4);return i*t+o},n.encode.bytes=8,n.decode.bytes=8}).call(this,e("buffer").Buffer)},{buffer:27}],122:[function(e,t){"use strict";function r(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],s=1;s<n;++s)if(o=i,i=e[s],t(i,o)){if(s===r){r++;continue}e[r++]=i}return e.length=r,e}function n(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;o<r;++o,i=n)if(i=n,n=e[o],n!==i){if(o===t){t++;continue}e[t++]=n}return e.length=t,e}t.exports=function(e,t,i){return 0===e.length?e:t?(i||e.sort(t),r(e,t)):(i||e.sort(),n(e))}},{}],123:[function(e,t){t.exports=function(e,t){if(!(t>=e.length||0>t)){var r=e.pop();if(t<e.length){var n=e[t];return e[t]=r,n}return r}}},{}],124:[function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&s.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}var o=e("punycode"),s=e("./util");r.parse=i,r.resolve=function(e,t){return i(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},r.format=function(e){return s.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)},r.Url=n;var a=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(l),c=["%","/","?",";","#"].concat(d),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=e("querystring");n.prototype.parse=function(e,t,r){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",u=e.split(i),l=/\\/g;u[0]=u[0].replace(l,"/"),e=u.join(i);var b=e;if(b=b.trim(),!r&&1===e.split("#").length){var w=f.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=a.exec(b);if(S){S=S[0];var T=S.toLowerCase();this.protocol=T,b=b.substr(S.length)}if(r||S||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);E&&!(S&&_[S])&&(b=b.substr(2),this.slashes=!0)}if(!_[S]&&(E||S&&!m[S])){for(var A=-1,I=0,C;I<p.length;I++)C=b.indexOf(p[I]),-1!==C&&(-1==A||C<A)&&(A=C);var k,j;j=-1===A?b.lastIndexOf("@"):b.lastIndexOf("@",A),-1!==j&&(k=b.slice(0,j),b=b.slice(j+1),this.auth=decodeURIComponent(k)),A=-1;for(var I=0,C;I<c.length;I++)C=b.indexOf(c[I]),-1!==C&&(-1===A||C<A)&&(A=C);-1===A&&(A=b.length),this.host=b.slice(0,A),b=b.slice(A),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var B=this.hostname.split(/\./),I=0,x=B.length,D;I<x;I++)if(D=B[I],D&&!D.match(h)){for(var R="",P=0,M=D.length;P<M;P++)R+=127<D.charCodeAt(P)?"x":D[P];if(!R.match(h)){var L=B.slice(0,I),U=B.slice(I+1),N=D.match(g);N&&(L.push(N[1]),U.unshift(N[2])),U.length&&(b="/"+U.join(".")+b),this.hostname=L.join(".");break}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),O||(this.hostname=o.toASCII(this.hostname));var F=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+F,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!y[T])for(var I=0,x=d.length,H;I<x;I++)if(H=d[I],-1!==b.indexOf(H)){var V=encodeURIComponent(H);V===H&&(V=escape(H)),b=b.split(H).join(V)}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var z=b.indexOf("?");if(-1===z?t&&(this.search="",this.query={}):(this.search=b.substr(z),this.query=b.substr(z+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,z)),b&&(this.pathname=b),m[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",G=this.search||"";this.path=F+G}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=v.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):!i&&(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(s.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),o=0,a;o<i.length;o++)a=i[o],r[a]=this[a];if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),f=0,l;f<u.length;f++)l=u[f],"protocol"!==l&&(r[l]=e[l]);return m[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!m[e.protocol]){for(var d=Object.keys(e),c=0,p;c<d.length;c++)p=d[c],r[p]=e[p];return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!_[e.protocol]){for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),2>h.length&&h.unshift(""),r.pathname=h.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var g=r.pathname||"",y=r.search||"";r.path=g+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=b||v||r.host&&e.pathname,S=w,T=r.pathname&&r.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],E=r.protocol&&!m[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),w=w&&(""===h[0]||""===T[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=h;else if(h.length)T||(T=[]),T.pop(),T=T.concat(h),r.search=e.search,r.query=e.query;else if(!s.isNullOrUndefined(e.search)){if(E){r.hostname=r.host=T.shift();var A=r.host&&0<r.host.indexOf("@")&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return r.search=e.search,r.query=e.query,s.isNull(r.pathname)&&s.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var I=T.slice(-1)[0],C=(r.host||e.host||1<T.length)&&("."===I||".."===I)||""===I,k=0,j=T.length;0<=j;j--)I=T[j],"."===I?T.splice(j,1):".."===I?(T.splice(j,1),k++):k&&(T.splice(j,1),k--);if(!w&&!S)for(;k--;k)T.unshift("..");w&&""!==T[0]&&(!T[0]||"/"!==T[0].charAt(0))&&T.unshift(""),C&&"/"!==T.join("/").substr(-1)&&T.push("");var O=""===T[0]||T[0]&&"/"===T[0].charAt(0);if(E){r.hostname=r.host=O?"":T.length?T.shift():"";var A=r.host&&0<r.host.indexOf("@")&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return w=w||r.host&&T.length,w&&!O&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),s.isNull(r.pathname)&&s.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":125,punycode:71,querystring:74}],125:[function(e,t){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],126:[function(e,t){var r=e("bencode"),n=e("bitfield"),i=e("safe-buffer").Buffer,o=e("debug")("ut_metadata"),a=e("events").EventEmitter,u=e("inherits"),f=e("simple-sha1"),l=1e3,d=16384;t.exports=function(e){function t(t){a.call(this),this._wire=t,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._fetching=!1,this._bitfield=new n(0,{grow:l}),i.isBuffer(e)&&this.setMetadata(e)}return u(t,a),t.prototype.name="ut_metadata",t.prototype.onHandshake=function(e){this._infoHash=e},t.prototype.onExtendedHandshake=function(e){return e.m&&e.m.ut_metadata?e.metadata_size?"number"!=typeof e.metadata_size||1e7<e.metadata_size||0>=e.metadata_size?this.emit("warning",new Error("Peer gave invalid metadata size")):void(this._metadataSize=e.metadata_size,this._numPieces=s(this._metadataSize/d),this._remainingRejects=2*this._numPieces,this._fetching&&this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))},t.prototype.onMessage=function(e){var t,n;try{var i=e.toString(),o=i.indexOf("ee")+2;t=r.decode(i.substring(0,o)),n=e.slice(o)}catch(e){return}switch(t.msg_type){case 0:this._onRequest(t.piece);break;case 1:this._onData(t.piece,n,t.total_size);break;case 2:this._onReject(t.piece)}},t.prototype.fetch=function(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())},t.prototype.cancel=function(){this._fetching=!1},t.prototype.setMetadata=function(e){if(this._metadataComplete)return!0;o("set metadata");try{var t=r.decode(e).info;t&&(e=r.encode(t))}catch(e){}return this._infoHash&&this._infoHash!==f.sync(e)?!1:(this.cancel(),this.metadata=e,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",r.encode({info:r.decode(this.metadata)})),!0)},t.prototype._send=function(e,t){var n=r.encode(e);i.isBuffer(t)&&(n=i.concat([n,t])),this._wire.extended("ut_metadata",n)},t.prototype._request=function(e){this._send({msg_type:0,piece:e})},t.prototype._data=function(e,t,r){var n={msg_type:1,piece:e};"number"==typeof r&&(n.total_size=r),this._send(n,t)},t.prototype._reject=function(e){this._send({msg_type:2,piece:e})},t.prototype._onRequest=function(e){if(!this._metadataComplete)return void this._reject(e);var t=e*d,r=t+d;r>this._metadataSize&&(r=this._metadataSize);var n=this.metadata.slice(t,r);this._data(e,n,this._metadataSize)},t.prototype._onData=function(e,t){t.length>d||(t.copy(this.metadata,e*d),this._bitfield.set(e),this._checkDone())},t.prototype._onReject=function(e){0<this._remainingRejects&&this._fetching?(this._request(e),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))},t.prototype._requestPieces=function(){this.metadata=i.alloc(this._metadataSize);for(var e=0;e<this._numPieces;e++)this._request(e)},t.prototype._checkDone=function(){for(var e=!0,t=0;t<this._numPieces;t++)if(!this._bitfield.get(t)){e=!1;break}if(e){var r=this.setMetadata(this.metadata);r||this._failedMetadata()}},t.prototype._failedMetadata=function(){this._bitfield=new n(0,{grow:l}),this._remainingRejects-=this._numPieces,0<this._remainingRejects?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))},t}},{bencode:11,bitfield:13,debug:127,events:37,inherits:44,"safe-buffer":94,"simple-sha1":100}],127:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{"./debug":128,_process:69,dup:15}],128:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{dup:16,ms:60}],129:[function(e,t){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===(r+"").toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);else r("traceDeprecation")?console.trace(t):console.warn(t);n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{}],130:[function(e,t){(function(n){function i(e){var t=this;u.call(t),t._tracks=[],t._fragmentSequence=1,t._file=e,t._decoder=null,t._findMoov(0)}function o(e,t){var r=this;r._entries=e,r._countName=t||"count",r._index=0,r._offset=0,r.value=r._entries[0]}function s(){return{version:0,flags:0,entries:[]}}var a=e("binary-search"),u=e("events").EventEmitter,f=e("inherits"),l=e("mp4-stream"),d=e("mp4-box-encoding"),c=e("range-slice-stream");t.exports=i,f(i,u),i.prototype._findMoov=function(e){var t=this;t._decoder&&t._decoder.destroy(),t._decoder=l.decode();var r=t._file.createReadStream({start:e});r.pipe(t._decoder),t._decoder.once("box",function(n){"moov"===n.type?t._decoder.decode(function(e){r.destroy();try{t._processMoov(e)}catch(e){e.message="Cannot parse mp4 file: "+e.message,t.emit("error",e)}}):(r.destroy(),t._findMoov(e+n.length))})},o.prototype.inc=function(){var e=this;e._offset++,e._offset>=e._entries[e._index][e._countName]&&(e._index++,e._offset=0),e.value=e._entries[e._index]},i.prototype._processMoov=function(e){var t=this,r=e.traks;t._tracks=[],t._hasVideo=!1,t._hasAudio=!1;for(var i=0;i<r.length;i++){var a=r[i],u=a.mdia.minf.stbl,f=u.stsd.entries[0],l=a.mdia.hdlr.handlerType,c,p;if("vide"===l&&"avc1"===f.type){if(t._hasVideo)continue;t._hasVideo=!0,c="avc1",f.avcC&&(c+="."+f.avcC.mimeCodec),p='video/mp4; codecs="'+c+'"'}else if("soun"===l&&"mp4a"===f.type){if(t._hasAudio)continue;t._hasAudio=!0,c="mp4a",f.esds&&f.esds.mimeCodec&&(c+="."+f.esds.mimeCodec),p='audio/mp4; codecs="'+c+'"'}else continue;var h=[],g=0,y=0,_=0,m=0,v=0,b=0,w=new o(u.stts.entries),S=null;u.ctts&&(S=new o(u.ctts.entries));for(var T=0;;){var E=u.stsc.entries[v],A=u.stsz.entries[g],I=w.value.duration,C=S?S.value.compositionOffset:0,k=!0;if(u.stss&&(k=u.stss.entries[T]===g+1),h.push({size:A,duration:I,dts:b,presentationOffset:C,sync:k,offset:m+u.stco.entries[_]}),g++,g>=u.stsz.entries.length)break;if(y++,m+=A,y>=E.samplesPerChunk){y=0,m=0,_++;var j=u.stsc.entries[v+1];j&&_+1>=j.firstChunk&&v++}b+=I,w.inc(),S&&S.inc(),k&&T++}a.mdia.mdhd.duration=0,a.tkhd.duration=0;var O=E.sampleDescriptionId,B={type:"moov",mvhd:e.mvhd,traks:[{tkhd:a.tkhd,mdia:{mdhd:a.mdia.mdhd,hdlr:a.mdia.hdlr,elng:a.mdia.elng,minf:{vmhd:a.mdia.minf.vmhd,smhd:a.mdia.minf.smhd,dinf:a.mdia.minf.dinf,stbl:{stsd:u.stsd,stts:s(),ctts:s(),stsc:s(),stsz:s(),stco:s(),stss:s()}}}}],mvex:{mehd:{fragmentDuration:e.mvhd.duration},trexs:[{trackId:a.tkhd.trackId,defaultSampleDescriptionIndex:O,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};t._tracks.push({trackId:a.tkhd.trackId,timeScale:a.mdia.mdhd.timeScale,samples:h,currSample:null,currTime:null,moov:B,mime:p})}if(0===t._tracks.length)return void t.emit("error",new Error("no playable tracks"));e.mvhd.duration=0,t._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};var x=d.encode(t._ftyp),D=t._tracks.map(function(e){var t=d.encode(e.moov);return{mime:e.mime,init:n.concat([x,t])}});t.emit("ready",D)},i.prototype.seek=function(e){var t=this;if(!t._tracks)throw new Error("Not ready yet; wait for 'ready' event");t._fileStream&&(t._fileStream.destroy(),t._fileStream=null);var r=-1;if(t._tracks.map(function(n,i){function o(e){s.destroyed||s.box(e.moof,function(r){if(r)return t.emit("error",r);if(!s.destroyed){var a=n.inStream.slice(e.ranges);a.pipe(s.mediaData(e.length,function(e){if(e)return t.emit("error",e);if(!s.destroyed){var r=t._generateFragment(i);return r?void o(r):s.finalize()}}))}})}n.outStream&&n.outStream.destroy(),n.inStream&&(n.inStream.destroy(),n.inStream=null);var s=n.outStream=l.encode(),a=t._generateFragment(i,e);return a?void((-1==r||a.ranges[0].start<r)&&(r=a.ranges[0].start),o(a)):s.finalize()}),0<=r){var n=t._fileStream=t._file.createReadStream({start:r});t._tracks.forEach(function(e){e.inStream=new c(r,{highWaterMark:1e7}),n.pipe(e.inStream)})}return t._tracks.map(function(e){return e.outStream})},i.prototype._findSampleBefore=function(e,t){var n=this,i=n._tracks[e],o=r(i.timeScale*t),s=a(i.samples,o,function(e,t){var r=e.dts+e.presentationOffset;return r-t});for(-1===s?s=0:0>s&&(s=-s-2);!i.samples[s].sync;)s--;return s};i.prototype._generateFragment=function(e,t){var r=this,n=r._tracks[e],i;if(i=void 0===t?n.currSample:r._findSampleBefore(e,t),i>=n.samples.length)return null;for(var o=n.samples[i].dts,s=0,a=[],u=i,f;u<n.samples.length&&(f=n.samples[u],!(f.sync&&f.dts-o>=n.timeScale*1));u++){s+=f.size;var l=a.length-1;0>l||a[l].end!==f.offset?a.push({start:f.offset,end:f.offset+f.size}):a[l].end+=f.size}return n.currSample=u,{moof:r._generateMoof(e,i,u),ranges:a,length:s}},i.prototype._generateMoof=function(e,t,r){for(var n=this,i=n._tracks[e],o=[],s=t,a;s<r;s++)a=i.samples[s],o.push({sampleDuration:a.duration,sampleSize:a.size,sampleFlags:a.sync?33554432:16842752,sampleCompositionTimeOffset:a.presentationOffset});var u={type:"moof",mfhd:{sequenceNumber:n._fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:i.trackId},tfdt:{baseMediaDecodeTime:i.samples[t].dts},trun:{flags:3841,dataOffset:8,entries:o}}]};return u.trafs[0].trun.dataOffset+=d.encodingLength(u),u}}).call(this,e("buffer").Buffer)},{"binary-search":12,buffer:27,events:37,inherits:44,"mp4-box-encoding":56,"mp4-stream":59,"range-slice-stream":77}],131:[function(e,t){function r(e,t,i){var o=this;return this instanceof r?void(i=i||{},o.detailedError=null,o._elem=t,o._elemWrapper=new n(t),o._waitingFired=!1,o._trackMeta=null,o._file=e,o._tracks=null,"none"!==o._elem.preload&&o._createMuxer(),o._onError=function(){o.detailedError=o._elemWrapper.detailedError,o.destroy()},o._onWaiting=function(){o._waitingFired=!0,o._muxer?o._tracks&&o._pump():o._createMuxer()},o._elem.addEventListener("waiting",o._onWaiting),o._elem.addEventListener("error",o._onError)):new r(e,t,i)}var n=e("mediasource"),i=e("pump"),o=e("./mp4-remuxer");t.exports=r,r.prototype._createMuxer=function(){var e=this;e._muxer=new o(e._file),e._muxer.on("ready",function(t){e._tracks=t.map(function(t){var r=e._elemWrapper.createWriteStream(t.mime);r.on("error",function(t){e._elemWrapper.error(t)});var n={muxed:null,mediaSource:r,initFlushed:!1,onInitFlushed:null};return r.write(t.init,function(e){n.initFlushed=!0,n.onInitFlushed&&n.onInitFlushed(e)}),n}),(e._waitingFired||"auto"===e._elem.preload)&&e._pump()}),e._muxer.on("error",function(t){e._elemWrapper.error(t)})},r.prototype._pump=function(){var e=this,t=e._muxer.seek(e._elem.currentTime,!e._tracks);e._tracks.forEach(function(r,n){var o=function(){r.muxed&&(r.muxed.destroy(),r.mediaSource=e._elemWrapper.createWriteStream(r.mediaSource),r.mediaSource.on("error",function(t){e._elemWrapper.error(t)})),r.muxed=t[n],i(r.muxed,r.mediaSource)};r.initFlushed?o():r.onInitFlushed=function(t){return t?void e._elemWrapper.error(t):void o()}})},r.prototype.destroy=function(){var e=this;e.destroyed||(e.destroyed=!0,e._elem.removeEventListener("waiting",e._onWaiting),e._elem.removeEventListener("error",e._onError),e._tracks&&e._tracks.forEach(function(e){e.muxed.destroy()}),e._elem.src="")}},{"./mp4-remuxer":130,mediasource:52,pump:70}],132:[function(e,t){function r(e,t){function n(){for(var t=Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach(function(e){n[e]=i[e]}),n}if(e&&t)return r(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){n[t]=e[t]}),n}t.exports=r},{}],133:[function(e,t){t.exports=function(){for(var e={},t=0,n;t<arguments.length;t++)for(var i in n=arguments[t],n)r.call(n,i)&&(e[i]=n[i]);return e};var r=Object.prototype.hasOwnProperty},{}],134:[function(e,t){t.exports=function(e){for(var t=1,n;t<arguments.length;t++)for(var i in n=arguments[t],n)r.call(n,i)&&(e[i]=n[i]);return e};var r=Object.prototype.hasOwnProperty},{}],135:[function(e,t){t.exports=function e(t,r,n){return void 0===r?function(r,n){return e(t,r,n)}:(void 0===n&&(n="0"),t-=r.toString().length,0<t?Array(t+(/\./.test(r)?2:1)).join(n)+r:r+"")}},{}],136:[function(e,t){t.exports={version:"0.98.19"}},{}],137:[function(e,t){(function(r,n){function i(e){function t(){o.destroyed||(o.ready=!0,o.emit("ready"))}var o=this;return o instanceof i?void(c.call(o),!e&&(e={}),o.peerId="string"==typeof e.peerId?e.peerId:a.isBuffer(e.peerId)?e.peerId.toString("hex"):a.from(C+b(9).toString("base64")).toString("hex"),o.peerIdBuffer=a.from(o.peerId,"hex"),o.nodeId="string"==typeof e.nodeId?e.nodeId:a.isBuffer(e.nodeId)?e.nodeId.toString("hex"):b(20).toString("hex"),o.nodeIdBuffer=a.from(o.nodeId,"hex"),o._debugId=o.peerId.toString("hex").substring(0,7),o.destroyed=!1,o.listening=!1,o.torrentPort=e.torrentPort||0,o.dhtPort=e.dhtPort||0,o.tracker=e.tracker===void 0?{}:e.tracker,o.torrents=[],o.maxConns=+e.maxConns||55,o._debug("new webtorrent (peerId %s, nodeId %s, port %s)",o.peerId,o.nodeId,o.torrentPort),o.tracker&&("object"!=typeof o.tracker&&(o.tracker={}),e.rtcConfig&&(console.warn("WebTorrent: opts.rtcConfig is deprecated. Use opts.tracker.rtcConfig instead"),o.tracker.rtcConfig=e.rtcConfig),e.wrtc&&(console.warn("WebTorrent: opts.wrtc is deprecated. Use opts.tracker.wrtc instead"),o.tracker.wrtc=e.wrtc),n.WRTC&&!o.tracker.wrtc&&(o.tracker.wrtc=n.WRTC)),"function"==typeof T?o._tcpPool=new T(o):r.nextTick(function(){o._onListening()}),o._downloadSpeed=w(),o._uploadSpeed=w(),!1!==e.dht&&"function"==typeof d?(o.dht=new d(p({nodeId:o.nodeId},e.dht)),o.dht.once("error",function(e){o._destroy(e)}),o.dht.once("listening",function(){var e=o.dht.address();e&&(o.dhtPort=e.port)}),o.dht.setMaxListeners(0),o.dht.listen(o.dhtPort)):o.dht=!1,o.enableWebSeeds=!1!==e.webSeeds,"function"==typeof g&&null!=e.blocklist?g(e.blocklist,{headers:{"user-agent":"WebTorrent/"+A+" (https://webtorrent.io)"}},function(e,r){return e?o.error("Failed to load blocklist: "+e.message):void(o.blocked=r,t())}):r.nextTick(t)):new i(e)}function o(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}function s(e){return"undefined"!=typeof FileList&&e instanceof FileList}t.exports=i;var a=e("safe-buffer").Buffer,u=e("simple-concat"),f=e("create-torrent"),l=e("debug")("webtorrent"),d=e("bittorrent-dht/client"),c=e("events").EventEmitter,p=e("xtend"),h=e("inherits"),g=e("load-ip-set"),y=e("run-parallel"),_=e("parse-torrent"),m=e("path"),v=e("simple-peer"),b=e("randombytes"),w=e("speedometer"),S=e("zero-fill"),T=e("./lib/tcp-pool"),E=e("./lib/torrent"),A=e("./package.json").version,I=A.match(/([0-9]+)/g).slice(0,2).map(function(e){return S(2,e)}).join(""),C="-WW"+I+"-";h(i,c),i.WEBRTC_SUPPORT=v.WEBRTC_SUPPORT,Object.defineProperty(i.prototype,"downloadSpeed",{get:function(){return this._downloadSpeed()}}),Object.defineProperty(i.prototype,"uploadSpeed",{get:function(){return this._uploadSpeed()}}),Object.defineProperty(i.prototype,"progress",{get:function(){var e=this.torrents.filter(function(e){return 1!==e.progress}),t=e.reduce(function(e,t){return e+t.downloaded},0),r=e.reduce(function(e,t){return e+(t.length||0)},0)||1;return t/r}}),Object.defineProperty(i.prototype,"ratio",{get:function(){var e=this.torrents.reduce(function(e,t){return e+t.uploaded},0),t=this.torrents.reduce(function(e,t){return e+t.received},0)||1;return e/t}}),i.prototype.get=function(e){var t=this,r=t.torrents.length,n,i;if(e instanceof E){for(n=0;n<r;n++)if(i=t.torrents[n],i===e)return i}else{var o;try{o=_(e)}catch(e){}if(!o)return null;if(!o.infoHash)throw new Error("Invalid torrent identifier");for(n=0;n<r;n++)if(i=t.torrents[n],i.infoHash===o.infoHash)return i}return null},i.prototype.download=function(e,t,r){return console.warn("WebTorrent: client.download() is deprecated. Use client.add() instead"),this.add(e,t,r)},i.prototype.add=function(e,t,r){function n(){if(!s.destroyed)for(var e=0,t=s.torrents.length,r;e<t;e++)if(r=s.torrents[e],r.infoHash===a.infoHash&&r!==a)return void a._destroy(new Error("Cannot add duplicate torrent "+a.infoHash))}function i(){s.destroyed||("function"==typeof r&&r(a),s.emit("torrent",a))}function o(){a.removeListener("_infoHash",n),a.removeListener("ready",i),a.removeListener("close",o)}var s=this;if(s.destroyed)throw new Error("client is destroyed");if("function"==typeof t)return s.add(e,null,t);s._debug("add"),t=t?p(t):{};var a=new E(e,s,t);return s.torrents.push(a),a.once("_infoHash",n),a.once("ready",i),a.once("close",o),a},i.prototype.seed=function(e,t,r){function n(e){i._debug("on seed"),"function"==typeof r&&r(e),e.emit("seed"),i.emit("seed",e)}var i=this;if(i.destroyed)throw new Error("client is destroyed");if("function"==typeof t)return i.seed(e,null,t);i._debug("seed"),t=t?p(t):{},"string"==typeof e&&(t.path=m.dirname(e)),t.createdBy||(t.createdBy="WebTorrent/"+I);var a=i.add(null,t,function(e){var t=[function(t){e.load(l,t)}];i.dht&&t.push(function(t){e.once("dhtAnnounce",t)}),y(t,function(t){return i.destroyed?void 0:t?e._destroy(t):void n(e)})}),l;return s(e)&&(e=Array.prototype.slice.call(e)),Array.isArray(e)||(e=[e]),y(e.map(function(e){return function(t){o(e)?u(e,t):t(null,e)}}),function(e,r){return i.destroyed?void 0:e?a._destroy(e):void f.parseInput(r,t,function(e,n){return i.destroyed?void 0:e?a._destroy(e):void(l=n.map(function(e){return e.getStream}),f(r,t,function(e,t){if(!i.destroyed){if(e)return a._destroy(e);var r=i.get(t);r?a._destroy(new Error("Cannot add duplicate torrent "+r.infoHash)):a._onTorrentId(t)}}))})}),a},i.prototype.remove=function(e,t){this._debug("remove");var r=this.get(e)
;if(!r)throw new Error("No torrent with id "+e);this._remove(e,t)},i.prototype._remove=function(e,t){var r=this.get(e);r&&(this.torrents.splice(this.torrents.indexOf(r),1),r.destroy(t))},i.prototype.address=function(){return this.listening?this._tcpPool?this._tcpPool.server.address():{address:"0.0.0.0",family:"IPv4",port:0}:null},i.prototype.destroy=function(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e)},i.prototype._destroy=function(e,t){var r=this;r._debug("client destroy"),r.destroyed=!0;var n=r.torrents.map(function(e){return function(t){e.destroy(t)}});r._tcpPool&&n.push(function(e){r._tcpPool.destroy(e)}),r.dht&&n.push(function(e){r.dht.destroy(e)}),y(n,t),e&&r.emit("error",e),r.torrents=[],r._tcpPool=null,r.dht=null},i.prototype._onListening=function(){if(this._debug("listening"),this.listening=!0,this._tcpPool){var e=this._tcpPool.server.address();e&&(this.torrentPort=e.port)}this.emit("listening")},i.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._debugId+"] "+e[0],l.apply(null,e)}}).call(this,e("_process"),"undefined"==typeof n?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n)},{"./lib/tcp-pool":25,"./lib/torrent":5,"./package.json":136,_process:69,"bittorrent-dht/client":25,"create-torrent":32,debug:33,events:37,inherits:44,"load-ip-set":25,"parse-torrent":65,path:66,randombytes:76,"run-parallel":92,"safe-buffer":94,"simple-concat":95,"simple-peer":97,speedometer:104,xtend:133,"zero-fill":135}]},{},[137])(137)})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],95:[function(e,t,r){(function(r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=function e(t,r,n){var i=true;e:while(i){var o=t,s=r,a=n;i=false;if(o===null)o=Function.prototype;var u=Object.getOwnPropertyDescriptor(o,s);if(u===undefined){var f=Object.getPrototypeOf(o);if(f===null){return undefined}else{t=f;r=s;n=a;i=true;u=f=undefined;continue e}}else if("value"in u){return u.value}else{var l=u.get;if(l===undefined){return undefined}return l.call(a)}}};function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=e(33);var f=o(u);var l=e(9);var d=o(l);var c=e(11);var p=o(c);var h=e(21);var g=o(h);var y=e(25);var _=e(2);var m=o(_);var v=e(78);var b=e(36);var w=o(b);var S=typeof window!=="undefined"?window["videojs"]:typeof r!=="undefined"?r["videojs"]:null;var T=o(S);var E=e(5);var A=e(3);var I=o(A);var C=e(14);var k=o(C);var j=e(34);var O=o(j);var B=e(8);var x=o(B);var D=e(13);var R=o(D);var P=e(10);var M={PlaylistLoader:d["default"],Playlist:p["default"],Decrypter:y.Decrypter,AsyncStream:y.AsyncStream,decrypt:y.decrypt,utils:m["default"],STANDARD_PLAYLIST_SELECTOR:P.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:P.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:P.comparePlaylistBandwidth,comparePlaylistResolution:P.comparePlaylistResolution,xhr:(0,g["default"])()};var L=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(M,e,{get:function t(){T["default"].log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");return I["default"][e]},set:function t(r){T["default"].log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing");if(typeof r!=="number"||r<0){T["default"].log.warn("value of Hls."+e+" must be greater than or equal to 0");return}I["default"][e]=r}})});var U=function e(t,r){var n=r.media();var i=-1;for(var o=0;o<t.length;o++){if(t[o].id===n.uri){i=o;break}}t.selectedIndex_=i;t.trigger({selectedIndex:i,type:"change"})};var N=function e(t,r){r.representations().forEach(function(e){t.addQualityLevel(e)});U(t,r.playlists)};M.canPlaySource=function(){return T["default"].log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};M.supportsNativeHls=function(){var e=f["default"].createElement("video");if(!T["default"].getTech("Html5").isSupported()){return false}var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}();M.isSupported=function(){return T["default"].log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var F=T["default"].getComponent("Component");var W=function(e){a(t,e);function t(e,r,n){var o=this;s(this,t);i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,r,n.hls);if(r.options_&&r.options_.playerId){var a=(0,T["default"])(r.options_.playerId);if(!a.hasOwnProperty("hls")){Object.defineProperty(a,"hls",{get:function e(){T["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead.");r.trigger({type:"usage",name:"hls-player-access"});return o}})}}this.tech_=r;this.source_=e;this.stats={};this.ignoreNextSeekingEvent_=false;this.setOptions_();if(this.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. "+"See https://git.io/vMpjB")}this.on(f["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=f["default"].fullscreenElement||f["default"].webkitFullscreenElement||f["default"].mozFullScreenElement||f["default"].msFullscreenElement;if(t&&t.contains(o.tech_.el())){o.masterPlaylistController_.fastQualityChange_()}});this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=false;return}this.setCurrentTime(this.tech_.currentTime())});this.on(this.tech_,"error",function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}});this.on(this.tech_,"play",this.play)}n(t,[{key:"setOptions_",value:function e(){var t=this;this.options_.withCredentials=this.options_.withCredentials||false;if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=L}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===L;["withCredentials","bandwidth"].forEach(function(e){if(typeof t.source_[e]!=="undefined"){t.options_[e]=t.source_[e]}});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function e(t){var r=this;if(!t){return}this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=M;this.masterPlaylistController_=new E.MasterPlaylistController(this.options_);this.playbackWatcher_=new x["default"](T["default"].mergeOptions(this.options_,{seekable:function e(){return r.seekable()}}));this.masterPlaylistController_.on("error",function(){var e=T["default"].players[r.tech_.options_.playerId];e.error(r.masterPlaylistController_.error)});this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):M.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=M.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function e(){return this.masterPlaylistController_.selectPlaylist},set:function e(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function e(){var t=1/(this.bandwidth||1);var r=undefined;if(this.throughput>0){r=1/this.throughput}else{r=0}var n=Math.floor(1/(t+r));return n},set:function e(){T["default"].log.error('The "systemBandwidth" property is read-only')}}});Object.defineProperties(this.stats,{bandwidth:{get:function e(){return r.bandwidth||0},enumerable:true},mediaRequests:{get:function e(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function e(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function e(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function e(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function e(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function e(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function e(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,k["default"])(r)});this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")});this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=true});this.tech_.ready(function(){return r.setupQualityLevels_()});if(!this.tech_.el()){return}this.tech_.src(T["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource))}},{key:"setupQualityLevels_",value:function e(){var t=this;var r=T["default"].players[this.tech_.options_.playerId];if(r&&r.qualityLevels){this.qualityLevels_=r.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",function(){N(t.qualityLevels_,t)});this.playlists.on("mediachange",function(){U(t.qualityLevels_,t.playlists)})}}},{key:"play",value:function e(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function e(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function e(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function e(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function e(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}i(Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]);return t}(F);var H=function e(t){return{canHandleSource:function r(n){var i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var o=T["default"].mergeOptions(T["default"].options,i);if(o.hls&&o.hls.mode&&o.hls.mode!==t){return false}return e.canPlayType(n.type,o)},handleSource:function e(r,n){var i=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var o=T["default"].mergeOptions(T["default"].options,i,{hls:{mode:t}});if(t==="flash"){n.setTimeout(function(){n.trigger("loadstart")},1)}n.hls=new W(r,n,o);n.hls.xhr=(0,g["default"])();n.hls.src(r.src);return n.hls},canPlayType:function t(r){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=T["default"].mergeOptions(T["default"].options,n);if(e.canPlayType(r,i)){return"maybe"}return""}}};H.canPlayType=function(e,t){if(T["default"].browser.IE_VERSION&&T["default"].browser.IE_VERSION<=10){return false}var r=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(!t.hls.overrideNative&&M.supportsNativeHls){return false}return r.test(e)};if(typeof T["default"].MediaSource==="undefined"||typeof T["default"].URL==="undefined"){T["default"].MediaSource=v.MediaSource;T["default"].URL=v.URL}var V=T["default"].getTech("Flash");if(v.MediaSource.supportsNativeMediaSources()){T["default"].getTech("Html5").registerSourceHandler(H("html5"),0)}if(O["default"].Uint8Array&&V){V.registerSourceHandler(H("flash"))}T["default"].HlsHandler=W;T["default"].HlsSourceHandler=H;T["default"].Hls=M;if(!T["default"].use){T["default"].registerComponent("Hls",M)}T["default"].m3u8=w["default"];T["default"].options.hls=T["default"].options.hls||{};if(T["default"].registerPlugin){T["default"].registerPlugin("reloadSourceOnError",R["default"])}else{T["default"].plugin("reloadSourceOnError",R["default"])}t.exports={Hls:M,HlsHandler:W,HlsSourceHandler:H}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[95]);